/*! For license information please see 3074.edf4c25c.js.LICENSE.txt */
(self.webpackChunkreact_openlayer_official=self.webpackChunkreact_openlayer_official||[]).push([[3074],{1573:(t,e,i)=>{"use strict";i.d(e,{C:()=>m,E:()=>R,T:()=>v,_:()=>_,a:()=>E,b:()=>w,c:()=>S,h:()=>f,i:()=>p,u:()=>x,w:()=>y});var n=i(6687),r=i(1286),s=i(3767),o=function(t){var e=new WeakMap;return function(i){if(e.has(i))return e.get(i);var n=t(i);return e.set(i,n),n}},a=i(6976),l=i.n(a),h=function(t,e){return l()(t,e)},c=i(7446),u=i(1455),d=i(5171),p=!0,f={}.hasOwnProperty,g=n.createContext("undefined"!=typeof HTMLElement?(0,r.Z)({key:"css"}):null);var m=g.Provider,_=function(){return(0,n.useContext)(g)},y=function(t){return(0,n.forwardRef)((function(e,i){var r=(0,n.useContext)(g);return t(e,r,i)}))};p||(y=function(t){return function(e){var i=(0,n.useContext)(g);return null===i?(i=(0,r.Z)({key:"css"}),n.createElement(g.Provider,{value:i},t(e,i))):t(e,i)}});var v=n.createContext({});var x=function(){return n.useContext(v)},b=o((function(t){return o((function(e){return function(t,e){return"function"==typeof e?e(t):(0,s.Z)({},t,e)}(t,e)}))})),E=function(t){var e=n.useContext(v);return t.theme!==e&&(e=b(e)(t.theme)),n.createElement(v.Provider,{value:e},t.children)};function w(t){var e=t.displayName||t.name||"Component",i=function(e,i){var r=n.useContext(v);return n.createElement(t,(0,s.Z)({theme:r,ref:i},e))},r=n.forwardRef(i);return r.displayName="WithTheme("+e+")",h(r,t)}var C="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",S=function(t,e){var i={};for(var n in e)f.call(e,n)&&(i[n]=e[n]);return i[C]=t,i},T=function(t){var e=t.cache,i=t.serialized,n=t.isStringTag;return(0,c.hC)(e,i,n),(0,d.L)((function(){return(0,c.My)(e,i,n)})),null};var R=y((function(t,e,i){var r=t.css;"string"==typeof r&&void 0!==e.registered[r]&&(r=e.registered[r]);var s=t[C],o=[r],a="";"string"==typeof t.className?a=(0,c.fp)(e.registered,o,t.className):null!=t.className&&(a=t.className+" ");var l=(0,u.O)(o,void 0,n.useContext(v));a+=e.key+"-"+l.name;var h={};for(var d in t)f.call(t,d)&&"css"!==d&&d!==C&&(h[d]=t[d]);return h.ref=i,h.className=a,n.createElement(n.Fragment,null,n.createElement(T,{cache:e,serialized:l,isStringTag:"string"==typeof s}),n.createElement(s,h))}))},3941:(t,e,i)=>{"use strict";i.r(e),i.d(e,{CacheProvider:()=>n.C,ClassNames:()=>f,Global:()=>h,ThemeContext:()=>n.T,ThemeProvider:()=>n.a,__unsafe_useEmotionCache:()=>n._,createElement:()=>l,css:()=>c,jsx:()=>l,keyframes:()=>u,useTheme:()=>n.u,withEmotionCache:()=>n.w,withTheme:()=>n.b});var n=i(1573),r=i(6687),s=i(7446),o=i(5171),a=i(1455),l=(i(1286),i(6976),function(t,e){var i=arguments;if(null==e||!n.h.call(e,"css"))return r.createElement.apply(void 0,i);var s=i.length,o=new Array(s);o[0]=n.E,o[1]=(0,n.c)(t,e);for(var a=2;a<s;a++)o[a]=i[a];return r.createElement.apply(null,o)}),h=(0,n.w)((function(t,e){var i=t.styles,l=(0,a.O)([i],void 0,r.useContext(n.T));if(!n.i){for(var h,c=l.name,u=l.styles,d=l.next;void 0!==d;)c+=" "+d.name,u+=d.styles,d=d.next;var p=!0===e.compat,f=e.insert("",{name:c,styles:u},e.sheet,p);return p?null:r.createElement("style",((h={})["data-emotion"]=e.key+"-global "+c,h.dangerouslySetInnerHTML={__html:f},h.nonce=e.sheet.nonce,h))}var g=r.useRef();return(0,o.j)((function(){var t=e.key+"-global",i=new e.sheet.constructor({key:t,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),n=!1,r=document.querySelector('style[data-emotion="'+t+" "+l.name+'"]');return e.sheet.tags.length&&(i.before=e.sheet.tags[0]),null!==r&&(n=!0,r.setAttribute("data-emotion",t),i.hydrate([r])),g.current=[i,n],function(){i.flush()}}),[e]),(0,o.j)((function(){var t=g.current,i=t[0];if(t[1])t[1]=!1;else{if(void 0!==l.next&&(0,s.My)(e,l.next,!0),i.tags.length){var n=i.tags[i.tags.length-1].nextElementSibling;i.before=n,i.flush()}e.insert("",l,i,!1)}}),[e,l.name]),null}));function c(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return(0,a.O)(e)}var u=function(){var t=c.apply(void 0,arguments),e="animation-"+t.name;return{name:e,styles:"@keyframes "+e+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},d=function t(e){for(var i=e.length,n=0,r="";n<i;n++){var s=e[n];if(null!=s){var o=void 0;switch(typeof s){case"boolean":break;case"object":if(Array.isArray(s))o=t(s);else for(var a in o="",s)s[a]&&a&&(o&&(o+=" "),o+=a);break;default:o=s}o&&(r&&(r+=" "),r+=o)}}return r};var p=function(t){var e=t.cache,i=t.serializedArr;return(0,o.L)((function(){for(var t=0;t<i.length;t++)(0,s.My)(e,i[t],!1)})),null},f=(0,n.w)((function(t,e){var i=[],o=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var o=(0,a.O)(n,e.registered);return i.push(o),(0,s.hC)(e,o,!1),e.key+"-"+o.name},l={css:o,cx:function(){for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return function(t,e,i){var n=[],r=(0,s.fp)(t,n,i);return n.length<2?i:r+e(n)}(e.registered,o,d(i))},theme:r.useContext(n.T)},h=t.children(l);return!0,r.createElement(r.Fragment,null,r.createElement(p,{cache:e,serializedArr:i}),h)}))},3787:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>_});var n=i(3767),r=i(6687),s=i(6038),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,s.Z)((function(t){return o.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91})),l=i(1573),h=i(7446),c=i(1455),u=i(5171),d=a,p=function(t){return"theme"!==t},f=function(t){return"string"==typeof t&&t.charCodeAt(0)>96?d:p},g=function(t,e,i){var n;if(e){var r=e.shouldForwardProp;n=t.__emotion_forwardProp&&r?function(e){return t.__emotion_forwardProp(e)&&r(e)}:r}return"function"!=typeof n&&i&&(n=t.__emotion_forwardProp),n},m=function(t){var e=t.cache,i=t.serialized,n=t.isStringTag;return(0,h.hC)(e,i,n),(0,u.L)((function(){return(0,h.My)(e,i,n)})),null},_=function t(e,i){var s,o,a=e.__emotion_real===e,u=a&&e.__emotion_base||e;void 0!==i&&(s=i.label,o=i.target);var d=g(e,i,a),p=d||f(u),_=!p("as");return function(){var y=arguments,v=a&&void 0!==e.__emotion_styles?e.__emotion_styles.slice(0):[];if(void 0!==s&&v.push("label:"+s+";"),null==y[0]||void 0===y[0].raw)v.push.apply(v,y);else{0,v.push(y[0][0]);for(var x=y.length,b=1;b<x;b++)v.push(y[b],y[0][b])}var E=(0,l.w)((function(t,e,i){var n=_&&t.as||u,s="",a=[],g=t;if(null==t.theme){for(var y in g={},t)g[y]=t[y];g.theme=r.useContext(l.T)}"string"==typeof t.className?s=(0,h.fp)(e.registered,a,t.className):null!=t.className&&(s=t.className+" ");var x=(0,c.O)(v.concat(a),e.registered,g);s+=e.key+"-"+x.name,void 0!==o&&(s+=" "+o);var b=_&&void 0===d?f(n):p,E={};for(var w in t)_&&"as"===w||b(w)&&(E[w]=t[w]);return E.className=s,E.ref=i,r.createElement(r.Fragment,null,r.createElement(m,{cache:e,serialized:x,isStringTag:"string"==typeof n}),r.createElement(n,E))}));return E.displayName=void 0!==s?s:"Styled("+("string"==typeof u?u:u.displayName||u.name||"Component")+")",E.defaultProps=e.defaultProps,E.__emotion_real=E,E.__emotion_base=u,E.__emotion_styles=v,E.__emotion_forwardProp=d,Object.defineProperty(E,"toString",{value:function(){return"."+o}}),E.withComponent=function(e,r){return t(e,(0,n.Z)({},i,r,{shouldForwardProp:g(E,r,!0)})).apply(void 0,v)},E}}.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(t){_[t]=_(t)}))},5171:(t,e,i)=>{"use strict";var n;i.d(e,{L:()=>o,j:()=>a});var r=i(6687),s=!!(n||(n=i.t(r,2))).useInsertionEffect&&(n||(n=i.t(r,2))).useInsertionEffect,o=s||function(t){return t()},a=s||r.useLayoutEffect},1019:(t,e,i)=>{"use strict";i.d(e,{Zo:()=>c,kt:()=>f});var n=i(6687);function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function s(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?s(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function a(t,e){if(null==t)return{};var i,n,r=function(t,e){if(null==t)return{};var i,n,r={},s=Object.keys(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)i=s[n],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}var l=n.createContext({}),h=function(t){var e=n.useContext(l),i=e;return t&&(i="function"==typeof t?t(e):o(o({},e),t)),i},c=function(t){var e=h(t.components);return n.createElement(l.Provider,{value:e},t.children)},u="mdxType",d={inlineCode:"code",wrapper:function(t){var e=t.children;return n.createElement(n.Fragment,{},e)}},p=n.forwardRef((function(t,e){var i=t.components,r=t.mdxType,s=t.originalType,l=t.parentName,c=a(t,["components","mdxType","originalType","parentName"]),u=h(i),p=r,f=u["".concat(l,".").concat(p)]||u[p]||d[p]||s;return i?n.createElement(f,o(o({ref:e},c),{},{components:i})):n.createElement(f,o({ref:e},c))}));function f(t,e){var i=arguments,r=e&&e.mdxType;if("string"==typeof t||r){var s=i.length,o=new Array(s);o[0]=p;var a={};for(var l in e)hasOwnProperty.call(e,l)&&(a[l]=e[l]);a.originalType=t,a[u]="string"==typeof t?t:r,o[1]=a;for(var h=2;h<s;h++)o[h]=i[h];return n.createElement.apply(null,o)}return n.createElement.apply(null,i)}p.displayName="MDXCreateElement"},9769:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(3767),r=i(6687),s=i(4923),o=i(3609),a=i(1167),l=i(9136);const h={anchorWithStickyNavbar:"anchorWithStickyNavbar_zQCE",anchorWithHideOnScrollNavbar:"anchorWithHideOnScrollNavbar_myl2"};function c(t){let{as:e,id:i,...c}=t;const{navbar:{hideOnScroll:u}}=(0,a.L)();if("h1"===e||!i)return r.createElement(e,(0,n.Z)({},c,{id:void 0}));const d=(0,o.I)({id:"theme.common.headingLinkTitle",message:"Direct link to {heading}",description:"Title for link to heading"},{heading:"string"==typeof c.children?c.children:i});return r.createElement(e,(0,n.Z)({},c,{className:(0,s.Z)("anchor",u?h.anchorWithHideOnScrollNavbar:h.anchorWithStickyNavbar,c.className),id:i}),c.children,r.createElement(l.Z,{className:"hash-link",to:`#${i}`,"aria-label":d,title:d},"\u200b"))}},9012:(t,e,i)=>{"use strict";i.d(e,{Z:()=>pr});var n=i(6687),r=i(1019),s=i(3767),o=i(7822);var a=i(4923),l=i(1936),h=i(7625),c=i(4942);const u={plain:{backgroundColor:"#2a2734",color:"#9a86fd"},styles:[{types:["comment","prolog","doctype","cdata","punctuation"],style:{color:"#6c6783"}},{types:["namespace"],style:{opacity:.7}},{types:["tag","operator","number"],style:{color:"#e09142"}},{types:["property","function"],style:{color:"#9a86fd"}},{types:["tag-id","selector","atrule-id"],style:{color:"#eeebff"}},{types:["attr-name"],style:{color:"#c4b9fe"}},{types:["boolean","string","entity","url","attr-value","keyword","control","directive","unit","statement","regex","atrule","placeholder","variable"],style:{color:"#ffcc99"}},{types:["deleted"],style:{textDecorationLine:"line-through"}},{types:["inserted"],style:{textDecorationLine:"underline"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["important"],style:{color:"#c4b9fe"}}]};var d={Prism:c.Z,theme:u};function p(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function f(){return f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},f.apply(this,arguments)}var g=/\r\n|\r|\n/,m=function(t){0===t.length?t.push({types:["plain"],content:"\n",empty:!0}):1===t.length&&""===t[0].content&&(t[0].content="\n",t[0].empty=!0)},_=function(t,e){var i=t.length;return i>0&&t[i-1]===e?t:t.concat(e)};function y(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&-1===e.indexOf(n)&&(i[n]=t[n]);return i}var v=function(t){function e(){for(var e=this,i=[],n=arguments.length;n--;)i[n]=arguments[n];t.apply(this,i),p(this,"getThemeDict",(function(t){if(void 0!==e.themeDict&&t.theme===e.prevTheme&&t.language===e.prevLanguage)return e.themeDict;e.prevTheme=t.theme,e.prevLanguage=t.language;var i=t.theme?function(t,e){var i=t.plain,n=Object.create(null),r=t.styles.reduce((function(t,i){var n=i.languages,r=i.style;return n&&!n.includes(e)||i.types.forEach((function(e){var i=f({},t[e],r);t[e]=i})),t}),n);return r.root=i,r.plain=f({},i,{backgroundColor:null}),r}(t.theme,t.language):void 0;return e.themeDict=i})),p(this,"getLineProps",(function(t){var i=t.key,n=t.className,r=t.style,s=f({},y(t,["key","className","style","line"]),{className:"token-line",style:void 0,key:void 0}),o=e.getThemeDict(e.props);return void 0!==o&&(s.style=o.plain),void 0!==r&&(s.style=void 0!==s.style?f({},s.style,r):r),void 0!==i&&(s.key=i),n&&(s.className+=" "+n),s})),p(this,"getStyleForToken",(function(t){var i=t.types,n=t.empty,r=i.length,s=e.getThemeDict(e.props);if(void 0!==s){if(1===r&&"plain"===i[0])return n?{display:"inline-block"}:void 0;if(1===r&&!n)return s[i[0]];var o=n?{display:"inline-block"}:{},a=i.map((function(t){return s[t]}));return Object.assign.apply(Object,[o].concat(a))}})),p(this,"getTokenProps",(function(t){var i=t.key,n=t.className,r=t.style,s=t.token,o=f({},y(t,["key","className","style","token"]),{className:"token "+s.types.join(" "),children:s.content,style:e.getStyleForToken(s),key:void 0});return void 0!==r&&(o.style=void 0!==o.style?f({},o.style,r):r),void 0!==i&&(o.key=i),n&&(o.className+=" "+n),o})),p(this,"tokenize",(function(t,e,i,n){var r={code:e,grammar:i,language:n,tokens:[]};t.hooks.run("before-tokenize",r);var s=r.tokens=t.tokenize(r.code,r.grammar,r.language);return t.hooks.run("after-tokenize",r),s}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this.props,e=t.Prism,i=t.language,n=t.code,r=t.children,s=this.getThemeDict(this.props),o=e.languages[i],a=function(t){for(var e=[[]],i=[t],n=[0],r=[t.length],s=0,o=0,a=[],l=[a];o>-1;){for(;(s=n[o]++)<r[o];){var h=void 0,c=e[o],u=i[o][s];if("string"==typeof u?(c=o>0?c:["plain"],h=u):(c=_(c,u.type),u.alias&&(c=_(c,u.alias)),h=u.content),"string"==typeof h){var d=h.split(g),p=d.length;a.push({types:c,content:d[0]});for(var f=1;f<p;f++)m(a),l.push(a=[]),a.push({types:c,content:d[f]})}else o++,e.push(c),i.push(h),n.push(0),r.push(h.length)}o--,e.pop(),i.pop(),n.pop(),r.pop()}return m(a),l}(void 0!==o?this.tokenize(e,n,o,i):[n]);return r({tokens:a,className:"prism-code language-"+i,style:void 0!==s?s.root:{},getLineProps:this.getLineProps,getTokenProps:this.getTokenProps})},e}(n.Component);const x=v;var b={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},E="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",w={5:E,6:E+" const class extends export import super"},C=/^in(stanceof)?$/,S="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7b9\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",T="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",R=new RegExp("["+S+"]"),M=new RegExp("["+S+T+"]");S=T=null;var I=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],P=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function L(t,e){for(var i=65536,n=0;n<e.length;n+=2){if((i+=e[n])>t)return!1;if((i+=e[n+1])>=t)return!0}}function A(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&R.test(String.fromCharCode(t)):!1!==e&&L(t,I)))}function k(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&M.test(String.fromCharCode(t)):!1!==e&&(L(t,I)||L(t,P)))))}var O=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function N(t,e){return new O(t,{beforeExpr:!0,binop:e})}var F={beforeExpr:!0},D={startsExpr:!0},Z={};function j(t,e){return void 0===e&&(e={}),e.keyword=t,Z[t]=new O(t,e)}var z={num:new O("num",D),regexp:new O("regexp",D),string:new O("string",D),name:new O("name",D),eof:new O("eof"),bracketL:new O("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new O("]"),braceL:new O("{",{beforeExpr:!0,startsExpr:!0}),braceR:new O("}"),parenL:new O("(",{beforeExpr:!0,startsExpr:!0}),parenR:new O(")"),comma:new O(",",F),semi:new O(";",F),colon:new O(":",F),dot:new O("."),question:new O("?",F),arrow:new O("=>",F),template:new O("template"),invalidTemplate:new O("invalidTemplate"),ellipsis:new O("...",F),backQuote:new O("`",D),dollarBraceL:new O("${",{beforeExpr:!0,startsExpr:!0}),eq:new O("=",{beforeExpr:!0,isAssign:!0}),assign:new O("_=",{beforeExpr:!0,isAssign:!0}),incDec:new O("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new O("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:N("||",1),logicalAND:N("&&",2),bitwiseOR:N("|",3),bitwiseXOR:N("^",4),bitwiseAND:N("&",5),equality:N("==/!=/===/!==",6),relational:N("</>/<=/>=",7),bitShift:N("<</>>/>>>",8),plusMin:new O("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:N("%",10),star:N("*",10),slash:N("/",10),starstar:new O("**",{beforeExpr:!0}),_break:j("break"),_case:j("case",F),_catch:j("catch"),_continue:j("continue"),_debugger:j("debugger"),_default:j("default",F),_do:j("do",{isLoop:!0,beforeExpr:!0}),_else:j("else",F),_finally:j("finally"),_for:j("for",{isLoop:!0}),_function:j("function",D),_if:j("if"),_return:j("return",F),_switch:j("switch"),_throw:j("throw",F),_try:j("try"),_var:j("var"),_const:j("const"),_while:j("while",{isLoop:!0}),_with:j("with"),_new:j("new",{beforeExpr:!0,startsExpr:!0}),_this:j("this",D),_super:j("super",D),_class:j("class",D),_extends:j("extends",F),_export:j("export"),_import:j("import"),_null:j("null",D),_true:j("true",D),_false:j("false",D),_in:j("in",{beforeExpr:!0,binop:7}),_instanceof:j("instanceof",{beforeExpr:!0,binop:7}),_typeof:j("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:j("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:j("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},G=/\r\n?|\n|\u2028|\u2029/,B=new RegExp(G.source,"g");function U(t,e){return 10===t||13===t||!e&&(8232===t||8233===t)}var V=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,q=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,W=Object.prototype,X=W.hasOwnProperty,H=W.toString;function K(t,e){return X.call(t,e)}var Y=Array.isArray||function(t){return"[object Array]"===H.call(t)};function $(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}var J=function(t,e){this.line=t,this.column=e};J.prototype.offset=function(t){return new J(this.line,this.column+t)};var Q=function(t,e,i){this.start=e,this.end=i,null!==t.sourceFile&&(this.source=t.sourceFile)};function tt(t,e){for(var i=1,n=0;;){B.lastIndex=n;var r=B.exec(t);if(!(r&&r.index<e))return new J(i,e-n);++i,n=r.index+r[0].length}}var et={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function it(t,e){return 2|(t?4:0)|(e?8:0)}var nt=function(t,e,i){this.options=t=function(t){var e={};for(var i in et)e[i]=t&&K(t,i)?t[i]:et[i];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),Y(e.onToken)){var n=e.onToken;e.onToken=function(t){return n.push(t)}}return Y(e.onComment)&&(e.onComment=function(t,e){return function(i,n,r,s,o,a){var l={type:i?"Block":"Line",value:n,start:r,end:s};t.locations&&(l.loc=new Q(this,o,a)),t.ranges&&(l.range=[r,s]),e.push(l)}}(e,e.onComment)),e}(t),this.sourceFile=t.sourceFile,this.keywords=$(w[t.ecmaVersion>=6?6:5]);var n="";if(!t.allowReserved){for(var r=t.ecmaVersion;!(n=b[r]);r--);"module"===t.sourceType&&(n+=" await")}this.reservedWords=$(n);var s=(n?n+" ":"")+b.strict;this.reservedWordsStrict=$(s),this.reservedWordsStrictBind=$(s+" "+b.strictBind),this.input=String(e),this.containsEsc=!1,i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(G).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=z.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null},rt={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};nt.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},rt.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},rt.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0},rt.inAsync.get=function(){return(4&this.currentVarScope().flags)>0},rt.allowSuper.get=function(){return(64&this.currentThisScope().flags)>0},rt.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},rt.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},nt.prototype.inNonArrowFunction=function(){return(2&this.currentThisScope().flags)>0},nt.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var i=this,n=0;n<t.length;n++)i=t[n](i);return i},nt.parse=function(t,e){return new this(e,t).parse()},nt.parseExpressionAt=function(t,e,i){var n=new this(i,t,e);return n.nextToken(),n.parseExpression()},nt.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(nt.prototype,rt);var st=nt.prototype,ot=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function at(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}st.strictDirective=function(t){for(;;){q.lastIndex=t,t+=q.exec(this.input)[0].length;var e=ot.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2]))return!0;q.lastIndex=t+=e[0].length,t+=q.exec(this.input)[0].length,";"===this.input[t]&&t++}},st.eat=function(t){return this.type===t&&(this.next(),!0)},st.isContextual=function(t){return this.type===z.name&&this.value===t&&!this.containsEsc},st.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},st.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},st.canInsertSemicolon=function(){return this.type===z.eof||this.type===z.braceR||G.test(this.input.slice(this.lastTokEnd,this.start))},st.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},st.semicolon=function(){this.eat(z.semi)||this.insertSemicolon()||this.unexpected()},st.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},st.expect=function(t){this.eat(t)||this.unexpected()},st.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")},st.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var i=e?t.parenthesizedAssign:t.parenthesizedBind;i>-1&&this.raiseRecoverable(i,"Parenthesized pattern")}},st.checkExpressionErrors=function(t,e){if(!t)return!1;var i=t.shorthandAssign,n=t.doubleProto;if(!e)return i>=0||n>=0;i>=0&&this.raise(i,"Shorthand property assignments are valid only in destructuring patterns"),n>=0&&this.raiseRecoverable(n,"Redefinition of __proto__ property")},st.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},st.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var lt=nt.prototype;lt.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==z.eof;){var i=this.parseStatement(null,!0,e);t.body.push(i)}if(this.inModule)for(var n=0,r=Object.keys(this.undefinedExports);n<r.length;n+=1){var s=r[n];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),this.options.ecmaVersion>=6&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var ht={kind:"loop"},ct={kind:"switch"};lt.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;q.lastIndex=this.pos;var e=q.exec(this.input),i=this.pos+e[0].length,n=this.input.charCodeAt(i);if(91===n)return!0;if(t)return!1;if(123===n)return!0;if(A(n,!0)){for(var r=i+1;k(this.input.charCodeAt(r),!0);)++r;var s=this.input.slice(i,r);if(!C.test(s))return!0}return!1},lt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;q.lastIndex=this.pos;var t=q.exec(this.input),e=this.pos+t[0].length;return!(G.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!==this.input.length&&k(this.input.charAt(e+8)))},lt.parseStatement=function(t,e,i){var n,r=this.type,s=this.startNode();switch(this.isLet(t)&&(r=z._var,n="let"),r){case z._break:case z._continue:return this.parseBreakContinueStatement(s,r.keyword);case z._debugger:return this.parseDebuggerStatement(s);case z._do:return this.parseDoStatement(s);case z._for:return this.parseForStatement(s);case z._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case z._class:return t&&this.unexpected(),this.parseClass(s,!0);case z._if:return this.parseIfStatement(s);case z._return:return this.parseReturnStatement(s);case z._switch:return this.parseSwitchStatement(s);case z._throw:return this.parseThrowStatement(s);case z._try:return this.parseTryStatement(s);case z._const:case z._var:return n=n||this.value,t&&"var"!==n&&this.unexpected(),this.parseVarStatement(s,n);case z._while:return this.parseWhileStatement(s);case z._with:return this.parseWithStatement(s);case z.braceL:return this.parseBlock(!0,s);case z.semi:return this.parseEmptyStatement(s);case z._export:case z._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===z._import?this.parseImport(s):this.parseExport(s,i);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var o=this.value,a=this.parseExpression();return r===z.name&&"Identifier"===a.type&&this.eat(z.colon)?this.parseLabeledStatement(s,o,a,t):this.parseExpressionStatement(s,a)}},lt.parseBreakContinueStatement=function(t,e){var i="break"===e;this.next(),this.eat(z.semi)||this.insertSemicolon()?t.label=null:this.type!==z.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var n=0;n<this.labels.length;++n){var r=this.labels[n];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(i||"loop"===r.kind))break;if(t.label&&i)break}}return n===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,i?"BreakStatement":"ContinueStatement")},lt.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},lt.parseDoStatement=function(t){return this.next(),this.labels.push(ht),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(z._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(z.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},lt.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(ht),this.enterScope(0),this.expect(z.parenL),this.type===z.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var i=this.isLet();if(this.type===z._var||this.type===z._const||i){var n=this.startNode(),r=i?"let":this.value;return this.next(),this.parseVar(n,!0,r),this.finishNode(n,"VariableDeclaration"),!(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==n.declarations.length||"var"!==r&&n.declarations[0].init?(e>-1&&this.unexpected(e),this.parseFor(t,n)):(this.options.ecmaVersion>=9&&(this.type===z._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,n))}var s=new at,o=this.parseExpression(!0,s);return this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===z._in?e>-1&&this.unexpected(e):t.await=e>-1),this.toAssignable(o,!1,s),this.checkLVal(o),this.parseForIn(t,o)):(this.checkExpressionErrors(s,!0),e>-1&&this.unexpected(e),this.parseFor(t,o))},lt.parseFunctionStatement=function(t,e,i){return this.next(),this.parseFunction(t,dt|(i?0:pt),!1,e)},lt.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(z._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},lt.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(z.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},lt.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(z.braceL),this.labels.push(ct),this.enterScope(0);for(var i=!1;this.type!==z.braceR;)if(this.type===z._case||this.type===z._default){var n=this.type===z._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),n?e.test=this.parseExpression():(i&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),i=!0,e.test=null),this.expect(z.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},lt.parseThrowStatement=function(t){return this.next(),G.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var ut=[];lt.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===z._catch){var e=this.startNode();if(this.next(),this.eat(z.parenL)){e.param=this.parseBindingAtom();var i="Identifier"===e.param.type;this.enterScope(i?32:0),this.checkLVal(e.param,i?4:2),this.expect(z.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(z._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},lt.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},lt.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(ht),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},lt.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},lt.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},lt.parseLabeledStatement=function(t,e,i,n){for(var r=0,s=this.labels;r<s.length;r+=1)s[r].name===e&&this.raise(i.start,"Label '"+e+"' is already declared");for(var o=this.type.isLoop?"loop":this.type===z._switch?"switch":null,a=this.labels.length-1;a>=0;a--){var l=this.labels[a];if(l.statementStart!==t.start)break;l.statementStart=this.start,l.kind=o}return this.labels.push({name:e,kind:o,statementStart:this.start}),t.body=this.parseStatement(n?-1===n.indexOf("label")?n+"label":n:"label"),this.labels.pop(),t.label=i,this.finishNode(t,"LabeledStatement")},lt.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},lt.parseBlock=function(t,e){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(z.braceL),t&&this.enterScope(0);!this.eat(z.braceR);){var i=this.parseStatement(null);e.body.push(i)}return t&&this.exitScope(),this.finishNode(e,"BlockStatement")},lt.parseFor=function(t,e){return t.init=e,this.expect(z.semi),t.test=this.type===z.semi?null:this.parseExpression(),this.expect(z.semi),t.update=this.type===z.parenR?null:this.parseExpression(),this.expect(z.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},lt.parseForIn=function(t,e){var i=this.type===z._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===i&&("AssignmentPattern"===e.type||"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(this.strict||"Identifier"!==e.declarations[0].id.type))&&this.raise(e.start,"Invalid assignment in for-in loop head"),t.left=e,t.right="ForInStatement"===i?this.parseExpression():this.parseMaybeAssign(),this.expect(z.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,i)},lt.parseVar=function(t,e,i){for(t.declarations=[],t.kind=i;;){var n=this.startNode();if(this.parseVarId(n,i),this.eat(z.eq)?n.init=this.parseMaybeAssign(e):"const"!==i||this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===n.id.type||e&&(this.type===z._in||this.isContextual("of"))?n.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(n,"VariableDeclarator")),!this.eat(z.comma))break}return t},lt.parseVarId=function(t,e){"const"!==e&&"let"!==e||!this.isContextual("let")||this.raiseRecoverable(this.start,"let is disallowed as a lexically bound name"),t.id=this.parseBindingAtom(),this.checkLVal(t.id,"var"===e?1:2,!1)};var dt=1,pt=2;lt.parseFunction=function(t,e,i,n){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!n)&&(this.type===z.star&&e&pt&&this.unexpected(),t.generator=this.eat(z.star)),this.options.ecmaVersion>=8&&(t.async=!!n),e&dt&&(t.id=4&e&&this.type!==z.name?null:this.parseIdent(),!t.id||e&pt||this.checkLVal(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var r=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(it(t.async,t.generator)),e&dt||(t.id=this.type===z.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,i,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(t,e&dt?"FunctionDeclaration":"FunctionExpression")},lt.parseFunctionParams=function(t){this.expect(z.parenL),t.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},lt.parseClass=function(t,e){this.next();var i=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var n=this.startNode(),r=!1;for(n.body=[],this.expect(z.braceL);!this.eat(z.braceR);){var s=this.parseClassElement(null!==t.superClass);s&&(n.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(r&&this.raise(s.start,"Duplicate constructor in the same class"),r=!0))}return t.body=this.finishNode(n,"ClassBody"),this.strict=i,this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},lt.parseClassElement=function(t){var e=this;if(this.eat(z.semi))return null;var i=this.startNode(),n=function(t,n){void 0===n&&(n=!1);var r=e.start,s=e.startLoc;return!(!e.eatContextual(t)||(e.type===z.parenL||n&&e.canInsertSemicolon())&&(i.key&&e.unexpected(),i.computed=!1,i.key=e.startNodeAt(r,s),i.key.name=t,e.finishNode(i.key,"Identifier"),1))};i.kind="method",i.static=n("static");var r=this.eat(z.star),s=!1;r||(this.options.ecmaVersion>=8&&n("async",!0)?(s=!0,r=this.options.ecmaVersion>=9&&this.eat(z.star)):n("get")?i.kind="get":n("set")&&(i.kind="set")),i.key||this.parsePropertyName(i);var o=i.key,a=!1;return i.computed||i.static||!("Identifier"===o.type&&"constructor"===o.name||"Literal"===o.type&&"constructor"===o.value)?i.static&&"Identifier"===o.type&&"prototype"===o.name&&this.raise(o.start,"Classes may not have a static property named prototype"):("method"!==i.kind&&this.raise(o.start,"Constructor can't have get/set modifier"),r&&this.raise(o.start,"Constructor can't be a generator"),s&&this.raise(o.start,"Constructor can't be an async method"),i.kind="constructor",a=t),this.parseClassMethod(i,r,s,a),"get"===i.kind&&0!==i.value.params.length&&this.raiseRecoverable(i.value.start,"getter should have no params"),"set"===i.kind&&1!==i.value.params.length&&this.raiseRecoverable(i.value.start,"setter should have exactly one param"),"set"===i.kind&&"RestElement"===i.value.params[0].type&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params"),i},lt.parseClassMethod=function(t,e,i,n){return t.value=this.parseMethod(e,i,n),this.finishNode(t,"MethodDefinition")},lt.parseClassId=function(t,e){this.type===z.name?(t.id=this.parseIdent(),e&&this.checkLVal(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},lt.parseClassSuper=function(t){t.superClass=this.eat(z._extends)?this.parseExprSubscripts():null},lt.parseExport=function(t,e){if(this.next(),this.eat(z.star))return this.expectContextual("from"),this.type!==z.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(z._default)){var i;if(this.checkExport(e,"default",this.lastTokStart),this.type===z._function||(i=this.isAsyncFunction())){var n=this.startNode();this.next(),i&&this.next(),t.declaration=this.parseFunction(n,4|dt,!1,i)}else if(this.type===z._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==z.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,o=t.specifiers;s<o.length;s+=1){var a=o[s];this.checkUnreserved(a.local),this.checkLocalExport(a.local)}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},lt.checkExport=function(t,e,i){t&&(K(t,e)&&this.raiseRecoverable(i,"Duplicate export '"+e+"'"),t[e]=!0)},lt.checkPatternExport=function(t,e){var i=e.type;if("Identifier"===i)this.checkExport(t,e.name,e.start);else if("ObjectPattern"===i)for(var n=0,r=e.properties;n<r.length;n+=1)this.checkPatternExport(t,r[n]);else if("ArrayPattern"===i)for(var s=0,o=e.elements;s<o.length;s+=1){var a=o[s];a&&this.checkPatternExport(t,a)}else"Property"===i?this.checkPatternExport(t,e.value):"AssignmentPattern"===i?this.checkPatternExport(t,e.left):"RestElement"===i?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===i&&this.checkPatternExport(t,e.expression)},lt.checkVariableExport=function(t,e){if(t)for(var i=0,n=e;i<n.length;i+=1)this.checkPatternExport(t,n[i].id)},lt.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},lt.parseExportSpecifiers=function(t){var e=[],i=!0;for(this.expect(z.braceL);!this.eat(z.braceR);){if(i)i=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;var n=this.startNode();n.local=this.parseIdent(!0),n.exported=this.eatContextual("as")?this.parseIdent(!0):n.local,this.checkExport(t,n.exported.name,n.exported.start),e.push(this.finishNode(n,"ExportSpecifier"))}return e},lt.parseImport=function(t){return this.next(),this.type===z.string?(t.specifiers=ut,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===z.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},lt.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===z.name){var i=this.startNode();if(i.local=this.parseIdent(),this.checkLVal(i.local,2),t.push(this.finishNode(i,"ImportDefaultSpecifier")),!this.eat(z.comma))return t}if(this.type===z.star){var n=this.startNode();return this.next(),this.expectContextual("as"),n.local=this.parseIdent(),this.checkLVal(n.local,2),t.push(this.finishNode(n,"ImportNamespaceSpecifier")),t}for(this.expect(z.braceL);!this.eat(z.braceR);){if(e)e=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;var r=this.startNode();r.imported=this.parseIdent(!0),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLVal(r.local,2),t.push(this.finishNode(r,"ImportSpecifier"))}return t},lt.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},lt.isDirectiveCandidate=function(t){return"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var ft=nt.prototype;ft.toAssignable=function(t,e,i){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",i&&this.checkPatternErrors(i,!0);for(var n=0,r=t.properties;n<r.length;n+=1){var s=r[n];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",i&&this.checkPatternErrors(i,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,i);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else i&&this.checkPatternErrors(i,!0);return t},ft.toAssignableList=function(t,e){for(var i=t.length,n=0;n<i;n++){var r=t[n];r&&this.toAssignable(r,e)}if(i){var s=t[i-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},ft.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},ft.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==z.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},ft.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case z.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(z.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case z.braceL:return this.parseObj(!0)}return this.parseIdent()},ft.parseBindingList=function(t,e,i){for(var n=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(z.comma),e&&this.type===z.comma)n.push(null);else{if(i&&this.afterTrailingComma(t))break;if(this.type===z.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),n.push(s),this.type===z.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),n.push(o)}return n},ft.parseBindingListItem=function(t){return t},ft.parseMaybeDefault=function(t,e,i){if(i=i||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(z.eq))return i;var n=this.startNodeAt(t,e);return n.left=i,n.right=this.parseMaybeAssign(),this.finishNode(n,"AssignmentPattern")},ft.checkLVal=function(t,e,i){switch(void 0===e&&(e=0),t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(K(i,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),i[t.name]=!0),0!==e&&5!==e&&this.declareName(t.name,e,t.start);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ObjectPattern":for(var n=0,r=t.properties;n<r.length;n+=1)this.checkLVal(r[n],e,i);break;case"Property":this.checkLVal(t.value,e,i);break;case"ArrayPattern":for(var s=0,o=t.elements;s<o.length;s+=1){var a=o[s];a&&this.checkLVal(a,e,i)}break;case"AssignmentPattern":this.checkLVal(t.left,e,i);break;case"RestElement":this.checkLVal(t.argument,e,i);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,i);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var gt=nt.prototype;gt.checkPropClash=function(t,e,i){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var n,r=t.key;switch(r.type){case"Identifier":n=r.name;break;case"Literal":n=String(r.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===n&&"init"===s&&(e.proto&&(i&&i.doubleProto<0?i.doubleProto=r.start:this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{var o=e[n="$"+n];o?("init"===s?this.strict&&o.init||o.get||o.set:o.init||o[s])&&this.raiseRecoverable(r.start,"Redefinition of property"):o=e[n]={init:!1,get:!1,set:!1},o[s]=!0}}},gt.parseExpression=function(t,e){var i=this.start,n=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===z.comma){var s=this.startNodeAt(i,n);for(s.expressions=[r];this.eat(z.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r},gt.parseMaybeAssign=function(t,e,i){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var n=!1,r=-1,s=-1,o=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,o=e.shorthandAssign,e.parenthesizedAssign=e.trailingComma=e.shorthandAssign=-1):(e=new at,n=!0);var a=this.start,l=this.startLoc;this.type!==z.parenL&&this.type!==z.name||(this.potentialArrowAt=this.start);var h=this.parseMaybeConditional(t,e);if(i&&(h=i.call(this,h,a,l)),this.type.isAssign){var c=this.startNodeAt(a,l);return c.operator=this.value,c.left=this.type===z.eq?this.toAssignable(h,!1,e):h,n||at.call(e),e.shorthandAssign=-1,this.checkLVal(h),this.next(),c.right=this.parseMaybeAssign(t),this.finishNode(c,"AssignmentExpression")}return n&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),o>-1&&(e.shorthandAssign=o),h},gt.parseMaybeConditional=function(t,e){var i=this.start,n=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(z.question)){var s=this.startNodeAt(i,n);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(z.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r},gt.parseExprOps=function(t,e){var i=this.start,n=this.startLoc,r=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)||r.start===i&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,i,n,-1,t)},gt.parseExprOp=function(t,e,i,n,r){var s=this.type.binop;if(null!=s&&(!r||this.type!==z._in)&&s>n){var o=this.type===z.logicalOR||this.type===z.logicalAND,a=this.value;this.next();var l=this.start,h=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),l,h,s,r),u=this.buildBinary(e,i,t,c,a,o);return this.parseExprOp(u,e,i,n,r)}return t},gt.buildBinary=function(t,e,i,n,r,s){var o=this.startNodeAt(t,e);return o.left=i,o.operator=r,o.right=n,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")},gt.parseMaybeUnary=function(t,e){var i,n=this.start,r=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))i=this.parseAwait(),e=!0;else if(this.type.prefix){var s=this.startNode(),o=this.type===z.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),o?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):e=!0,i=this.finishNode(s,o?"UpdateExpression":"UnaryExpression")}else{if(i=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return i;for(;this.type.postfix&&!this.canInsertSemicolon();){var a=this.startNodeAt(n,r);a.operator=this.value,a.prefix=!1,a.argument=i,this.checkLVal(i),this.next(),i=this.finishNode(a,"UpdateExpression")}}return!e&&this.eat(z.starstar)?this.buildBinary(n,r,i,this.parseMaybeUnary(null,!1),"**",!1):i},gt.parseExprSubscripts=function(t){var e=this.start,i=this.startLoc,n=this.parseExprAtom(t),r="ArrowFunctionExpression"===n.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||r)return n;var s=this.parseSubscripts(n,e,i);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1)),s},gt.parseSubscripts=function(t,e,i,n){for(var r=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(t.start,t.end);;){var s=this.parseSubscript(t,e,i,n,r);if(s===t||"ArrowFunctionExpression"===s.type)return s;t=s}},gt.parseSubscript=function(t,e,i,n,r){var s=this.eat(z.bracketL);if(s||this.eat(z.dot)){var o=this.startNodeAt(e,i);o.object=t,o.property=s?this.parseExpression():this.parseIdent(!0),o.computed=!!s,s&&this.expect(z.bracketR),t=this.finishNode(o,"MemberExpression")}else if(!n&&this.eat(z.parenL)){var a=new at,l=this.yieldPos,h=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var u=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1,a);if(r&&!this.canInsertSemicolon()&&this.eat(z.arrow))return this.checkPatternErrors(a,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=l,this.awaitPos=h,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(e,i),u,!0);this.checkExpressionErrors(a,!0),this.yieldPos=l||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var d=this.startNodeAt(e,i);d.callee=t,d.arguments=u,t=this.finishNode(d,"CallExpression")}else if(this.type===z.backQuote){var p=this.startNodeAt(e,i);p.tag=t,p.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(p,"TaggedTemplateExpression")}return t},gt.parseExprAtom=function(t){this.type===z.slash&&this.readRegexp();var e,i=this.potentialArrowAt===this.start;switch(this.type){case z._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),e=this.startNode(),this.next(),this.type!==z.parenL||this.allowDirectSuper||this.raise(e.start,"super() call outside constructor of a subclass"),this.type!==z.dot&&this.type!==z.bracketL&&this.type!==z.parenL&&this.unexpected(),this.finishNode(e,"Super");case z._this:return e=this.startNode(),this.next(),this.finishNode(e,"ThisExpression");case z.name:var n=this.start,r=this.startLoc,s=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(z._function))return this.parseFunction(this.startNodeAt(n,r),0,!1,!0);if(i&&!this.canInsertSemicolon()){if(this.eat(z.arrow))return this.parseArrowExpression(this.startNodeAt(n,r),[o],!1);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===z.name&&!s)return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(z.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(n,r),[o],!0)}return o;case z.regexp:var a=this.value;return(e=this.parseLiteral(a.value)).regex={pattern:a.pattern,flags:a.flags},e;case z.num:case z.string:return this.parseLiteral(this.value);case z._null:case z._true:case z._false:return(e=this.startNode()).value=this.type===z._null?null:this.type===z._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case z.parenL:var l=this.start,h=this.parseParenAndDistinguishExpression(i);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(h)&&(t.parenthesizedAssign=l),t.parenthesizedBind<0&&(t.parenthesizedBind=l)),h;case z.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(z.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case z.braceL:return this.parseObj(!1,t);case z._function:return e=this.startNode(),this.next(),this.parseFunction(e,0);case z._class:return this.parseClass(this.startNode(),!1);case z._new:return this.parseNew();case z.backQuote:return this.parseTemplate();default:this.unexpected()}},gt.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},gt.parseParenExpression=function(){this.expect(z.parenL);var t=this.parseExpression();return this.expect(z.parenR),t},gt.parseParenAndDistinguishExpression=function(t){var e,i=this.start,n=this.startLoc,r=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,o=this.start,a=this.startLoc,l=[],h=!0,c=!1,u=new at,d=this.yieldPos,p=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==z.parenR;){if(h?h=!1:this.expect(z.comma),r&&this.afterTrailingComma(z.parenR,!0)){c=!0;break}if(this.type===z.ellipsis){s=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===z.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}l.push(this.parseMaybeAssign(!1,u,this.parseParenItem))}var f=this.start,g=this.startLoc;if(this.expect(z.parenR),t&&!this.canInsertSemicolon()&&this.eat(z.arrow))return this.checkPatternErrors(u,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=p,this.parseParenArrowList(i,n,l);l.length&&!c||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(u,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,l.length>1?((e=this.startNodeAt(o,a)).expressions=l,this.finishNodeAt(e,"SequenceExpression",f,g)):e=l[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var m=this.startNodeAt(i,n);return m.expression=e,this.finishNode(m,"ParenthesizedExpression")}return e},gt.parseParenItem=function(t){return t},gt.parseParenArrowList=function(t,e,i){return this.parseArrowExpression(this.startNodeAt(t,e),i)};var mt=[];gt.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(z.dot)){t.meta=e;var i=this.containsEsc;return t.property=this.parseIdent(!0),("target"!==t.property.name||i)&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty")}var n=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),n,r,!0),t.arguments=this.eat(z.parenL)?this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1):mt,this.finishNode(t,"NewExpression")},gt.parseTemplateElement=function(t){var e=t.isTagged,i=this.startNode();return this.type===z.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),i.value={raw:this.value,cooked:null}):i.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),i.tail=this.type===z.backQuote,this.finishNode(i,"TemplateElement")},gt.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var i=this.startNode();this.next(),i.expressions=[];var n=this.parseTemplateElement({isTagged:e});for(i.quasis=[n];!n.tail;)this.type===z.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(z.dollarBraceL),i.expressions.push(this.parseExpression()),this.expect(z.braceR),i.quasis.push(n=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(i,"TemplateLiteral")},gt.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===z.name||this.type===z.num||this.type===z.string||this.type===z.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===z.star)&&!G.test(this.input.slice(this.lastTokEnd,this.start))},gt.parseObj=function(t,e){var i=this.startNode(),n=!0,r={};for(i.properties=[],this.next();!this.eat(z.braceR);){if(n)n=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),i.properties.push(s)}return this.finishNode(i,t?"ObjectPattern":"ObjectExpression")},gt.parseProperty=function(t,e){var i,n,r,s,o=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(z.ellipsis))return t?(o.argument=this.parseIdent(!1),this.type===z.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(o,"RestElement")):(this.type===z.parenL&&e&&(e.parenthesizedAssign<0&&(e.parenthesizedAssign=this.start),e.parenthesizedBind<0&&(e.parenthesizedBind=this.start)),o.argument=this.parseMaybeAssign(!1,e),this.type===z.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(o,"SpreadElement"));this.options.ecmaVersion>=6&&(o.method=!1,o.shorthand=!1,(t||e)&&(r=this.start,s=this.startLoc),t||(i=this.eat(z.star)));var a=this.containsEsc;return this.parsePropertyName(o),!t&&!a&&this.options.ecmaVersion>=8&&!i&&this.isAsyncProp(o)?(n=!0,i=this.options.ecmaVersion>=9&&this.eat(z.star),this.parsePropertyName(o,e)):n=!1,this.parsePropertyValue(o,t,i,n,r,s,e,a),this.finishNode(o,"Property")},gt.parsePropertyValue=function(t,e,i,n,r,s,o,a){(i||n)&&this.type===z.colon&&this.unexpected(),this.eat(z.colon)?(t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),t.kind="init"):this.options.ecmaVersion>=6&&this.type===z.parenL?(e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(i,n)):e||a||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===z.comma||this.type===z.braceR?this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((i||n)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,t.key):this.type===z.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected():((i||n)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1),t.value.params.length!==("get"===t.kind?0:1)?this.raiseRecoverable(t.value.start,"get"===t.kind?"getter should have no params":"setter should have exactly one param"):"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params"))},gt.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(z.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(z.bracketR),t.key;t.computed=!1}return t.key=this.type===z.num||this.type===z.string?this.parseExprAtom():this.parseIdent(!0)},gt.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},gt.parseMethod=function(t,e,i){var n=this.startNode(),r=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|it(e,n.generator)|(i?128:0)),this.expect(z.parenL),n.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1,!0),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(n,"FunctionExpression")},gt.parseArrowExpression=function(t,e,i){var n=this.yieldPos,r=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|it(i,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!i),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1),this.yieldPos=n,this.awaitPos=r,this.awaitIdentPos=s,this.finishNode(t,"ArrowFunctionExpression")},gt.parseFunctionBody=function(t,e,i){var n=this.strict,r=!1;if(e&&this.type!==z.braceL)t.body=this.parseMaybeAssign(),t.expression=!0,this.checkParams(t,!1);else{var s=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);n&&!s||(r=this.strictDirective(this.end))&&s&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var o=this.labels;this.labels=[],r&&(this.strict=!0),this.checkParams(t,!n&&!r&&!e&&!i&&this.isSimpleParamList(t.params)),t.body=this.parseBlock(!1),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=o}this.exitScope(),this.strict&&t.id&&this.checkLVal(t.id,5),this.strict=n},gt.isSimpleParamList=function(t){for(var e=0,i=t;e<i.length;e+=1)if("Identifier"!==i[e].type)return!1;return!0},gt.checkParams=function(t,e){for(var i={},n=0,r=t.params;n<r.length;n+=1)this.checkLVal(r[n],1,e?null:i)},gt.parseExprList=function(t,e,i,n){for(var r=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(z.comma),e&&this.afterTrailingComma(t))break;var o=void 0;i&&this.type===z.comma?o=null:this.type===z.ellipsis?(o=this.parseSpread(n),n&&this.type===z.comma&&n.trailingComma<0&&(n.trailingComma=this.start)):o=this.parseMaybeAssign(!1,n),r.push(o)}return r},gt.checkUnreserved=function(t){var e=t.start,i=t.end,n=t.name;this.inGenerator&&"yield"===n&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===n&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(n)&&this.raise(e,"Unexpected keyword '"+n+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,i).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(n)&&(this.inAsync||"await"!==n||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+n+"' is reserved"))},gt.parseIdent=function(t,e){var i=this.startNode();return t&&"never"===this.options.allowReserved&&(t=!1),this.type===z.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,"class"!==i.name&&"function"!==i.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(i,"Identifier"),t||(this.checkUnreserved(i),"await"!==i.name||this.awaitIdentPos||(this.awaitIdentPos=i.start)),i},gt.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===z.semi||this.canInsertSemicolon()||this.type!==z.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(z.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},gt.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var _t=nt.prototype;_t.raise=function(t,e){var i=tt(this.input,t),n=new SyntaxError(e+=" ("+i.line+":"+i.column+")");throw n.pos=t,n.loc=i,n.raisedAt=this.pos,n},_t.raiseRecoverable=_t.raise,_t.curPosition=function(){if(this.options.locations)return new J(this.curLine,this.pos-this.lineStart)};var yt=nt.prototype,vt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};yt.enterScope=function(t){this.scopeStack.push(new vt(t))},yt.exitScope=function(){this.scopeStack.pop()},yt.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},yt.declareName=function(t,e,i){var n=!1;if(2===e){var r=this.currentScope();n=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e)this.currentScope().lexical.push(t);else if(3===e){var s=this.currentScope();n=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var o=this.scopeStack.length-1;o>=0;--o){var a=this.scopeStack[o];if(a.lexical.indexOf(t)>-1&&!(32&a.flags&&a.lexical[0]===t)||!this.treatFunctionsAsVarInScope(a)&&a.functions.indexOf(t)>-1){n=!0;break}if(a.var.push(t),this.inModule&&1&a.flags&&delete this.undefinedExports[t],3&a.flags)break}n&&this.raiseRecoverable(i,"Identifier '"+t+"' has already been declared")},yt.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},yt.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},yt.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags)return e}},yt.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(3&e.flags&&!(16&e.flags))return e}};var xt=function(t,e,i){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new Q(t,i)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},bt=nt.prototype;function Et(t,e,i,n){return t.type=e,t.end=i,this.options.locations&&(t.loc.end=n),this.options.ranges&&(t.range[1]=i),t}bt.startNode=function(){return new xt(this,this.start,this.startLoc)},bt.startNodeAt=function(t,e){return new xt(this,t,e)},bt.finishNode=function(t,e){return Et.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},bt.finishNodeAt=function(t,e,i,n){return Et.call(this,t,e,i,n)};var wt=function(t,e,i,n,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!i,this.override=n,this.generator=!!r},Ct={b_stat:new wt("{",!1),b_expr:new wt("{",!0),b_tmpl:new wt("${",!1),p_stat:new wt("(",!1),p_expr:new wt("(",!0),q_tmpl:new wt("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new wt("function",!1),f_expr:new wt("function",!0),f_expr_gen:new wt("function",!0,!1,null,!0),f_gen:new wt("function",!1,!1,null,!0)},St=nt.prototype;St.initialContext=function(){return[Ct.b_stat]},St.braceIsBlock=function(t){var e=this.curContext();return e===Ct.f_expr||e===Ct.f_stat||(t!==z.colon||e!==Ct.b_stat&&e!==Ct.b_expr?t===z._return||t===z.name&&this.exprAllowed?G.test(this.input.slice(this.lastTokEnd,this.start)):t===z._else||t===z.semi||t===z.eof||t===z.parenR||t===z.arrow||(t===z.braceL?e===Ct.b_stat:t!==z._var&&t!==z._const&&t!==z.name&&!this.exprAllowed):!e.isExpr)},St.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},St.updateContext=function(t){var e,i=this.type;i.keyword&&t===z.dot?this.exprAllowed=!1:(e=i.updateContext)?e.call(this,t):this.exprAllowed=i.beforeExpr},z.parenR.updateContext=z.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===Ct.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},z.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?Ct.b_stat:Ct.b_expr),this.exprAllowed=!0},z.dollarBraceL.updateContext=function(){this.context.push(Ct.b_tmpl),this.exprAllowed=!0},z.parenL.updateContext=function(t){this.context.push(t===z._if||t===z._for||t===z._with||t===z._while?Ct.p_stat:Ct.p_expr),this.exprAllowed=!0},z.incDec.updateContext=function(){},z._function.updateContext=z._class.updateContext=function(t){!t.beforeExpr||t===z.semi||t===z._else||t===z._return&&G.test(this.input.slice(this.lastTokEnd,this.start))||(t===z.colon||t===z.braceL)&&this.curContext()===Ct.b_stat?this.context.push(Ct.f_stat):this.context.push(Ct.f_expr),this.exprAllowed=!1},z.backQuote.updateContext=function(){this.curContext()===Ct.q_tmpl?this.context.pop():this.context.push(Ct.q_tmpl),this.exprAllowed=!1},z.star.updateContext=function(t){if(t===z._function){var e=this.context.length-1;this.context[e]=this.context[e]===Ct.f_expr?Ct.f_expr_gen:Ct.f_gen}this.exprAllowed=!0},z.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==z.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var Tt="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Rt={9:Tt,10:Tt+" Extended_Pictographic"},Mt="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",It="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Pt={9:It,10:It+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd"},Lt={};function At(t){var e=Lt[t]={binary:$(Rt[t]+" "+Mt),nonBinary:{General_Category:$(Mt),Script:$(Pt[t])}};e.nonBinary.Script_Extensions=e.nonBinary.Script,e.nonBinary.gc=e.nonBinary.General_Category,e.nonBinary.sc=e.nonBinary.Script,e.nonBinary.scx=e.nonBinary.Script_Extensions}At(9),At(10);var kt=nt.prototype,Ot=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Lt[t.options.ecmaVersion>=10?10:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function Nt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}function Ft(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Dt(t){return t>=65&&t<=90||t>=97&&t<=122}function Zt(t){return Dt(t)||95===t}function jt(t){return Zt(t)||zt(t)}function zt(t){return t>=48&&t<=57}function Gt(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Bt(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Ut(t){return t>=48&&t<=55}Ot.prototype.reset=function(t,e,i){var n=-1!==i.indexOf("u");this.start=0|t,this.source=e+"",this.flags=i,this.switchU=n&&this.parser.options.ecmaVersion>=6,this.switchN=n&&this.parser.options.ecmaVersion>=9},Ot.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},Ot.prototype.at=function(t){var e=this.source,i=e.length;if(t>=i)return-1;var n=e.charCodeAt(t);return!this.switchU||n<=55295||n>=57344||t+1>=i?n:(n<<10)+e.charCodeAt(t+1)-56613888},Ot.prototype.nextIndex=function(t){var e=this.source,i=e.length;if(t>=i)return i;var n=e.charCodeAt(t);return!this.switchU||n<=55295||n>=57344||t+1>=i?t+1:t+2},Ot.prototype.current=function(){return this.at(this.pos)},Ot.prototype.lookahead=function(){return this.at(this.nextIndex(this.pos))},Ot.prototype.advance=function(){this.pos=this.nextIndex(this.pos)},Ot.prototype.eat=function(t){return this.current()===t&&(this.advance(),!0)},kt.validateRegExpFlags=function(t){for(var e=t.validFlags,i=t.flags,n=0;n<i.length;n++){var r=i.charAt(n);-1===e.indexOf(r)&&this.raise(t.start,"Invalid regular expression flag"),i.indexOf(r,n+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},kt.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},kt.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,i=t.backReferenceNames;e<i.length;e+=1)-1===t.groupNames.indexOf(i[e])&&t.raise("Invalid named capture referenced")},kt.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},kt.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},kt.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!(t.switchU?!this.regexp_eatAtom(t):!this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},kt.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var i=!1;if(this.options.ecmaVersion>=9&&(i=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!i,!0}return t.pos=e,!1},kt.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},kt.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},kt.regexp_eatBracedQuantifier=function(t,e){var i=t.pos;if(t.eat(123)){var n=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(n=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<n&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=i}return!1},kt.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},kt.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},kt.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},kt.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},kt.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},kt.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},kt.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!Ft(e)&&(t.lastIntValue=e,t.advance(),!0)},kt.regexp_eatPatternCharacters=function(t){for(var e=t.pos,i=0;-1!==(i=t.current())&&!Ft(i);)t.advance();return t.pos!==e},kt.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e||(t.advance(),0))},kt.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},kt.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},kt.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Nt(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Nt(t.lastIntValue);return!0}return!1},kt.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,i=t.current();return t.advance(),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(i=t.lastIntValue),function(t){return A(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},kt.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,i=t.current();return t.advance(),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t)&&(i=t.lastIntValue),function(t){return k(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},kt.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},kt.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var i=t.lastIntValue;if(t.switchU)return i>t.maxBackReference&&(t.maxBackReference=i),!0;if(i<=t.numCapturingParens)return!0;t.pos=e}return!1},kt.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},kt.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},kt.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},kt.regexp_eatZero=function(t){return 48===t.current()&&!zt(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},kt.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},kt.regexp_eatControlLetter=function(t){var e=t.current();return!!Dt(e)&&(t.lastIntValue=e%32,t.advance(),!0)},kt.regexp_eatRegExpUnicodeEscapeSequence=function(t){var e,i=t.pos;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var n=t.lastIntValue;if(t.switchU&&n>=55296&&n<=56319){var r=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(s>=56320&&s<=57343)return t.lastIntValue=1024*(n-55296)+(s-56320)+65536,!0}t.pos=r,t.lastIntValue=n}return!0}if(t.switchU&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&(e=t.lastIntValue)>=0&&e<=1114111)return!0;t.switchU&&t.raise("Invalid unicode escape"),t.pos=i}return!1},kt.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e||(t.lastIntValue=e,t.advance(),0))},kt.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},kt.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},kt.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var i=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t))return this.regexp_validateUnicodePropertyNameAndValue(t,i,t.lastStringValue),!0}return t.pos=e,!!this.regexp_eatLoneUnicodePropertyNameOrValue(t)&&(this.regexp_validateUnicodePropertyNameOrValue(t,t.lastStringValue),!0)},kt.regexp_validateUnicodePropertyNameAndValue=function(t,e,i){K(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(i)||t.raise("Invalid property value")},kt.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},kt.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Zt(e=t.current());)t.lastStringValue+=Nt(e),t.advance();return""!==t.lastStringValue},kt.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";jt(e=t.current());)t.lastStringValue+=Nt(e),t.advance();return""!==t.lastStringValue},kt.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},kt.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},kt.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var i=t.lastIntValue;!t.switchU||-1!==e&&-1!==i||t.raise("Invalid character class"),-1!==e&&-1!==i&&e>i&&t.raise("Range out of order in character class")}}},kt.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var i=t.current();(99===i||Ut(i))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var n=t.current();return 93!==n&&(t.lastIntValue=n,t.advance(),!0)},kt.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},kt.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!zt(e)&&95!==e||(t.lastIntValue=e%32,t.advance(),0))},kt.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},kt.regexp_eatDecimalDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;zt(i=t.current());)t.lastIntValue=10*t.lastIntValue+(i-48),t.advance();return t.pos!==e},kt.regexp_eatHexDigits=function(t){var e=t.pos,i=0;for(t.lastIntValue=0;Gt(i=t.current());)t.lastIntValue=16*t.lastIntValue+Bt(i),t.advance();return t.pos!==e},kt.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var i=t.lastIntValue;t.lastIntValue=e<=3&&this.regexp_eatOctalDigit(t)?64*e+8*i+t.lastIntValue:8*e+i}else t.lastIntValue=e;return!0}return!1},kt.regexp_eatOctalDigit=function(t){var e=t.current();return Ut(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},kt.regexp_eatFixedHexDigits=function(t,e){var i=t.pos;t.lastIntValue=0;for(var n=0;n<e;++n){var r=t.current();if(!Gt(r))return t.pos=i,!1;t.lastIntValue=16*t.lastIntValue+Bt(r),t.advance()}return!0};var Vt=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Q(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qt=nt.prototype;function Wt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}qt.next=function(){this.options.onToken&&this.options.onToken(new Vt(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},qt.getToken=function(){return this.next(),new Vt(this)},"undefined"!=typeof Symbol&&(qt[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===z.eof,value:e}}}}),qt.curContext=function(){return this.context[this.context.length-1]},qt.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(z.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},qt.readToken=function(t){return A(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},qt.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},qt.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),i=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(B.lastIndex=i;(t=B.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(i+2,n),i,this.pos,e,this.curPosition())},qt.skipLineComment=function(t){for(var e=this.pos,i=this.options.onComment&&this.curPosition(),n=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!U(n);)n=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,i,this.curPosition())},qt.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&V.test(String.fromCharCode(t))))break t;++this.pos}}},qt.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var i=this.type;this.type=t,this.value=e,this.updateContext(i)},qt.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(z.ellipsis)):(++this.pos,this.finishToken(z.dot))},qt.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(z.assign,2):this.finishOp(z.slash,1)},qt.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),i=1,n=42===t?z.star:z.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++i,n=z.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(z.assign,i+1):this.finishOp(n,i)},qt.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?z.logicalOR:z.logicalAND,2):61===e?this.finishOp(z.assign,2):this.finishOp(124===t?z.bitwiseOR:z.bitwiseAND,1)},qt.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(z.assign,2):this.finishOp(z.bitwiseXOR,1)},qt.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!G.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(z.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(z.assign,2):this.finishOp(z.plusMin,1)},qt.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),i=1;return e===t?(i=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+i)?this.finishOp(z.assign,i+1):this.finishOp(z.bitShift,i)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(i=2),this.finishOp(z.relational,i)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},qt.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(z.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(z.arrow)):this.finishOp(61===t?z.eq:z.prefix,1)},qt.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(z.parenL);case 41:return++this.pos,this.finishToken(z.parenR);case 59:return++this.pos,this.finishToken(z.semi);case 44:return++this.pos,this.finishToken(z.comma);case 91:return++this.pos,this.finishToken(z.bracketL);case 93:return++this.pos,this.finishToken(z.bracketR);case 123:return++this.pos,this.finishToken(z.braceL);case 125:return++this.pos,this.finishToken(z.braceR);case 58:return++this.pos,this.finishToken(z.colon);case 63:return++this.pos,this.finishToken(z.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(z.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(z.prefix,1)}this.raise(this.pos,"Unexpected character '"+Wt(t)+"'")},qt.finishOp=function(t,e){var i=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,i)},qt.readRegexp=function(){for(var t,e,i=this.pos;;){this.pos>=this.input.length&&this.raise(i,"Unterminated regular expression");var n=this.input.charAt(this.pos);if(G.test(n)&&this.raise(i,"Unterminated regular expression"),t)t=!1;else{if("["===n)e=!0;else if("]"===n&&e)e=!1;else if("/"===n&&!e)break;t="\\"===n}++this.pos}var r=this.input.slice(i,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Ot(this));a.reset(i,r,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var l=null;try{l=new RegExp(r,o)}catch(t){}return this.finishToken(z.regexp,{pattern:r,flags:o,value:l})},qt.readInt=function(t,e){for(var i=this.pos,n=0,r=0,s=null==e?1/0:e;r<s;++r){var o,a=this.input.charCodeAt(this.pos);if((o=a>=97?a-97+10:a>=65?a-65+10:a>=48&&a<=57?a-48:1/0)>=t)break;++this.pos,n=n*t+o}return this.pos===i||null!=e&&this.pos-i!==e?null:n},qt.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),A(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,e)},qt.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10)||this.raise(e,"Invalid number");var i=this.pos-e>=2&&48===this.input.charCodeAt(e);i&&this.strict&&this.raise(e,"Invalid number"),i&&/[89]/.test(this.input.slice(e,this.pos))&&(i=!1);var n=this.input.charCodeAt(this.pos);46!==n||i||(++this.pos,this.readInt(10),n=this.input.charCodeAt(this.pos)),69!==n&&101!==n||i||(43!==(n=this.input.charCodeAt(++this.pos))&&45!==n||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),A(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var r=this.input.slice(e,this.pos),s=i?parseInt(r,8):parseFloat(r);return this.finishToken(z.num,s)},qt.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},qt.readString=function(t){for(var e="",i=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var n=this.input.charCodeAt(this.pos);if(n===t)break;92===n?(e+=this.input.slice(i,this.pos),e+=this.readEscapedChar(!1),i=this.pos):(U(n,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(i,this.pos++),this.finishToken(z.string,e)};var Xt={};qt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(b){if(b!==Xt)throw b;this.readInvalidTemplateToken()}this.inTemplateElement=!1},qt.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw Xt;this.raise(t,e)},qt.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var i=this.input.charCodeAt(this.pos);if(96===i||36===i&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==z.template&&this.type!==z.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(z.template,t)):36===i?(this.pos+=2,this.finishToken(z.dollarBraceL)):(++this.pos,this.finishToken(z.backQuote));if(92===i)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(U(i)){switch(t+=this.input.slice(e,this.pos),++this.pos,i){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(i)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},qt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(z.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},qt.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Wt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],n=parseInt(i,8);return n>255&&(i=i.slice(0,-1),n=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(n)}return U(e)?"":String.fromCharCode(e)}},qt.readHexChar=function(t){var e=this.pos,i=this.readInt(16,t);return null===i&&this.invalidStringToken(e,"Bad character escape sequence"),i},qt.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,i=this.pos,n=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(k(r,n))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(i,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(e?A:k)(o,n)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=Wt(o),i=this.pos}e=!1}return t+this.input.slice(i,this.pos)},qt.readWord=function(){var t=this.readWord1(),e=z.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=Z[t]),this.finishToken(e,t)};var Ht={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",times:"\xd7",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",divide:"\xf7",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",frasl:"\u2044",euro:"\u20ac",image:"\u2111",weierp:"\u2118",real:"\u211c",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lArr:"\u21d0",uArr:"\u21d1",rArr:"\u21d2",dArr:"\u21d3",hArr:"\u21d4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",lang:"\u2329",rang:"\u232a",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"},Kt={version:"6.1.1",parse:function(t,e){return nt.parse(t,e)},parseExpressionAt:function(t,e,i){return nt.parseExpressionAt(t,e,i)},tokenizer:function(t,e){return nt.tokenizer(t,e)},Parser:nt,defaultOptions:et,Position:J,SourceLocation:Q,getLineInfo:tt,Node:xt,TokenType:O,tokTypes:z,keywordTypes:Z,TokContext:wt,tokContexts:Ct,isIdentifierChar:k,isIdentifierStart:A,Token:Vt,isNewLine:U,lineBreak:G,lineBreakG:B,nonASCIIwhitespace:V};const Yt=/^[\da-fA-F]+$/,$t=/^\d+$/,Jt=Kt.tokTypes,Qt=Kt.TokContext,te=Kt.tokContexts,ee=Kt.TokenType,ie=Kt.isNewLine,ne=Kt.isIdentifierStart,re=Kt.isIdentifierChar,se=new Qt("<tag",!1),oe=new Qt("</tag",!1),ae=new Qt("<tag>...</tag>",!0,!0),le={jsxName:new ee("jsxName"),jsxText:new ee("jsxText",{beforeExpr:!0}),jsxTagStart:new ee("jsxTagStart"),jsxTagEnd:new ee("jsxTagEnd")};function he(t){return t?"JSXIdentifier"===t.type?t.name:"JSXNamespacedName"===t.type?t.namespace.name+":"+t.name.name:"JSXMemberExpression"===t.type?he(t.object)+"."+he(t.property):void 0:t}le.jsxTagStart.updateContext=function(){this.context.push(ae),this.context.push(se),this.exprAllowed=!1},le.jsxTagEnd.updateContext=function(t){let e=this.context.pop();e===se&&t===Jt.slash||e===oe?(this.context.pop(),this.exprAllowed=this.curContext()===ae):this.exprAllowed=!0};var ce=function(t){return t=t||{},function(e){return function(t,e){return class extends e{jsx_readToken(){let t="",e=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");let i=this.input.charCodeAt(this.pos);switch(i){case 60:case 123:return this.pos===this.start?60===i&&this.exprAllowed?(++this.pos,this.finishToken(le.jsxTagStart)):this.getTokenFromCode(i):(t+=this.input.slice(e,this.pos),this.finishToken(le.jsxText,t));case 38:t+=this.input.slice(e,this.pos),t+=this.jsx_readEntity(),e=this.pos;break;default:ie(i)?(t+=this.input.slice(e,this.pos),t+=this.jsx_readNewLine(!0),e=this.pos):++this.pos}}}jsx_readNewLine(t){let e,i=this.input.charCodeAt(this.pos);return++this.pos,13===i&&10===this.input.charCodeAt(this.pos)?(++this.pos,e=t?"\n":"\r\n"):e=String.fromCharCode(i),this.options.locations&&(++this.curLine,this.lineStart=this.pos),e}jsx_readString(t){let e="",i=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");let n=this.input.charCodeAt(this.pos);if(n===t)break;38===n?(e+=this.input.slice(i,this.pos),e+=this.jsx_readEntity(),i=this.pos):ie(n)?(e+=this.input.slice(i,this.pos),e+=this.jsx_readNewLine(!1),i=this.pos):++this.pos}return e+=this.input.slice(i,this.pos++),this.finishToken(Jt.string,e)}jsx_readEntity(){let t,e="",i=0,n=this.input[this.pos];"&"!==n&&this.raise(this.pos,"Entity must start with an ampersand");let r=++this.pos;for(;this.pos<this.input.length&&i++<10;){if(";"===(n=this.input[this.pos++])){"#"===e[0]?"x"===e[1]?(e=e.substr(2),Yt.test(e)&&(t=String.fromCharCode(parseInt(e,16)))):(e=e.substr(1),$t.test(e)&&(t=String.fromCharCode(parseInt(e,10)))):t=Ht[e];break}e+=n}return t||(this.pos=r,"&")}jsx_readWord(){let t,e=this.pos;do{t=this.input.charCodeAt(++this.pos)}while(re(t)||45===t);return this.finishToken(le.jsxName,this.input.slice(e,this.pos))}jsx_parseIdentifier(){let t=this.startNode();return this.type===le.jsxName?t.name=this.value:this.type.keyword?t.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(t,"JSXIdentifier")}jsx_parseNamespacedName(){let e=this.start,i=this.startLoc,n=this.jsx_parseIdentifier();if(!t.allowNamespaces||!this.eat(Jt.colon))return n;var r=this.startNodeAt(e,i);return r.namespace=n,r.name=this.jsx_parseIdentifier(),this.finishNode(r,"JSXNamespacedName")}jsx_parseElementName(){if(this.type===le.jsxTagEnd)return"";let e=this.start,i=this.startLoc,n=this.jsx_parseNamespacedName();for(this.type!==Jt.dot||"JSXNamespacedName"!==n.type||t.allowNamespacedObjects||this.unexpected();this.eat(Jt.dot);){let t=this.startNodeAt(e,i);t.object=n,t.property=this.jsx_parseIdentifier(),n=this.finishNode(t,"JSXMemberExpression")}return n}jsx_parseAttributeValue(){switch(this.type){case Jt.braceL:let t=this.jsx_parseExpressionContainer();return"JSXEmptyExpression"===t.expression.type&&this.raise(t.start,"JSX attributes must only be assigned a non-empty expression"),t;case le.jsxTagStart:case Jt.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}jsx_parseEmptyExpression(){let t=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(t,"JSXEmptyExpression",this.start,this.startLoc)}jsx_parseExpressionContainer(){let t=this.startNode();return this.next(),t.expression=this.type===Jt.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(Jt.braceR),this.finishNode(t,"JSXExpressionContainer")}jsx_parseAttribute(){let t=this.startNode();return this.eat(Jt.braceL)?(this.expect(Jt.ellipsis),t.argument=this.parseMaybeAssign(),this.expect(Jt.braceR),this.finishNode(t,"JSXSpreadAttribute")):(t.name=this.jsx_parseNamespacedName(),t.value=this.eat(Jt.eq)?this.jsx_parseAttributeValue():null,this.finishNode(t,"JSXAttribute"))}jsx_parseOpeningElementAt(t,e){let i=this.startNodeAt(t,e);i.attributes=[];let n=this.jsx_parseElementName();for(n&&(i.name=n);this.type!==Jt.slash&&this.type!==le.jsxTagEnd;)i.attributes.push(this.jsx_parseAttribute());return i.selfClosing=this.eat(Jt.slash),this.expect(le.jsxTagEnd),this.finishNode(i,n?"JSXOpeningElement":"JSXOpeningFragment")}jsx_parseClosingElementAt(t,e){let i=this.startNodeAt(t,e),n=this.jsx_parseElementName();return n&&(i.name=n),this.expect(le.jsxTagEnd),this.finishNode(i,n?"JSXClosingElement":"JSXClosingFragment")}jsx_parseElementAt(t,e){let i=this.startNodeAt(t,e),n=[],r=this.jsx_parseOpeningElementAt(t,e),s=null;if(!r.selfClosing){t:for(;;)switch(this.type){case le.jsxTagStart:if(t=this.start,e=this.startLoc,this.next(),this.eat(Jt.slash)){s=this.jsx_parseClosingElementAt(t,e);break t}n.push(this.jsx_parseElementAt(t,e));break;case le.jsxText:n.push(this.parseExprAtom());break;case Jt.braceL:n.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}he(s.name)!==he(r.name)&&this.raise(s.start,"Expected corresponding JSX closing tag for <"+he(r.name)+">")}let o=r.name?"Element":"Fragment";return i["opening"+o]=r,i["closing"+o]=s,i.children=n,this.type===Jt.relational&&"<"===this.value&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(i,"JSX"+o)}jsx_parseText(t){let e=this.parseLiteral(t);return e.type="JSXText",e}jsx_parseElement(){let t=this.start,e=this.startLoc;return this.next(),this.jsx_parseElementAt(t,e)}parseExprAtom(t){return this.type===le.jsxText?this.jsx_parseText(this.value):this.type===le.jsxTagStart?this.jsx_parseElement():super.parseExprAtom(t)}readToken(t){let e=this.curContext();if(e===ae)return this.jsx_readToken();if(e===se||e===oe){if(ne(t))return this.jsx_readWord();if(62==t)return++this.pos,this.finishToken(le.jsxTagEnd);if((34===t||39===t)&&e==se)return this.jsx_readString(t)}return 60===t&&this.exprAllowed&&33!==this.input.charCodeAt(this.pos+1)?(++this.pos,this.finishToken(le.jsxTagStart)):super.readToken(t)}updateContext(t){if(this.type==Jt.braceL){var e=this.curContext();e==se?this.context.push(te.b_expr):e==ae?this.context.push(te.b_tmpl):super.updateContext(t),this.exprAllowed=!0}else{if(this.type!==Jt.slash||t!==le.jsxTagStart)return super.updateContext(t);this.context.length-=2,this.context.push(oe),this.exprAllowed=!1}}}}({allowNamespaces:!1!==t.allowNamespaces,allowNamespacedObjects:!!t.allowNamespacedObjects},e)}};ce.tokTypes=le;var ue,de,pe=(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DynamicImportKey=void 0;var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),n=function t(e,i,n){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,i);if(void 0===r){var s=Object.getPrototypeOf(e);return null===s?void 0:t(s,i,n)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(n):void 0};e.default=function(t){return function(e){function s(){return function(t,e){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(s.__proto__||Object.getPrototypeOf(s)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,t),i(s,[{key:"parseStatement",value:function(t,e,i){return this.type===Kt.tokTypes._import&&function(){return/^(\s|\/\/.*|\/\*[^]*?\*\/)*\(/.test(this.input.slice(this.pos))}.call(this)?this.parseExpressionStatement(this.startNode(),this.parseExpression()):n(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"parseStatement",this).call(this,t,e,i)}},{key:"parseExprAtom",value:function(t){return this.type===Kt.tokTypes._import?function(){var t=this.startNode();return this.next(),this.type!==Kt.tokTypes.parenL&&this.unexpected(),this.finishNode(t,r)}.call(this):n(s.prototype.__proto__||Object.getPrototypeOf(s.prototype),"parseExprAtom",this).call(this,t)}}]),s}()};var r=e.DynamicImportKey="Import";Kt.tokTypes._import.startsExpr=!0}(ue={exports:{}},ue.exports),(de=ue.exports)&&de.__esModule&&Object.prototype.hasOwnProperty.call(de,"default")?de.default:de);const fe=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ge=Kt.tokTypes;function me(t){if(this.eat(ge.eq)){const e=this._inFieldValue;this._inFieldValue=!0,t.value=this.parseExpression(),this._inFieldValue=e}else t.value=null}function _e(){const t=this.startNode();return t.name=this.value,this.next(),this.finishNode(t,"PrivateName"),"never"==this.options.allowReserved&&this.checkUnreserved(t),t}const ye=new(0,Kt.TokenType)("privateName");function ve(t){var e="";t=t<0?-t<<1|1:t<<1;do{var i=31&t;(t>>=5)>0&&(i|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="[i]}while(t>0);return e}var xe=function(t,e,i){this.start=t,this.end=e,this.original=i,this.intro="",this.outro="",this.content=i,this.storeName=!1,this.edited=!1,Object.defineProperties(this,{previous:{writable:!0,value:null},next:{writable:!0,value:null}})};xe.prototype.appendLeft=function(t){this.outro+=t},xe.prototype.appendRight=function(t){this.intro=this.intro+t},xe.prototype.clone=function(){var t=new xe(this.start,this.end,this.original);return t.intro=this.intro,t.outro=this.outro,t.content=this.content,t.storeName=this.storeName,t.edited=this.edited,t},xe.prototype.contains=function(t){return this.start<t&&t<this.end},xe.prototype.eachNext=function(t){for(var e=this;e;)t(e),e=e.next},xe.prototype.eachPrevious=function(t){for(var e=this;e;)t(e),e=e.previous},xe.prototype.edit=function(t,e,i){return this.content=t,i||(this.intro="",this.outro=""),this.storeName=e,this.edited=!0,this},xe.prototype.prependLeft=function(t){this.outro=t+this.outro},xe.prototype.prependRight=function(t){this.intro=t+this.intro},xe.prototype.split=function(t){var e=t-this.start,i=this.original.slice(0,e),n=this.original.slice(e);this.original=i;var r=new xe(t,this.end,n);return r.outro=this.outro,this.outro="",this.end=t,this.edited?(r.edit("",!1),this.content=""):this.content=i,r.next=this.next,r.next&&(r.next.previous=r),r.previous=this,this.next=r,r},xe.prototype.toString=function(){return this.intro+this.content+this.outro},xe.prototype.trimEnd=function(t){if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;var e=this.content.replace(t,"");return e.length?(e!==this.content&&this.split(this.start+e.length).edit("",void 0,!0),!0):(this.edit("",void 0,!0),this.intro=this.intro.replace(t,""),!!this.intro.length||void 0)},xe.prototype.trimStart=function(t){if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;var e=this.content.replace(t,"");return e.length?(e!==this.content&&(this.split(this.end-e.length),this.edit("",void 0,!0)),!0):(this.edit("",void 0,!0),this.outro=this.outro.replace(t,""),!!this.outro.length||void 0)};var be=function(){throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")};"undefined"!=typeof window&&"function"==typeof window.btoa?be=function(t){return window.btoa(unescape(encodeURIComponent(t)))}:"function"==typeof Buffer&&(be=function(t){return Buffer.from(t,"utf-8").toString("base64")});var Ee=function(t){this.version=3,this.file=t.file,this.sources=t.sources,this.sourcesContent=t.sourcesContent,this.names=t.names,this.mappings=function(t){for(var e=0,i=0,n=0,r=0,s="",o=0;o<t.length;o++){var a=t[o];if(o>0&&(s+=";"),0!==a.length){for(var l=0,h=[],c=0,u=a;c<u.length;c++){var d=u[c],p=ve(d[0]-l);l=d[0],d.length>1&&(p+=ve(d[1]-e)+ve(d[2]-i)+ve(d[3]-n),e=d[1],i=d[2],n=d[3]),5===d.length&&(p+=ve(d[4]-r),r=d[4]),h.push(p)}s+=h.join(",")}}return s}(t.mappings)};function we(t){var e=t.split("\n"),i=e.filter((function(t){return/^\t+/.test(t)})),n=e.filter((function(t){return/^ {2,}/.test(t)}));if(0===i.length&&0===n.length)return null;if(i.length>=n.length)return"\t";var r=n.reduce((function(t,e){var i=/^ +/.exec(e)[0].length;return Math.min(i,t)}),1/0);return new Array(r+1).join(" ")}function Ce(t,e){var i=t.split(/[\/\\]/),n=e.split(/[\/\\]/);for(i.pop();i[0]===n[0];)i.shift(),n.shift();if(i.length)for(var r=i.length;r--;)i[r]="..";return i.concat(n).join("/")}Ee.prototype.toString=function(){return JSON.stringify(this)},Ee.prototype.toUrl=function(){return"data:application/json;charset=utf-8;base64,"+be(this.toString())};var Se=Object.prototype.toString;function Te(t){for(var e=t.split("\n"),i=[],n=0,r=0;n<e.length;n++)i.push(r),r+=e[n].length+1;return function(t){for(var e=0,n=i.length;e<n;){var r=e+n>>1;t<i[r]?n=r:e=r+1}var s=e-1;return{line:s,column:t-i[s]}}}var Re=function(t){this.hires=t,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null};Re.prototype.addEdit=function(t,e,i,n){if(e.length){var r=[this.generatedCodeColumn,t,i.line,i.column];n>=0&&r.push(n),this.rawSegments.push(r)}else this.pending&&this.rawSegments.push(this.pending);this.advance(e),this.pending=null},Re.prototype.addUneditedChunk=function(t,e,i,n,r){for(var s=e.start,o=!0;s<e.end;)(this.hires||o||r[s])&&this.rawSegments.push([this.generatedCodeColumn,t,n.line,n.column]),"\n"===i[s]?(n.line+=1,n.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0):(n.column+=1,this.generatedCodeColumn+=1),s+=1,o=!1;this.pending=[this.generatedCodeColumn,t,n.line,n.column]},Re.prototype.advance=function(t){if(t){var e=t.split("\n");if(e.length>1){for(var i=0;i<e.length-1;i++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=e[e.length-1].length}};var Me="\n",Ie={insertLeft:!1,insertRight:!1,storeName:!1},Pe=function(t,e){void 0===e&&(e={});var i=new xe(0,t.length,t);Object.defineProperties(this,{original:{writable:!0,value:t},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:i},lastChunk:{writable:!0,value:i},lastSearchedChunk:{writable:!0,value:i},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:e.filename},indentExclusionRanges:{writable:!0,value:e.indentExclusionRanges},sourcemapLocations:{writable:!0,value:{}},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:we(t)}}),this.byStart[0]=i,this.byEnd[t.length]=i};function Le(t){var e={};return Object.keys(t).forEach((function(i){"parent"!==i&&"program"!==i&&"keys"!==i&&"__wrapped"!==i&&(e[i]=Array.isArray(t[i])?t[i].map(Le):t[i]&&t[i].toJSON?t[i].toJSON():t[i])})),e}Pe.prototype.addSourcemapLocation=function(t){this.sourcemapLocations[t]=!0},Pe.prototype.append=function(t){if("string"!=typeof t)throw new TypeError("outro content must be a string");return this.outro+=t,this},Pe.prototype.appendLeft=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var i=this.byEnd[t];return i?i.appendLeft(e):this.intro+=e,this},Pe.prototype.appendRight=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var i=this.byStart[t];return i?i.appendRight(e):this.outro+=e,this},Pe.prototype.clone=function(){for(var t=new Pe(this.original,{filename:this.filename}),e=this.firstChunk,i=t.firstChunk=t.lastSearchedChunk=e.clone();e;){t.byStart[i.start]=i,t.byEnd[i.end]=i;var n=e.next,r=n&&n.clone();r&&(i.next=r,r.previous=i,i=r),e=n}return t.lastChunk=i,this.indentExclusionRanges&&(t.indentExclusionRanges=this.indentExclusionRanges.slice()),Object.keys(this.sourcemapLocations).forEach((function(e){t.sourcemapLocations[e]=!0})),t},Pe.prototype.generateDecodedMap=function(t){var e=this;t=t||{};var i=Object.keys(this.storedNames),n=new Re(t.hires),r=Te(this.original);return this.intro&&n.advance(this.intro),this.firstChunk.eachNext((function(t){var s=r(t.start);t.intro.length&&n.advance(t.intro),t.edited?n.addEdit(0,t.content,s,t.storeName?i.indexOf(t.original):-1):n.addUneditedChunk(0,t,e.original,s,e.sourcemapLocations),t.outro.length&&n.advance(t.outro)})),{file:t.file?t.file.split(/[\/\\]/).pop():null,sources:[t.source?Ce(t.file||"",t.source):null],sourcesContent:t.includeContent?[this.original]:[null],names:i,mappings:n.raw}},Pe.prototype.generateMap=function(t){return new Ee(this.generateDecodedMap(t))},Pe.prototype.getIndentString=function(){return null===this.indentStr?"\t":this.indentStr},Pe.prototype.indent=function(t,e){var i=/^[^\r\n]/gm;if("[object Object]"===Se.call(t)&&(e=t,t=void 0),""===(t=void 0!==t?t:this.indentStr||"\t"))return this;var n={};(e=e||{}).exclude&&("number"==typeof e.exclude[0]?[e.exclude]:e.exclude).forEach((function(t){for(var e=t[0];e<t[1];e+=1)n[e]=!0}));var r=!1!==e.indentStart,s=function(e){return r?""+t+e:(r=!0,e)};this.intro=this.intro.replace(i,s);for(var o=0,a=this.firstChunk;a;){var l=a.end;if(a.edited)n[o]||(a.content=a.content.replace(i,s),a.content.length&&(r="\n"===a.content[a.content.length-1]));else for(o=a.start;o<l;){if(!n[o]){var h=this.original[o];"\n"===h?r=!0:"\r"!==h&&r&&(r=!1,o===a.start?a.prependRight(t):(this._splitChunk(a,o),(a=a.next).prependRight(t)))}o+=1}o=a.end,a=a.next}return this.outro=this.outro.replace(i,s),this},Pe.prototype.insert=function(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")},Pe.prototype.insertLeft=function(t,e){return Ie.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),Ie.insertLeft=!0),this.appendLeft(t,e)},Pe.prototype.insertRight=function(t,e){return Ie.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),Ie.insertRight=!0),this.prependRight(t,e)},Pe.prototype.move=function(t,e,i){if(i>=t&&i<=e)throw new Error("Cannot move a selection inside itself");this._split(t),this._split(e),this._split(i);var n=this.byStart[t],r=this.byEnd[e],s=n.previous,o=r.next,a=this.byStart[i];if(!a&&r===this.lastChunk)return this;var l=a?a.previous:this.lastChunk;return s&&(s.next=o),o&&(o.previous=s),l&&(l.next=n),a&&(a.previous=r),n.previous||(this.firstChunk=r.next),r.next||(this.lastChunk=n.previous,this.lastChunk.next=null),n.previous=l,r.next=a||null,l||(this.firstChunk=n),a||(this.lastChunk=r),this},Pe.prototype.overwrite=function(t,e,i,n){if("string"!=typeof i)throw new TypeError("replacement content must be a string");for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;if(e>this.original.length)throw new Error("end is out of bounds");if(t===e)throw new Error("Cannot overwrite a zero-length range \u2013 use appendLeft or prependRight instead");this._split(t),this._split(e),!0===n&&(Ie.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),Ie.storeName=!0),n={storeName:!0});var r=void 0!==n&&n.storeName,s=void 0!==n&&n.contentOnly;if(r){var o=this.original.slice(t,e);this.storedNames[o]=!0}var a=this.byStart[t],l=this.byEnd[e];if(a){if(e>a.end&&a.next!==this.byStart[a.end])throw new Error("Cannot overwrite across a split point");if(a.edit(i,r,s),a!==l){for(var h=a.next;h!==l;)h.edit("",!1),h=h.next;h.edit("",!1)}}else{var c=new xe(t,e,"").edit(i,r);l.next=c,c.previous=l}return this},Pe.prototype.prepend=function(t){if("string"!=typeof t)throw new TypeError("outro content must be a string");return this.intro=t+this.intro,this},Pe.prototype.prependLeft=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var i=this.byEnd[t];return i?i.prependLeft(e):this.intro=e+this.intro,this},Pe.prototype.prependRight=function(t,e){if("string"!=typeof e)throw new TypeError("inserted content must be a string");this._split(t);var i=this.byStart[t];return i?i.prependRight(e):this.outro=e+this.outro,this},Pe.prototype.remove=function(t,e){for(;t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;if(t===e)return this;if(t<0||e>this.original.length)throw new Error("Character is out of bounds");if(t>e)throw new Error("end must be greater than start");this._split(t),this._split(e);for(var i=this.byStart[t];i;)i.intro="",i.outro="",i.edit(""),i=e>i.end?this.byStart[i.end]:null;return this},Pe.prototype.lastChar=function(){if(this.outro.length)return this.outro[this.outro.length-1];var t=this.lastChunk;do{if(t.outro.length)return t.outro[t.outro.length-1];if(t.content.length)return t.content[t.content.length-1];if(t.intro.length)return t.intro[t.intro.length-1]}while(t=t.previous);return this.intro.length?this.intro[this.intro.length-1]:""},Pe.prototype.lastLine=function(){var t=this.outro.lastIndexOf(Me);if(-1!==t)return this.outro.substr(t+1);var e=this.outro,i=this.lastChunk;do{if(i.outro.length>0){if(-1!==(t=i.outro.lastIndexOf(Me)))return i.outro.substr(t+1)+e;e=i.outro+e}if(i.content.length>0){if(-1!==(t=i.content.lastIndexOf(Me)))return i.content.substr(t+1)+e;e=i.content+e}if(i.intro.length>0){if(-1!==(t=i.intro.lastIndexOf(Me)))return i.intro.substr(t+1)+e;e=i.intro+e}}while(i=i.previous);return-1!==(t=this.intro.lastIndexOf(Me))?this.intro.substr(t+1)+e:this.intro+e},Pe.prototype.slice=function(t,e){for(void 0===t&&(t=0),void 0===e&&(e=this.original.length);t<0;)t+=this.original.length;for(;e<0;)e+=this.original.length;for(var i="",n=this.firstChunk;n&&(n.start>t||n.end<=t);){if(n.start<e&&n.end>=e)return i;n=n.next}if(n&&n.edited&&n.start!==t)throw new Error("Cannot use replaced character "+t+" as slice start anchor.");for(var r=n;n;){!n.intro||r===n&&n.start!==t||(i+=n.intro);var s=n.start<e&&n.end>=e;if(s&&n.edited&&n.end!==e)throw new Error("Cannot use replaced character "+e+" as slice end anchor.");if(i+=n.content.slice(r===n?t-n.start:0,s?n.content.length+e-n.end:n.content.length),!n.outro||s&&n.end!==e||(i+=n.outro),s)break;n=n.next}return i},Pe.prototype.snip=function(t,e){var i=this.clone();return i.remove(0,t),i.remove(e,i.original.length),i},Pe.prototype._split=function(t){if(!this.byStart[t]&&!this.byEnd[t])for(var e=this.lastSearchedChunk,i=t>e.end;e;){if(e.contains(t))return this._splitChunk(e,t);e=i?this.byStart[e.end]:this.byEnd[e.start]}},Pe.prototype._splitChunk=function(t,e){if(t.edited&&t.content.length){var i=Te(this.original)(e);throw new Error("Cannot split a chunk that has already been edited ("+i.line+":"+i.column+' \u2013 "'+t.original+'")')}var n=t.split(e);return this.byEnd[e]=t,this.byStart[e]=n,this.byEnd[n.end]=n,t===this.lastChunk&&(this.lastChunk=n),this.lastSearchedChunk=t,!0},Pe.prototype.toString=function(){for(var t=this.intro,e=this.firstChunk;e;)t+=e.toString(),e=e.next;return t+this.outro},Pe.prototype.isEmpty=function(){var t=this.firstChunk;do{if(t.intro.length&&t.intro.trim()||t.content.length&&t.content.trim()||t.outro.length&&t.outro.trim())return!1}while(t=t.next);return!0},Pe.prototype.length=function(){var t=this.firstChunk,e=0;do{e+=t.intro.length+t.content.length+t.outro.length}while(t=t.next);return e},Pe.prototype.trimLines=function(){return this.trim("[\\r\\n]")},Pe.prototype.trim=function(t){return this.trimStart(t).trimEnd(t)},Pe.prototype.trimEndAborted=function(t){var e=new RegExp((t||"\\s")+"+$");if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;var i=this.lastChunk;do{var n=i.end,r=i.trimEnd(e);if(i.end!==n&&(this.lastChunk===i&&(this.lastChunk=i.next),this.byEnd[i.end]=i,this.byStart[i.next.start]=i.next,this.byEnd[i.next.end]=i.next),r)return!0;i=i.previous}while(i);return!1},Pe.prototype.trimEnd=function(t){return this.trimEndAborted(t),this},Pe.prototype.trimStartAborted=function(t){var e=new RegExp("^"+(t||"\\s")+"+");if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;var i=this.firstChunk;do{var n=i.end,r=i.trimStart(e);if(i.end!==n&&(i===this.lastChunk&&(this.lastChunk=i.next),this.byEnd[i.end]=i,this.byStart[i.next.start]=i.next,this.byEnd[i.next.end]=i.next),r)return!0;i=i.next}while(i);return!1},Pe.prototype.trimStart=function(t){return this.trimStartAborted(t),this};var Ae=function(){};function ke(t){var e=[];return Oe[t.type](e,t),e}Ae.prototype.ancestor=function(t){for(var e=this;t--;)if(!(e=e.parent))return null;return e},Ae.prototype.contains=function(t){for(;t;){if(t===this)return!0;t=t.parent}return!1},Ae.prototype.findLexicalBoundary=function(){return this.parent.findLexicalBoundary()},Ae.prototype.findNearest=function(t){return"string"==typeof t&&(t=new RegExp("^"+t+"$")),t.test(this.type)?this:this.parent.findNearest(t)},Ae.prototype.unparenthesizedParent=function(){for(var t=this.parent;t&&"ParenthesizedExpression"===t.type;)t=t.parent;return t},Ae.prototype.unparenthesize=function(){for(var t=this;"ParenthesizedExpression"===t.type;)t=t.expression;return t},Ae.prototype.findScope=function(t){return this.parent.findScope(t)},Ae.prototype.getIndentation=function(){return this.parent.getIndentation()},Ae.prototype.initialise=function(t){for(var e=0,i=this.keys;e<i.length;e+=1){var n=this[i[e]];Array.isArray(n)?n.forEach((function(e){return e&&e.initialise(t)})):n&&"object"==typeof n&&n.initialise(t)}},Ae.prototype.toJSON=function(){return Le(this)},Ae.prototype.toString=function(){return this.program.magicString.original.slice(this.start,this.end)},Ae.prototype.transpile=function(t,e){for(var i=0,n=this.keys;i<n.length;i+=1){var r=this[n[i]];Array.isArray(r)?r.forEach((function(i){return i&&i.transpile(t,e)})):r&&"object"==typeof r&&r.transpile(t,e)}};var Oe={Identifier:function(t,e){t.push(e)},ObjectPattern:function(t,e){for(var i=0,n=e.properties;i<n.length;i+=1){var r=n[i];Oe[r.type](t,r)}},Property:function(t,e){Oe[e.value.type](t,e.value)},ArrayPattern:function(t,e){for(var i=0,n=e.elements;i<n.length;i+=1){var r=n[i];r&&Oe[r.type](t,r)}},RestElement:function(t,e){Oe[e.argument.type](t,e.argument)},AssignmentPattern:function(t,e){Oe[e.left.type](t,e.left)}},Ne=Object.create(null);function Fe(t){this.parent=(t=t||{}).parent,this.isBlockScope=!!t.block,this.createDeclarationCallback=t.declare;for(var e=this;e.isBlockScope;)e=e.parent;this.functionScope=e,this.identifiers=[],this.declarations=Object.create(null),this.references=Object.create(null),this.blockScopedDeclarations=this.isBlockScope?null:Object.create(null),this.aliases=Object.create(null)}function De(t,e){for(var i="";e--;)i+=t;return i}function Ze(t,e,i){void 0===i&&(i=1);var n=Math.max(e.line-5,0),r=e.line,s=String(r).length,o=t.split("\n").slice(n,r),a=o[o.length-1].slice(0,e.column).replace(/\t/g,"  ").length;return o.map((function(t,e){return i=s,(r=String(e+n+1))+De(" ",i-r.length)+" : "+t.replace(/\t/g,"  ");var i,r})).join("\n")+"\n"+De(" ",s+3+a)+De("^",i)}"do if in for let new try var case else enum eval null this true void with await break catch class const false super throw while yield delete export import public return static switch typeof default extends finally package private continue debugger function arguments interface protected implements instanceof".split(" ").forEach((function(t){return Ne[t]=!0})),Fe.prototype={addDeclaration:function(t,e){for(var i=0,n=ke(t);i<n.length;i+=1){var r=n[i],s=r.name,o={name:s,node:r,kind:e,instances:[]};this.declarations[s]=o,this.isBlockScope&&(this.functionScope.blockScopedDeclarations[s]||(this.functionScope.blockScopedDeclarations[s]=[]),this.functionScope.blockScopedDeclarations[s].push(o))}},addReference:function(t){this.consolidated?this.consolidateReference(t):this.identifiers.push(t)},consolidate:function(){for(var t=0;t<this.identifiers.length;t+=1)this.consolidateReference(this.identifiers[t]);this.consolidated=!0},consolidateReference:function(t){var e=this.declarations[t.name];e?e.instances.push(t):(this.references[t.name]=!0,this.parent&&this.parent.addReference(t))},contains:function(t){return this.declarations[t]||!!this.parent&&this.parent.contains(t)},createIdentifier:function(t){"number"==typeof t&&(t=t.toString());for(var e=t=t.replace(/\s/g,"").replace(/\[([^\]]+)\]/g,"_$1").replace(/[^a-zA-Z0-9_$]/g,"_").replace(/_{2,}/,"_"),i=1;this.declarations[e]||this.references[e]||this.aliases[e]||e in Ne;)e=t+"$"+i++;return this.aliases[e]=!0,e},createDeclaration:function(t){var e=this.createIdentifier(t);return this.createDeclarationCallback(e),e},findDeclaration:function(t){return this.declarations[t]||this.parent&&this.parent.findDeclaration(t)},resolveName:function(t){var e=this.findDeclaration(t);return e?e.name:t}};var je=function(t){function e(e,i){if(t.call(this,e),this.name="CompileError",i){var n=i.program.magicString.original,r=function(t,e){var i,n=t.split("\n"),r=n.length,s=0;for(i=0;i<r;i+=1){var o=s+n[i].length+1;if(o>e)return{line:i+1,column:e-s,char:i};s=o}throw new Error("Could not determine location of character")}(n,i.start);this.message=e+" ("+r.line+":"+r.column+")",this.stack=(new t).stack.replace(new RegExp(".+new "+this.name+".+\\n","m"),""),this.loc=r,this.snippet=Ze(n,r,i.end-i.start)}}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.toString=function(){return this.name+": "+this.message+"\n"+this.snippet},e.missingTransform=function(t,i,n,r){throw void 0===r&&(r=null),new e("Transforming "+t+" is not "+(r?"fully supported":"implemented")+". Use `transforms: { "+i+": false }` to skip transformation and disable this error"+(r?", or `transforms: { "+r+": true }` if you know what you're doing":"")+".",n)},e}(Error);function ze(t,e){for(var i=0;i<t.length;i+=1)if(e(t[i],i))return i;return-1}var Ge={Identifier:Ue,AssignmentPattern:function(t,e,i,n,r,s,o){var a="Identifier"===n.left.type,l=a?n.left.name:r;s||o.push((function(e,i,r){t.prependRight(n.left.end,i+"if ( "+l+" === void 0 ) "+l),t.move(n.left.end,n.right.end,e),t.appendLeft(n.right.end,r)})),a||Be(t,e,i,n.left,r,s,o)},ArrayPattern:function(t,e,i,n,r,s,o){var a=n.start;n.elements.forEach((function(n,l){n&&("RestElement"===n.type?qe(t,e,i,a,n.argument,r+".slice("+l+")",s,o):qe(t,e,i,a,n,r+"["+l+"]",s,o),a=n.end)})),t.remove(a,n.end)},ObjectPattern:Ve};function Be(t,e,i,n,r,s,o){Ge[n.type](t,e,i,n,r,s,o)}function Ue(t,e,i,n,r,s,o){o.push((function(e,o,a){t.overwrite(n.start,n.end,(s?o:o+"var ")+i(n)+" = "+r+a),t.move(n.start,n.end,e)}))}function Ve(t,e,i,n,r,s,o){var a=this,l=n.start,h=[];n.properties.forEach((function(n){var c,u;if("Property"===n.type)if(u=n.value,n.computed||"Identifier"!==n.key.type)if(n.computed||"Literal"!==n.key.type){var d=t.slice(n.key.start,n.key.end);c=r+"["+d+"]",h.push("String("+d+")")}else c=r+"["+n.key.raw+"]",h.push(JSON.stringify(String(n.key.value)));else c=r+"."+n.key.name,h.push('"'+n.key.name+'"');else{if("RestElement"!==n.type)throw new je(a,"Unexpected node of type "+n.type+" in object pattern");u=n.argument,c=e("rest"),o.push((function(e,i,o){var a=n.program.getObjectWithoutPropertiesHelper(t);t.overwrite(n.start,l=n.argument.start,(s?i:i+"var ")+c+" = "+a+"( "+r+", ["+h.join(", ")+"] )"+o),t.move(n.start,l,e)}))}qe(t,e,i,l,u,c,s,o),l=n.end})),t.remove(l,n.end)}function qe(t,e,i,n,r,s,o,a){switch(r.type){case"Identifier":t.remove(n,r.start),Ue(t,0,i,r,s,o,a);break;case"MemberExpression":t.remove(n,r.start),function(t,e,i,n,r,s,o){o.push((function(e,i,s){t.prependRight(n.start,i),t.appendLeft(n.end," = "+r+s),t.move(n.start,n.end,e)}))}(t,0,0,r,s,0,a);break;case"AssignmentPattern":var l,h="Identifier"===r.left.type;l=h?i(r.left):e(s),a.push((function(e,i,n){o?(t.prependRight(r.right.start,l+" = "+s+", "+l+" = "+l+" === void 0 ? "),t.appendLeft(r.right.end," : "+l+n)):(t.prependRight(r.right.start,i+"var "+l+" = "+s+"; if ( "+l+" === void 0 ) "+l+" = "),t.appendLeft(r.right.end,n)),t.move(r.right.start,r.right.end,e)})),h?t.remove(n,r.right.start):(t.remove(n,r.left.start),t.remove(r.left.end,r.right.start),qe(t,e,i,n,r.left,l,o,a));break;case"ObjectPattern":t.remove(n,n=r.start);var c=s;r.properties.length>1&&(c=e(s),a.push((function(e,i,a){t.prependRight(r.start,(o?"":i+"var ")+c+" = "),t.overwrite(r.start,n=r.start+1,s),t.appendLeft(n,a),t.overwrite(r.start,n=r.start+1,(o?"":i+"var ")+c+" = "+s+a),t.move(r.start,n,e)}))),Ve(t,e,i,r,c,o,a);break;case"ArrayPattern":if(t.remove(n,n=r.start),r.elements.filter(Boolean).length>1){var u=e(s);a.push((function(e,i,a){t.prependRight(r.start,(o?"":i+"var ")+u+" = "),t.overwrite(r.start,n=r.start+1,s,{contentOnly:!0}),t.appendLeft(n,a),t.move(r.start,n,e)})),r.elements.forEach((function(r,s){r&&("RestElement"===r.type?qe(t,e,i,n,r.argument,u+".slice("+s+")",o,a):qe(t,e,i,n,r,u+"["+s+"]",o,a),n=r.end)}))}else{var d=ze(r.elements,Boolean),p=r.elements[d];"RestElement"===p.type?qe(t,e,i,n,p.argument,s+".slice("+d+")",o,a):qe(t,e,i,n,p,s+"["+d+"]",o,a),n=p.end}t.remove(n,r.end);break;default:throw new Error("Unexpected node type in destructuring ("+r.type+")")}}var We=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.createScope=function(){var t=this;this.parentIsFunction=/Function/.test(this.parent.type),this.isFunctionBlock=this.parentIsFunction||"Root"===this.parent.type,this.scope=new Fe({block:!this.isFunctionBlock,parent:this.parent.findScope(!1),declare:function(e){return t.createdDeclarations.push(e)}}),this.parentIsFunction&&this.parent.params.forEach((function(e){t.scope.addDeclaration(e,"param")}))},e.prototype.initialise=function(t){this.thisAlias=null,this.argumentsAlias=null,this.defaultParameters=[],this.createdDeclarations=[],this.scope||this.createScope(),this.body.forEach((function(e){return e.initialise(t)})),this.scope.consolidate()},e.prototype.findLexicalBoundary=function(){return"Program"===this.type||/^Function/.test(this.parent.type)?this:this.parent.findLexicalBoundary()},e.prototype.findScope=function(t){return t&&!this.isFunctionBlock?this.parent.findScope(t):this.scope},e.prototype.getArgumentsAlias=function(){return this.argumentsAlias||(this.argumentsAlias=this.scope.createIdentifier("arguments")),this.argumentsAlias},e.prototype.getArgumentsArrayAlias=function(){return this.argumentsArrayAlias||(this.argumentsArrayAlias=this.scope.createIdentifier("argsArray")),this.argumentsArrayAlias},e.prototype.getThisAlias=function(){return this.thisAlias||(this.thisAlias=this.scope.createIdentifier("this")),this.thisAlias},e.prototype.getIndentation=function(){if(void 0===this.indentation){for(var t=this.program.magicString.original,e=this.synthetic||!this.body.length,i=e?this.start:this.body[0].start;i&&"\n"!==t[i];)i-=1;for(this.indentation="";;){var n=t[i+=1];if(" "!==n&&"\t"!==n)break;this.indentation+=n}for(var r=this.program.magicString.getIndentString(),s=this.parent;s;)"constructor"!==s.kind||s.parent.parent.superClass||(this.indentation=this.indentation.replace(r,"")),s=s.parent;e&&(this.indentation+=r)}return this.indentation},e.prototype.transpile=function(e,i){var n,r,s=this,o=this.getIndentation(),a=[];if(this.argumentsAlias&&a.push((function(t,i,n){e.appendLeft(t,i+"var "+s.argumentsAlias+" = arguments"+n)})),this.thisAlias&&a.push((function(t,i,n){e.appendLeft(t,i+"var "+s.thisAlias+" = this"+n)})),this.argumentsArrayAlias&&a.push((function(t,i,n){var r=s.scope.createIdentifier("i");e.appendLeft(t,i+"var "+r+" = arguments.length, "+s.argumentsArrayAlias+" = Array("+r+");\n"+o+"while ( "+r+"-- ) "+s.argumentsArrayAlias+"["+r+"] = arguments["+r+"]"+n)})),/Function/.test(this.parent.type)?this.transpileParameters(this.parent.params,e,i,o,a):"CatchClause"===this.parent.type&&this.transpileParameters([this.parent.param],e,i,o,a),i.letConst&&this.isFunctionBlock&&this.transpileBlockScopedIdentifiers(e),t.prototype.transpile.call(this,e,i),this.createdDeclarations.length&&a.push((function(t,i,n){var r=i+"var "+s.createdDeclarations.join(", ")+n;e.appendLeft(t,r)})),this.synthetic)if("ArrowFunctionExpression"===this.parent.type){var l=this.body[0];a.length?(e.appendLeft(this.start,"{").prependRight(this.end,this.parent.getIndentation()+"}"),e.prependRight(l.start,"\n"+o+"return "),e.appendLeft(l.end,";\n")):i.arrow&&(e.prependRight(l.start,"{ return "),e.appendLeft(l.end,"; }"))}else a.length&&e.prependRight(this.start,"{").appendLeft(this.end,"}");n=(r=this.body[0])&&"ExpressionStatement"===r.type&&"Literal"===r.expression.type&&"use strict"===r.expression.value?this.body[0].end:this.synthetic||"Root"===this.parent.type?this.start:this.start+1;var h="\n"+o,c=";";a.forEach((function(t,e){e===a.length-1&&(c=";\n"),t(n,h,c)}))},e.prototype.transpileParameters=function(t,e,i,n,r){var s=this;t.forEach((function(o){if("AssignmentPattern"===o.type&&"Identifier"===o.left.type)i.defaultParameter&&r.push((function(t,i,n){e.prependRight(o.left.end,i+"if ( "+o.left.name+" === void 0 ) "+o.left.name).move(o.left.end,o.right.end,t).appendLeft(o.right.end,n)}));else if("RestElement"===o.type)i.spreadRest&&r.push((function(i,r,a){var l=t[t.length-2];if(l)e.remove(l?l.end:o.start,o.end);else{for(var h=o.start,c=o.end;/\s/.test(e.original[h-1]);)h-=1;for(;/\s/.test(e.original[c]);)c+=1;e.remove(h,c)}var u=o.argument.name,d=s.scope.createIdentifier("len"),p=t.length-1;e.prependRight(i,p?r+"var "+u+" = [], "+d+" = arguments.length - "+p+";\n"+n+"while ( "+d+"-- > 0 ) "+u+"[ "+d+" ] = arguments[ "+d+" + "+p+" ]"+a:r+"var "+u+" = [], "+d+" = arguments.length;\n"+n+"while ( "+d+"-- ) "+u+"[ "+d+" ] = arguments[ "+d+" ]"+a)}));else if("Identifier"!==o.type&&i.parameterDestructuring){var a=s.scope.createIdentifier("ref");Be(e,(function(t){return s.scope.createIdentifier(t)}),(function(t){return s.scope.resolveName(t.name)}),o,a,!1,r),e.prependRight(o.start,a)}}))},e.prototype.transpileBlockScopedIdentifiers=function(t){var e=this;Object.keys(this.scope.blockScopedDeclarations).forEach((function(i){for(var n=0,r=e.scope.blockScopedDeclarations[i];n<r.length;n+=1){var s=r[n],o=!1;if("for.let"===s.kind){var a=s.node.findNearest("ForStatement");if(a.shouldRewriteAsFunction){var l=e.scope.createIdentifier(i),h=a.reassigned[i]?e.scope.createIdentifier(i):i;s.name=l,t.overwrite(s.node.start,s.node.end,l,{storeName:!0}),a.aliases[i]={outer:l,inner:h};for(var c=0,u=s.instances;c<u.length;c+=1){var d=u[c],p=a.body.contains(d)?h:l;i!==p&&t.overwrite(d.start,d.end,p,{storeName:!0})}o=!0}}if(!o){var f=e.scope.createIdentifier(i);if(i!==f){s.name=f,t.overwrite(s.node.start,s.node.end,f,{storeName:!0});for(var g=0,m=s.instances;g<m.length;g+=1){var _=m[g];_.rewritten=!0,t.overwrite(_.start,_.end,f,{storeName:!0})}}}}}))},e}(Ae);function Xe(t){return"Identifier"===t.type&&"arguments"===t.name}function He(t,e,i){for(var n=i.length;n--;){var r=i[n];if(r&&"SpreadElement"===r.type){var s=r.argument;if("ArrayExpression"===s.type){var o=s.elements;if(!o.some((function(t){return null===t}))){var a=n===i.length-1;0===o.length?t.remove(a&&0!==n?i[n-1].end:r.start,a?e.end-1:i[n+1].start):(t.remove(r.start,o[0].start),t.remove(o[o.length-1].end,a?e.end-1:r.end)),i.splice.apply(i,[n,1].concat(o)),n+=o.length}}}}}function Ke(t){switch(t.type){case"ArrayExpression":case"CallExpression":case"Identifier":case"ParenthesizedExpression":case"ThisExpression":return!1;default:return!0}}function Ye(t,e,i,n,r){for(var s=e.length,o=-1;s--;){var a=e[s];a&&"SpreadElement"===a.type&&(Xe(a.argument)&&t.overwrite(a.argument.start,a.argument.end,n),o=s)}if(-1===o)return!1;if(r){for(s=0;s<e.length;s+=1){var l=e[s];"SpreadElement"===l.type?t.remove(l.start,l.argument.start):(t.prependRight(l.start,"["),t.prependRight(l.end,"]"))}return!0}var h=e[o],c=e[o-1];if(c)t.overwrite(c.end,h.start," ].concat( ");else{var u;if(i!==h.start)(u=Ke(h.argument))?t.overwrite(i,h.start,"( "):t.remove(i,h.start);else{if("CallExpression"!==h.parent.type)throw new je("Unsupported spread construct, please raise an issue at https://github.com/bublejs/buble/issues",h);u=Ke(h.argument)}t.overwrite(h.end,e[1].start,u?" ).concat( ":".concat( ")}for(s=o;s<e.length;s+=1)(h=e[s])&&("SpreadElement"===h.type?t.remove(h.start,h.argument.start):(t.appendLeft(h.start,"["),t.appendLeft(h.end,"]")));return!0}var $e=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.elements.length)for(var i=this.findLexicalBoundary(),n=this.elements.length;n--;){var r=this.elements[n];r&&"SpreadElement"===r.type&&Xe(r.argument)&&(this.argumentsArrayAlias=i.getArgumentsArrayAlias())}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(t.prototype.transpile.call(this,e,i),i.spreadRest){if(He(e,this,this.elements),this.elements.length){var n=this.elements[this.elements.length-1];n&&/\s*,/.test(e.original.slice(n.end,this.end))&&e.overwrite(n.end,this.end-1," ")}if(1===this.elements.length){var r=this.elements[0];r&&"SpreadElement"===r.type&&(Xe(r.argument)?e.overwrite(this.start,this.end,"[].concat( "+this.argumentsArrayAlias+" )"):(e.overwrite(this.start,r.argument.start,"[].concat( "),e.overwrite(r.end,this.end," )")))}else Ye(e,this.elements,this.start,this.argumentsArrayAlias)&&e.overwrite(this.end-1,this.end,")")}},e}(Ae);function Je(t,e){for(;")"!==t.original[e];){if(","===t.original[e])return void t.remove(e,e+1);"/"===t.original[e]&&(e="/"===t.original[e+1]?t.original.indexOf("\n",e):t.original.indexOf("*/",e)+1),e+=1}}var Qe=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.async&&e.asyncAwait&&je.missingTransform("async arrow functions","asyncAwait",this),this.body.createScope(),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){for(var n=this.start,r=(this.body||this.params[0]).start-1;"("!==e.original[n]&&n<r;)++n;"("!==e.original[n]&&(n=-1);var s=-1===n;if(i.arrow||this.needsArguments(i)){for(var o=this.body.start;"="!==e.original[o];)o-=1;e.remove(o,this.body.start),t.prototype.transpile.call(this,e,i),s&&(e.prependRight(this.params[0].start,"("),e.appendLeft(this.params[0].end,")"));var a,l=this.parent&&"ExpressionStatement"===this.parent.type,h=l?"!":"";this.async&&(h+="async "),h+="function",l||(h+=" "),(a=s?this.params[0].start:n)>this.start?e.overwrite(this.start,a,h):e.prependRight(this.start,h)}else t.prototype.transpile.call(this,e,i);i.trailingFunctionCommas&&this.params.length&&!s&&Je(e,this.params[this.params.length-1].end)},e.prototype.needsArguments=function(t){return t.spreadRest&&this.params.filter((function(t){return"RestElement"===t.type})).length>0},e}(Ae);function ti(t,e){var i=e.findDeclaration(t.name);if(i&&"const"===i.kind)throw new je(t.name+" is read-only",t)}var ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if("Identifier"===this.left.type){var i=this.findScope(!1).findDeclaration(this.left.name),n=i&&i.node.ancestor(3);n&&"ForStatement"===n.type&&n.body.contains(this)&&(n.reassigned[this.left.name]=!0)}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){"Identifier"===this.left.type&&ti(this.left,this.findScope(!1)),"**="===this.operator&&i.exponentiation?this.transpileExponentiation(e,i):/Pattern/.test(this.left.type)&&i.destructuring&&this.transpileDestructuring(e),t.prototype.transpile.call(this,e,i)},e.prototype.transpileDestructuring=function(t){var e=this,i=this.findScope(!0),n=this.findScope(!1),r=i.createDeclaration("assign");t.appendRight(this.left.end,"("+r),t.appendLeft(this.right.end,", ");var s=[];Be(t,(function(t){return i.createDeclaration(t)}),(function(t){var e=n.resolveName(t.name);return ti(t,n),e}),this.left,r,!0,s);var o=", ";s.forEach((function(t,i){i===s.length-1&&(o=""),t(e.end,"",o)})),"ExpressionStatement"===this.unparenthesizedParent().type?t.prependRight(this.end,")"):t.appendRight(this.end,", "+r+")")},e.prototype.transpileExponentiation=function(t){for(var e,i=this.findScope(!1),n=this.left.end;"*"!==t.original[n];)n+=1;t.remove(n,n+2);var r=this.left.unparenthesize();if("Identifier"===r.type)e=i.resolveName(r.name);else if("MemberExpression"===r.type){var s,o,a=!1,l=!1,h=this.findNearest(/(?:Statement|Declaration)$/),c=h.getIndentation();"Identifier"===r.property.type?o=r.computed?i.resolveName(r.property.name):r.property.name:(o=i.createDeclaration("property"),l=!0),"Identifier"===r.object.type?s=i.resolveName(r.object.name):(s=i.createDeclaration("object"),a=!0),r.start===h.start?a&&l?(t.prependRight(h.start,s+" = "),t.overwrite(r.object.end,r.property.start,";\n"+c+o+" = "),t.overwrite(r.property.end,r.end,";\n"+c+s+"["+o+"]")):a?(t.prependRight(h.start,s+" = "),t.appendLeft(r.object.end,";\n"+c),t.appendLeft(r.object.end,s)):l&&(t.prependRight(r.property.start,o+" = "),t.appendLeft(r.property.end,";\n"+c),t.move(r.property.start,r.property.end,this.start),t.appendLeft(r.object.end,"["+o+"]"),t.remove(r.object.end,r.property.start),t.remove(r.property.end,r.end)):(a&&l?(t.prependRight(r.start,"( "+s+" = "),t.overwrite(r.object.end,r.property.start,", "+o+" = "),t.overwrite(r.property.end,r.end,", "+s+"["+o+"]")):a?(t.prependRight(r.start,"( "+s+" = "),t.appendLeft(r.object.end,", "+s)):l&&(t.prependRight(r.property.start,"( "+o+" = "),t.appendLeft(r.property.end,", "),t.move(r.property.start,r.property.end,r.start),t.overwrite(r.object.end,r.property.start,"["+o+"]"),t.remove(r.property.end,r.end)),l&&t.appendLeft(this.end," )")),e=s+(r.computed||l?"["+o+"]":"."+o)}t.prependRight(this.right.start,"Math.pow( "+e+", "),t.appendLeft(this.right.end," )")},e}(Ae),ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.asyncAwait&&je.missingTransform("await","asyncAwait",this),t.prototype.initialise.call(this,e)},e}(Ae),ni=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){"**"===this.operator&&i.exponentiation&&(e.prependRight(this.start,"Math.pow( "),e.overwrite(this.left.end,this.right.start,", "),e.appendLeft(this.end," )")),t.prototype.transpile.call(this,e,i)},e}(Ae),ri=/(?:For(?:In|Of)?|While)Statement/,si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(){var t=this.findNearest(ri),e=this.findNearest("SwitchCase");t&&(!e||t.depth>e.depth)&&(t.canBreak=!0,this.loop=t)},e.prototype.transpile=function(t){if(this.loop&&this.loop.shouldRewriteAsFunction){if(this.label)throw new je("Labels are not currently supported in a loop with locally-scoped variables",this);t.overwrite(this.start,this.start+5,"return 'break'")}},e}(Ae),oi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.arguments.length>1)for(var i=this.findLexicalBoundary(),n=this.arguments.length;n--;){var r=this.arguments[n];"SpreadElement"===r.type&&Xe(r.argument)&&(this.argumentsArrayAlias=i.getArgumentsArrayAlias())}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(i.spreadRest&&this.arguments.length&&He(e,this,this.arguments),i.spreadRest&&this.arguments.length){var n,r=!1,s=this.arguments[0];if(1===this.arguments.length?"SpreadElement"===s.type&&(e.remove(s.start,s.argument.start),r=!0):r=Ye(e,this.arguments,s.start,this.argumentsArrayAlias),r){var o=null;if("Super"===this.callee.type?o=this.callee:"MemberExpression"===this.callee.type&&"Super"===this.callee.object.type&&(o=this.callee.object),o||"MemberExpression"!==this.callee.type)n="void 0";else if("Identifier"===this.callee.object.type)n=this.callee.object.name;else{n=this.findScope(!0).createDeclaration("ref");var a=this.callee.object;e.prependRight(a.start,"("+n+" = "),e.appendLeft(a.end,")")}e.appendLeft(this.callee.end,".apply"),o?(o.noCall=!0,this.arguments.length>1&&("SpreadElement"===s.type?Ke(s.argument)&&e.prependRight(s.start,"( "):e.prependRight(s.start,"[ "),e.appendLeft(this.arguments[this.arguments.length-1].end," )"))):1===this.arguments.length?e.prependRight(s.start,n+", "):("SpreadElement"===s.type?Ke(s.argument)?e.appendLeft(s.start,n+", ( "):e.appendLeft(s.start,n+", "):e.appendLeft(s.start,n+", [ "),e.appendLeft(this.arguments[this.arguments.length-1].end," )"))}}i.trailingFunctionCommas&&this.arguments.length&&Je(e,this.arguments[this.arguments.length-1].end),t.prototype.transpile.call(this,e,i)},e}(Ae),ai=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i,n,r){var s=this;if(i.classes){var o=this.parent.name,a=e.getIndentString(),l=this.getIndentation()+(n?a:""),h=l+a,c=ze(this.body,(function(t){return"constructor"===t.kind})),u=this.body[c],d="",p="";if(this.body.length?(e.remove(this.start,this.body[0].start),e.remove(this.body[this.body.length-1].end,this.end)):e.remove(this.start,this.end),u){u.value.body.isConstructorBody=!0;var f=this.body[c+1];c>0&&(e.remove(this.body[c-1].end,u.start),e.move(u.start,f?f.start:this.end-1,this.body[0].start)),n||e.appendLeft(u.end,";")}var g=[];this.body.forEach((function(t){if("FieldDefinition"===t.type&&(g.push(t.computed?"this"+e.slice(t.start,t.end)+";":"this."+e.slice(t.start,t.end)+";"),e.remove(t.start,t.end),""!==e.byStart[t.end].content)){for(var i=0;i<e.byStart[t.end].content.length&&-1===e.byStart[t.end].content.slice(0,i).indexOf(";");i++);i>0&&e.remove(t.end,t.end+i)}}));var m=!1!==this.program.options.namedFunctionExpressions,_=m||this.parent.superClass||"ClassDeclaration"!==this.parent.type;if(this.parent.superClass){var y="if ( "+r+" ) "+o+".__proto__ = "+r+";\n"+l+o+".prototype = Object.create( "+r+" && "+r+".prototype );\n"+l+o+".prototype.constructor = "+o+";";d+=u?"\n\n"+l+y:(y="function "+o+" () {"+(g.length?"\n"+h+g.join("\n"+h)+"\n"+h:"")+(r?"\n"+h+r+".apply(this, arguments);\n"+l+"}":"}")+(n?"":";")+(this.body.length?"\n\n"+l:"")+y)+"\n\n"+l}else if(!u){var v="function "+(_?o+" ":"")+"() {"+(g.length?"\n"+h+g.join("\n"+h)+"\n"+l:"")+"}";"ClassDeclaration"===this.parent.type&&(v+=";"),this.body.length&&(v+="\n\n"+l),d+=v}u&&g.length&&e.appendLeft(u.value.body.start+1,"\n"+h+g.join("\n"+h));var x,b,E=this.findScope(!1),w=[],C=[];if(this.body.forEach((function(t,n){if("get"!==t.kind&&"set"!==t.kind||!i.getterSetter||je.missingTransform("getters and setters","getterSetter",t),"FieldDefinition"!==t.type)if("constructor"!==t.kind){t.static&&e.remove(t.start,t.start+(" "==e.original[t.start+6]?7:6));var r,a="method"!==t.kind,h=t.key.name;(Ne[h]||t.value.body.scope.references[h])&&(h=E.createIdentifier(h));var u=!1;if(t.computed||"Literal"!==t.key.type||(u=!0,t.computed=!0),a){if(t.computed)throw new Error("Computed accessor properties are not currently supported");e.remove(t.start,t.key.start),t.static?(~C.indexOf(t.key.name)||C.push(t.key.name),b||(b=E.createIdentifier("staticAccessors")),r=""+b):(~w.indexOf(t.key.name)||w.push(t.key.name),x||(x=E.createIdentifier("prototypeAccessors")),r=""+x)}else r=t.static?""+o:o+".prototype";t.computed||(r+="."),(c>0&&n===c+1||0===n&&c===s.body.length-1)&&(r="\n\n"+l+r);var d=t.key.end;if(t.computed)if(u)e.prependRight(t.key.start,"["),e.appendLeft(t.key.end,"]");else{for(;"]"!==e.original[d];)d+=1;d+=1}var p=(a?"."+t.kind:"")+" = "+(t.value.async?"async ":"")+"function"+(t.value.generator?"* ":" ")+(t.computed||a||!m?"":h+" ");e.remove(d,t.value.start),e.prependRight(t.value.start,p),e.appendLeft(t.end,";"),t.value.generator&&e.remove(t.start,t.key.start);var f=t.key.start;if(t.computed&&!u)for(;"["!=e.original[f];)--f;t.start<f?e.overwrite(t.start,f,r):e.prependRight(t.start,r)}else e.overwrite(t.key.start,t.key.end,"function"+(_?" "+o:""))})),w.length||C.length){var S=[],T=[];w.length&&(S.push("var "+x+" = { "+w.map((function(t){return t+": { configurable: true }"})).join(",")+" };"),T.push("Object.defineProperties( "+o+".prototype, "+x+" );")),C.length&&(S.push("var "+b+" = { "+C.map((function(t){return t+": { configurable: true }"})).join(",")+" };"),T.push("Object.defineProperties( "+o+", "+b+" );")),u&&(d+="\n\n"+l),d+=S.join("\n"+l),u||(d+="\n\n"+l),p+="\n\n"+l+T.join("\n"+l)}u?e.appendLeft(u.end,d):e.prependRight(this.start,d),e.appendLeft(this.end,p)}t.prototype.transpile.call(this,e,i)},e}(Ae),li=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.id?(this.name=this.id.name,this.findScope(!0).addDeclaration(this.id,"class")):this.name=this.findScope(!0).createIdentifier("defaultExport"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(e.classes){this.superClass||function(t,e){var i=t.start,n=t.end,r=e.getIndentString(),s=r.length,o=i-s;t.program.indentExclusions[o]||e.original.slice(o,i)!==r||e.remove(o,i);for(var a,l=new RegExp(r+"\\S","g"),h=e.original.slice(i,n);a=l.exec(h);){var c=i+a.index;t.program.indentExclusions[c]||e.remove(c,c+s)}}(this.body,t);var i=this.superClass&&(this.superClass.name||"superclass"),n=this.getIndentation(),r=n+t.getIndentString(),s="ExportDefaultDeclaration"===this.parent.type;s&&t.remove(this.parent.start,this.start);var o=this.start;this.id?(t.overwrite(o,this.id.start,"var "),o=this.id.end):t.prependLeft(o,"var "+this.name),this.superClass?this.superClass.end===this.body.start?(t.remove(o,this.superClass.start),t.appendLeft(o," = /*@__PURE__*/(function ("+i+") {\n"+r)):(t.overwrite(o,this.superClass.start," = "),t.overwrite(this.superClass.end,this.body.start,"/*@__PURE__*/(function ("+i+") {\n"+r)):o===this.body.start?t.appendLeft(o," = "):t.overwrite(o,this.body.start," = "),this.body.transpile(t,e,!!this.superClass,i);var a=s?"\n\n"+n+"export default "+this.name+";":"";this.superClass?(t.appendLeft(this.end,"\n\n"+r+"return "+this.name+";\n"+n+"}("),t.move(this.superClass.start,this.superClass.end,this.end),t.prependRight(this.end,"));"+a)):a&&t.prependRight(this.end,a)}else this.body.transpile(t,e,!1,null)},e}(Ae),hi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.name=(this.id?this.id.name:"VariableDeclarator"===this.parent.type?this.parent.id.name:"AssignmentExpression"!==this.parent.type?null:"Identifier"===this.parent.left.type?this.parent.left.name:"MemberExpression"===this.parent.left.type?this.parent.left.property.name:null)||this.findScope(!0).createIdentifier("anonymous"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(e.classes){var i=this.superClass&&(this.superClass.name||"superclass"),n=this.getIndentation(),r=n+t.getIndentString();this.superClass?(t.remove(this.start,this.superClass.start),t.remove(this.superClass.end,this.body.start),t.appendRight(this.start,"/*@__PURE__*/(function ("+i+") {\n"+r)):t.overwrite(this.start,this.body.start,"/*@__PURE__*/(function () {\n"+r),this.body.transpile(t,e,!0,i);var s="";this.superClass&&(s=t.slice(this.superClass.start,this.superClass.end),t.remove(this.superClass.start,this.superClass.end)),t.appendLeft(this.end,"\n\n"+r+"return "+this.name+";\n"+n+"}("+s+"))")}else this.body.transpile(t,e,!1)},e}(Ae),ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){if(this.findNearest(ri).shouldRewriteAsFunction){if(this.label)throw new je("Labels are not currently supported in a loop with locally-scoped variables",this);t.overwrite(this.start,this.start+8,"return")}},e}(Ae),ui=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleExport&&je.missingTransform("export","moduleExport",this),t.prototype.initialise.call(this,e)},e}(Ae),di=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleExport&&je.missingTransform("export","moduleExport",this),t.prototype.initialise.call(this,e)},e}(Ae),pi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.initialise=function(e){if(this.body.createScope(),this.createdScope=!0,this.reassigned=Object.create(null),this.aliases=Object.create(null),this.thisRefs=[],t.prototype.initialise.call(this,e),e.letConst)for(var i=Object.keys(this.body.scope.declarations),n=i.length;n--;){for(var r=this.body.scope.declarations[i[n]],s=r.instances.length;s--;){var o=r.instances[s].findNearest(/Function/);if(o&&o.depth>this.depth){this.shouldRewriteAsFunction=!0;for(var a=0,l=this.thisRefs;a<l.length;a+=1){var h=l[a];h.alias=h.alias||h.findLexicalBoundary().getThisAlias()}break}}if(this.shouldRewriteAsFunction)break}},e.prototype.transpile=function(e,i){var n="ForOfStatement"!=this.type&&("BlockStatement"!==this.body.type||"BlockStatement"===this.body.type&&this.body.synthetic);if(this.shouldRewriteAsFunction){var r=this.getIndentation(),s=r+e.getIndentString(),o=this.args?" "+this.args.join(", ")+" ":"",a=this.params?" "+this.params.join(", ")+" ":"",l=this.findScope(!0),h=l.createIdentifier("loop"),c="var "+h+" = function ("+a+") "+(this.body.synthetic?"{\n"+r+e.getIndentString():""),u=(this.body.synthetic?"\n"+r+"}":"")+";\n\n"+r;if(e.prependRight(this.body.start,c),e.appendLeft(this.body.end,u),e.move(this.start,this.body.start,this.body.end),this.canBreak||this.canReturn){var d=l.createIdentifier("returned"),p="{\n"+s+"var "+d+" = "+h+"("+o+");\n";this.canBreak&&(p+="\n"+s+"if ( "+d+" === 'break' ) break;"),this.canReturn&&(p+="\n"+s+"if ( "+d+" ) return "+d+".v;"),e.prependRight(this.body.end,p+="\n"+r+"}")}else{var f=h+"("+o+");";"DoWhileStatement"===this.type?e.overwrite(this.start,this.body.start,"do {\n"+s+f+"\n"+r+"}"):e.prependRight(this.body.end,f)}}else n&&(e.appendLeft(this.body.start,"{ "),e.prependRight(this.body.end," }"));t.prototype.transpile.call(this,e,i)},e}(Ae),fi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.transpile=function(e,i){var n=this,r=this.getIndentation()+e.getIndentString();if(this.shouldRewriteAsFunction){var s="VariableDeclaration"===this.init.type?this.init.declarations.map((function(t){return ke(t.id)})):[],o=this.aliases;this.args=s.map((function(t){return t in n.aliases?n.aliases[t].outer:t})),this.params=s.map((function(t){return t in n.aliases?n.aliases[t].inner:t}));var a=Object.keys(this.reassigned).map((function(t){return o[t].outer+" = "+o[t].inner+";"}));a.length&&(this.body.synthetic?e.appendLeft(this.body.body[0].end,"; "+a.join(" ")):e.appendLeft(this.body.body[this.body.body.length-1].end,"\n\n"+r+a.join("\n"+r)))}t.prototype.transpile.call(this,e,i)},e}(pi),gi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return t||!this.createdScope?this.parent.findScope(t):this.body.scope},e.prototype.transpile=function(e,i){var n=this,r="VariableDeclaration"===this.left.type;if(this.shouldRewriteAsFunction){var s=r?this.left.declarations.map((function(t){return ke(t.id)})):[];this.args=s.map((function(t){return t in n.aliases?n.aliases[t].outer:t})),this.params=s.map((function(t){return t in n.aliases?n.aliases[t].inner:t}))}t.prototype.transpile.call(this,e,i);var o=r?this.left.declarations[0].id:this.left;"Identifier"!==o.type&&this.destructurePattern(e,o,r)},e.prototype.destructurePattern=function(t,e,i){var n=this.findScope(!0),r=this.getIndentation()+t.getIndentString(),s=n.createIdentifier("ref"),o=this.body.body.length?this.body.body[0].start:this.body.start+1;t.move(e.start,e.end,o),t.prependRight(e.end,i?s:"var "+s);var a=[];Be(t,(function(t){return n.createIdentifier(t)}),(function(t){return n.resolveName(t.name)}),e,s,!1,a);var l=";\n"+r;a.forEach((function(t,e){e===a.length-1&&(l=";\n\n"+r),t(o,"",l)}))},e}(pi),mi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.forOf&&!e.dangerousForOf&&je.missingTransform("for-of statements","forOf",this,"dangerousForOf"),this.await&&e.asyncAwait&&je.missingTransform("for-await-of statements","asyncAwait",this),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(t.prototype.transpile.call(this,e,i),i.dangerousForOf)if(this.body.body[0]){var n=this.findScope(!0),r=this.getIndentation(),s=r+e.getIndentString(),o=n.createIdentifier("i"),a=n.createIdentifier("list");this.body.synthetic&&(e.prependRight(this.left.start,"{\n"+s),e.appendLeft(this.body.body[0].end,"\n"+r+"}"));var l=this.body.body[0].start;e.remove(this.left.end,this.right.start),e.move(this.left.start,this.left.end,l),e.prependRight(this.right.start,"var "+o+" = 0, "+a+" = "),e.appendLeft(this.right.end,"; "+o+" < "+a+".length; "+o+" += 1");var h="VariableDeclaration"===this.left.type,c=h?this.left.declarations[0].id:this.left;if("Identifier"!==c.type){var u=[],d=n.createIdentifier("ref");Be(e,(function(t){return n.createIdentifier(t)}),(function(t){return n.resolveName(t.name)}),c,d,!h,u);var p=";\n"+s;u.forEach((function(t,e){e===u.length-1&&(p=";\n\n"+s),t(l,"",p)})),h?(e.appendLeft(this.left.start+this.left.kind.length+1,d),e.appendLeft(this.left.end," = "+a+"["+o+"];\n"+s)):e.appendLeft(this.left.end,"var "+d+" = "+a+"["+o+"];\n"+s)}else e.appendLeft(this.left.end," = "+a+"["+o+"];\n\n"+s)}else"VariableDeclaration"===this.left.type&&"var"===this.left.kind?(e.remove(this.start,this.left.start),e.appendLeft(this.left.end,";"),e.remove(this.left.end,this.end)):e.remove(this.start,this.end)},e}(pi),_i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.generator&&e.generator&&je.missingTransform("generators","generator",this),this.async&&e.asyncAwait&&je.missingTransform("async functions","asyncAwait",this),this.body.createScope(),this.id&&this.findScope(!0).addDeclaration(this.id,"function"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){t.prototype.transpile.call(this,e,i),i.trailingFunctionCommas&&this.params.length&&Je(e,this.params[this.params.length-1].end)},e}(Ae),yi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.generator&&e.generator&&je.missingTransform("generators","generator",this),this.async&&e.asyncAwait&&je.missingTransform("async functions","asyncAwait",this),this.body.createScope(),this.id&&this.body.scope.addDeclaration(this.id,"function"),t.prototype.initialise.call(this,e);var i,n=this.parent;if(e.conciseMethodProperty&&"Property"===n.type&&"init"===n.kind&&n.method&&"Identifier"===n.key.type||e.classes&&"MethodDefinition"===n.type&&"method"===n.kind&&"Identifier"===n.key.type?i=n.key.name:this.id&&"Identifier"===this.id.type&&(i=this.id.alias||this.id.name),i)for(var r=0,s=this.params;r<s.length;r+=1){var o=s[r];if("Identifier"===o.type&&i===o.name){var a=this.body.scope,l=a.declarations[i],h=a.createIdentifier(i);o.alias=h;for(var c=0,u=l.instances;c<u.length;c+=1)u[c].alias=h;break}}},e.prototype.transpile=function(e,i){t.prototype.transpile.call(this,e,i),i.trailingFunctionCommas&&this.params.length&&Je(e,this.params[this.params.length-1].end)},e}(Ae),vi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.findScope=function(t){return this.parent.params&&~this.parent.params.indexOf(this)||"FunctionExpression"===this.parent.type&&this===this.parent.id?this.parent.body.scope:this.parent.findScope(t)},e.prototype.initialise=function(t){if(function t(e,i){return"MemberExpression"===e.type?!e.computed&&t(e.object,e):"Identifier"===e.type?!i||!/(Function|Class)Expression/.test(i.type)&&("VariableDeclarator"===i.type?e===i.init:"MemberExpression"===i.type||"MethodDefinition"===i.type?i.computed||e===i.object:"ArrayPattern"!==i.type&&("Property"===i.type?"ObjectPattern"!==i.parent.type&&(i.computed||e===i.value):"MethodDefinition"!==i.type&&("ExportSpecifier"!==i.type||e===i.local))):void 0}(this,this.parent)){if(t.arrow&&"arguments"===this.name&&!this.findScope(!1).contains(this.name)){var e=this.findLexicalBoundary(),i=this.findNearest("ArrowFunctionExpression"),n=this.findNearest(ri);i&&i.depth>e.depth&&(this.alias=e.getArgumentsAlias()),n&&n.body.contains(this)&&n.depth>e.depth&&(this.alias=e.getArgumentsAlias())}this.findScope(!1).addReference(this)}},e.prototype.transpile=function(t){this.alias&&t.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},e}(Ae),xi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){("BlockStatement"!==this.consequent.type||"BlockStatement"===this.consequent.type&&this.consequent.synthetic)&&(e.appendLeft(this.consequent.start,"{ "),e.prependRight(this.consequent.end," }")),this.alternate&&"IfStatement"!==this.alternate.type&&("BlockStatement"!==this.alternate.type||"BlockStatement"===this.alternate.type&&this.alternate.synthetic)&&(e.appendLeft(this.alternate.start,"{ "),e.prependRight(this.alternate.end," }")),t.prototype.transpile.call(this,e,i)},e}(Ae),bi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleImport&&je.missingTransform("dynamic import expressions","moduleImport",this),t.prototype.initialise.call(this,e)},e}(Ae),Ei=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.moduleImport&&je.missingTransform("import","moduleImport",this),t.prototype.initialise.call(this,e)},e}(Ae),wi=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.findScope(!0).addDeclaration(this.local,"import"),t.prototype.initialise.call(this,e)},e}(Ae),Ci=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){this.findScope(!0).addDeclaration(this.local,"import"),t.prototype.initialise.call(this,e)},e}(Ae),Si=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){var n,r=this.name;e.overwrite(r.start,this.value?this.value.start:this.name.end,(/-/.test(n=r.name)?"'"+n+"'":n)+": "+(this.value?"":"true")),t.prototype.transpile.call(this,e,i)},e}(Ae),Ti=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){var e,i=!0,n=this.parent.children[this.parent.children.length-1];(n&&"JSXText"===(e=n).type&&!/\S/.test(e.value)&&/\n/.test(e.value)||this.parent.openingElement.attributes.length)&&(i=!1),t.overwrite(this.start,this.end,i?" )":")")},e}(Ae),Ri=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){var e,i=!0,n=this.parent.children[this.parent.children.length-1];n&&"JSXText"===(e=n).type&&!/\S/.test(e.value)&&/\n/.test(e.value)&&(i=!1),t.overwrite(this.start,this.end,i?" )":")")},e}(Ae);function Mi(t,e){return t=t.replace(/\u00a0/g,"&nbsp;"),e&&/\n/.test(t)&&(t=t.replace(/\s+$/,"")),t=t.replace(/^\n\r?\s+/,"").replace(/\s*\n\r?\s*/gm," "),JSON.stringify(t)}var Ii=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){t.prototype.transpile.call(this,e,i);var n=this.children.filter((function(t){return"JSXText"!==t.type||/\S/.test(t.raw)||!/\n/.test(t.raw)}));if(n.length){var r,s=(this.openingElement||this.openingFragment).end;for(r=0;r<n.length;r+=1){var o=n[r];if("JSXExpressionContainer"===o.type&&"JSXEmptyExpression"===o.expression.type||e.appendLeft(s,","+("\n"===e.original[s]&&"JSXText"!==o.type?"":" ")),"JSXText"===o.type){var a=Mi(o.value,r===n.length-1);e.overwrite(o.start,o.end,a)}s=o.end}}},e}(Ae),Pi=/[\u2028-\u2029]/g,Li={ArrayExpression:$e,ArrowFunctionExpression:Qe,AssignmentExpression:ei,AwaitExpression:ii,BinaryExpression:ni,BreakStatement:si,CallExpression:oi,ClassBody:ai,ClassDeclaration:li,ClassExpression:hi,ContinueStatement:ci,DoWhileStatement:pi,ExportNamedDeclaration:di,ExportDefaultDeclaration:ui,ForStatement:fi,ForInStatement:gi,ForOfStatement:mi,FunctionDeclaration:_i,FunctionExpression:yi,Identifier:vi,IfStatement:xi,Import:bi,ImportDeclaration:Ei,ImportDefaultSpecifier:wi,ImportSpecifier:Ci,JSXAttribute:Si,JSXClosingElement:Ti,JSXClosingFragment:Ri,JSXElement:Ii,JSXExpressionContainer:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){e.remove(this.start,this.expression.start),e.remove(this.expression.end,this.end),t.prototype.transpile.call(this,e,i)},e}(Ae),JSXFragment:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e}(Ii),JSXOpeningElement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){t.prototype.transpile.call(this,e,i),e.overwrite(this.start,this.name.start,this.program.jsx+"( ");var n="JSXIdentifier"===this.name.type&&this.name.name[0]===this.name.name[0].toLowerCase();n&&e.prependRight(this.name.start,"'");var r=this.attributes.length,s=this.name.end;if(r){var o,a,l,h=!1;for(o=0;o<r;o+=1)if("JSXSpreadAttribute"===this.attributes[o].type){h=!0;break}for(s=this.attributes[0].end,o=0;o<r;o+=1){var c=this.attributes[o];if(o>0&&(c.start===s?e.prependRight(s,", "):e.overwrite(s,c.start,", ")),h&&"JSXSpreadAttribute"!==c.type){var u=this.attributes[o-1],d=this.attributes[o+1];u&&"JSXSpreadAttribute"!==u.type||e.prependRight(c.start,"{ "),d&&"JSXSpreadAttribute"!==d.type||e.appendLeft(c.end," }")}s=c.end}if(h)if(1===r)l=n?"',":",";else{if(!this.program.options.objectAssign)throw new je("Mixed JSX attributes ending in spread requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);l=n?"', "+this.program.options.objectAssign+"({},":", "+this.program.options.objectAssign+"({},",a=")"}else l=n?"', {":", {",a=" }";e.prependRight(this.name.end,l),a&&e.appendLeft(this.attributes[r-1].end,a)}else e.appendLeft(this.name.end,n?"', null":", null"),s=this.name.end;this.selfClosing?e.overwrite(s,this.end,this.attributes.length?")":" )"):e.remove(s,this.end)},e}(Ae),JSXOpeningFragment:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(t){t.overwrite(this.start,this.end,this.program.jsx+"( React.Fragment, null")},e}(Ae),JSXSpreadAttribute:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){e.remove(this.start,this.argument.start),e.remove(this.argument.end,this.end),t.prototype.transpile.call(this,e,i)},e}(Ae),Literal:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(){"string"==typeof this.value&&this.program.indentExclusionElements.push(this)},e.prototype.transpile=function(t,e){e.numericLiteral&&this.raw.match(/^0[bo]/i)&&t.overwrite(this.start,this.end,String(this.value),{storeName:!0,contentOnly:!0}),"string"==typeof this.value&&this.value.match(Pi)&&t.overwrite(this.start,this.end,this.raw.replace(Pi,(function(t){return"\u2028"==t?"\\u2028":"\\u2029"})),{contentOnly:!0})},e}(Ae),MemberExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){i.reservedProperties&&Ne[this.property.name]&&(e.overwrite(this.object.end,this.property.start,"['"),e.appendLeft(this.property.end,"']")),t.prototype.transpile.call(this,e,i)},e}(Ae),NewExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if(e.spreadRest&&this.arguments.length)for(var i=this.findLexicalBoundary(),n=this.arguments.length;n--;){var r=this.arguments[n];if("SpreadElement"===r.type&&Xe(r.argument)){this.argumentsArrayAlias=i.getArgumentsArrayAlias();break}}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(t.prototype.transpile.call(this,e,i),i.spreadRest&&this.arguments.length&&He(e,this,this.arguments),i.spreadRest&&this.arguments.length){var n=this.arguments[0];Ye(e,this.arguments,n.start,this.argumentsArrayAlias,!0)&&(e.prependRight(this.start+3," (Function.prototype.bind.apply("),e.overwrite(this.callee.end,n.start,", [ null ].concat( "),e.appendLeft(this.end," ))"))}this.arguments.length&&Je(e,this.arguments[this.arguments.length-1].end)},e}(Ae),ObjectExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){var n;t.prototype.transpile.call(this,e,i);for(var r=this.start+1,s=0,o=0,a=null,l=null,h=0;h<this.properties.length;++h){var c=this.properties[h];if("SpreadElement"===c.type){var u=c.argument;"ObjectExpression"===u.type||"Literal"===u.type&&"string"!=typeof u.value?"ObjectExpression"===u.type&&u.properties.length>0?(e.remove(c.start,u.properties[0].start),e.remove(u.properties[u.properties.length-1].end,c.end),(n=this.properties).splice.apply(n,[h,1].concat(u.properties)),h--):(e.remove(c.start,h===this.properties.length-1?c.end:this.properties[h+1].start),this.properties.splice(h,1),h--):(s+=1,null===a&&(a=h))}else c.computed&&i.computedProperty&&(o+=1,null===l&&(l=h))}if(!s||i.objectRestSpread||o&&i.computedProperty){if(s){if(!this.program.options.objectAssign)throw new je("Object spread operator requires specified objectAssign option with 'Object.assign' or polyfill helper.",this);for(var d=this.properties.length;d--;){var p=this.properties[d];if("Property"===p.type&&!o){var f=this.properties[d-1],g=this.properties[d+1];f&&"Property"===f.type||e.prependRight(p.start,"{"),g&&"Property"===g.type||e.appendLeft(p.end,"}")}"SpreadElement"===p.type&&(e.remove(p.start,p.argument.start),e.remove(p.argument.end,p.end))}r=this.properties[0].start,o?"SpreadElement"===this.properties[0].type?(e.overwrite(this.start,r,this.program.options.objectAssign+"({}, "),e.remove(this.end-1,this.end),e.appendRight(this.end,")")):(e.prependLeft(this.start,this.program.options.objectAssign+"("),e.appendRight(this.end,")")):(e.overwrite(this.start,r,this.program.options.objectAssign+"({}, "),e.overwrite(this.properties[this.properties.length-1].end,this.end,")"))}}else s=0,a=null;if(o&&i.computedProperty){var m,_,y=this.getIndentation();"VariableDeclarator"===this.parent.type&&1===this.parent.parent.declarations.length&&"Identifier"===this.parent.id.type?(m=!0,_=this.parent.id.alias||this.parent.id.name):("AssignmentExpression"===this.parent.type&&"ExpressionStatement"===this.parent.parent.type&&"Identifier"===this.parent.left.type||"AssignmentPattern"===this.parent.type&&"Identifier"===this.parent.left.type)&&(m=!0,_=this.parent.left.alias||this.parent.left.name),s&&(m=!1),_=this.findScope(!1).resolveName(_);var v=r,x=this.end;m||(null===a||l<a?(_=this.findScope(!0).createDeclaration("obj"),e.prependRight(this.start,"( "+_+" = ")):_=null);for(var b,E=this.properties.length,w=!1,C=!0,S=0;S<E;S+=1){var T=this.properties[S],R=S>0?this.properties[S-1].end:v;if("Property"===T.type&&(T.computed||b&&!s)){if(0===S&&(R=this.start+1),b=T,_){var M=(m?";\n"+y+_:", "+_)+("Literal"===T.key.type||T.computed?"":".");R<T.start?e.overwrite(R,T.start,M):e.prependRight(T.start,M)}else _=this.findScope(!0).createDeclaration("obj"),e.appendRight(T.start,"( "+_+" = {}, "+_+(T.computed?"":"."));var I=T.key.end;if(T.computed){for(;"]"!==e.original[I];)I+=1;I+=1}"Literal"!==T.key.type||T.computed?T.shorthand||T.method&&!T.computed&&i.conciseMethodProperty?e.overwrite(T.key.start,T.key.end,e.slice(T.key.start,T.key.end).replace(/:/," =")):(T.value.start>I&&e.remove(I,T.value.start),e.prependLeft(I," = ")):e.overwrite(T.start,T.key.end+1,"["+e.slice(T.start,T.key.end)+"] = "),!T.method||!T.computed&&i.conciseMethodProperty||(T.value.generator&&e.remove(T.start,T.key.start),e.prependRight(T.value.start,"function"+(T.value.generator?"*":"")+" "))}else"SpreadElement"===T.type?_&&S>0&&(b||(b=this.properties[S-1]),e.appendLeft(b.end,", "+_+" )"),b=null,_=null):(!C&&s&&(e.prependRight(T.start,"{"),e.appendLeft(T.end,"}")),w=!0);if(C&&("SpreadElement"===T.type||T.computed)){var P=w?this.properties[this.properties.length-1].end:this.end-1;","==e.original[P]&&++P;var L=e.slice(P,x);e.prependLeft(R,L),e.remove(P,x),C=!1}var A=T.end;if(S<E-1&&!w)for(;","!==e.original[A];)A+=1;else S==E-1&&(A=this.end);T.end!=A&&e.overwrite(T.end,A,"",{contentOnly:!0})}!m&&_&&e.appendLeft(b.end,", "+_+" )")}},e}(Ae),Property:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){"get"!==this.kind&&"set"!==this.kind||!e.getterSetter||je.missingTransform("getters and setters","getterSetter",this),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(t.prototype.transpile.call(this,e,i),i.conciseMethodProperty&&!this.computed&&"ObjectPattern"!==this.parent.type)if(this.shorthand)e.prependRight(this.start,this.key.name+": ");else if(this.method){var n="";!1!==this.program.options.namedFunctionExpressions&&(n=" "+(n="Literal"===this.key.type&&"number"==typeof this.key.value?"":"Identifier"===this.key.type?Ne[this.key.name]||!/^[a-z_$][a-z0-9_$]*$/i.test(this.key.name)||this.value.body.scope.references[this.key.name]?this.findScope(!0).createIdentifier(this.key.name):this.key.name:this.findScope(!0).createIdentifier(this.key.value))),this.start<this.key.start&&e.remove(this.start,this.key.start),e.appendLeft(this.key.end,": "+(this.value.async?"async ":"")+"function"+(this.value.generator?"*":"")+n)}i.reservedProperties&&Ne[this.key.name]&&(e.prependRight(this.key.start,"'"),e.appendLeft(this.key.end,"'"))},e}(Ae),ReturnStatement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){this.loop=this.findNearest(ri),this.nearestFunction=this.findNearest(/Function/),this.loop&&(!this.nearestFunction||this.loop.depth>this.nearestFunction.depth)&&(this.loop.canReturn=!0,this.shouldWrap=!0),this.argument&&this.argument.initialise(t)},e.prototype.transpile=function(t,e){var i=this.shouldWrap&&this.loop&&this.loop.shouldRewriteAsFunction;this.argument?(i&&t.prependRight(this.argument.start,"{ v: "),this.argument.transpile(t,e),i&&t.appendLeft(this.argument.end," }")):i&&t.appendLeft(this.start+6," {}")},e}(Ae),Super:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){if(t.classes){if(this.method=this.findNearest("MethodDefinition"),!this.method)throw new je("use of super outside class method",this);var e=this.findNearest("ClassBody").parent;if(this.superClassName=e.superClass&&(e.superClass.name||"superclass"),!this.superClassName)throw new je("super used in base class",this);if(this.isCalled="CallExpression"===this.parent.type&&this===this.parent.callee,"constructor"!==this.method.kind&&this.isCalled)throw new je("super() not allowed outside class constructor",this);if(this.isMember="MemberExpression"===this.parent.type,!this.isCalled&&!this.isMember)throw new je("Unexpected use of `super` (expected `super(...)` or `super.*`)",this)}if(t.arrow){var i=this.findLexicalBoundary(),n=this.findNearest("ArrowFunctionExpression"),r=this.findNearest(ri);n&&n.depth>i.depth&&(this.thisAlias=i.getThisAlias()),r&&r.body.contains(this)&&r.depth>i.depth&&(this.thisAlias=i.getThisAlias())}},e.prototype.transpile=function(t,e){if(e.classes){t.overwrite(this.start,this.end,this.isCalled||this.method.static?this.superClassName:this.superClassName+".prototype",{storeName:!0,contentOnly:!0});var i=this.isCalled?this.parent:this.parent.parent;if(i&&"CallExpression"===i.type){this.noCall||t.appendLeft(i.callee.end,".call");var n=this.thisAlias||"this";i.arguments.length?t.appendLeft(i.arguments[0].start,n+", "):t.appendLeft(i.end-1,""+n)}}},e}(Ae),TaggedTemplateExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){e.templateString&&!e.dangerousTaggedTemplateString&&je.missingTransform("tagged template strings","templateString",this,"dangerousTaggedTemplateString"),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){if(i.templateString&&i.dangerousTaggedTemplateString){var n=this.quasi.expressions.concat(this.quasi.quasis).sort((function(t,e){return t.start-e.start})),r=this.program.body.scope,s=this.quasi.quasis.map((function(t){return JSON.stringify(t.value.cooked)})).join(", "),o=this.program.templateLiteralQuasis[s];o||(o=r.createIdentifier("templateObject"),e.prependLeft(this.program.prependAt,"var "+o+" = Object.freeze(["+s+"]);\n"),this.program.templateLiteralQuasis[s]=o),e.overwrite(this.tag.end,n[0].start,"("+o);var a=n[0].start;n.forEach((function(t){"TemplateElement"===t.type?e.remove(a,t.end):e.overwrite(a,t.start,", "),a=t.end})),e.overwrite(a,this.end,")")}t.prototype.transpile.call(this,e,i)},e}(Ae),TemplateElement:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(){this.program.indentExclusionElements.push(this)},e}(Ae),TemplateLiteral:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.transpile=function(e,i){if(t.prototype.transpile.call(this,e,i),i.templateString&&"TaggedTemplateExpression"!==this.parent.type){var n=this.expressions.concat(this.quasis).sort((function(t,e){return t.start-e.start||t.end-e.end})).filter((function(t,e){return"TemplateElement"!==t.type||!!t.value.raw||!e}));if(n.length>=3){var r=n[0];"TemplateElement"===r.type&&""===r.value.raw&&"TemplateElement"===n[2].type&&n.shift()}var s=!(1===this.quasis.length&&0===this.expressions.length||"TemplateLiteral"===this.parent.type||"AssignmentExpression"===this.parent.type||"AssignmentPattern"===this.parent.type||"VariableDeclarator"===this.parent.type||"BinaryExpression"===this.parent.type&&"+"===this.parent.operator);s&&e.appendRight(this.start,"(");var o=this.start;n.forEach((function(t,i){var n=0===i?s?"(":"":" + ";if("TemplateElement"===t.type)e.overwrite(o,t.end,n+JSON.stringify(t.value.cooked));else{var r="Identifier"!==t.type;r&&(n+="("),e.remove(o,t.start),n&&e.prependRight(t.start,n),r&&e.appendLeft(t.end,")")}o=t.end})),s&&e.appendLeft(o,")"),e.overwrite(o,this.end,"",{contentOnly:!0})}},e}(Ae),ThisExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){var e=this.findLexicalBoundary();if(t.letConst)for(var i=this.findNearest(ri);i&&i.depth>e.depth;)i.thisRefs.push(this),i=i.parent.findNearest(ri);if(t.arrow){var n=this.findNearest("ArrowFunctionExpression");n&&n.depth>e.depth&&(this.alias=e.getThisAlias())}},e.prototype.transpile=function(t){this.alias&&t.overwrite(this.start,this.end,this.alias,{storeName:!0,contentOnly:!0})},e}(Ae),UpdateExpression:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){if("Identifier"===this.argument.type){var i=this.findScope(!1).findDeclaration(this.argument.name),n=i&&i.node.ancestor(3);n&&"ForStatement"===n.type&&n.body.contains(this)&&(n.reassigned[this.argument.name]=!0)}t.prototype.initialise.call(this,e)},e.prototype.transpile=function(e,i){"Identifier"===this.argument.type&&ti(this.argument,this.findScope(!1)),t.prototype.transpile.call(this,e,i)},e}(Ae),VariableDeclaration:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(t){this.scope=this.findScope("var"===this.kind),this.declarations.forEach((function(e){return e.initialise(t)}))},e.prototype.transpile=function(t,e){var i=this,n=this.getIndentation(),r=this.kind;if(e.letConst&&"var"!==r&&t.overwrite(this.start,this.start+this.kind.length,r="var",{contentOnly:!0,storeName:!0}),e.destructuring&&"ForOfStatement"!==this.parent.type&&"ForInStatement"!==this.parent.type){var s,o=this.start;this.declarations.forEach((function(r,a){if(r.transpile(t,e),"Identifier"===r.id.type)a>0&&"Identifier"!==i.declarations[a-1].id.type&&t.overwrite(o,r.id.start,"var ");else{var l=ri.test(i.parent.type);0===a?t.remove(o,r.id.start):t.overwrite(o,r.id.start,";\n"+n);var h="Identifier"===r.init.type&&!r.init.rewritten,c=h?r.init.alias||r.init.name:r.findScope(!0).createIdentifier("ref");o=r.start;var u=[];h?t.remove(r.id.end,r.end):u.push((function(e,i,n){t.prependRight(r.id.end,"var "+c),t.appendLeft(r.init.end,""+n),t.move(r.id.end,r.end,e)}));var d=r.findScope(!1);Be(t,(function(t){return d.createIdentifier(t)}),(function(t){return d.resolveName(t.name)}),r.id,c,l,u);var p=l?"var ":"",f=l?", ":";\n"+n;u.forEach((function(t,e){a===i.declarations.length-1&&e===u.length-1&&(f=l?"":";"),t(r.start,0===e?p:"",f)}))}o=r.end,s="Identifier"!==r.id.type})),s&&this.end>o&&t.overwrite(o,this.end,"",{contentOnly:!0})}else this.declarations.forEach((function(i){i.transpile(t,e)}))},e}(Ae),VariableDeclarator:function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),(e.prototype=Object.create(t&&t.prototype)).constructor=e,e.prototype.initialise=function(e){var i=this.parent.kind;"let"===i&&"ForStatement"===this.parent.parent.type&&(i="for.let"),this.parent.scope.addDeclaration(this.id,i),t.prototype.initialise.call(this,e)},e.prototype.transpile=function(t,e){if(!this.init&&e.letConst&&"var"!==this.parent.kind){var i=this.findNearest(/Function|^For(In|Of)?Statement|^(?:Do)?WhileStatement/);!i||/Function/.test(i.type)||this.isLeftDeclaratorOfLoop()||t.appendLeft(this.id.end," = (void 0)")}this.id&&this.id.transpile(t,e),this.init&&this.init.transpile(t,e)},e.prototype.isLeftDeclaratorOfLoop=function(){return this.parent&&"VariableDeclaration"===this.parent.type&&this.parent.parent&&("ForInStatement"===this.parent.parent.type||"ForOfStatement"===this.parent.parent.type)&&this.parent.parent.left&&this.parent.parent.left.declarations[0]===this},e}(Ae),WhileStatement:pi},Ai={Program:["body"],Literal:[]},ki={IfStatement:"consequent",ForStatement:"body",ForInStatement:"body",ForOfStatement:"body",WhileStatement:"body",DoWhileStatement:"body",ArrowFunctionExpression:"body"};function Oi(t,e,i,n){this.type="Root",this.jsx=n.jsx||"React.createElement",this.options=n,this.source=t,this.magicString=new Pe(t),this.ast=e,this.depth=0,function t(e,i){if(e)if("length"in e)for(var n=e.length;n--;)t(e[n],i);else if(!e.__wrapped){e.__wrapped=!0,Ai[e.type]||(Ai[e.type]=Object.keys(e).filter((function(t){return"object"==typeof e[t]})));var r=ki[e.type];if(r&&"BlockStatement"!==e[r].type){var s=e[r];e[r]={start:s.start,end:s.end,type:"BlockStatement",body:[s],synthetic:!0}}e.parent=i,e.program=i.program||i,e.depth=i.depth+1,e.keys=Ai[e.type],e.indentation=void 0;for(var o=0,a=Ai[e.type];o<a.length;o+=1)t(e[a[o]],e);e.program.magicString.addSourcemapLocation(e.start),e.program.magicString.addSourcemapLocation(e.end),e.__proto__=(("BlockStatement"===e.type?We:Li[e.type])||Ae).prototype}}(this.body=e,this),this.body.__proto__=We.prototype,this.templateLiteralQuasis=Object.create(null);for(var r=0;r<this.body.body.length;++r)if(!this.body.body[r].directive){this.prependAt=this.body.body[r].start;break}this.objectWithoutPropertiesHelper=null,this.indentExclusionElements=[],this.body.initialise(i),this.indentExclusions=Object.create(null);for(var s=0,o=this.indentExclusionElements;s<o.length;s+=1)for(var a=o[s],l=a.start;l<a.end;l+=1)this.indentExclusions[l]=!0;this.body.transpile(this.magicString,i)}Oi.prototype={export:function(t){return void 0===t&&(t={}),{code:this.magicString.toString(),map:this.magicString.generateMap({file:t.file,source:t.source,includeContent:!1!==t.includeContent})}},findNearest:function(){return null},findScope:function(){return null},getObjectWithoutPropertiesHelper:function(t){return this.objectWithoutPropertiesHelper||(this.objectWithoutPropertiesHelper=this.body.scope.createIdentifier("objectWithoutProperties"),t.prependLeft(this.prependAt,"function "+this.objectWithoutPropertiesHelper+" (obj, exclude) { var target = {}; for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k) && exclude.indexOf(k) === -1) target[k] = obj[k]; return target; }\n")),this.objectWithoutPropertiesHelper}};var Ni=nt.extend(pe,ce(),(function(t){return class extends t{getTokenFromCode(t){if(35===t){++this.pos;const t=this.readWord1();return this.finishToken(ye,t)}return super.getTokenFromCode(t)}parseClass(t,e){this._privateBoundNamesStack=this._privateBoundNamesStack||[];const i=Object.create(this._privateBoundNamesStack[this._privateBoundNamesStack.length-1]||null);this._privateBoundNamesStack.push(i),this._unresolvedPrivateNamesStack=this._unresolvedPrivateNamesStack||[];const n=Object.create(null);this._unresolvedPrivateNamesStack.push(n);const r=super.parseClass(t,e);if(this._privateBoundNamesStack.pop(),this._unresolvedPrivateNamesStack.pop(),this._unresolvedPrivateNamesStack.length)Object.assign(this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1],n);else{const t=Object.keys(n);t.length&&(t.sort(((t,e)=>n[t]-n[e])),this.raise(n[t[0]],"Usage of undeclared private name"))}return r}parseClassElement(t){if(this.eat(ge.semi))return null;const e=this.startNode();if(!(this.options.ecmaVersion>=8)||this.type!=ye){if(this.isContextual("async")){fe.lastIndex=this.pos;let t=fe.exec(this.input),i=this.input.charAt(this.pos+t[0].length);if(";"===i||"="===i)return e.key=this.parseIdent(!0),e.computed=!1,me.call(this,e),this.finishNode(e,"FieldDefinition"),this.semicolon(),e}return super.parseClassElement.apply(this,arguments)}return e.key=_e.call(this),e.computed=!1,"constructor"==e.key.name&&this.raise(e.start,"Classes may not have a field named constructor"),Object.prototype.hasOwnProperty.call(this._privateBoundNamesStack[this._privateBoundNamesStack.length-1],e.key.name)&&this.raise(e.start,"Duplicate private element"),this._privateBoundNamesStack[this._privateBoundNamesStack.length-1][e.key.name]=!0,delete this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1][e.key.name],me.call(this,e),this.finishNode(e,"FieldDefinition"),this.semicolon(),e}parseClassMethod(t,e,i,n){return e||i||"method"!=t.kind||t.static||this.options.ecmaVersion<8||this.type==ge.parenL?super.parseClassMethod.apply(this,arguments):(me.call(this,t),delete t.kind,delete t.static,t=this.finishNode(t,"FieldDefinition"),this.semicolon(),t)}parseSubscripts(t,e,i,n){for(let r;;){if(!(r=this.eat(ge.bracketL))&&!this.eat(ge.dot))return super.parseSubscripts(t,e,i,n);{let n=this.startNodeAt(e,i);n.object=t,r?n.property=this.parseExpression():this.type==ye?(n.property=_e.call(this),this._privateBoundNamesStack.length&&this._privateBoundNamesStack[this._privateBoundNamesStack.length-1][n.property.name]||(this._unresolvedPrivateNamesStack[this._unresolvedPrivateNamesStack.length-1][n.property.name]=n.property.start)):n.property=this.parseIdent(!0),n.computed=Boolean(r),r&&this.expect(ge.bracketR),t=this.finishNode(n,"MemberExpression")}}}parseMaybeUnary(t,e){const i=super.parseMaybeUnary(t,e);return"delete"==i.operator&&"MemberExpression"==i.argument.type&&"PrivateName"==i.argument.property.type&&this.raise(i.start,"Private elements may not be deleted"),i}parseIdent(t,e){const i=super.parseIdent(t,e);return this._inFieldValue&&"arguments"==i.name&&this.raise(i.start,"A class field initializer may not contain arguments"),i}parseExprAtom(t){const e=super.parseExprAtom(t);return this._inFieldValue&&"Super"==e.type&&this.raise(e.start,"A class field initializer may not contain super"),e}}})),Fi=["getterSetter","arrow","classes","computedProperty","conciseMethodProperty","defaultParameter","destructuring","forOf","generator","letConst","moduleExport","moduleImport","numericLiteral","parameterDestructuring","spreadRest","stickyRegExp","templateString","exponentiation","reservedProperties","trailingFunctionCommas","asyncAwait","objectRestSpread"],Di=["dangerousTaggedTemplateString","dangerousForOf"];function Zi(t,e){return function(t,e){var i;void 0===e&&(e={});var n=null;try{i=Ni.parse(t,{ecmaVersion:10,preserveParens:!0,sourceType:"module",allowAwaitOutsideFunction:!0,allowReturnOutsideFunction:!0,allowHashBang:!0,onComment:function(t,e){if(!n){var i=/@jsx\s+([^\s]+)/.exec(e);i&&(n=i[1])}}}),e.jsx=n||e.jsx}catch(e){throw e.snippet=Ze(t,e.loc),e.toString=function(){return e.name+": "+e.message+"\n"+e.snippet},e}var r=Object.create(null);return Fi.forEach((function(t){r[t]=!0})),Di.forEach((function(t){r[t]=!0})),Object.keys(e.transforms||{}).forEach((function(t){if("modules"===t)return"moduleImport"in e.transforms||(r.moduleImport=e.transforms.modules),void("moduleExport"in e.transforms||(r.moduleExport=e.transforms.modules));if(!(t in r))throw new Error("Unknown transform '"+t+"'");r[t]=e.transforms[t]})),!0===e.objectAssign&&(e.objectAssign="Object.assign"),new Oi(t,i,r,e).export(e)}(t,{...e,transforms:{asyncAwait:!1,classes:!1,getterSetter:!1,...e.transforms}})}var ji=i(1448),zi=i.n(ji),Gi={plain:{color:"#C5C8C6",backgroundColor:"#1D1F21"},styles:[{types:["prolog","comment","doctype","cdata"],style:{color:"hsl(30, 20%, 50%)"}},{types:["property","tag","boolean","number","constant","symbol"],style:{color:"hsl(350, 40%, 70%)"}},{types:["attr-name","string","char","builtin","insterted"],style:{color:"hsl(75, 70%, 60%)"}},{types:["operator","entity","url","string","variable","language-css"],style:{color:"hsl(40, 90%, 60%)"}},{types:["deleted"],style:{color:"rgb(255, 85, 85)"}},{types:["italic"],style:{fontStyle:"italic"}},{types:["important","bold"],style:{fontWeight:"bold"}},{types:["regex","important"],style:{color:"#e90"}},{types:["atrule","attr-value","keyword"],style:{color:"hsl(350, 40%, 70%)"}},{types:["punctuation","symbol"],style:{opacity:"0.7"}}]},Bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ui=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},Vi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},qi=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},Wi=function(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i},Xi=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},Hi=function(t){function e(){var i,r;Ui(this,e);for(var s=arguments.length,o=Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=r=Xi(this,t.call.apply(t,[this].concat(o))),r.state={code:""},r.updateContent=function(t){r.setState({code:t},(function(){r.props.onChange&&r.props.onChange(r.state.code)}))},r.highlightCode=function(t){return n.createElement(x,{Prism:c.Z,code:t,theme:r.props.theme||Gi,language:r.props.language},(function(t){var e=t.tokens,i=t.getLineProps,r=t.getTokenProps;return n.createElement(n.Fragment,null,e.map((function(t,e){return n.createElement("div",i({line:t,key:e}),t.map((function(t,e){return n.createElement("span",r({token:t,key:e}))})))})))}))},Xi(r,i)}return qi(e,t),e.getDerivedStateFromProps=function(t,e){return t.code!==e.prevCodeProp?{code:t.code,prevCodeProp:t.code}:null},e.prototype.render=function(){var t=this.props,e=t.style,i=(t.code,t.onChange,t.language,t.theme),r=Wi(t,["style","code","onChange","language","theme"]),s=this.state.code,o=i&&"object"===Bi(i.plain)?i.plain:{};return n.createElement(h.Z,Vi({value:s,padding:10,highlight:this.highlightCode,onValueChange:this.updateContent,style:Vi({whiteSpace:"pre",fontFamily:"monospace"},o,e)},r))},e}(n.Component),Ki=(0,n.createContext)({}),Yi={assign:zi()},$i={objectAssign:"_poly.assign",transforms:{dangerousForOf:!0,dangerousTaggedTemplateString:!0}},Ji=function(t){return Zi(t,$i).code},Qi=function(t,e){return function(i){function r(){return Ui(this,r),Xi(this,i.apply(this,arguments))}return qi(r,i),r.prototype.componentDidCatch=function(t){e(t)},r.prototype.render=function(){return"function"==typeof t?n.createElement(t,null):t},r}(n.Component)},tn=function(t,e){var i=Object.keys(e),r=i.map((function(t){return e[t]}));return(new(Function.prototype.bind.apply(Function,[null].concat(["_poly","React"],i,[t])))).apply(void 0,[Yi,n].concat(r))},en=function(t){function e(){var i,n;Ui(this,e);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=n=Xi(this,t.call.apply(t,[this].concat(s))),n.onChange=function(t){var e=n.props,i=e.scope,r=e.transformCode,s=e.noInline;n.transpile({code:t,scope:i,transformCode:r,noInline:s})},n.onError=function(t){n.setState({error:t.toString()})},n.transpile=function(t){var e=t.code,i=t.scope,r=t.transformCode,s=t.noInline,o=void 0!==s&&s,a={code:r?r(e):e,scope:i},l=function(t){return n.setState({element:void 0,error:t.toString()})},h=function(t){return n.setState(Vi({},c,{element:t}))},c={unsafeWrapperError:void 0,error:void 0};try{o?(n.setState(Vi({},c,{element:null})),function(t,e,i){var n=t.code,r=void 0===n?"":n,s=t.scope,o=void 0===s?{}:s;if(!/render\s*\(/.test(r))return i(new SyntaxError("No-Inline evaluations must call `render`."));tn(Ji(r),Vi({},o,{render:function(t){void 0===t?i(new SyntaxError("`render` must be called with valid JSX.")):e(Qi(t,i))}}))}(a,h,l)):h(function(t,e){var i=t.code,n=void 0===i?"":i,r=t.scope,s=void 0===r?{}:r,o=n.trim().replace(/;$/,""),a=Ji("return ("+o+")").trim();return Qi(tn(a,s),e)}(a,l))}catch(u){n.setState(Vi({},c,{error:u.toString()}))}},Xi(n,i)}return qi(e,t),e.prototype.UNSAFE_componentWillMount=function(){var t=this.props,e=t.code,i=t.scope,n=t.transformCode,r=t.noInline;this.transpile({code:e,scope:i,transformCode:n,noInline:r})},e.prototype.componentDidUpdate=function(t){var e=t.code,i=t.scope,n=t.noInline,r=t.transformCode,s=this.props,o=s.code,a=s.scope,l=s.noInline,h=s.transformCode;o===e&&a===i&&l===n&&h===r||this.transpile({code:o,scope:a,transformCode:h,noInline:l})},e.prototype.render=function(){var t=this.props,e=t.children,i=t.code,r=t.language,s=t.theme,o=t.disabled;return n.createElement(Ki.Provider,{value:Vi({},this.state,{code:i,language:r,theme:s,disabled:o,onError:this.onError,onChange:this.onChange})},e)},e}(n.Component);function nn(t){return n.createElement(Ki.Consumer,null,(function(e){var i=e.code,r=e.language,s=e.theme,o=e.disabled,a=e.onChange;return n.createElement(Hi,Vi({theme:s,code:i,language:r,disabled:o,onChange:a},t))}))}function rn(t){return n.createElement(Ki.Consumer,null,(function(e){var i=e.error;return i?n.createElement("pre",t,i):null}))}function sn(t){var e=t.Component,i=Wi(t,["Component"]);return n.createElement(e,i,n.createElement(Ki.Consumer,null,(function(t){var e=t.element;return e&&n.createElement(e,null)})))}en.defaultProps={code:"",noInline:!1,language:"jsx",disabled:!1},sn.defaultProps={Component:"div"};var on=i(3609),an=i(5107);function ln(t){let{children:e,fallback:i}=t;return(0,l.Z)()?n.createElement(n.Fragment,null,e?.()):i??null}var hn=i(7763),cn=i(1167);function un(){const{prism:t}=(0,cn.L)(),{colorMode:e}=(0,hn.I)(),i=t.theme,n=t.darkTheme||i;return"dark"===e?n:i}const dn={playgroundContainer:"playgroundContainer_NopH",playgroundHeader:"playgroundHeader_ldtf",playgroundEditor:"playgroundEditor_OSyd",playgroundPreview:"playgroundPreview_mQab"};function pn(t){let{children:e}=t;return n.createElement("div",{className:(0,a.Z)(dn.playgroundHeader)},e)}function fn(){return n.createElement("div",null,"Loading...")}function gn(){return n.createElement(n.Fragment,null,n.createElement(pn,null,n.createElement(on.Z,{id:"theme.Playground.result",description:"The result label of the live codeblocks"},"Result")),n.createElement("div",{className:dn.playgroundPreview},n.createElement(ln,{fallback:n.createElement(fn,null)},(()=>n.createElement(n.Fragment,null,n.createElement(sn,null),n.createElement(rn,null))))))}function mn(){const t=(0,l.Z)();return n.createElement(nn,{key:String(t),className:dn.playgroundEditor})}function _n(){return n.createElement(n.Fragment,null,n.createElement(pn,null,n.createElement(on.Z,{id:"theme.Playground.liveEditor",description:"The live editor label of the live codeblocks"},"Live Editor")),n.createElement(mn,null))}function yn(t){let{children:e,transformCode:i,...r}=t;const{siteConfig:{themeConfig:o}}=(0,an.Z)(),{liveCodeBlock:{playgroundPosition:a}}=o,l=un(),h=r.metastring?.includes("noInline")??!1;return n.createElement("div",{className:dn.playgroundContainer},n.createElement(en,(0,s.Z)({code:e.replace(/\n$/,""),noInline:h,transformCode:i??(t=>`${t};`),theme:l},r),"top"===a?n.createElement(n.Fragment,null,n.createElement(gn,null),n.createElement(_n,null)):n.createElement(n.Fragment,null,n.createElement(_n,null),n.createElement(gn,null))))}var vn=i(7938),xn=i(4860),bn=i(6313),En=i.n(bn);const wn=/title=(?<quote>["'])(?<title>.*?)\1/,Cn=/\{(?<range>[\d,-]+)\}/,Sn={js:{start:"\\/\\/",end:""},jsBlock:{start:"\\/\\*",end:"\\*\\/"},jsx:{start:"\\{\\s*\\/\\*",end:"\\*\\/\\s*\\}"},bash:{start:"#",end:""},html:{start:"\x3c!--",end:"--\x3e"}};function Tn(t,e){const i=t.map((t=>{const{start:i,end:n}=Sn[t];return`(?:${i}\\s*(${e.flatMap((t=>[t.line,t.block?.start,t.block?.end].filter(Boolean))).join("|")})\\s*${n})`})).join("|");return new RegExp(`^\\s*(?:${i})\\s*$`)}function Rn(t,e){let i=t.replace(/\n$/,"");const{language:n,magicComments:r,metastring:s}=e;if(s&&Cn.test(s)){const t=s.match(Cn).groups.range;if(0===r.length)throw new Error(`A highlight range has been given in code block's metastring (\`\`\` ${s}), but no magic comment config is available. Docusaurus applies the first magic comment entry's className for metastring ranges.`);const e=r[0].className,n=En()(t).filter((t=>t>0)).map((t=>[t-1,[e]]));return{lineClassNames:Object.fromEntries(n),code:i}}if(void 0===n)return{lineClassNames:{},code:i};const o=function(t,e){switch(t){case"js":case"javascript":case"ts":case"typescript":return Tn(["js","jsBlock"],e);case"jsx":case"tsx":return Tn(["js","jsBlock","jsx"],e);case"html":return Tn(["js","jsBlock","html"],e);case"python":case"py":case"bash":return Tn(["bash"],e);case"markdown":case"md":return Tn(["html","jsx","bash"],e);default:return Tn(Object.keys(Sn),e)}}(n,r),a=i.split("\n"),l=Object.fromEntries(r.map((t=>[t.className,{start:0,range:""}]))),h=Object.fromEntries(r.filter((t=>t.line)).map((t=>{let{className:e,line:i}=t;return[i,e]}))),c=Object.fromEntries(r.filter((t=>t.block)).map((t=>{let{className:e,block:i}=t;return[i.start,e]}))),u=Object.fromEntries(r.filter((t=>t.block)).map((t=>{let{className:e,block:i}=t;return[i.end,e]})));for(let p=0;p<a.length;){const t=a[p].match(o);if(!t){p+=1;continue}const e=t.slice(1).find((t=>void 0!==t));h[e]?l[h[e]].range+=`${p},`:c[e]?l[c[e]].start=p:u[e]&&(l[u[e]].range+=`${l[u[e]].start}-${p-1},`),a.splice(p,1)}i=a.join("\n");const d={};return Object.entries(l).forEach((t=>{let[e,{range:i}]=t;En()(i).forEach((t=>{d[t]??=[],d[t].push(e)}))})),{lineClassNames:d,code:i}}const Mn={codeBlockContainer:"codeBlockContainer_xKex"};function In(t){let{as:e,...i}=t;const r=function(t){const e={color:"--prism-color",backgroundColor:"--prism-background-color"},i={};return Object.entries(t.plain).forEach((t=>{let[n,r]=t;const s=e[n];s&&"string"==typeof r&&(i[s]=r)})),i}(un());return n.createElement(e,(0,s.Z)({},i,{style:r,className:(0,a.Z)(i.className,Mn.codeBlockContainer,xn.k.common.codeBlock)}))}const Pn={codeBlockContent:"codeBlockContent_RmgG",codeBlockTitle:"codeBlockTitle_A0Fd",codeBlock:"codeBlock_Guzg",codeBlockStandalone:"codeBlockStandalone_SdM6",codeBlockLines:"codeBlockLines_xoQJ",codeBlockLinesWithNumbering:"codeBlockLinesWithNumbering_xSyE",buttonGroup:"buttonGroup_pd17"};function Ln(t){let{children:e,className:i}=t;return n.createElement(In,{as:"pre",tabIndex:0,className:(0,a.Z)(Pn.codeBlockStandalone,"thin-scrollbar",i)},n.createElement("code",{className:Pn.codeBlockLines},e))}var An=i(6229);const kn={attributes:!0,characterData:!0,childList:!0,subtree:!0};function On(t,e){const[i,r]=(0,n.useState)(),s=(0,n.useCallback)((()=>{r(t.current?.closest("[role=tabpanel][hidden]"))}),[t,r]);(0,n.useEffect)((()=>{s()}),[s]),function(t,e,i){void 0===i&&(i=kn);const r=(0,An.zX)(e),s=(0,An.Ql)(i);(0,n.useEffect)((()=>{const e=new MutationObserver(r);return t&&e.observe(t,s),()=>e.disconnect()}),[t,r,s])}(i,(t=>{t.forEach((t=>{"attributes"===t.type&&"hidden"===t.attributeName&&(e(),s())}))}),{attributes:!0,characterData:!1,childList:!1,subtree:!1})}const Nn={codeLine:"codeLine_jyfZ",codeLineNumber:"codeLineNumber_W7OO",codeLineContent:"codeLineContent_xgb3"};function Fn(t){let{line:e,classNames:i,showLineNumbers:r,getLineProps:o,getTokenProps:l}=t;1===e.length&&"\n"===e[0].content&&(e[0].content="");const h=o({line:e,className:(0,a.Z)(i,r&&Nn.codeLine)}),c=e.map(((t,e)=>n.createElement("span",(0,s.Z)({key:e},l({token:t,key:e})))));return n.createElement("span",h,r?n.createElement(n.Fragment,null,n.createElement("span",{className:Nn.codeLineNumber}),n.createElement("span",{className:Nn.codeLineContent},c)):c,n.createElement("br",null))}function Dn(t){return n.createElement("svg",(0,s.Z)({viewBox:"0 0 24 24"},t),n.createElement("path",{fill:"currentColor",d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"}))}function Zn(t){return n.createElement("svg",(0,s.Z)({viewBox:"0 0 24 24"},t),n.createElement("path",{fill:"currentColor",d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}const jn={copyButtonCopied:"copyButtonCopied_jEx6",copyButtonIcons:"copyButtonIcons__vhI",copyButtonIcon:"copyButtonIcon_zBJg",copyButtonSuccessIcon:"copyButtonSuccessIcon_r9Um"};function zn(t){let{code:e,className:i}=t;const[r,s]=(0,n.useState)(!1),o=(0,n.useRef)(void 0),l=(0,n.useCallback)((()=>{!function(t,e){let{target:i=document.body}=void 0===e?{}:e;if("string"!=typeof t)throw new TypeError(`Expected parameter \`text\` to be a \`string\`, got \`${typeof t}\`.`);const n=document.createElement("textarea"),r=document.activeElement;n.value=t,n.setAttribute("readonly",""),n.style.contain="strict",n.style.position="absolute",n.style.left="-9999px",n.style.fontSize="12pt";const s=document.getSelection(),o=s.rangeCount>0&&s.getRangeAt(0);i.append(n),n.select(),n.selectionStart=0,n.selectionEnd=t.length;let a=!1;try{a=document.execCommand("copy")}catch{}n.remove(),o&&(s.removeAllRanges(),s.addRange(o)),r&&r.focus()}(e),s(!0),o.current=window.setTimeout((()=>{s(!1)}),1e3)}),[e]);return(0,n.useEffect)((()=>()=>window.clearTimeout(o.current)),[]),n.createElement("button",{type:"button","aria-label":r?(0,on.I)({id:"theme.CodeBlock.copied",message:"Copied",description:"The copied button label on code blocks"}):(0,on.I)({id:"theme.CodeBlock.copyButtonAriaLabel",message:"Copy code to clipboard",description:"The ARIA label for copy code blocks button"}),title:(0,on.I)({id:"theme.CodeBlock.copy",message:"Copy",description:"The copy button label on code blocks"}),className:(0,a.Z)("clean-btn",i,jn.copyButton,r&&jn.copyButtonCopied),onClick:l},n.createElement("span",{className:jn.copyButtonIcons,"aria-hidden":"true"},n.createElement(Dn,{className:jn.copyButtonIcon}),n.createElement(Zn,{className:jn.copyButtonSuccessIcon})))}function Gn(t){return n.createElement("svg",(0,s.Z)({viewBox:"0 0 24 24"},t),n.createElement("path",{fill:"currentColor",d:"M4 19h6v-2H4v2zM20 5H4v2h16V5zm-3 6H4v2h13.25c1.1 0 2 .9 2 2s-.9 2-2 2H15v-2l-3 3l3 3v-2h2c2.21 0 4-1.79 4-4s-1.79-4-4-4z"}))}const Bn={wordWrapButtonIcon:"wordWrapButtonIcon_HYeC",wordWrapButtonEnabled:"wordWrapButtonEnabled_jLWw"};function Un(t){let{className:e,onClick:i,isEnabled:r}=t;const s=(0,on.I)({id:"theme.CodeBlock.wordWrapToggle",message:"Toggle word wrap",description:"The title attribute for toggle word wrapping button of code block lines"});return n.createElement("button",{type:"button",onClick:i,className:(0,a.Z)("clean-btn",e,r&&Bn.wordWrapButtonEnabled),"aria-label":s,title:s},n.createElement(Gn,{className:Bn.wordWrapButtonIcon,"aria-hidden":"true"}))}function Vn(t){let{children:e,className:i="",metastring:r,title:o,showLineNumbers:l,language:h}=t;const{prism:{defaultLanguage:c,magicComments:u}}=(0,cn.L)(),p=h??function(t){const e=t.split(" ").find((t=>t.startsWith("language-")));return e?.replace(/language-/,"")}(i)??c,f=un(),g=function(){const[t,e]=(0,n.useState)(!1),[i,r]=(0,n.useState)(!1),s=(0,n.useRef)(null),o=(0,n.useCallback)((()=>{const i=s.current.querySelector("code");t?i.removeAttribute("style"):(i.style.whiteSpace="pre-wrap",i.style.overflowWrap="anywhere"),e((t=>!t))}),[s,t]),a=(0,n.useCallback)((()=>{const{scrollWidth:t,clientWidth:e}=s.current,i=t>e||s.current.querySelector("code").hasAttribute("style");r(i)}),[s]);return On(s,a),(0,n.useEffect)((()=>{a()}),[t,a]),(0,n.useEffect)((()=>(window.addEventListener("resize",a,{passive:!0}),()=>{window.removeEventListener("resize",a)})),[a]),{codeBlockRef:s,isEnabled:t,isCodeScrollable:i,toggle:o}}(),m=function(t){return t?.match(wn)?.groups.title??""}(r)||o,{lineClassNames:_,code:y}=Rn(e,{metastring:r,language:p,magicComments:u}),v=l??function(t){return Boolean(t?.includes("showLineNumbers"))}(r);return n.createElement(In,{as:"div",className:(0,a.Z)(i,p&&!i.includes(`language-${p}`)&&`language-${p}`)},m&&n.createElement("div",{className:Pn.codeBlockTitle},m),n.createElement("div",{className:Pn.codeBlockContent},n.createElement(x,(0,s.Z)({},d,{theme:f,code:y,language:p??"text"}),(t=>{let{className:e,tokens:i,getLineProps:r,getTokenProps:s}=t;return n.createElement("pre",{tabIndex:0,ref:g.codeBlockRef,className:(0,a.Z)(e,Pn.codeBlock,"thin-scrollbar")},n.createElement("code",{className:(0,a.Z)(Pn.codeBlockLines,v&&Pn.codeBlockLinesWithNumbering)},i.map(((t,e)=>n.createElement(Fn,{key:e,line:t,getLineProps:r,getTokenProps:s,classNames:_[e],showLineNumbers:v})))))})),n.createElement("div",{className:Pn.buttonGroup},(g.isEnabled||g.isCodeScrollable)&&n.createElement(Un,{className:Pn.codeButton,onClick:()=>g.toggle(),isEnabled:g.isEnabled}),n.createElement(zn,{className:Pn.codeButton,code:y}))))}const qn=(t=>function(e){return e.live?n.createElement(yn,(0,s.Z)({scope:vn.Z},e)):n.createElement(t,e)})((function(t){let{children:e,...i}=t;const r=(0,l.Z)(),o=function(t){return n.Children.toArray(t).some((t=>(0,n.isValidElement)(t)))?t:Array.isArray(t)?t.join(""):t}(e),a="string"==typeof o?Vn:Ln;return n.createElement(a,(0,s.Z)({key:String(r)},i),o)}));var Wn=i(9136);var Xn=i(2305);const Hn={details:"details_HSFH",isBrowser:"isBrowser_YIRE",collapsibleContent:"collapsibleContent_ePc5"};function Kn(t){return!!t&&("SUMMARY"===t.tagName||Kn(t.parentElement))}function Yn(t,e){return!!t&&(t===e||Yn(t.parentElement,e))}function $n(t){let{summary:e,children:i,...r}=t;const o=(0,l.Z)(),h=(0,n.useRef)(null),{collapsed:c,setCollapsed:u}=(0,Xn.u)({initialState:!r.open}),[d,p]=(0,n.useState)(r.open),f=n.isValidElement(e)?e:n.createElement("summary",null,e??"Details");return n.createElement("details",(0,s.Z)({},r,{ref:h,open:d,"data-collapsed":c,className:(0,a.Z)(Hn.details,o&&Hn.isBrowser,r.className),onMouseDown:t=>{Kn(t.target)&&t.detail>1&&t.preventDefault()},onClick:t=>{t.stopPropagation();const e=t.target;Kn(e)&&Yn(e,h.current)&&(t.preventDefault(),c?(u(!1),p(!0)):u(!0))}}),f,n.createElement(Xn.z,{lazy:!1,collapsed:c,disableSSRStyle:!0,onCollapseTransitionEnd:t=>{u(t),p(!t)}},n.createElement("div",{className:Hn.collapsibleContent},i)))}const Jn={details:"details_HcPf"},Qn="alert alert--info";function tr(t){let{...e}=t;return n.createElement($n,(0,s.Z)({},e,{className:(0,a.Z)(Qn,Jn.details,e.className)}))}var er=i(9769);function ir(t){return n.createElement(er.Z,t)}const nr={containsTaskList:"containsTaskList_BImD"};const rr={img:"img_yxHn"};const sr="admonition_eM0R",or="admonitionHeading_PmSm",ar="admonitionIcon_dVh8",lr="admonitionContent_bXoI";const hr={note:{infimaClassName:"secondary",iconComponent:function(){return n.createElement("svg",{viewBox:"0 0 14 16"},n.createElement("path",{fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))},label:n.createElement(on.Z,{id:"theme.admonition.note",description:"The default label used for the Note admonition (:::note)"},"note")},tip:{infimaClassName:"success",iconComponent:function(){return n.createElement("svg",{viewBox:"0 0 12 16"},n.createElement("path",{fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))},label:n.createElement(on.Z,{id:"theme.admonition.tip",description:"The default label used for the Tip admonition (:::tip)"},"tip")},danger:{infimaClassName:"danger",iconComponent:function(){return n.createElement("svg",{viewBox:"0 0 12 16"},n.createElement("path",{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))},label:n.createElement(on.Z,{id:"theme.admonition.danger",description:"The default label used for the Danger admonition (:::danger)"},"danger")},info:{infimaClassName:"info",iconComponent:function(){return n.createElement("svg",{viewBox:"0 0 14 16"},n.createElement("path",{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))},label:n.createElement(on.Z,{id:"theme.admonition.info",description:"The default label used for the Info admonition (:::info)"},"info")},caution:{infimaClassName:"warning",iconComponent:function(){return n.createElement("svg",{viewBox:"0 0 16 16"},n.createElement("path",{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))},label:n.createElement(on.Z,{id:"theme.admonition.caution",description:"The default label used for the Caution admonition (:::caution)"},"caution")}},cr={secondary:"note",important:"info",success:"tip",warning:"danger"};function ur(t){const{mdxAdmonitionTitle:e,rest:i}=function(t){const e=n.Children.toArray(t),i=e.find((t=>n.isValidElement(t)&&"mdxAdmonitionTitle"===t.props?.mdxType)),r=n.createElement(n.Fragment,null,e.filter((t=>t!==i)));return{mdxAdmonitionTitle:i,rest:r}}(t.children);return{...t,title:t.title??e,children:i}}const dr={head:function(t){const e=n.Children.map(t.children,(t=>n.isValidElement(t)?function(t){if(t.props?.mdxType&&t.props.originalType){const{mdxType:e,originalType:i,...r}=t.props;return n.createElement(t.props.originalType,r)}return t}(t):t));return n.createElement(o.Z,t,e)},code:function(t){const e=["a","abbr","b","br","button","cite","code","del","dfn","em","i","img","input","ins","kbd","label","object","output","q","ruby","s","small","span","strong","sub","sup","time","u","var","wbr"];return n.Children.toArray(t.children).every((t=>"string"==typeof t&&!t.includes("\n")||(0,n.isValidElement)(t)&&e.includes(t.props?.mdxType)))?n.createElement("code",t):n.createElement(qn,t)},a:function(t){return n.createElement(Wn.Z,t)},pre:function(t){return n.createElement(qn,(0,n.isValidElement)(t.children)&&"code"===t.children.props?.originalType?t.children.props:{...t})},details:function(t){const e=n.Children.toArray(t.children),i=e.find((t=>n.isValidElement(t)&&"summary"===t.props?.mdxType)),r=n.createElement(n.Fragment,null,e.filter((t=>t!==i)));return n.createElement(tr,(0,s.Z)({},t,{summary:i}),r)},ul:function(t){return n.createElement("ul",(0,s.Z)({},t,{className:(e=t.className,(0,a.Z)(e,e?.includes("contains-task-list")&&nr.containsTaskList))}));var e},img:function(t){return n.createElement("img",(0,s.Z)({loading:"lazy"},t,{className:(e=t.className,(0,a.Z)(e,rr.img))}));var e},h1:t=>n.createElement(ir,(0,s.Z)({as:"h1"},t)),h2:t=>n.createElement(ir,(0,s.Z)({as:"h2"},t)),h3:t=>n.createElement(ir,(0,s.Z)({as:"h3"},t)),h4:t=>n.createElement(ir,(0,s.Z)({as:"h4"},t)),h5:t=>n.createElement(ir,(0,s.Z)({as:"h5"},t)),h6:t=>n.createElement(ir,(0,s.Z)({as:"h6"},t)),admonition:function(t){const{children:e,type:i,title:r,icon:s}=ur(t),o=function(t){const e=cr[t]??t,i=hr[e];return i||(console.warn(`No admonition config found for admonition type "${e}". Using Info as fallback.`),hr.info)}(i),l=r??o.label,{iconComponent:h}=o,c=s??n.createElement(h,null);return n.createElement("div",{className:(0,a.Z)(xn.k.common.admonition,xn.k.common.admonitionType(t.type),"alert",`alert--${o.infimaClassName}`,sr)},n.createElement("div",{className:or},n.createElement("span",{className:ar},c),l),n.createElement("div",{className:lr},e))},mermaid:i(8279).Z};function pr(t){let{children:e}=t;return n.createElement(r.Zo,{components:dr},e)}},7507:function(t,e,i){!function(t,e,i,n,r,s,o,a,l,h,c,u,d,p,f,g,m,_,y,v,x,b,E,w,C,S,T){"use strict";function R(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var M=R(r),I=R(s),P=R(o),L=R(h),A=R(u),k=R(d),O=R(p),N=R(f),F=R(y),D=R(v),Z=R(E),j=R(w),z=R(T);function G(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(i[n[r]]=t[n[r]])}return i}const B={RED:{fill:"rgba(248, 7, 1, 0.3)",stroke:"rgb(248, 7, 1)"},YELLOW:{fill:"rgba(255, 254, 0, 0.3)",stroke:"rgb(255, 254, 0)"},GREEN:{fill:"rgba(30, 128, 0, 0.3)",stroke:"rgb(30, 128, 0)"},SKYBLUE:{fill:"rgba(135, 206, 235, 0.3)",stroke:"rgb(135, 206, 235)"},BLUE:{fill:"rgba(2, 26, 255, 0.3)",stroke:"rgb(2, 26, 255)"},BROWN:{fill:"rgba(165, 42, 42, 0.3)",stroke:"rgb(165, 42, 42)"}},U=i.createContext(null);function V(){return i.useContext(U)}const q=({onClick:t,onHover:e,onLoaded:n,onLoadStart:r})=>{const s=V();function o(e){t&&t({event:e,lonlat:l.toLonLat(e.coordinate)})}function a(t){e&&e({event:t,lonlat:l.toLonLat(t.coordinate)})}function h(t){n&&n(t)}function c(t){r&&r(t)}function u(t){r&&r(t)}i.useEffect((()=>(s.on("click",o),()=>{s.un("click",o)})),[]),i.useEffect((()=>(s.on("pointermove",a),()=>{s.un("pointermove",a)})),[]),i.useEffect((()=>(s.on("rendercomplete",h),()=>{s.un("rendercomplete",h)})),[]),i.useEffect((()=>(s.on("loadstart",c),()=>{s.un("loadstart",c)})),[]),i.useEffect((()=>(s.on("loadend",u),()=>{s.un("loadend",u)})),[])},W=()=>{const t=V(),[e,n]=i.useState(t.getView().getRotation()/(Math.PI/180)),r=i.useCallback((t=>{n(t)}),[]),s=i.useCallback((()=>{n(0)}),[]);return i.useEffect((()=>{t.getView().setRotation(e*(Math.PI/180))}),[e,t]),[e,r,s]};function X(){const[t,e]=i.useState(null),n=V(),r=i=>{const r=n.getFeaturesAtPixel(i.pixel);if(r.length>0){const i=r[0];t!==i&&e(i)}};return i.useEffect((()=>(n.on("singleclick",r),()=>{n.un("singleclick",r)})),[]),t}function H(t,e){const n=i.useRef(!1);i.useEffect((()=>{n.current?t():n.current=!0}),e)}const K=()=>{const[t,e]=i.useState(!1);return i.useEffect((()=>{e(!0)}),[]),t},Y=(t,e)=>{const n=K(),r=i.useMemo((()=>[n,...e]),[n,e]);i.useEffect((()=>{n&&t()}),r)},$=t=>"top"===t?"5px 5px 0 0":"middle"===t?"0":"bottom"===t?"0 0 5px 5px":"solo"===t?"5px 5px 5px 5px":void 0,J=L.default.button`
  display: flex;
  justify-content: center;
  align-items: center;
  ${({active:t})=>t&&c.css`
      box-shadow: inset 0 0 5px;
    `}
  width: 30px;
  height: 30px;
  background: white;
  border: 1px solid #d9d9d9;
  border-radius: ${t=>$(t.side)};
  &:hover {
    border: 1px solid ${t=>t.isDisabled?"#d9d9d9":"#000000"};
  }
`,Q=i.forwardRef((({children:t,onClick:i,side:n="middle",isDisabled:r=!1,isActive:s=!1},o)=>{const a=()=>{i&&i()};return e.jsx(J,Object.assign({ref:o,onClick:a,side:n,isDisabled:r,active:s},{children:t}))}));function tt({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsxs("svg",Object.assign({stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M10.828 9.828a4 4 0 1 0 -5.656 0l2.828 2.829l2.828 -2.829z"}),e.jsx("path",{d:"M8 7l0 .01"}),e.jsx("path",{d:"M18.828 17.828a4 4 0 1 0 -5.656 0l2.828 2.829l2.828 -2.829z"}),e.jsx("path",{d:"M16 15l0 .01"})]}))})}function et(t){var{onEnd:r,onClick:s,onCanvas:o=!1}=t,l=G(t,["onEnd","onClick","onCanvas"]);const h=V(),c=i.useRef(new I.default),u=i.useRef(new M.default({source:c.current})),d=i.useRef(new n.Draw({source:c.current,type:"MultiPoint"})),[p,f]=i.useState([]),[g,m]=i.useState(!1);console.log("isDrawing",g);const[_,y]=i.useState(0),v=()=>{m(!0),s&&s(),h.addInteraction(d.current)},x=t=>{const e=t.feature;e.setProperties({source:c.current,layer:u.current}),f([...p,e]),y((t=>t+1))},b=()=>{r&&r(p),f([]),h.removeInteraction(d.current),m(!1),y(0)};return i.useEffect((()=>{const t=d.current;return t.on("drawend",x),()=>{t.un("drawend",x)}}),[]),i.useEffect((()=>{l.isActive||h.removeInteraction(d.current)}),[l.isActive,h]),i.useEffect((()=>{o?h.addLayer(u.current):h.removeLayer(u.current)}),[o,h]),i.useEffect((()=>{p.forEach(((t,e)=>{const i=new P.default({image:new a.Circle({radius:10,fill:new a.Fill({color:B.BLUE.fill}),stroke:new a.Stroke({color:B.BLUE.stroke,width:2})}),text:new a.Text({text:String(_+e),font:"bold 15px sans-serif",textAlign:"center",fill:new a.Fill({color:"#000"}),stroke:new a.Stroke({color:"#fff",width:3})})});t.setStyle(i)}))}),[p,_]),e.jsx(Q,Object.assign({onClick:()=>{g?b():v()}},l,{children:e.jsx(tt,{})}))}const it={marker:""},nt=({text:t="",size:e=15,color:i="black",outline:n=!0,isMarker:r=!1})=>new O.default({text:t,textAlign:"center",font:`${e}px roboto, sans-serif`,fill:new A.default({color:i}),offsetY:r?-50:0,overflow:!0,stroke:n?new k.default({color:"white",width:3}):void 0});function rt({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsx("svg",Object.assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 384 512",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"})}))})}function st(t){var{onEnd:r,onClick:s,onCanvas:o=!1}=t,a=G(t,["onEnd","onClick","onCanvas"]);const l=V(),h=i.useRef(new I.default),c=i.useRef(new M.default),u=i.useRef(new n.Draw({source:h.current,type:"Point",style:new P.default({text:nt({text:"unknown",size:15,color:"black",outline:!0,isMarker:!0}),image:new N.default({src:it.marker,anchor:[.5,1]})})})),d=()=>{s&&s(),l.addInteraction(u.current)},p=t=>{const e=t.feature;e.setStyle(new P.default({text:nt({text:"unknown",size:15,color:"black",outline:!0,isMarker:!0}),image:new N.default({src:it.marker,anchor:[.5,1]})})),e.setProperties({source:h.current,layer:c.current}),l.removeInteraction(u.current),r&&r(e)};return i.useEffect((()=>{const t=u.current;return t.on("drawend",p),()=>{t.un("drawend",p)}}),[]),i.useEffect((()=>{a.isActive||l.removeInteraction(u.current)}),[a.isActive,l]),i.useEffect((()=>{c.current.setSource(h.current),o?l.addLayer(c.current):l.removeLayer(c.current)}),[o,l]),e.jsx(Q,Object.assign({onClick:d},a,{children:e.jsx(rt,{})}))}function ot({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsxs("svg",Object.assign({stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 5m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M19 8m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M5 11m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M15 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),e.jsx("path",{d:"M6.5 9.5l3.5 -3"}),e.jsx("path",{d:"M14 5.5l3 1.5"}),e.jsx("path",{d:"M18.5 10l-2.5 7"}),e.jsx("path",{d:"M13.5 17.5l-7 -5"})]}))})}function at(t){var{onEnd:r,onClick:s,onCanvas:o=!1}=t,a=G(t,["onEnd","onClick","onCanvas"]);const l=V(),h=i.useRef(new I.default),c=i.useRef(new M.default),u=i.useRef(new n.Draw({source:h.current,type:"Polygon",style:new P.default({stroke:new k.default({color:"rgb(2, 26, 255)",width:2}),fill:new A.default({color:"rgba(2, 26, 255, 0.3)"}),image:new N.default({src:"mapicon/polygon.svg",anchor:[.5,1]})})})),d=()=>{s&&s(),l.addInteraction(u.current)},p=t=>{const e=t.feature;e.setStyle(new P.default({stroke:new k.default({color:"rgb(2, 26, 255)",width:2}),fill:new A.default({color:"rgba(2, 27, 255, 0.1)"}),text:nt({text:"unknown",size:15,color:"black",outline:!0,isMarker:!0})})),e.setProperties({source:h.current,layer:c.current}),l.removeInteraction(u.current),r&&r(e)};return i.useEffect((()=>{const t=new M.default({source:h.current});l.addLayer(t);const e=u.current;return e.on("drawend",p),()=>{e.un("drawend",p)}}),[]),i.useEffect((()=>{a.isActive||l.removeInteraction(u.current)}),[a.isActive,l]),i.useEffect((()=>{c.current.setSource(h.current),o?l.addLayer(c.current):l.removeLayer(c.current)}),[o,l]),e.jsx(Q,Object.assign({onClick:d},a,{children:e.jsx(ot,{})}))}function lt({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsxs("svg",Object.assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:[e.jsx("path",{fill:"none",d:"M0 0h24v24H0z"}),e.jsx("path",{d:"M15 16v1.26l-6-3v-3.17L11.7 8H16V2h-6v4.9L7.3 10H3v6h5l7 3.5V22h6v-6z"})]}))})}function ht(t){var{onEnd:r,onClick:s,onCanvas:o=!1}=t,a=G(t,["onEnd","onClick","onCanvas"]);const l=V(),h=i.useRef(new I.default),c=i.useRef(new M.default),u=i.useRef(new n.Draw({source:h.current,type:"LineString",style:new P.default({stroke:new k.default({color:"rgb(2, 26, 255)",width:2}),fill:new A.default({color:"rgba(2, 26, 255, 0.3)"}),image:new N.default({src:"mapicon/polyline.svg",anchor:[.5,1]})})})),d=()=>{s&&s(),l.addInteraction(u.current)},p=t=>{const e=t.feature;e.setStyle(new P.default({stroke:new k.default({color:"rgb(2, 26, 255)",width:2}),fill:new A.default({color:"rgba(2, 26, 255, 0.3)"}),text:nt({text:"unknown",size:15,color:"black",outline:!0,isMarker:!0})})),e.setProperties({source:h.current,layer:c.current}),l.removeInteraction(u.current),r&&r(e)};return i.useEffect((()=>{const t=u.current;return t.on("drawend",p),()=>{t.un("drawend",p)}}),[]),i.useEffect((()=>{a.isActive||l.removeInteraction(u.current)}),[a.isActive,l]),i.useEffect((()=>{c.current.setSource(h.current),o?l.addLayer(c.current):l.removeLayer(c.current)}),[o,l]),e.jsx(Q,Object.assign({onClick:d},a,{children:e.jsx(lt,{})}))}function ct({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsxs("svg",Object.assign({stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M3 5m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z"})]}))})}function ut(t){var{onEnd:r,onClick:s,onCanvas:o=!1}=t,a=G(t,["onEnd","onClick","onCanvas"]);const l=V(),h=i.useRef(new I.default),c=i.useRef(new M.default),u=i.useRef(new n.Draw({source:h.current,type:"Circle",geometryFunction:g.createBox(),style:new P.default({stroke:new k.default({color:"rgb(2, 26, 255)",width:2}),fill:new A.default({color:"rgba(2, 26, 255, 0.3)"}),image:new N.default({src:"mapicon/Rectangle.svg",anchor:[.5,1]})})})),d=()=>{s&&s(),l.addInteraction(u.current)},p=t=>{t.feature.setStyle(new P.default({stroke:new k.default({color:"rgb(2, 26, 255)",width:2}),fill:new A.default({color:"rgba(2, 26, 255, 0.3)"}),text:nt({text:"unknown",size:15,color:"black",outline:!0,isMarker:!0})})),t.feature.setProperties({source:h.current,layer:c.current}),l.removeInteraction(u.current),r&&r(t.feature)};return i.useEffect((()=>{const t=u.current;return t.on("drawend",p),()=>{t.un("drawend",p)}}),[]),i.useEffect((()=>{a.isActive||l.removeInteraction(u.current)}),[a.isActive,l]),i.useEffect((()=>{c.current.setSource(h.current),o?l.addLayer(c.current):l.removeLayer(c.current)}),[o,l]),e.jsx(Q,Object.assign({onClick:d},a,{children:e.jsx(ct,{})}))}function dt({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsxs("svg",Object.assign({stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M6 4l12 0"}),e.jsx("path",{d:"M12 4l0 16"})]}))})}function pt(t){var{onEnd:r,onClick:s,onCanvas:o=!1}=t,a=G(t,["onEnd","onClick","onCanvas"]);const l=V(),h=i.useRef(new I.default),c=i.useRef(new M.default),u=i.useRef(new n.Draw({source:h.current,type:"Point",style:new P.default({text:new O.default({text:"unknown",font:"15px Arial",fill:new A.default({color:"black"}),overflow:!0,offsetX:0,offsetY:-15,stroke:new k.default({color:"white",width:3})})})})),d=()=>{s&&s(),l.addInteraction(u.current)},p=t=>{const e=t.feature;e.setStyle(new P.default({text:new O.default({text:"unknown",font:"15px Arial",fill:new A.default({color:"black"}),overflow:!0,offsetX:0,offsetY:-15,stroke:new k.default({color:"white",width:3})})})),e.setProperties({source:h.current,layer:c.current}),l.removeInteraction(u.current),r&&r(e)};return i.useEffect((()=>{const t=u.current;return t.on("drawend",p),()=>{t.un("drawend",p)}}),[]),i.useEffect((()=>{a.isActive||l.removeInteraction(u.current)}),[a.isActive,l]),i.useEffect((()=>{c.current.setSource(h.current),o?l.addLayer(c.current):l.removeLayer(c.current)}),[o,l]),e.jsx(Q,Object.assign({onClick:d},a,{children:e.jsx(dt,{})}))}function ft({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsx("svg",Object.assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"})}))})}function gt(t){const r=X(),s=V(),o=i.useRef(null),a=t=>{t.selected.forEach((t=>{t.getGeometry()&&t.getProperties().source.clear()}))};return i.useEffect((()=>{t.isActive?o.current||(o.current=new n.Select,o.current.on("select",a),s.addInteraction(o.current)):o.current&&(o.current.un("select",a),s.removeInteraction(o.current),o.current=null)}),[s,t.isActive]),i.useEffect((()=>{o.current&&r&&(o.current.getFeatures().clear(),o.current.getFeatures().push(r))}),[r]),e.jsx(Q,Object.assign({},t,{children:e.jsx(ft,{})}))}const mt={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class _t extends Error{constructor(t){const e=mt[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}var yt=_t;class vt{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}var xt=vt,bt={PROPERTYCHANGE:"propertychange"};class Et{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}var wt=Et;function Ct(t,e){return t>e?1:t<e?-1:0}function St(t,e,i){const n=t.length;if(t[0]<=e)return 0;if(e<=t[n-1])return n-1;let r;if(i>0){for(r=1;r<n;++r)if(t[r]<e)return r-1}else if(i<0){for(r=1;r<n;++r)if(t[r]<=e)return r}else for(r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return"function"==typeof i?i(e,t[r-1],t[r])>0?r-1:r:t[r-1]-e<e-t[r]?r-1:r}return n-1}function Tt(t,e){const i=Array.isArray(e)?e:[e],n=i.length;for(let r=0;r<n;r++)t[t.length]=i[r]}function Rt(t,e){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Mt(){return!0}function It(){return!1}function Pt(){}function Lt(t){let e,i,n,r=!1;return function(){const s=Array.prototype.slice.call(arguments);return r&&this===n&&Rt(s,i)||(r=!0,n=this,i=s,e=t.apply(this,arguments)),e}}function At(t){for(const e in t)delete t[e]}function kt(t){let e;for(e in t)return!1;return!e}class Ot extends wt{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e="string"==typeof t,i=e?t:t.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const r=e?new xt(t):t;r.target||(r.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});let a;i in s||(s[i]=0,o[i]=0),++s[i];for(let l=0,h=n.length;l<h;++l)if(a="handleEvent"in n[l]?n[l].handleEvent(r):n[l].call(this,r),!1===a||r.propagationStopped){a=!1;break}if(0==--s[i]){let t=o[i];for(delete o[i];t--;)this.removeEventListener(i,Pt);delete s[i]}return a}disposeInternal(){this.listeners_&&At(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=Pt,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}}}var Nt=Ot,Ft={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Dt(t,e,i,n,r){if(n&&n!==t&&(i=i.bind(n)),r){const n=i;i=function(){t.removeEventListener(e,i),n.apply(this,arguments)}}const s={target:t,type:e,listener:i};return t.addEventListener(e,i),s}function Zt(t,e,i,n){return Dt(t,e,i,n,!0)}function jt(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),At(t))}class zt extends Nt{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(Ft.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=Dt(this,t[r],e);return n}return Dt(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let r=0;r<n;++r)i[r]=Zt(this,t[r],e)}else i=Zt(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)Gt(i);else if(Array.isArray(t))for(let n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}function Gt(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)jt(t[e]);else jt(t)}zt.prototype.on,zt.prototype.once,zt.prototype.un;var Bt=zt;function Ut(){throw new Error("Unimplemented abstract method.")}let Vt=0;function qt(t){return t.ol_uid||(t.ol_uid=String(++Vt))}class Wt extends xt{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class Xt extends Bt{constructor(t){super(),this.on,this.once,this.un,qt(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new Wt(i,t,e)),i=bt.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Wt(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const i=n[t];n[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],kt(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}var Ht=Xt,Kt={ADD:"add",REMOVE:"remove"};const Yt={LENGTH:"length"};class $t extends xt{constructor(t,e,i){super(t),this.element=e,this.index=i}}class Jt extends Ht{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Yt.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new $t(Kt.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new $t(Kt.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new $t(Kt.REMOVE,i,t)),this.dispatchEvent(new $t(Kt.ADD,e,t))}updateLength_(){this.set(Yt.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new yt(58)}}var Qt=Jt;function te(t,e){if(!t)throw new yt(e)}class ee extends Ht{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new ee(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(jt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Dt(t,Ft.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?ie(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function ie(t){if("function"==typeof t)return t;let e;return Array.isArray(t)?e=t:(te("function"==typeof t.getZIndex,41),e=[t]),function(){return e}}var ne=ee;const re="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",se=re.includes("firefox");re.includes("safari")&&!re.includes("chrom")&&(re.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(re));const oe=re.includes("webkit")&&!re.includes("edge"),ae=re.includes("macintosh"),le="undefined"!=typeof devicePixelRatio?devicePixelRatio:1;"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&(self,WorkerGlobalScope);const he=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(e){}return t}();function ce(){return[1,0,0,1,0,0]}function ue(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function de(t,e,i,n,r,s,o,a){const l=Math.sin(s),h=Math.cos(s);return t[0]=n*h,t[1]=r*l,t[2]=-n*l,t[3]=r*h,t[4]=o*n*h-a*n*l+e,t[5]=o*r*l+a*r*h+i,t}function pe(t,e){const i=fe(e);te(0!==i,32);const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/i,t[1]=-r/i,t[2]=-s/i,t[3]=n/i,t[4]=(s*l-o*a)/i,t[5]=-(n*l-r*a)/i,t}function fe(t){return t[0]*t[3]-t[1]*t[2]}new Array(6);var ge={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function me(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function _e(t,e,i){let n,r;return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,n*n+r*r}function ye(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function ve(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function xe(t,e){const i=t[0],n=t[1],r=t[2],s=t[3],o=e[0],a=e[1];let l=ge.UNKNOWN;return o<i?l|=ge.LEFT:o>r&&(l|=ge.RIGHT),a<n?l|=ge.BELOW:a>s&&(l|=ge.ABOVE),l===ge.UNKNOWN&&(l=ge.INTERSECTING),l}function be(){return[1/0,1/0,-1/0,-1/0]}function Ee(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function we(t){return Ee(1/0,1/0,-1/0,-1/0,t)}function Ce(t,e){const i=t[0],n=t[1];return Ee(i,n,i,n,e)}function Se(t,e,i,n,r){return Re(we(r),t,e,i,n)}function Te(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Re(t,e,i,n,r){for(;i<n;i+=r)Me(t,e[i],e[i+1]);return t}function Me(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function Ie(t,e){let i;return i=e(Pe(t)),i||(i=e(Le(t)),i||(i=e(Ze(t)),i||(i=e(De(t)),i||!1)))}function Pe(t){return[t[0],t[1]]}function Le(t){return[t[2],t[1]]}function Ae(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function ke(t,e,i,n,r){const[s,o,a,l,h,c,u,d]=Oe(t,e,i,n);return Ee(Math.min(s,a,h,u),Math.min(o,l,c,d),Math.max(s,a,h,u),Math.max(o,l,c,d),r)}function Oe(t,e,i,n){const r=e*n[0]/2,s=e*n[1]/2,o=Math.cos(i),a=Math.sin(i),l=r*o,h=r*a,c=s*o,u=s*a,d=t[0],p=t[1];return[d-l+u,p-h-c,d-l-u,p-h+c,d+l-u,p+h+c,d+l+u,p+h-c,d-l+u,p-h-c]}function Ne(t){return t[3]-t[1]}function Fe(t,e,i){const n=i||be();return ze(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):we(n),n}function De(t){return[t[0],t[3]]}function Ze(t){return[t[2],t[3]]}function je(t){return t[2]-t[0]}function ze(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Ge(t){return t[2]<t[0]||t[3]<t[1]}function Be(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function Ue(t,e,i){let n=!1;const r=xe(t,e),s=xe(t,i);if(r===ge.INTERSECTING||s===ge.INTERSECTING)n=!0;else{const o=t[0],a=t[1],l=t[2],h=t[3],c=e[0],u=e[1],d=i[0],p=i[1],f=(p-u)/(d-c);let g,m;s&ge.ABOVE&&!(r&ge.ABOVE)&&(g=d-(p-h)/f,n=g>=o&&g<=l),n||!(s&ge.RIGHT)||r&ge.RIGHT||(m=p-(d-l)*f,n=m>=a&&m<=h),n||!(s&ge.BELOW)||r&ge.BELOW||(g=d-(p-a)/f,n=g>=o&&g<=l),n||!(s&ge.LEFT)||r&ge.LEFT||(m=p-(d-o)*f,n=m>=a&&m<=h)}return n}const Ve={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class qe{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ve[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var We=qe;const Xe=6378137,He=Math.PI*Xe,Ke=[-He,-He,He,He],Ye=[-180,-85,180,85],$e=Xe*Math.log(Math.tan(Math.PI/2));class Je extends We{constructor(t){super({code:t,units:"m",extent:Ke,global:!0,worldExtent:Ye,getPointResolution:function(t,e){return t/Math.cosh(e[1]/Xe)}})}}const Qe=[new Je("EPSG:3857"),new Je("EPSG:102100"),new Je("EPSG:102113"),new Je("EPSG:900913"),new Je("http://www.opengis.net/def/crs/EPSG/0/3857"),new Je("http://www.opengis.net/gml/srs/epsg.xml#3857")];function ti(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let r=0;r<n;r+=i){e[r]=He*t[r]/180;let i=Xe*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));i>$e?i=$e:i<-$e&&(i=-$e),e[r+1]=i}return e}function ei(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let r=0;r<n;r+=i)e[r]=180*t[r]/He,e[r+1]=360*Math.atan(Math.exp(t[r+1]/Xe))/Math.PI-90;return e}const ii=6378137,ni=[-180,-90,180,90],ri=Math.PI*ii/180;class si extends We{constructor(t,e){super({code:t,units:"degrees",extent:ni,axisOrientation:e,global:!0,metersPerUnit:ri,worldExtent:ni})}}const oi=[new si("CRS:84"),new si("EPSG:4326","neu"),new si("urn:ogc:def:crs:OGC:1.3:CRS84"),new si("urn:ogc:def:crs:OGC:2:84"),new si("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new si("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new si("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let ai={};function li(t){return ai[t]||ai[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function hi(t,e){ai[t]=e}let ci={};function ui(t,e,i){const n=t.getCode(),r=e.getCode();n in ci||(ci[n]={}),ci[n][r]=i}function di(t,e){let i;return t in ci&&e in ci[t]&&(i=ci[t][e]),i}function pi(t,e,i){return Math.min(Math.max(t,e),i)}function fi(t,e,i,n,r,s){const o=r-i,a=s-n;if(0!==o||0!==a){const l=((t-i)*o+(e-n)*a)/(o*o+a*a);l>1?(i=r,n=s):l>0&&(i+=o*l,n+=a*l)}return gi(t,e,i,n)}function gi(t,e,i,n){const r=i-t,s=n-e;return r*r+s*s}function mi(t){return t*Math.PI/180}function _i(t,e){const i=t%e;return i*e<0?i+e:i}function yi(t,e,i){return t+i*(e-t)}function vi(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function xi(t,e){let i=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function bi(t,e){const i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,s=t[1]*i+t[0]*n;return t[0]=r,t[1]=s,t}function Ei(t,e){return t[0]*=e,t[1]*=e,t}function wi(t,e){if(e.canWrapX()){const i=je(e.getExtent()),n=Ci(t,e,i);n&&(t[0]-=n*i)}return t}function Ci(t,e,i){const n=e.getExtent();let r=0;return e.canWrapX()&&(t[0]<n[0]||t[0]>n[2])&&(i=i||je(n),r=Math.floor((t[0]-n[0])/i)),r}const Si={info:1,warn:2,error:3,none:4};let Ti=Si.info;function Ri(...t){Ti>Si.warn||console.warn(...t)}let Mi=!0;function Ii(t){Mi=!(void 0===t||t)}function Pi(t,e){if(void 0!==e)for(let i=0,n=t.length;i<n;++i)e[i]=t[i];else e=t.slice();return e}function Li(t,e){if(void 0!==e&&t!==e){for(let i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function Ai(t){hi(t.getCode(),t),ui(t,t,Pi)}function ki(t){t.forEach(Ai)}function Oi(t){return"string"==typeof t?li(t):t||null}function Ni(t){ki(t),t.forEach((function(e){t.forEach((function(t){e!==t&&ui(e,t,Pi)}))}))}function Fi(t,e,i,n){t.forEach((function(t){e.forEach((function(e){ui(t,e,i),ui(e,t,n)}))}))}function Di(t,e){return t?"string"==typeof t?Oi(t):t:Oi(e)}function Zi(t,e){let i=di(t.getCode(),e.getCode());return i||(i=Li),i}function ji(t,e){return Zi(Oi(t),Oi(e))}function zi(t,e){return t}function Gi(t,e){return Mi&&!xi(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(Mi=!1,Ri("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t}function Bi(t,e){return t}function Ui(t,e){return t}function Vi(){Ni(Qe),Ni(oi),Fi(oi,Qe,ti,ei)}function qi(t,e,i,n,r,s){s=s||[];let o=0;for(let a=e;a<i;a+=n){const e=t[a],i=t[a+1];s[o++]=r[0]*e+r[2]*i+r[4],s[o++]=r[1]*e+r[3]*i+r[5]}return s&&s.length!=o&&(s.length=o),s}function Wi(t,e,i,n,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),h=s[0],c=s[1];let u=0;for(let d=e;d<i;d+=n){const e=t[d]-h,i=t[d+1]-c;o[u++]=h+e*a-i*l,o[u++]=c+e*l+i*a;for(let r=d+2;r<d+n;++r)o[u++]=t[r]}return o&&o.length!=u&&(o.length=u),o}function Xi(t,e,i,n,r,s,o,a){a=a||[];const l=o[0],h=o[1];let c=0;for(let u=e;u<i;u+=n){const e=t[u]-l,i=t[u+1]-h;a[c++]=l+r*e,a[c++]=h+s*i;for(let r=u+2;r<u+n;++r)a[c++]=t[r]}return a&&a.length!=c&&(a.length=c),a}function Hi(t,e,i,n,r,s,o){o=o||[];let a=0;for(let l=e;l<i;l+=n){o[a++]=t[l]+r,o[a++]=t[l+1]+s;for(let e=l+2;e<l+n;++e)o[a++]=t[e]}return o&&o.length!=a&&(o.length=a),o}Vi();const Ki=ce();class Yi extends Ht{constructor(){super(),this.extent_=be(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Lt((function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return Ut()}closestPointXY(t,e,i,n){return Ut()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return Ut()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&we(t),this.extentRevision_=this.getRevision()}return Be(this.extent_,t)}rotate(t,e){Ut()}scale(t,e,i){Ut()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return Ut()}getType(){return Ut()}applyTransform(t){Ut()}intersectsExtent(t){return Ut()}translate(t,e){Ut()}transform(t,e){const i=Oi(t),n="tile-pixels"==i.getUnits()?function(t,n,r){const s=i.getExtent(),o=i.getWorldExtent(),a=Ne(o)/Ne(s);return de(Ki,o[0],o[3],a,-a,0,0,0),qi(t,0,t.length,r,Ki,n),ji(i,e)(t,n,r)}:ji(i,e);return this.applyTransform(n),this}}var $i=Yi;class Ji extends $i{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return Se(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return Ut()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=tn(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){Ut()}setLayout(t,e,i){let n;if(t)n=tn(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}n=e.length,t=Qi(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();Wi(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=Ae(this.getExtent()));const n=this.getFlatCoordinates();if(n){const r=this.getStride();Xi(n,0,n.length,r,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();Hi(i,0,i.length,n,t,e,i),this.changed()}}}function Qi(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function tn(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}var en=Ji;function nn(t,e,i,n,r,s,o){const a=t[e],l=t[e+1],h=t[i]-a,c=t[i+1]-l;let u;if(0===h&&0===c)u=e;else{const d=((r-a)*h+(s-l)*c)/(h*h+c*c);if(d>1)u=i;else{if(d>0){for(let r=0;r<n;++r)o[r]=yi(t[e+r],t[i+r],d);return void(o.length=n)}u=e}}for(let d=0;d<n;++d)o[d]=t[u+d];o.length=n}function rn(t,e,i,n,r){let s=t[e],o=t[e+1];for(e+=n;e<i;e+=n){const i=t[e],n=t[e+1],a=gi(s,o,i,n);a>r&&(r=a),s=i,o=n}return r}function sn(t,e,i,n,r){for(let s=0,o=i.length;s<o;++s){const o=i[s];r=rn(t,e,o,n,r),e=o}return r}function on(t,e,i,n,r,s,o,a,l,h,c){if(e==i)return h;let u,d;if(0===r){if(d=gi(o,a,t[e],t[e+1]),d<h){for(u=0;u<n;++u)l[u]=t[e+u];return l.length=n,d}return h}c=c||[NaN,NaN];let p=e+n;for(;p<i;)if(nn(t,p-n,p,n,o,a,c),d=gi(o,a,c[0],c[1]),d<h){for(h=d,u=0;u<n;++u)l[u]=c[u];l.length=n,p+=n}else p+=n*Math.max((Math.sqrt(d)-Math.sqrt(h))/r|0,1);if(s&&(nn(t,i-n,e,n,o,a,c),d=gi(o,a,c[0],c[1]),d<h)){for(h=d,u=0;u<n;++u)l[u]=c[u];l.length=n}return h}function an(t,e,i,n,r,s,o,a,l,h,c){c=c||[NaN,NaN];for(let u=0,d=i.length;u<d;++u){const d=i[u];h=on(t,e,d,n,r,s,o,a,l,h,c),e=d}return h}function ln(t,e,i,n){for(let r=0,s=i.length;r<s;++r)t[e++]=i[r];return e}function hn(t,e,i,n){for(let r=0,s=i.length;r<s;++r){const s=i[r];for(let i=0;i<n;++i)t[e++]=s[i]}return e}function cn(t,e,i,n,r){r=r||[];let s=0;for(let o=0,a=i.length;o<a;++o){const a=hn(t,e,i[o],n);r[s++]=a,e=a}return r.length=s,r}function un(t,e,i,n,r,s,o){const a=(i-e)/n;if(a<3){for(;e<i;e+=n)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[e,i-n];let c=0;for(;h.length>0;){const i=h.pop(),s=h.pop();let o=0;const a=t[s],u=t[s+1],d=t[i],p=t[i+1];for(let e=s+n;e<i;e+=n){const i=fi(t[e],t[e+1],a,u,d,p);i>o&&(c=e,o=i)}o>r&&(l[(c-e)/n]=1,s+n<c&&h.push(s,c),c+n<i&&h.push(c,i))}for(let u=0;u<a;++u)l[u]&&(s[o++]=t[e+u*n],s[o++]=t[e+u*n+1]);return o}function dn(t,e){return e*Math.round(t/e)}function pn(t,e,i,n,r,s,o){if(e==i)return o;let a,l,h=dn(t[e],r),c=dn(t[e+1],r);e+=n,s[o++]=h,s[o++]=c;do{if(a=dn(t[e],r),l=dn(t[e+1],r),(e+=n)==i)return s[o++]=a,s[o++]=l,o}while(a==h&&l==c);for(;e<i;){const i=dn(t[e],r),u=dn(t[e+1],r);if(e+=n,i==a&&u==l)continue;const d=a-h,p=l-c,f=i-h,g=u-c;d*g==p*f&&(d<0&&f<d||d==f||d>0&&f>d)&&(p<0&&g<p||p==g||p>0&&g>p)?(a=i,l=u):(s[o++]=a,s[o++]=l,h=a,c=l,a=i,l=u)}return s[o++]=a,s[o++]=l,o}function fn(t,e,i,n,r,s,o,a){for(let l=0,h=i.length;l<h;++l){const h=i[l];o=pn(t,e,h,n,r,s,o),a.push(o),e=h}return o}function gn(t,e,i,n,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<i;o+=n)r[s++]=t.slice(o,o+n);return r.length=s,r}function mn(t,e,i,n,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=i.length;o<a;++o){const a=i[o];r[s++]=gn(t,e,a,n,r[s]),e=a}return r.length=s,r}function _n(t,e,i,n){let r=0,s=t[i-n],o=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];r+=o*i-s*n,s=i,o=n}return r/2}function yn(t,e,i,n){let r=0;for(let s=0,o=i.length;s<o;++s){const o=i[s];r+=_n(t,e,o,n),e=o}return r}class vn extends en{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new vn(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<_e(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(rn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),on(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return _n(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return gn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=un(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new vn(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=hn(this.flatCoordinates,0,t,this.stride),this.changed()}}var xn=vn;class bn extends en{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new bn(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const r=this.flatCoordinates,s=gi(t,e,r[0],r[1]);if(s<n){const t=this.stride;for(let e=0;e<t;++e)i[e]=r[e];return i.length=t,s}return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return Ce(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return ve(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ln(this.flatCoordinates,0,t,this.stride),this.changed()}}var En=bn;function wn(t,e,i,n,r){return!Ie(r,(function(r){return!Cn(t,e,i,n,r[0],r[1])}))}function Cn(t,e,i,n,r,s){let o=0,a=t[i-n],l=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];l<=s?n>s&&(i-a)*(s-l)-(r-a)*(n-l)>0&&o++:n<=s&&(i-a)*(s-l)-(r-a)*(n-l)<0&&o--,a=i,l=n}return 0!==o}function Sn(t,e,i,n,r,s){if(0===i.length)return!1;if(!Cn(t,e,i[0],n,r,s))return!1;for(let o=1,a=i.length;o<a;++o)if(Cn(t,i[o-1],i[o],n,r,s))return!1;return!0}function Tn(t,e,i,n,r,s,o){let a,l,h,c,u,d,p;const f=r[s+1],g=[];for(let y=0,v=i.length;y<v;++y){const r=i[y];for(c=t[r-n],d=t[r-n+1],a=e;a<r;a+=n)u=t[a],p=t[a+1],(f<=d&&p<=f||d<=f&&f<=p)&&(h=(f-d)/(p-d)*(u-c)+c,g.push(h)),c=u,d=p}let m=NaN,_=-1/0;for(g.sort(Ct),c=g[0],a=1,l=g.length;a<l;++a){u=g[a];const r=Math.abs(u-c);r>_&&(h=(c+u)/2,Sn(t,e,i,n,h,f)&&(m=h,_=r)),c=u}return isNaN(m)&&(m=r[s]),o?(o.push(m,f,_),o):[m,f,_]}function Rn(t,e,i,n,r){let s;for(e+=n;e<i;e+=n)if(s=r(t.slice(e-n,e),t.slice(e,e+n)),s)return s;return!1}function Mn(t,e,i,n,r){const s=Re(be(),t,e,i,n);return!!ze(r,s)&&(!!ye(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]||Rn(t,e,i,n,(function(t,e){return Ue(r,t,e)})))}function In(t,e,i,n,r){return!!(Mn(t,e,i,n,r)||Cn(t,e,i,n,r[0],r[1])||Cn(t,e,i,n,r[0],r[3])||Cn(t,e,i,n,r[2],r[1])||Cn(t,e,i,n,r[2],r[3]))}function Pn(t,e,i,n,r){if(!In(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(let s=1,o=i.length;s<o;++s)if(wn(t,i[s-1],i[s],n,r)&&!Mn(t,i[s-1],i[s],n,r))return!1;return!0}function Ln(t,e,i,n){for(;e<i-n;){for(let r=0;r<n;++r){const s=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=s}e+=n,i-=n}}function An(t,e,i,n){let r=0,s=t[i-n],o=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];r+=(i-s)*(n+o),s=i,o=n}return 0===r?void 0:r>0}function kn(t,e,i,n,r){r=void 0!==r&&r;for(let s=0,o=i.length;s<o;++s){const o=i[s],a=An(t,e,o,n);if(0===s){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;e=o}return!0}function On(t,e,i,n,r){r=void 0!==r&&r;for(let s=0,o=i.length;s<o;++s){const o=i[s],a=An(t,e,o,n);(0===s?r&&a||!r&&!a:r&&!a||!r&&a)&&Ln(t,e,o,n),e=o}return e}class Nn extends en{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?Tt(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Nn(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<_e(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(sn(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),an(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return Sn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return yn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),On(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,mn(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Ae(this.getExtent());this.flatInteriorPoint_=Tn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new En(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new xn(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[];let r=0;for(let s=0,o=i.length;s<o;++s){const o=i[s],a=new xn(e.slice(r,o),t);n.push(a),r=o}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;kn(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=On(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=fn(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new Nn(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return Pn(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=cn(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}function Fn(t){const e=t[0],i=t[1],n=t[2],r=t[3],s=[e,i,e,r,n,r,n,i,e,i];return new Nn(s,"XY",[s.length])}var Dn={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};function Zn(t){return t[0]>0&&t[1]>0}function jn(t){return"string"==typeof t?t:zn(t)}function zn(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];return n!=(0|n)&&(n=n+.5|0),"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function Gn(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function Bn(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function Un(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function Vn(t,e){const i=t.childNodes;for(let n=0;;++n){const r=i[n],s=e[n];if(!r&&!s)break;r!==s&&(r?s?t.insertBefore(s,r):(t.removeChild(r),--n):t.appendChild(s))}}const qn="ol-hidden",Wn="ol-unselectable",Xn="ol-control",Hn="ol-collapsed",Kn=new Ht;var Yn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class $n extends Ht{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[Yn.OPACITY]=void 0!==t.opacity?t.opacity:1,te("number"==typeof e[Yn.OPACITY],64),e[Yn.VISIBLE]=void 0===t.visible||t.visible,e[Yn.Z_INDEX]=t.zIndex,e[Yn.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[Yn.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[Yn.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[Yn.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=pi(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return Ut()}getLayerStatesArray(t){return Ut()}getExtent(){return this.get(Yn.EXTENT)}getMaxResolution(){return this.get(Yn.MAX_RESOLUTION)}getMinResolution(){return this.get(Yn.MIN_RESOLUTION)}getMinZoom(){return this.get(Yn.MIN_ZOOM)}getMaxZoom(){return this.get(Yn.MAX_ZOOM)}getOpacity(){return this.get(Yn.OPACITY)}getSourceState(){return Ut()}getVisible(){return this.get(Yn.VISIBLE)}getZIndex(){return this.get(Yn.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Yn.EXTENT,t)}setMaxResolution(t){this.set(Yn.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Yn.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Yn.MAX_ZOOM,t)}setMinZoom(t){this.set(Yn.MIN_ZOOM,t)}setOpacity(t){te("number"==typeof t,64),this.set(Yn.OPACITY,t)}setVisible(t){this.set(Yn.VISIBLE,t)}setZIndex(t){this.set(Yn.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var Jn=$n,Qn={ANIMATING:0,INTERACTING:1},tr={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const er=256;function ir(t,e,i){return function(n,r,s,o,a){if(!n)return;if(!r&&!e)return n;const l=e?0:s[0]*r,h=e?0:s[1]*r,c=a?a[0]:0,u=a?a[1]:0;let d=t[0]+l/2+c,p=t[2]-l/2+c,f=t[1]+h/2+u,g=t[3]-h/2+u;d>p&&(d=(p+d)/2,p=d),f>g&&(f=(g+f)/2,g=f);let m=pi(n[0],d,p),_=pi(n[1],f,g);if(o&&i&&r){const t=30*r;m+=-t*Math.log(1+Math.max(0,d-n[0])/t)+t*Math.log(1+Math.max(0,n[0]-p)/t),_+=-t*Math.log(1+Math.max(0,f-n[1])/t)+t*Math.log(1+Math.max(0,n[1]-g)/t)}return[m,_]}}function nr(t){return t}function rr(t,e,i,n){const r=je(e)/i[0],s=Ne(e)/i[1];return n?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function sr(t,e,i){let n=Math.min(t,e);const r=50;return n*=Math.log(1+r*Math.max(0,t/e-1))/r+1,i&&(n=Math.max(n,i),n/=Math.log(1+r*Math.max(0,i/t-1))/r+1),pi(n,i/2,2*e)}function or(t,e,i,n){return e=void 0===e||e,function(r,s,o,a){if(void 0!==r){const l=t[0],h=t[t.length-1],c=i?rr(l,i,o,n):l;if(a)return e?sr(r,c,h):pi(r,h,c);const u=Math.min(c,r),d=Math.floor(St(t,u,s));return t[d]>c&&d<t.length-1?t[d+1]:t[d]}}}function ar(t,e,i,n,r,s){return n=void 0===n||n,i=void 0!==i?i:0,function(o,a,l,h){if(void 0!==o){const c=r?rr(e,r,l,s):e;if(h)return n?sr(o,c,i):pi(o,i,c);const u=1e-9,d=Math.ceil(Math.log(e/c)/Math.log(t)-u),p=-a*(.5-u)+.5,f=Math.min(c,o),g=Math.floor(Math.log(e/f)/Math.log(t)+p),m=Math.max(d,g);return pi(e/Math.pow(t,m),i,c)}}}function lr(t,e,i,n,r){return i=void 0===i||i,function(s,o,a,l){if(void 0!==s){const o=n?rr(t,n,a,r):t;return i&&l?sr(s,o,e):pi(s,e,o)}}}function hr(t){if(void 0!==t)return 0}function cr(t){if(void 0!==t)return t}function ur(t){const e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function dr(t){return t=t||mi(5),function(e,i){return i?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}function pr(t){return Math.pow(t,3)}function fr(t){return 1-pr(1-t)}function gr(t){return 3*t*t-2*t*t*t}function mr(t){return t}const _r=0;class yr extends Ht{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Di(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Ii(),t.center&&(t.center=Gi(t.center,this.projection_)),t.extent&&(t.extent=Ui(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const o in tr)delete e[o];this.setProperties(e,!0);const i=br(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=xr(t),r=i.constraint,s=Er(t);this.constraints_={center:n,resolution:r,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),s=r/2*(n[3]-e[3]+e[1]-n[1]),o=r/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+s,i[1]-o])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let t=arguments[i];t.center&&(t=Object.assign({},t),t.center=Gi(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=Gi(t.anchor,this.getProjection())),e[i]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const t=arguments[n];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(n===i)return void(e&&vr(e,!0));let r=Date.now(),s=this.targetCenter_.slice(),o=this.targetResolution_,a=this.targetRotation_;const l=[];for(;n<i;++n){const t=arguments[n],i={start:r,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||gr,callback:e};if(t.center&&(i.sourceCenter=s,i.targetCenter=t.center.slice(),s=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=o,i.targetResolution=this.getResolutionForZoom(t.zoom),o=i.targetResolution):t.resolution&&(i.sourceResolution=o,i.targetResolution=t.resolution,o=i.targetResolution),void 0!==t.rotation){i.sourceRotation=a;const e=_i(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=a+e,a=i.targetRotation}wr(i)?i.complete=!0:r+=i.duration,l.push(i)}this.animations_.push(l),this.setHint(Qn.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Qn.ANIMATING]>0}getInteracting(){return this.hints_[Qn.INTERACTING]>0}cancelAnimations(){let t;this.setHint(Qn.ANIMATING,-this.hints_[Qn.ANIMATING]);for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e];if(i[0].callback&&vr(i[0].callback,!1),!t)for(let e=0,n=i.length;e<n;++e){const n=i[e];if(!n.complete){t=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let r=!0;for(let i=0,s=n.length;i<s;++i){const s=n[i];if(s.complete)continue;const o=t-s.start;let a=s.duration>0?o/s.duration:1;a>=1?(s.complete=!0,a=1):r=!1;const l=s.easing(a);if(s.sourceCenter){const t=s.sourceCenter[0],e=s.sourceCenter[1],i=s.targetCenter[0],n=s.targetCenter[1];this.nextCenter_=s.targetCenter;const r=t+l*(i-t),o=e+l*(n-e);this.targetCenter_=[r,o]}if(s.sourceResolution&&s.targetResolution){const t=1===l?s.targetResolution:s.sourceResolution+l*(s.targetResolution-s.sourceResolution);if(s.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){const t=1===l?_i(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+l*(s.targetRotation-s.sourceRotation);if(s.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!s.complete)break}if(r){this.animations_[i]=null,this.setHint(Qn.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=n[0].callback;t&&vr(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],bi(i,t-this.getRotation()),vi(i,e)),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),r=this.getResolution();return void 0!==n&&void 0!==r&&(i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]),i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?zi(t,this.getProjection()):t}getCenterInternal(){return this.get(tr.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){return Bi(this.calculateExtentInternal(t),this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();te(e,1);const i=this.getResolution();te(void 0!==i,2);const n=this.getRotation();return te(void 0!==n,3),ke(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(tr.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Ui(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=je(t)/e[0],n=Ne(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(i){return e/Math.pow(t,i*n)}}getRotation(){return this.get(tr.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const r=this.padding_;if(r){const t=this.getViewportSizeMinusPadding_();n=Cr(n,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const r=St(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=pi(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,pi(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(te(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t))te(!Ge(t),25),i=Fn(Ui(t,this.getProjection()));else if("Circle"===t.getType()){const e=Ui(t.getExtent(),this.getProjection());i=Fn(e),i.rotate(this.getRotation(),Ae(e))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),r=t.getFlatCoordinates(),s=t.getStride();let o=1/0,a=1/0,l=-1/0,h=-1/0;for(let c=0,u=r.length;c<u;c+=s){const t=r[c]*i-r[c+1]*n,e=r[c]*n+r[c+1]*i;o=Math.min(o,t),a=Math.min(a,e),l=Math.max(l,t),h=Math.max(h,e)}return[o,a,l,h]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let s;s=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const o=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(o,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?s:Math.max(a,s),a=this.getConstrainedResolution(a,r?0:1);const l=this.getRotation(),h=Math.sin(l),c=Math.cos(l),u=Ae(o);u[0]+=(n[1]-n[3])/2*a,u[1]+=(n[0]-n[2])/2*a;const d=u[0]*c-u[1]*h,p=u[1]*c+u[0]*h,f=this.getConstrainedCenter([d,p],a),g=e.callback?e.callback:Pt;void 0!==e.duration?this.animateInternal({resolution:a,center:f,duration:e.duration,easing:e.easing},g):(this.targetResolution_=a,this.targetCenter_=f,this.applyTargetState_(!1,!0),vr(g,!0))}centerOn(t,e,i){this.centerOnInternal(Gi(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Cr(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let r;const s=this.padding_;if(s&&t){const o=this.getViewportSizeMinusPadding_(-i),a=Cr(t,n,[o[0]/2+s[3],o[1]/2+s[0]],e,i);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=zi(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Gi(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Gi(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?Gi(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(n),s=this.constraints_.resolution(this.targetResolution_,0,r,i),o=this.constraints_.center(this.targetCenter_,s,r,i,this.calculateCenterShift(this.targetCenter_,s,n,r));this.get(tr.ROTATION)!==n&&this.set(tr.ROTATION,n),this.get(tr.RESOLUTION)!==s&&(this.set(tr.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),o&&this.get(tr.CENTER)&&xi(this.get(tr.CENTER),o)||this.set(tr.CENTER,o),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const n=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,n,s),a=this.constraints_.center(this.targetCenter_,o,s,!1,this.calculateCenterShift(this.targetCenter_,o,r,s));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=o,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===o&&this.getRotation()===r&&this.getCenterInternal()&&xi(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:o,duration:t,easing:fr,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Qn.INTERACTING,1)}endInteraction(t,e,i){i=i&&Gi(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(Qn.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function vr(t,e){setTimeout((function(){t(e)}),0)}function xr(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return ir(t.extent,t.constrainOnlyCenter,e)}const e=Di(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,ir(t,!1,!1)}return nr}function br(t){let e,i,n;const r=28,s=2;let o=void 0!==t.minZoom?t.minZoom:_r,a=void 0!==t.maxZoom?t.maxZoom:r;const l=void 0!==t.zoomFactor?t.zoomFactor:s,h=void 0!==t.multiWorld&&t.multiWorld,c=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,u=void 0!==t.showFullExtent&&t.showFullExtent,d=Di(t.projection,"EPSG:3857"),p=d.getExtent();let f=t.constrainOnlyCenter,g=t.extent;if(h||g||!d.isGlobal()||(f=!1,g=p),void 0!==t.resolutions){const r=t.resolutions;i=r[o],n=void 0!==r[a]?r[a]:r[r.length-1],e=t.constrainResolution?or(r,c,!f&&g,u):lr(i,n,c,!f&&g,u)}else{const h=(p?Math.max(je(p),Ne(p)):360*Ve.degrees/d.getMetersPerUnit())/er/Math.pow(s,_r),m=h/Math.pow(s,r-_r);i=t.maxResolution,void 0!==i?o=0:i=h/Math.pow(l,o),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(l,a):h/Math.pow(l,a):m),a=o+Math.floor(Math.log(i/n)/Math.log(l)),n=i/Math.pow(l,a-o),e=t.constrainResolution?ar(l,i,n,c,!f&&g,u):lr(i,n,c,!f&&g,u)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:o,zoomFactor:l}}function Er(t){if(void 0===t.enableRotation||t.enableRotation){const e=t.constrainRotation;return void 0===e||!0===e?dr():!1===e?cr:"number"==typeof e?ur(e):cr}return hr}function wr(t){return!(t.sourceCenter&&t.targetCenter&&!xi(t.sourceCenter,t.targetCenter))&&t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation}function Cr(t,e,i,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;return a+=(e[0]/2-i[0])*n,l+=(i[1]-e[1]/2)*n,o=-o,[a*s-l*o,l*s+a*o]}var Sr=yr;class Tr extends Jn{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Yn.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(Yn.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(jt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=Dt(t,Ft.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;e=t instanceof Sr?{viewState:t.getState(),extent:t.calculateExtent()}:t;const i=this.getExtent();return this.getVisible()&&Rr(this.getLayerState(),e.viewState)&&(!i||ze(i,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const i=this.getSource();if(i&&(e=i.getAttributions()),!e)return[];let n=e(t instanceof Sr?t.getViewStateAndExtent():t);return Array.isArray(n)||(n=[n]),n}render(t,e){const i=this.getRenderer();if(i.prepareFrame(t))return this.rendered=!0,i.renderFrame(t,e)}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(Yn.MAP,t)}getMapInternal(){return this.get(Yn.MAP)}setMap(t){this.mapPrecomposeKey_&&(jt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(jt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=Dt(t,Dn.PRECOMPOSE,(function(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);te(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=Dt(this,Ft.CHANGE,t.render,t),this.changed())}setSource(t){this.set(Yn.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function Rr(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}var Mr=Tr;class Ir{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const n=Pr(t,e,i);return n in this.cache_?this.cache_[n]:null}set(t,e,i,n){const r=Pr(t,e,i);this.cache_[r]=n,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Pr(t,e,i){return e+":"+t+":"+(i?jn(i):"null")}const Lr=new Ir;class Ar extends xt{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}}var kr=Ar,Or={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class Nr{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const r=this.points_[e]-this.points_[i],s=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(s,r),this.initialVelocity_=Math.sqrt(r*r+s*s)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}var Fr=Nr;class Dr extends wt{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){Ut()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;de(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),pe(n,i)}forEachFeatureAtCoordinate(t,e,i,n,r,s,o,a){let l;const h=e.viewState;function c(t,e,i,n){return r.call(s,e,t?i:null,n)}const u=h.projection,d=wi(t.slice(),u),p=[[0,0]];if(u.canWrapX()&&n){const t=je(u.getExtent());p.push([-t,0],[t,0])}const f=e.layerStatesArray,g=f.length,m=[],_=[];for(let v=0;v<p.length;v++)for(let n=g-1;n>=0;--n){const r=f[n],s=r.layer;if(s.hasRenderer()&&Rr(r,h)&&o.call(a,s)){const n=s.getRenderer(),o=s.getSource();if(n&&o){const s=o.getWrapX()?d:t,a=c.bind(null,r.managed);_[0]=s[0]+p[v][0],_[1]=s[1]+p[v][1],l=n.forEachFeatureAtCoordinate(_,e,i,a,m)}if(l)return l}}if(0===m.length)return;const y=1/m.length;return m.forEach(((t,e)=>t.distanceSq+=e*y)),m.sort(((t,e)=>t.distanceSq-e.distanceSq)),m.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,i,n,r,s){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,Mt,this,r,s)}getMap(){return this.map_}renderFrame(t){Ut()}scheduleExpireIconCache(t){Lr.canExpireCache()&&t.postRenderFunctions.push(Zr)}}function Zr(t,e){Lr.expire()}var jr=Dr;class zr extends jr{constructor(t){super(t),this.fontChangeListenerKey_=Dt(Kn,bt.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Wn+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const n=new kr(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){jt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(Dn.PRECOMPOSE,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),i=t.viewState;this.children_.length=0;const n=[];let r=null;for(let s=0,o=e.length;s<o;++s){const o=e[s];t.layerIndex=s;const a=o.layer,l=a.getSourceState();if(!Rr(o,i)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const h=a.render(t,r);h&&(h!==r&&(this.children_.push(h),r=h),"getDeclutter"in a&&n.push(a))}for(let s=n.length-1;s>=0;--s)n[s].renderDeclutter(t);Vn(this.element_,this.children_),this.dispatchRenderEvent(Dn.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}}var Gr=zr;class Br extends xt{constructor(t,e){super(t),this.layer=e}}const Ur={LAYERS:"layers"};class Vr extends Jn{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ur.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Qt(i.slice(),{unique:!0}):te("function"==typeof i.getArray,43):i=new Qt(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(jt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(Dt(t,Kt.ADD,this.handleLayersAdd_,this),Dt(t,Kt.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(jt);At(this.listenerKeys_);const e=t.getArray();for(let i=0,n=e.length;i<n;i++){const t=e[i];this.registerLayerListeners_(t),this.dispatchEvent(new Br("addlayer",t))}this.changed()}registerLayerListeners_(t){const e=[Dt(t,bt.PROPERTYCHANGE,this.handleLayerChange_,this),Dt(t,Ft.CHANGE,this.handleLayerChange_,this)];t instanceof Vr&&e.push(Dt(t,"addlayer",this.handleLayerGroupAdd_,this),Dt(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[qt(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Br("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Br("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Br("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=qt(e);this.listenerKeys_[i].forEach(jt),delete this.listenerKeys_[i],this.dispatchEvent(new Br("removelayer",e)),this.changed()}getLayers(){return this.get(Ur.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,i=t.length;e<i;++e)this.dispatchEvent(new Br("removelayer",t[e]))}this.set(Ur.LAYERS,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const n=this.getLayerState();let r=n.zIndex;t||void 0!==n.zIndex||(r=0);for(let s=i,o=e.length;s<o;s++){const t=e[s];t.opacity*=n.opacity,t.visible=t.visible&&n.visible,t.maxResolution=Math.min(t.maxResolution,n.maxResolution),t.minResolution=Math.max(t.minResolution,n.minResolution),t.minZoom=Math.max(t.minZoom,n.minZoom),t.maxZoom=Math.min(t.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==t.extent?t.extent=Fe(t.extent,n.extent):t.extent=n.extent),void 0===t.zIndex&&(t.zIndex=r)}return e}getSourceState(){return"ready"}}var qr=Vr;class Wr extends xt{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}}var Xr=Wr;class Hr extends Xr{constructor(t,e,i,n,r,s){super(t,e,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var Kr=Hr,Yr={SINGLECLICK:"singleclick",CLICK:Ft.CLICK,DBLCLICK:Ft.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},$r={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class Jr extends Nt{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=Dt(i,$r.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=Dt(i,$r.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(Ft.TOUCHMOVE,this.boundHandleTouchMove_,!!he&&{passive:!1})}emulateClick_(t){let e=new Kr(Yr.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new Kr(Yr.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new Kr(Yr.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==Yr.POINTERUP||e.type==Yr.POINTERCANCEL){delete this.trackedTouches_[i];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=Yr.POINTERDOWN&&e.type!=Yr.POINTERMOVE||(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new Kr(Yr.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(jt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new Kr(Yr.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Dt(t,Yr.POINTERMOVE,this.handlePointerMove_,this),Dt(t,Yr.POINTERUP,this.handlePointerUp_,this),Dt(this.element_,Yr.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(Dt(this.element_.getRootNode(),Yr.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new Kr(Yr.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new Kr(Yr.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(jt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(Ft.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(jt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(jt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var Qr=Jr,ts={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},es={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};const is=1/0;class ns{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,At(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){te(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=is&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,r=e[t],s=i[t],o=t;for(;t<n>>1;){const r=this.getLeftChildIndex_(t),s=this.getRightChildIndex_(t),o=s<n&&i[s]<i[r]?s:r;e[t]=e[o],i[t]=i[o],t=o}e[t]=r,i[t]=s,this.siftDown_(o,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,r=i[e],s=n[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(n[t]>s))break;i[e]=i[t],n[e]=n[t],e=t}i[e]=r,n[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const r=e.length;let s,o,a;for(o=0;o<r;++o)s=e[o],a=t(s),a==is?delete this.queuedElements_[this.keyFunction_(s)]:(i[n]=a,e[n++]=s);e.length=n,i.length=n,this.heapify_()}}var rs=ns;class ss extends rs{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(Ft.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===Or.LOADED||i===Or.ERROR||i===Or.EMPTY){i!==Or.ERROR&&e.removeEventListener(Ft.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,n,r,s=0;for(;this.tilesLoading_<t&&s<e&&this.getCount()>0;)n=this.dequeue()[0],r=n.getKey(),i=n.getState(),i!==Or.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++s,n.load())}}var os=ss;function as(t,e,i,n,r){if(!t||!(i in t.wantedTiles))return is;if(!t.wantedTiles[i][e.getKey()])return is;const s=t.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class ls extends Ht{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){Bn(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&Bn(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)jt(this.listenerKeys[e]);this.listenerKeys.length=0,this.map_=t,t&&((this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==Pt&&this.listenerKeys.push(Dt(t,ts.POSTRENDER,this.render,this)),t.render())}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}}var hs=ls;class cs extends hs{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",n=void 0!==t.expandClassName?t.expandClassName:e+"-expand",r=void 0!==t.collapseLabel?t.collapseLabel:"\u203a",s=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=s):this.collapseLabel_=r;const o=void 0!==t.label?t.label:"i";"string"==typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=n):this.label_=o;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(Ft.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+Wn+" "+Xn+(this.collapsed_&&this.collapsible_?" "+Hn:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=l,h.appendChild(this.toggleButton_),h.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap((e=>e.getAttributions(t))))),i=!this.getMap().getAllLayers().some((t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(i),e}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Rt(e,this.renderedAttributions_)){Un(this.ulElement_);for(let t=0,i=e.length;t<i;++t){const i=document.createElement("li");i.innerHTML=e[t],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Hn),this.collapsed_?Gn(this.collapseLabel_,this.label_):Gn(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}var us=cs;class ds extends hs{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"\u21e7",n=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const r=t.tipLabel?t.tipLabel:"Reset rotation",s=document.createElement("button");s.className=e+"-reset",s.setAttribute("type","button"),s.title=r,s.appendChild(this.label_),s.addEventListener(Ft.CLICK,this.handleClick_.bind(this),!1);const o=e+" "+Wn+" "+Xn,a=this.element;a.className=o,a.appendChild(s),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(qn)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:fr}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const t="rotate("+i+"rad)";if(this.autoHide_){const t=this.element.classList.contains(qn);t||0!==i?t&&0!==i&&this.element.classList.remove(qn):this.element.classList.add(qn)}this.label_.style.transform=t}this.rotation_=i}}var ps=ds;class fs extends hs{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,n=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",s=void 0!==t.zoomInLabel?t.zoomInLabel:"+",o=void 0!==t.zoomOutLabel?t.zoomOutLabel:"\u2013",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",h=document.createElement("button");h.className=n,h.setAttribute("type","button"),h.title=a,h.appendChild("string"==typeof s?document.createTextNode(s):s),h.addEventListener(Ft.CLICK,this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=r,c.setAttribute("type","button"),c.title=l,c.appendChild("string"==typeof o?document.createTextNode(o):o),c.addEventListener(Ft.CLICK,this.handleClick_.bind(this,-i),!1);const u=e+" "+Wn+" "+Xn,d=this.element;d.className=u,d.appendChild(h),d.appendChild(c),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const i=e.getZoom();if(void 0!==i){const n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:fr})):e.setZoom(n)}}}var gs=fs;function ms(t){t=t||{};const e=new Qt;return(void 0===t.zoom||t.zoom)&&e.push(new gs(t.zoomOptions)),(void 0===t.rotate||t.rotate)&&e.push(new ps(t.rotateOptions)),(void 0===t.attribution||t.attribution)&&e.push(new us(t.attributionOptions)),e}var _s={ACTIVE:"active"};class ys extends Ht{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(_s.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(_s.ACTIVE,t)}setMap(t){this.map_=t}}function vs(t,e,i){const n=t.getCenterInternal();if(n){const r=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==i?i:250,easing:mr,center:t.getConstrainedCenter(r)})}}function xs(t,e,i,n){const r=t.getZoom();if(void 0===r)return;const s=t.getConstrainedZoom(r+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:i,duration:void 0!==n?n:250,easing:fr})}var bs=ys;class Es extends bs{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==Yr.DBLCLICK){const i=t.originalEvent,n=t.map,r=t.coordinate,s=i.shiftKey?-this.delta_:this.delta_;xs(n.getView(),s,r,this.duration_),i.preventDefault(),e=!0}return!e}}var ws=Es;class Cs extends bs{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Yr.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Yr.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==Yr.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==Yr.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Ss(t){const e=t.length;let i=0,n=0;for(let r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return{clientX:i/e,clientY:n/e}}var Ts=Cs;function Rs(t){const e=arguments;return function(t){let i=!0;for(let n=0,r=e.length;n<r&&(i=i&&e[n](t),i);++n);return i}}const Ms=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Is=function(t){const e=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return e.contains(i)},Ps=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||Is(t)},Ls=Mt,As=function(t){const e=t.originalEvent;return 0==e.button&&!(oe&&ae&&e.ctrlKey)},ks=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},Os=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Ns=function(t){const e=t.originalEvent,i=e.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!e.target.isContentEditable},Fs=function(t){const e=t.originalEvent;return te(void 0!==e,56),"mouse"==e.pointerType},Ds=function(t){const e=t.originalEvent;return te(void 0!==e,56),e.isPrimary&&0===e.button};class Zs extends Ts{constructor(t){super({stopDown:It}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Rs(ks,Ds);this.condition_=t.onFocusOnly?Rs(Ps,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,n=e.getEventPixel(Ss(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const e=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],i=t.map.getView();Ei(e,i.getResolution()),bi(e,i.getRotation()),i.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),r=i.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),o=e.getCoordinateFromPixelInternal([s[0]-t*Math.cos(n),s[1]-t*Math.sin(n)]);i.animateInternal({center:i.getConstrainedCenter(o),duration:500,easing:fr})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}var js=Zs;class zs extends Ts{constructor(t){t=t||{},super({stopDown:It}),this.condition_=t.condition?t.condition:Ms,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!Fs(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===hr)return;const n=e.getSize(),r=t.pixel,s=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;i.adjustRotationInternal(-t)}this.lastAngle_=s}handleUpEvent(t){return!Fs(t)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){return!!Fs(t)&&(!(!As(t)||!this.condition_(t))&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0))}}var Gs=zs;class Bs extends wt{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Nn([i])}getGeometry(){return this.geometry_}}var Us=Bs;const Vs={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class qs extends xt{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class Ws extends Ts{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new Us(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:As,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new qs(Vs.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new qs(e?Vs.BOXEND:Vs.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new qs(Vs.BOXSTART,t.coordinate,t)),!0)}onBoxEnd(t){}}var Xs=Ws;class Hs extends Xs{constructor(t){super({condition:(t=t||{}).condition?t.condition:Os,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let i=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(i),n=e.getResolutionForExtentInternal(t),r=e.getResolution()/n;i=i.clone(),i.scale(r*r)}e.fitInternal(i,{duration:this.duration_,easing:fr})}}var Ks=Hs,Ys={LEFT:37,UP:38,RIGHT:39,DOWN:40};class $s extends bs{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return ks(t)&&Ns(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==Ft.KEYDOWN){const i=t.originalEvent,n=i.keyCode;if(this.condition_(t)&&(n==Ys.DOWN||n==Ys.LEFT||n==Ys.RIGHT||n==Ys.UP)){const r=t.map.getView(),s=r.getResolution()*this.pixelDelta_;let o=0,a=0;n==Ys.DOWN?a=-s:n==Ys.LEFT?o=-s:n==Ys.RIGHT?o=s:a=s;const l=[o,a];bi(l,r.getRotation()),vs(r,l,this.duration_),i.preventDefault(),e=!0}}return!e}}var Js=$s;class Qs extends bs{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:Ns,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==Ft.KEYDOWN||t.type==Ft.KEYPRESS){const i=t.originalEvent,n=i.key;if(this.condition_(t)&&("+"===n||"-"===n)){const r=t.map,s="+"===n?this.delta_:-this.delta_;xs(r.getView(),s,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}var to=Qs;class eo extends bs{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:Ls;this.condition_=t.onFocusOnly?Rs(Ps,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();t&&t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==Ft.WHEEL)return!0;const e=t.map,i=t.originalEvent;let n;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==Ft.WHEEL&&(n=i.deltaY,se&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(n/=le),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(n*=40)),0===n)return!1;this.lastDelta_=n;const r=Date.now();void 0===this.startTime_&&(this.startTime_=r),(!this.mode_||r-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(n)<4?"trackpad":"wheel");const s=e.getView();if("trackpad"===this.mode_&&!s.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(s.getAnimating()&&s.cancelAnimations(),s.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),s.adjustZoom(-n/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=r,!1;this.totalDelta_+=n;const o=Math.max(this.timeout_-(r-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),o),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-pi(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),xs(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}var io=eo;class no extends Ts{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=It),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],n=this.targetPointers[1],r=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r;const s=t.map,o=s.getView();o.getConstraints().rotation!==hr&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(Ss(this.targetPointers))),this.rotating_&&(s.render(),o.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return!(this.targetPointers.length<2)||(t.map.getView().endInteraction(this.duration_),!1)}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}var ro=no;class so extends Ts{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=It),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],n=this.targetPointers[1],r=i.clientX-n.clientX,s=i.clientY-n.clientY,o=Math.sqrt(r*r+s*s);void 0!==this.lastDistance_&&(e=this.lastDistance_/o),this.lastDistance_=o;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Ss(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}var oo=so;function ao(t){t=t||{};const e=new Qt,i=new Fr(-.005,.05,100);return(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new Gs),(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new ws({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0===t.dragPan||t.dragPan)&&e.push(new js({onFocusOnly:t.onFocusOnly,kinetic:i})),(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new ro),(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new oo({duration:t.zoomDuration})),(void 0===t.keyboard||t.keyboard)&&(e.push(new Js),e.push(new to({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new io({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new Ks({duration:t.zoomDuration})),e}function lo(t){t instanceof Mr?t.setMapInternal(null):t instanceof qr&&t.getLayers().forEach(lo)}function ho(t,e){if(t instanceof Mr)t.setMapInternal(e);else if(t instanceof qr){const i=t.getLayers().getArray();for(let t=0,n=i.length;t<n;++t)ho(i[t],e)}}class co extends Ht{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=uo(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:le,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ce(),this.pixelToCoordinateTransform_=ce(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||ms(),this.interactions=e.interactions||ao({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new os(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(es.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(es.VIEW,this.handleViewChanged_),this.addChangeListener(es.SIZE,this.handleSizeChanged_),this.addChangeListener(es.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof Sr||t.view.then((function(t){i.setView(new Sr(t))})),this.controls.addEventListener(Kt.ADD,(t=>{t.element.setMap(this)})),this.controls.addEventListener(Kt.REMOVE,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(Kt.ADD,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(Kt.REMOVE,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(Kt.ADD,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(Kt.REMOVE,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){ho(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,s=void 0!==i.layerFilter?i.layerFilter:Mt,o=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,o,e,null,s,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i}getAllLayers(){const t=[];function e(i){i.forEach((function(i){i instanceof qr?e(i.getLayers()):t.push(i)}))}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:Mt,r=void 0!==e.hitTolerance?e.hitTolerance:0,s=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,s,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=this.getSize(),n=e.width/i[0],r=e.height/i[1],s="changedTouches"in t?t.changedTouches[0]:t;return[(s.clientX-e.left)/n,(s.clientY-e.top)/r]}getTarget(){return this.get(es.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return zi(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?ue(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(es.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof Qt)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e];if(!i.visible)continue;const n=i.layer.getRenderer();if(n&&!n.ready)return!0;const r=i.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Gi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?ue(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(es.SIZE)}getView(){return this.get(es.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return as(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new Kr(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===$r.POINTERDOWN||i===Ft.WHEEL||i===Ft.KEYDOWN){const t=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():t,n=e.target;if(this.overlayContainerStopEvent_.contains(n)||!(i===t?t.documentElement:i).contains(n))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.getMap()===this&&n.getActive()&&this.getTargetElement()&&(!n.handleEvent(t)||t.propagationStopped))break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,n=i;if(t){const e=t.viewHints;if(e[Qn.ANIMATING]||e[Qn.INTERACTING]){const e=Date.now()-t.time>8;i=e?0:8,n=e?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(Dn.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Dn.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new Xr(ts.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new Xr(ts.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let n=0,r=i.length;n<r;++n)i[n](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)jt(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(Ft.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(Ft.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Bn(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Gr(this)),this.mapBrowserEventHandler_=new Qr(this,this.moveTolerance_);for(const e in Yr)this.mapBrowserEventHandler_.addEventListener(Yr[e],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(Ft.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(Ft.WHEEL,this.boundHandleBrowserEvent_,!!he&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[Dt(t,Ft.KEYDOWN,this.handleBrowserEvent,this),Dt(t,Ft.KEYPRESS,this.handleBrowserEvent,this)];const i=e.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(jt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(jt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Dt(t,bt.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Dt(t,Ft.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(jt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Br("addlayer",t)),this.layerGroupPropertyListenerKeys_=[Dt(t,bt.PROPERTYCHANGE,this.render,this),Dt(t,Ft.CHANGE,this.render,this),Dt(t,"addlayer",this.handleLayerAdd_,this),Dt(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){lo(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let r=null;if(void 0!==e&&Zn(e)&&i&&i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ke(s.center,s.resolution,s.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:n,wantedTiles:{},mapId:qt(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const t=isNaN(s.nextRotation)?s.rotation:s.nextRotation;r.nextExtent=ke(s.nextCenter,s.nextResolution,t,e)}}this.frameState_=r,this.renderer_.renderFrame(r),r&&(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),n&&(!this.previousExtent_||!Ge(this.previousExtent_)&&!Te(r.extent,this.previousExtent_))&&(this.dispatchEvent(new Xr(ts.MOVESTART,this,n)),this.previousExtent_=we(this.previousExtent_)),this.previousExtent_&&!r.viewHints[Qn.ANIMATING]&&!r.viewHints[Qn.INTERACTING]&&!Te(r.extent,this.previousExtent_)&&(this.dispatchEvent(new Xr(ts.MOVEEND,this,r)),me(r.extent,this.previousExtent_))),this.dispatchEvent(new Xr(ts.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(ts.LOADSTART)||this.hasListener(ts.LOADEND)||this.hasListener(Dn.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Br("removelayer",e)),this.set(es.LAYERGROUP,t)}setSize(t){this.set(es.SIZE,t)}setTarget(t){this.set(es.TARGET,t)}setView(t){if(!t||t instanceof Sr)return void this.set(es.VIEW,t);this.set(es.VIEW,new Sr);const e=this;t.then((function(t){e.setView(new Sr(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),r=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(n)||isNaN(r)||(e=[n,r],!Zn(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Ri("No map visible because the map container's width or height are 0."))}const i=this.getSize();!e||i&&Rt(e,i)||(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}}function uo(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const i={},n=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new qr({layers:t.layers});let r,s,o;return i[es.LAYERGROUP]=n,i[es.TARGET]=t.target,i[es.VIEW]=t.view instanceof Sr?t.view:new Sr,void 0!==t.controls&&(Array.isArray(t.controls)?r=new Qt(t.controls.slice()):(te("function"==typeof t.controls.getArray,47),r=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?s=new Qt(t.interactions.slice()):(te("function"==typeof t.interactions.getArray,48),s=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?o=new Qt(t.overlays.slice()):(te("function"==typeof t.overlays.getArray,49),o=t.overlays):o=new Qt,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:i}}var po=co;function fo({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsx("svg",Object.assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M257.7 752c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 0 0 0-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 0 0 9.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89zM880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32z"})}))})}function go(t){const r=X(),s=i.useRef(null),o=V(),a=i.useCallback((e=>{t.onChange&&t.onChange(e)}),[]);return i.useEffect((()=>(r&&t.isActive?s.current||(s.current=new n.Modify({features:new Qt([r]),deleteCondition:m.doubleClick}),s.current.on("modifyend",a),o.addInteraction(s.current)):s.current&&(s.current.un("modifyend",a),o.removeInteraction(s.current),s.current=null),()=>{s.current&&(s.current.un("modifyend",a),o.removeInteraction(s.current),s.current=null)})),[r,o,t.isActive]),e.jsx(Q,Object.assign({},t,{children:e.jsx(fo,{})}))}function mo({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsx("svg",Object.assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M18 11h-5V6h3l-4-4-4 4h3v5H6V8l-4 4 4 4v-3h5v5H8l4 4 4-4h-3v-5h5v3l4-4-4-4z"})}))})}function _o(t){const r=i.useRef(null),s=X(),o=V(),a=i.useCallback((e=>{t.onChange&&t.onChange(e)}),[]);return i.useEffect((()=>(s&&t.isActive&&(r.current=new n.Translate({features:new Qt([s])}),r.current.on("translateend",a),o.addInteraction(r.current)),()=>{r.current&&(r.current.un("translateend",a),o.removeInteraction(r.current),r.current=null)})),[s,o,t.isActive]),e.jsx(Q,Object.assign({},t,{children:e.jsx(mo,{})}))}const yo=({children:t})=>e.jsx("div",Object.assign({style:{margin:"10px 0 10px 0 "}},{children:i.Children.map(t,((e,n)=>{if("boolean"==typeof e||null===e)return null;if(1===i.Children.count(t)){const t=Object.assign(Object.assign({},e.props),{side:"solo"});return i.cloneElement(e,t)}if(0===n){const t=Object.assign(Object.assign({},e.props),{side:"top"});return i.cloneElement(e,t)}if(n===i.Children.toArray(t).length-1){const t=Object.assign(Object.assign({},e.props),{side:"bottom"});return i.cloneElement(e,t)}return e}))})),vo=({children:t})=>{const n=V(),r=i.useRef(null);return i.useEffect((()=>{if(!n)return;const t=new _.Control({element:r.current?r.current:void 0});return n.addControl(t),()=>{n.removeControl(t)}}),[n]),e.jsx("div",Object.assign({ref:r,style:{position:"absolute",left:"10px"}},{children:t}))};function xo({width:t,height:i,draggable:n=!1}){return e.jsx("div",Object.assign({draggable:n},{children:e.jsxs("svg",Object.assign({width:t,height:i,viewBox:"0 0 162 162",fill:"none",xmlns:"http://www.w3.org/2000/svg"},{children:[e.jsx("circle",{cx:"81",cy:"81",r:"81",fill:"#858484"}),e.jsx("circle",{cx:"81",cy:"81",r:"79",fill:"white"}),e.jsx("path",{d:"M83.76 7.8H85.12V19.56L76.64 10.664V19H75.28V7.24L83.76 16.136V7.8Z",fill:"#505050"}),e.jsx("path",{d:"M48.4347 51.9501L49.0357 51.3491L54.2329 56.5463L46.5538 56.3625L50.2378 60.0465L49.6368 60.6475L44.4395 55.4503L52.1187 55.6341L48.4347 51.9501ZM58.2167 49.4513L55.8621 44.5227L56.5338 43.851L59.7865 50.9928L54.4549 48.631L56.8166 53.9626L49.6749 50.7099L50.3466 50.0382L55.3034 52.3646L52.8569 47.033L58.2167 49.4513Z",fill:"#565151"}),e.jsx("path",{d:"M112.092 48.4347L112.693 49.0357L107.495 54.2329L107.679 46.5538L103.995 50.2378L103.394 49.6368L108.591 44.4395L108.408 52.1187L112.092 48.4347ZM109.209 55.4519L109.775 54.8862L112.271 57.3823L111.705 57.948L109.209 55.4519ZM113.593 51.0679L114.159 50.5022L116.655 52.9983L116.089 53.564L113.593 51.0679ZM111.613 53.0478L112.179 52.4821L114.534 54.8367L113.968 55.4024L111.613 53.0478ZM113.827 50.1698L114.428 50.7709L109.478 55.7206L108.877 55.1196L113.827 50.1698Z",fill:"#565151"}),e.jsx("path",{d:"M111.72 105.077C111.409 104.992 111.117 104.936 110.843 104.907C110.565 104.884 110.306 104.907 110.065 104.978C109.825 105.049 109.606 105.183 109.408 105.381C109.144 105.645 109.005 105.93 108.991 106.237C108.977 106.543 109.083 106.809 109.309 107.036C109.53 107.257 109.759 107.382 109.995 107.41C110.23 107.439 110.473 107.408 110.723 107.319C110.973 107.238 111.225 107.137 111.48 107.015C111.645 106.934 111.836 106.852 112.052 106.767C112.274 106.687 112.505 106.63 112.745 106.597C112.991 106.569 113.236 106.588 113.481 106.654C113.721 106.725 113.955 106.873 114.181 107.099C114.426 107.344 114.584 107.625 114.655 107.941C114.725 108.257 114.706 108.577 114.598 108.902C114.494 109.232 114.303 109.537 114.025 109.815C113.757 110.083 113.471 110.265 113.17 110.359C112.868 110.463 112.566 110.505 112.265 110.486C111.968 110.472 111.692 110.418 111.437 110.324L111.656 109.511C111.84 109.572 112.038 109.614 112.25 109.638C112.463 109.661 112.675 109.643 112.887 109.581C113.094 109.525 113.295 109.4 113.488 109.207C113.757 108.938 113.886 108.676 113.877 108.422C113.872 108.172 113.79 107.967 113.629 107.806C113.493 107.67 113.33 107.578 113.141 107.531C112.958 107.488 112.731 107.498 112.463 107.559C112.194 107.63 111.866 107.759 111.48 107.948C111.301 108.033 111.1 108.111 110.879 108.181C110.657 108.252 110.426 108.29 110.186 108.294C109.945 108.309 109.702 108.273 109.457 108.188C109.217 108.108 108.984 107.955 108.757 107.729C108.54 107.512 108.387 107.274 108.298 107.015C108.203 106.76 108.168 106.498 108.192 106.23C108.21 105.966 108.279 105.709 108.397 105.459C108.51 105.214 108.665 104.992 108.863 104.794C109.132 104.525 109.438 104.332 109.783 104.214C110.127 104.106 110.48 104.059 110.843 104.073C111.206 104.097 111.55 104.163 111.876 104.271L111.72 105.077ZM106.199 107.6L106.764 108.166L104.268 110.662L103.703 110.096L106.199 107.6ZM110.583 111.984L111.148 112.55L108.652 115.046L108.087 114.481L110.583 111.984ZM108.603 110.005L109.168 110.57L106.814 112.925L106.248 112.359L108.603 110.005ZM111.481 112.218L110.88 112.819L105.93 107.869L106.531 107.268L111.481 112.218Z",fill:"#565151"}),e.jsx("path",{d:"M57.9646 111.72C58.0494 111.409 58.106 111.117 58.1343 110.843C58.1578 110.565 58.1343 110.306 58.0636 110.065C57.9928 109.825 57.8585 109.606 57.6605 109.408C57.3965 109.144 57.1113 109.005 56.8049 108.991C56.4985 108.977 56.2321 109.083 56.0059 109.309C55.7843 109.53 55.6594 109.759 55.6311 109.995C55.6028 110.23 55.6335 110.473 55.723 110.723C55.8032 110.973 55.9045 111.225 56.0271 111.48C56.1072 111.645 56.1897 111.836 56.2746 112.052C56.3547 112.274 56.4113 112.505 56.4443 112.745C56.4726 112.991 56.4537 113.236 56.3877 113.481C56.317 113.721 56.1685 113.955 55.9422 114.181C55.6971 114.426 55.4166 114.584 55.1008 114.655C54.7849 114.725 54.4644 114.706 54.1391 114.598C53.8091 114.494 53.5051 114.303 53.2269 114.025C52.9582 113.757 52.7768 113.471 52.6825 113.17C52.5788 112.868 52.5363 112.566 52.5552 112.265C52.5693 111.968 52.6235 111.692 52.7178 111.437L53.531 111.656C53.4697 111.84 53.4273 112.038 53.4037 112.25C53.3801 112.463 53.399 112.675 53.4603 112.887C53.5169 113.094 53.6418 113.295 53.8351 113.488C54.1038 113.757 54.3654 113.886 54.6199 113.877C54.8698 113.872 55.0748 113.79 55.2351 113.629C55.3718 113.493 55.4638 113.33 55.5109 113.141C55.5533 112.958 55.5439 112.731 55.4826 112.463C55.4119 112.194 55.2823 111.866 55.0937 111.48C55.0089 111.301 54.9311 111.1 54.8604 110.879C54.7896 110.657 54.7519 110.426 54.7472 110.186C54.7331 109.945 54.7684 109.702 54.8533 109.457C54.9334 109.217 55.0866 108.984 55.3129 108.757C55.5298 108.54 55.7678 108.387 56.0271 108.298C56.2816 108.203 56.5433 108.168 56.812 108.192C57.076 108.21 57.3329 108.279 57.5827 108.397C57.8279 108.51 58.0494 108.665 58.2474 108.863C58.5161 109.132 58.7094 109.438 58.8272 109.783C58.9357 110.127 58.9828 110.48 58.9686 110.843C58.9451 111.206 58.8791 111.55 58.7707 111.876L57.9646 111.72ZM50.0602 103.434L45.1316 105.789L44.4599 105.117L51.6016 101.864L49.2399 107.196L54.5715 104.834L51.3188 111.976L50.6471 111.304L52.9734 106.347L47.6418 108.794L50.0602 103.434Z",fill:"#565151"}),e.jsx("path",{d:"M77.696 150.608C77.952 151.056 78.2187 151.451 78.496 151.792C78.784 152.133 79.104 152.4 79.456 152.592C79.808 152.784 80.208 152.88 80.656 152.88C81.2533 152.88 81.7333 152.715 82.096 152.384C82.4587 152.053 82.64 151.632 82.64 151.12C82.64 150.619 82.5227 150.219 82.288 149.92C82.0533 149.621 81.744 149.381 81.36 149.2C80.9867 149.008 80.5867 148.837 80.16 148.688C79.8827 148.592 79.5733 148.469 79.232 148.32C78.8907 148.16 78.5653 147.963 78.256 147.728C77.9467 147.483 77.6907 147.184 77.488 146.832C77.296 146.48 77.2 146.048 77.2 145.536C77.2 144.981 77.3387 144.485 77.616 144.048C77.8933 143.611 78.2773 143.269 78.768 143.024C79.2587 142.768 79.8187 142.64 80.448 142.64C81.056 142.64 81.584 142.757 82.032 142.992C82.4907 143.216 82.88 143.509 83.2 143.872C83.52 144.224 83.7707 144.597 83.952 144.992L82.784 145.664C82.6453 145.387 82.4693 145.115 82.256 144.848C82.0427 144.581 81.7813 144.363 81.472 144.192C81.1733 144.021 80.8053 143.936 80.368 143.936C79.76 143.936 79.3173 144.085 79.04 144.384C78.7627 144.672 78.624 144.997 78.624 145.36C78.624 145.669 78.704 145.957 78.864 146.224C79.024 146.48 79.2907 146.725 79.664 146.96C80.048 147.184 80.5653 147.408 81.216 147.632C81.5147 147.739 81.8293 147.877 82.16 148.048C82.4907 148.219 82.7947 148.437 83.072 148.704C83.36 148.96 83.5947 149.275 83.776 149.648C83.9573 150.011 84.048 150.448 84.048 150.96C84.048 151.451 83.952 151.893 83.76 152.288C83.5787 152.683 83.3227 153.019 82.992 153.296C82.672 153.573 82.304 153.787 81.888 153.936C81.4827 154.085 81.056 154.16 80.608 154.16C80 154.16 79.4347 154.032 78.912 153.776C78.4 153.509 77.9467 153.163 77.552 152.736C77.168 152.299 76.8533 151.835 76.608 151.344L77.696 150.608Z",fill:"#505050"}),e.jsx("path",{d:"M15.54 78.252L7.3 75.34L7.3 73.82L19.06 78.22L10.356 81.58L19.06 84.94L7.3 89.34L7.3 87.82L15.54 84.844L6.74 81.58L15.54 78.252Z",fill:"#505050"}),e.jsx("path",{d:"M145 78.032L146.28 78.032L146.28 83.68L145 83.68L145 78.032ZM154.92 78.032L156.2 78.032L156.2 83.68L154.92 83.68L154.92 78.032ZM150.44 78.032L151.72 78.032L151.72 83.36L150.44 83.36L150.44 78.032ZM156.2 77.28L156.2 78.64L145 78.64L145 77.28L156.2 77.28Z",fill:"#505050"}),e.jsx("path",{d:"M81 26L85.3301 80.75H76.6699L81 26Z",fill:"#B4B4B4"}),e.jsx("path",{d:"M81 135.5L76.6699 80.75L85.3301 80.75L81 135.5Z",fill:"#B4B4B4"}),e.jsx("path",{d:"M26 81L80.75 76.6699L80.75 85.3301L26 81Z",fill:"#B4B4B4"}),e.jsx("path",{d:"M135.5 81L80.75 85.3301L80.75 76.6699L135.5 81Z",fill:"#B4B4B4"}),e.jsx("path",{d:"M56.4749 105.265L78.7268 78.7268L83.0134 83.0134L56.4749 105.265Z",fill:"#B4B4B4"}),e.jsx("path",{d:"M105.265 56.4749L83.0133 83.0134L78.7267 78.7268L105.265 56.4749Z",fill:"#B4B4B4"}),e.jsx("path",{d:"M105.265 105.265L78.7269 83.0133L83.0135 78.7267L105.265 105.265Z",fill:"#B4B4B4"}),e.jsx("path",{d:"M56.4749 56.4749L83.0134 78.7267L78.7268 83.0133L56.4749 56.4749Z",fill:"#B4B4B4"}),e.jsx("path",{d:"M81 18L86.1961 81H75.8038L81 18Z",fill:"#EF6161"}),e.jsx("path",{d:"M80.9999 144L75.8038 81L86.1961 81L80.9999 144Z",fill:"#3562FF"}),e.jsx("path",{d:"M85 81C85 83.2091 83.2091 85 81 85C78.7908 85 77 83.2091 77 81C77 78.7909 78.7908 77 81 77C83.2091 77 85 78.7909 85 81Z",fill:"white"}),e.jsx("path",{d:"M136.314 22L139.142 24.8284L127.828 36.1421L125 33.3137L136.314 22Z",fill:"#858484"}),e.jsx("path",{d:"M25.8284 138.142L23 135.314L34.3137 124L37.1421 126.828L25.8284 138.142Z",fill:"#858484"}),e.jsx("path",{d:"M23 24.8284L25.8284 22L37.1421 33.3137L34.3137 36.1421L23 24.8284Z",fill:"#858484"}),e.jsx("path",{d:"M140.142 135.314L137.314 138.142L126 126.828L128.828 124L140.142 135.314Z",fill:"#858484"}),e.jsx("circle",{cx:"62",cy:"12",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"44",cy:"20",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"19",cy:"45",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"12",cy:"103",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"19",cy:"118",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"44",cy:"140",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"62",cy:"148",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"99",cy:"148",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"117",cy:"140",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"141",cy:"118",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"150",cy:"103",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"150",cy:"60",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"141",cy:"45",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"117",cy:"20",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"99",cy:"12",r:"2",fill:"#B4B4B4"}),e.jsx("circle",{cx:"12",cy:"60",r:"2",fill:"#B4B4B4"})]}))}))}const bo=({size:t="sm",onWheel:n})=>{const[r,s,o]=W(),[a,l]=i.useState(!1),[h,c]=i.useState(0),u=i.useRef(null),d=V(),p=t=>"sm"===t?100:"md"===t?150:"lg"===t?200:100,f=()=>{l(!0)},g=()=>{l(!1)},m=t=>{if(a){const{movementY:e}=t,i=.7*e;c((t=>{let e=(t+i)%360;return e<0&&(e+=360),n&&n(e),s(e),e}))}},y=()=>{c(0),o()};return i.useEffect((()=>(window.addEventListener("mousemove",m),window.addEventListener("mouseup",g),()=>{window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",g)})),[a]),i.useEffect((()=>{const t=new _.Control({element:u.current?u.current:void 0});d.addControl(t)}),[d]),e.jsxs("div",Object.assign({ref:u,style:{position:"absolute",top:"10px",right:"10px"}},{children:[e.jsx("div",Object.assign({onMouseDown:f,style:{zIndex:1,transform:`rotate(${r}deg)`}},{children:e.jsx("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center"}},{children:e.jsx(xo,{draggable:!1,height:p(t),width:p(t)})}))})),e.jsx("div",Object.assign({style:{display:"flex",justifyContent:"center",marginTop:"10px"}},{children:e.jsx("button",Object.assign({style:{width:"60px",height:"20px",background:"white",border:"1px solid #858484",borderRadius:"3px",paddingBottom:"3px"},onClick:y},{children:"reset"}))})),e.jsx("div",Object.assign({style:{marginTop:"px",width:"100%",display:"flex",justifyContent:"center"}},{children:e.jsx("form",Object.assign({onSubmit:t=>{t.preventDefault(),s(h)}},{children:e.jsx("input",{value:h.toFixed(0),onChange:t=>{c(Number(t.target.value))},type:"number",name:"degree",style:{width:"53px"}})}))}))]}))};function Eo({multiMarker:t=!0,marker:n=!0,polyline:r=!0,rectangle:s=!0,polygon:o=!0,text:a=!0,edit:l=!0,movement:h=!0,remove:c=!0,onCanvas:u=!1,onDrawEnd:d}){const[p,f]=i.useState(null),g=t=>{p===t&&f(null),p!==t&&f(t)},m=t=>{d&&d(t),f(null)};return e.jsxs(e.Fragment,{children:[e.jsxs(yo,{children:[t&&e.jsx(et,{isActive:0===p,onEnd:m,onClick:()=>{g(0)},onCanvas:u}),n&&e.jsx(st,{isActive:1===p,onEnd:m,onClick:()=>{g(1)},onCanvas:u}),r&&e.jsx(ht,{isActive:2===p,onClick:()=>{g(2)},onEnd:m,onCanvas:u}),s&&e.jsx(ut,{isActive:3===p,onClick:()=>{g(3)},onEnd:m,onCanvas:u}),o&&e.jsx(at,{isActive:4===p,onClick:()=>{g(4)},onEnd:m,onCanvas:u}),a&&e.jsx(pt,{isActive:5===p,onClick:()=>{g(5)},onEnd:m,onCanvas:u})]}),e.jsxs(yo,{children:[l&&e.jsx(go,{isActive:6===p,onClick:()=>{g(6)}}),h&&e.jsx(_o,{isActive:7===p,onClick:()=>{g(7)}}),c&&e.jsx(gt,{isActive:8===p,onClick:()=>{g(8)}})]})]})}const wo=L.default.div`
  width: 16px;
  height: 16px;
`;function Co({color:t="black",size:i=18}){return e.jsx(wo,{children:e.jsx("svg",Object.assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{fillRule:"evenodd",d:"M5.828 10.172a.5.5 0 0 0-.707 0l-4.096 4.096V11.5a.5.5 0 0 0-1 0v3.975a.5.5 0 0 0 .5.5H4.5a.5.5 0 0 0 0-1H1.732l4.096-4.096a.5.5 0 0 0 0-.707zm4.344 0a.5.5 0 0 1 .707 0l4.096 4.096V11.5a.5.5 0 1 1 1 0v3.975a.5.5 0 0 1-.5.5H11.5a.5.5 0 0 1 0-1h2.768l-4.096-4.096a.5.5 0 0 1 0-.707zm0-4.344a.5.5 0 0 0 .707 0l4.096-4.096V4.5a.5.5 0 1 0 1 0V.525a.5.5 0 0 0-.5-.5H11.5a.5.5 0 0 0 0 1h2.768l-4.096 4.096a.5.5 0 0 0 0 .707zm-4.344 0a.5.5 0 0 1-.707 0L1.025 1.732V4.5a.5.5 0 0 1-1 0V.525a.5.5 0 0 1 .5-.5H4.5a.5.5 0 0 1 0 1H1.732l4.096 4.096a.5.5 0 0 1 0 .707z"})}))})}const So=L.default.div`
  width: 16px;
  height: 16px;
`;function To({color:t="black",size:i=18}){return e.jsx(So,{children:e.jsx("svg",Object.assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 16 16",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M5.5 0a.5.5 0 0 1 .5.5v4A1.5 1.5 0 0 1 4.5 6h-4a.5.5 0 0 1 0-1h4a.5.5 0 0 0 .5-.5v-4a.5.5 0 0 1 .5-.5zm5 0a.5.5 0 0 1 .5.5v4a.5.5 0 0 0 .5.5h4a.5.5 0 0 1 0 1h-4A1.5 1.5 0 0 1 10 4.5v-4a.5.5 0 0 1 .5-.5zM0 10.5a.5.5 0 0 1 .5-.5h4A1.5 1.5 0 0 1 6 11.5v4a.5.5 0 0 1-1 0v-4a.5.5 0 0 0-.5-.5h-4a.5.5 0 0 1-.5-.5zm10 1a1.5 1.5 0 0 1 1.5-1.5h4a.5.5 0 0 1 0 1h-4a.5.5 0 0 0-.5.5v4a.5.5 0 0 1-1 0v-4z"})}))})}const Ro=L.default.div`
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
`,Mo=()=>{const t=V(),n=i.useRef(null),r=i.useRef(null),s=i.useRef(null),[o,a]=i.useState(!1);Y((()=>{r.current=document.querySelector(".ol-full-screen-false"),s.current=document.querySelector(".ol-full-screen-true")}),[o]);const l=()=>{var t,e;o?null===(t=s.current)||void 0===t||t.click():null===(e=r.current)||void 0===e||e.click()},h=()=>{a(!0)},c=()=>{a(!1)};return i.useEffect((()=>{if(!t||!n.current)return;const e=new _.FullScreen({target:n.current});return e.on("enterfullscreen",h),e.on("leavefullscreen",c),t.addControl(e),()=>{t.removeControl(e),e.un("enterfullscreen",h),e.un("leavefullscreen",c)}}),[t]),e.jsx(yo,{children:e.jsx(Q,Object.assign({ref:n,onClick:l},{children:e.jsx(Ro,{children:o?e.jsx(To,{size:16}):e.jsx(Co,{size:16})})}))})};function Io({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsx("svg",Object.assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 512 512",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{fill:"none",strokeLinecap:"square",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288m144-144H112"})}))})}function Po({color:t="black",size:i=18}){return e.jsx("div",{children:e.jsx("svg",Object.assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 1024 1024",color:`${t}`,height:`${i}`,width:`${i}`,xmlns:"http://www.w3.org/2000/svg"},{children:e.jsx("path",{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"})}))})}const Lo=()=>{var t;const n=V(),[r,s]=i.useState(null!==(t=n.getView().getZoom())&&void 0!==t?t:0),o=n.getView().getMaxZoom(),a=n.getView().getMinZoom(),l=r!==o,h=r!==a,c=()=>{r<o&&(s((t=>t+1)),n.getView().setZoom(r+1))},u=()=>{r>a&&(s((t=>t-1)),n.getView().setZoom(r-1))},d=t=>{var e;t.preventDefault(),console.log(n.getView().getZoom()),s(null!==(e=n.getView().getZoom())&&void 0!==e?e:0)};return i.useEffect((()=>{const t=n.getViewport();return t.addEventListener("wheel",d,{passive:!1}),()=>{t.removeEventListener("wheel",d)}}),[]),e.jsxs(yo,{children:[e.jsx(Q,Object.assign({onClick:c,isDisabled:!l},{children:e.jsx(Io,{size:18,color:l?"black":"#e2e2e2"})})),e.jsx(Q,Object.assign({onClick:u,isDisabled:!h},{children:e.jsx(Po,{size:18,color:h?"black":"#e2e2e2"})}))]})},Ao=({center:t,radius:r,color:s="BLUE",properties:o={},onClick:a,onHover:h,zIndex:c=0,children:u})=>{const d=V(),p=i.useRef(new ne(new F.default(l.fromLonLat(t),r))),f=i.useRef(null);return i.useEffect((()=>{f.current&&f.current.setZIndex(c)}),[c]),i.useEffect((()=>{p.current.setStyle(new P.default({stroke:new k.default({color:B[s].stroke,width:2}),fill:new A.default({color:B[s].fill}),text:nt({text:u?u.props.children:"",size:(null==u?void 0:u.props.size)||15,color:(null==u?void 0:u.props.color)?u.props.color:"black",outline:null==u?void 0:u.props.outline})}));const t=new I.default({features:[p.current]}),e=new M.default({source:t});f.current=e,f.current=e,p.current.setProperties({source:t,layer:e}),e.setZIndex(c);const i=new n.Select({condition:m.click,style:null,layers:[e]}),r=new n.Select({condition:m.pointerMove,style:null,layers:[e]});function l(t){t.selected.length>0&&h&&h({annotation:p.current,properties:o})}function g(t){t.selected.length>0&&a&&a({annotation:p.current,properties:o})}return d.addInteraction(r),d.addInteraction(i),d.addLayer(e),r.on("select",l),i.on("select",g),()=>{var t;r.un("select",l),i.un("select",g),d.removeInteraction(r),d.removeInteraction(i),null===(t=e.getSource())||void 0===t||t.clear(),d.removeLayer(e)}}),[s,u,d,h,o,a]),e.jsx(e.Fragment,{})},ko=({center:t,color:r="BLUE",properties:s={},onClick:o,onHover:a,zIndex:h=0,children:c})=>{const u=V(),d=i.useRef(new D.default(new x.Point(l.fromLonLat(t)))),p=i.useRef(null);return i.useEffect((()=>{p.current&&p.current.setZIndex(h)}),[h]),i.useEffect((()=>{d.current.setStyle(new P.default({text:nt({text:c?c.props.children:"",size:(null==c?void 0:c.props.size)||15,color:(null==c?void 0:c.props.color)?c.props.color:"black",outline:null==c?void 0:c.props.outline,isMarker:!0}),image:new N.default({src:it.marker,anchor:[.5,1]})}));const t=new I.default({features:[d.current]}),e=new M.default({source:t});p.current=e,d.current.setProperties({source:t,layer:e}),e.setZIndex(h);const i=new n.Select({condition:m.click,style:null,layers:[e]}),r=new n.Select({condition:m.pointerMove,style:null,layers:[e]});function l(t){t.selected.length>0&&a&&a({annotation:d.current,properties:s})}function f(t){t.selected.length>0&&o&&o({annotation:d.current,properties:s})}return u.addInteraction(r),u.addInteraction(i),u.addLayer(e),r.on("select",l),i.on("select",f),()=>{r.un("select",l),i.un("select",f),u.removeInteraction(r),u.removeInteraction(i),u.removeLayer(e)}}),[r,c,u,a,s,o]),e.jsx(e.Fragment,{})};function Oo({positions:t,color:r="BLUE",properties:s={},onClick:o,onHover:h,zIndex:c=0,children:u}){const d=V(),p=i.useRef(new D.default(new x.MultiPoint(t.map((t=>l.fromLonLat(t)))))),f=i.useRef(null);return i.useEffect((()=>{f.current&&f.current.setZIndex(c)}),[c]),i.useEffect((()=>{const t=new I.default,e=new M.default({source:t}),i=p.current.getGeometry().getPoints().map(((i,n)=>{const s=n+1,o=new a.Style({image:new a.Circle({radius:10,fill:new a.Fill({color:B[r].fill}),stroke:new a.Stroke({color:B[r].stroke,width:2})}),text:nt({text:String(s),size:(null==u?void 0:u.props.size)||15,color:(null==u?void 0:u.props.color)?u.props.color:"black",outline:null==u?void 0:u.props.outline,isMarker:!1})});o.getText().setText(s.toString());const l=new D.default(i);return l.setStyle(o),l.setProperties({source:t,layer:e}),l}));t.addFeatures(i),f.current=e,e.setZIndex(c);const l=new n.Select({condition:m.click,style:null,layers:[e]}),g=new n.Select({condition:m.pointerMove,style:null,layers:[e]});function _(t){t.selected.length>0&&h&&h({annotation:p.current,properties:s})}function y(t){t.selected.length>0&&o&&o({annotation:p.current,properties:s})}return d.addInteraction(g),d.addInteraction(l),d.addLayer(e),g.on("select",_),l.on("select",y),()=>{g.un("select",_),l.un("select",y),d.removeInteraction(g),d.removeInteraction(l),d.removeLayer(e)}}),[r,u,d,h,s,o]),e.jsx(e.Fragment,{})}const No=({positions:t,color:r="BLUE",properties:s={},onClick:o,onHover:a,zIndex:h=0,children:c})=>{const u=V(),d=i.useRef(new D.default(new x.Polygon([t[0].map((t=>l.fromLonLat(t)))]))),p=i.useRef(null);return i.useEffect((()=>{p.current&&p.current.setZIndex(h)}),[h]),i.useEffect((()=>{d.current.setStyle(new P.default({stroke:new k.default({color:B[r].stroke,width:2}),fill:new A.default({color:B[r].fill}),text:nt({text:c?c.props.children:"",size:(null==c?void 0:c.props.size)||15,color:(null==c?void 0:c.props.color)?c.props.color:"black",outline:null==c?void 0:c.props.outline})}));const t=new I.default({features:[d.current]}),e=new M.default({source:t});p.current=e,d.current.setProperties({source:t,layer:e}),e.setZIndex(h);const i=new n.Select({condition:m.click,style:null,layers:[e]}),l=new n.Select({condition:m.pointerMove,style:null,layers:[e]});function f(t){t.selected.length>0&&a&&a({annotation:d.current,properties:s})}function g(t){t.selected.length>0&&o&&o({annotation:d.current,properties:s})}return u.addInteraction(l),u.addInteraction(i),u.addLayer(e),l.on("select",f),i.on("select",g),()=>{l.un("select",f),i.un("select",g),u.removeInteraction(l),u.removeInteraction(i),u.removeLayer(e)}}),[r,c,u,a,s,o]),e.jsx(e.Fragment,{})},Fo=({positions:t,color:r="BLUE",properties:s={},onClick:o,onHover:a,zIndex:h=0,children:c})=>{const u=V(),d=i.useRef(new D.default(new x.LineString(t.map((t=>l.fromLonLat(t)))))),p=i.useRef(null);return i.useEffect((()=>{p.current&&p.current.setZIndex(h)}),[h]),i.useEffect((()=>{d.current.setStyle(new P.default({stroke:new k.default({color:B[r].stroke,width:2}),fill:new A.default({color:B[r].fill}),text:nt({text:c?c.props.children:"",size:(null==c?void 0:c.props.size)||15,color:(null==c?void 0:c.props.color)?c.props.color:"black",outline:null==c?void 0:c.props.outline})}));const t=new I.default({features:[d.current]}),e=new M.default({source:t});p.current=e,d.current.setProperties({source:t,layer:e}),e.setZIndex(h);const i=new n.Select({condition:m.click,style:null,layers:[e]}),l=new n.Select({condition:m.pointerMove,style:null,layers:[e]});function f(t){t.selected.length>0&&a&&a({annotation:d.current,properties:s})}function g(t){t.selected.length>0&&o&&o({annotation:d.current,properties:s})}return u.addInteraction(l),u.addInteraction(i),u.addLayer(e),l.on("select",f),i.on("select",g),()=>{l.un("select",f),i.un("select",g),u.removeInteraction(l),u.removeInteraction(i),u.removeLayer(e)}}),[r,c,u,a,s,o]),e.jsx(e.Fragment,{})},Do=({positions:t,color:r="BLUE",properties:s={},onClick:o,onHover:a,zIndex:h=0,children:c})=>{const u=V(),d=i.useRef(new D.default(new x.Polygon([t[0].map((t=>l.fromLonLat(t)))]))),p=i.useRef(null);return i.useEffect((()=>{p.current&&h&&p.current.setZIndex(h)}),[h]),i.useEffect((()=>{if(!u)return;d.current.setStyle(new P.default({stroke:new k.default({color:B[r].stroke,width:2}),fill:new A.default({color:B[r].fill}),text:nt({text:c?c.props.children:"",size:(null==c?void 0:c.props.size)||15,color:(null==c?void 0:c.props.color)?c.props.color:"black",outline:null==c?void 0:c.props.outline})}));const t=new I.default({features:[d.current]}),e=new M.default({source:t});p.current=e,d.current.setProperties({source:t,layer:e}),e.setZIndex(h);const i=new n.Select({condition:m.click,style:null,layers:[e]}),l=new n.Select({condition:m.pointerMove,style:null,layers:[e]});function f(t){t.selected.length>0&&a&&a({annotation:d.current,properties:s})}function g(t){t.selected.length>0&&o&&o({annotation:d.current,properties:s})}return u.addInteraction(l),u.addInteraction(i),u.addLayer(e),l.on("select",f),i.on("select",g),()=>{l.un("select",f),i.un("select",g),u.removeInteraction(l),u.removeInteraction(i),u.removeLayer(e)}}),[c,r,u,o,a,s]),e.jsx(e.Fragment,{})},Zo=({center:t,color:r="BLUE",properties:s={},onClick:o,onHover:a,children:h,zIndex:c=0})=>{const u=V(),d=i.useRef(new D.default({geometry:new x.Point(l.fromLonLat(t))})),p=i.useRef(null);return i.useEffect((()=>{p.current&&c&&p.current.setZIndex(c)}),[c]),i.useEffect((()=>{d.current.setStyle(new P.default({text:new O.default({text:h?h.props.children:"",font:`${(null==h?void 0:h.props.size)||15}px Arial`,fill:new A.default({color:(null==h?void 0:h.props.color)?h.props.color:"black"}),overflow:!0,offsetX:0,offsetY:-15,stroke:(null==h?void 0:h.props.outline)?new k.default({color:"white",width:3}):void 0})}));const t=new I.default({features:[d.current]}),e=new M.default({source:t});p.current=e,d.current.setProperties({source:t,layer:e}),e.setZIndex(c);const i=new n.Select({condition:m.click,style:null,layers:[e]}),r=new n.Select({condition:m.pointerMove,style:null,layers:[e]});function l(t){t.selected.length>0&&a&&a({annotation:d.current,properties:s})}function f(t){t.selected.length>0&&o&&o({annotation:d.current,properties:s})}return u.addInteraction(r),u.addInteraction(i),u.addLayer(e),r.on("select",l),i.on("select",f),()=>{r.un("select",l),i.un("select",f),u.removeInteraction(r),u.removeInteraction(i),u.removeLayer(e)}}),[r,h,u,a,s,o]),e.jsx(e.Fragment,{})};class jo{constructor(t){this.url=t}getUrlFromPosition(t,e,i){return this.url.replace("{z}/{x}/{y}",`${t}/${e}/${i}`)}}const zo=t=>{const e=t.getGeometry().getType();return"Point"===e?Bo(t):"LineString"===e?Uo(t):"Polygon"===e?Vo(t):"MultiPoint"===e?Go(t):null},Go=t=>{const e=t.getGeometry();return{positions:e.getCoordinates(),properties:e.getProperties()}},Bo=t=>{const e=t.getGeometry();return{positions:e.getCoordinates(),properties:e.getProperties()}},Uo=t=>{const e=t.getGeometry();return{positions:e.getCoordinates(),properties:e.getProperties()}},Vo=t=>{const e=t.getGeometry();return{positions:e.getCoordinates(),properties:e.getProperties()}},qo=({url:t,zIndex:n=0,maxZoom:r=42,minZoom:s=0})=>{const o=V();return i.useEffect((()=>{const e=new b.XYZ({maxZoom:r,minZoom:s,tileUrlFunction:e=>{const i=new jo(t),n=e[0],r=e[1],s=Math.pow(2,n)-e[2]-1;return i.getUrlFromPosition(n,r,s)}}),i=new Z.default({source:e,zIndex:n});o.addLayer(i)}),[o]),e.jsx(e.Fragment,{})};function Wo(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var Xo=1,Ho=2,Ko=3,Yo=4,$o=5,Jo=6378137,Qo=6356752.314,ta=.0066943799901413165,ea=484813681109536e-20,ia=Math.PI/2,na=.16666666666666666,ra=.04722222222222222,sa=.022156084656084655,oa=1e-10,aa=.017453292519943295,la=57.29577951308232,ha=Math.PI/4,ca=2*Math.PI,ua=3.14159265359,da={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},pa={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},fa=/[\s_\-\/\(\)]/g;function ga(t,e){if(t[e])return t[e];for(var i,n=Object.keys(t),r=e.toLowerCase().replace(fa,""),s=-1;++s<n.length;)if((i=n[s]).toLowerCase().replace(fa,"")===r)return t[i]}function ma(t){var e,i,n,r={},s=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*aa},lat_1:function(t){r.lat1=t*aa},lat_2:function(t){r.lat2=t*aa},lat_ts:function(t){r.lat_ts=t*aa},lon_0:function(t){r.long0=t*aa},lon_1:function(t){r.long1=t*aa},lon_2:function(t){r.long2=t*aa},alpha:function(t){r.alpha=parseFloat(t)*aa},gamma:function(t){r.rectified_grid_angle=parseFloat(t)},lonc:function(t){r.longc=t*aa},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=ga(pa,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*aa},pm:function(t){var e=ga(da,t);r.from_greenwich=(e||parseFloat(t))*aa},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)},approx:function(){r.approx=!0}};for(e in s)i=s[e],e in o?"function"==typeof(n=o[e])?n(i):r[n]=i:r[e]=i;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var _a=1,ya=2,va=3,xa=4,ba=5,Ea=-1,wa=/\s/,Ca=/[A-Za-z]/,Sa=/[A-Za-z84_]/,Ta=/[,\]]/,Ra=/[\d\.E\-\+]/;function Ma(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=_a}function Ia(t){return new Ma(t).output()}function Pa(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var n=e?{}:t,r=i.reduce((function(t,e){return La(e,t),t}),n);e&&(t[e]=r)}function La(t,e){if(Array.isArray(t)){var i=t.shift();if("PARAMETER"===i&&(i=t.shift()),1===t.length)return Array.isArray(t[0])?(e[i]={},void La(t[0],e[i])):void(e[i]=t[0]);if(t.length)if("TOWGS84"!==i){if("AXIS"===i)return i in e||(e[i]=[]),void e[i].push(t);var n;switch(Array.isArray(i)||(e[i]={}),i){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[i]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&La(t[2],e[i]));case"SPHEROID":case"ELLIPSOID":return e[i]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&La(t[3],e[i]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void Pa(e,i,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return La(t,e[i]);return Pa(e,i,t)}}else e[i]=t;else e[i]=!0}else e[t]=!0}Ma.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==xa)for(;wa.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case _a:return this.neutral(t);case ya:return this.keyword(t);case xa:return this.quoted(t);case ba:return this.afterquote(t);case va:return this.number(t);case Ea:return}},Ma.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=xa);if(Ta.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},Ma.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=_a)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=_a,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=Ea))):void 0},Ma.prototype.number=function(t){if(!Ra.test(t)){if(Ta.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},Ma.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=ba},Ma.prototype.keyword=function(t){if(Sa.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=_a)}if(!Ta.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},Ma.prototype.neutral=function(t){if(Ca.test(t))return this.word=t,void(this.state=ya);if('"'===t)return this.word="",void(this.state=xa);if(Ra.test(t))return this.word=t,void(this.state=va);if(!Ta.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},Ma.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Ea)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var Aa=.017453292519943295;function ka(t,e){var i=e[0],n=e[1];!(i in t)&&n in t&&(t[i]=t[n],3===e.length&&(t[i]=e[2](t[i])))}function Oa(t){return t*Aa}function Na(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,n=t.AXIS.length;i<n;++i){var r=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?e+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?e+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?e+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;function o(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Oa],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Oa],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",Oa],["lat0","latitude_of_origin",Oa],["lat0","standard_parallel_1",Oa],["lat1","standard_parallel_1",Oa],["lat2","standard_parallel_2",Oa],["azimuth","Azimuth"],["alpha","azimuth",Oa],["srsCode","name"]].forEach((function(e){return ka(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=Oa(t.lat0>0?90:-90)):(t.lat0=Oa(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function Fa(t){var e=Ia(t),i=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",i]);var r={};return La(e,r),Na(r),r}function Da(t){var e=this;if(2===arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?Da[t]=ma(arguments[1]):Da[t]=Fa(arguments[1]):Da[t]=i}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?Da.apply(e,t):Da(t)}));if("string"==typeof t){if(t in Da)return Da[t]}else"EPSG"in t?Da["EPSG:"+t.EPSG]=t:"ESRI"in t?Da["ESRI:"+t.ESRI]=t:"IAU2000"in t?Da["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function Za(t){return"string"==typeof t}function ja(t){return t in Da}Wo(Da);var za=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Ga(t){return za.some((function(e){return t.indexOf(e)>-1}))}var Ba=["3857","900913","3785","102113"];function Ua(t){var e=ga(t,"authority");if(e){var i=ga(e,"epsg");return i&&Ba.indexOf(i)>-1}}function Va(t){var e=ga(t,"extension");if(e)return ga(e,"proj4")}function qa(t){return"+"===t[0]}function Wa(t){if(!Za(t))return t;if(ja(t))return Da[t];if(Ga(t)){var e=Fa(t);if(Ua(e))return Da["EPSG:3857"];var i=Va(e);return i?ma(i):e}return qa(t)?ma(t):void 0}function Xa(t,e){var i,n;if(t=t||{},!e)return t;for(n in e)void 0!==(i=e[n])&&(t[n]=i);return t}function Ha(t,e,i){var n=t*e;return i/Math.sqrt(1-n*n)}function Ka(t){return t<0?-1:1}function Ya(t){return Math.abs(t)<=ua?t:t-Ka(t)*ca}function $a(t,e,i){var n=t*i,r=.5*t;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(ia-e))/n}function Ja(t,e){for(var i,n,r=.5*t,s=ia-2*Math.atan(e),o=0;o<=15;o++)if(i=t*Math.sin(s),s+=n=ia-2*Math.atan(e*Math.pow((1-i)/(1+i),r))-s,Math.abs(n)<=1e-10)return s;return-9999}function Qa(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ha(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function tl(t){var e,i,n=t.x,r=t.y;if(r*la>90&&r*la<-90&&n*la>180&&n*la<-180)return null;if(Math.abs(Math.abs(r)-ia)<=oa)return null;if(this.sphere)e=this.x0+this.a*this.k0*Ya(n-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(ha+.5*r));else{var s=Math.sin(r),o=$a(this.e,r,s);e=this.x0+this.a*this.k0*Ya(n-this.long0),i=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=i,t}function el(t){var e,i,n=t.x-this.x0,r=t.y-this.y0;if(this.sphere)i=ia-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(-9999===(i=Ja(this.e,s)))return null}return e=Ya(this.long0+n/(this.a*this.k0)),t.x=e,t.y=i,t}function il(){}function nl(t){return t}var rl=[{init:Qa,forward:tl,inverse:el,names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:il,forward:nl,inverse:nl,names:["longlat","identity"]}],sl={},ol=[];function al(t,e){var i=ol.length;return t.names?(ol[i]=t,t.names.forEach((function(t){sl[t.toLowerCase()]=i})),this):(console.log(e),!0)}function ll(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==sl[e]&&ol[sl[e]]?ol[sl[e]]:void 0}function hl(){rl.forEach(al)}var cl={start:hl,add:al,get:ll},ul={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},dl=ul.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};function pl(t,e,i,n){var r=t*t,s=e*e,o=(r-s)/r,a=0;return n?(r=(t*=1-o*(na+o*(ra+o*sa)))*t,o=0):a=Math.sqrt(o),{es:o,e:a,ep2:(r-s)/s}}function fl(t,e,i,n,r){if(!t){var s=ga(ul,n);s||(s=dl),t=s.a,e=s.b,i=s.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<oa)&&(r=!0,e=t),{a:t,b:e,rf:i,sphere:r}}ul.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var gl={};function ml(t,e,i,n,r,s,o){var a={};return a.datum_type=void 0===t||"none"===t?$o:Yo,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=Xo),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=Ho,a.datum_params[3]*=ea,a.datum_params[4]*=ea,a.datum_params[5]*=ea,a.datum_params[6]=a.datum_params[6]/1e6+1))),o&&(a.datum_type=Ko,a.grids=o),a.a=i,a.b=n,a.es=r,a.ep2=s,a}gl.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},gl.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},gl.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},gl.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},gl.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},gl.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},gl.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},gl.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},gl.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},gl.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},gl.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},gl.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},gl.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},gl.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},gl.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gl.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},gl.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var _l={};function yl(t,e){var i=new DataView(e),n=El(i),r=wl(i,n);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var s={header:r,subgrids:Sl(i,r,n)};return _l[t]=s,s}function vl(t){return void 0===t?null:t.split(",").map(xl)}function xl(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:_l[t]||null,isNull:!1}}function bl(t){return t/3600*Math.PI/180}function El(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function wl(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:Cl(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function Cl(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}function Sl(t,e,i){for(var n=176,r=[],s=0;s<e.nSubgrids;s++){var o=Rl(t,n,i),a=Ml(t,n,o,i),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[bl(o.lowerLongitude),bl(o.lowerLatitude)],del:[bl(o.longitudeInterval),bl(o.latitudeInterval)],lim:[l,h],count:o.gridNodeCount,cvs:Tl(a)})}return r}function Tl(t){return t.map((function(t){return[bl(t.longitudeShift),bl(t.latitudeShift)]}))}function Rl(t,e,i){return{name:Cl(t,e+8,e+16).trim(),parent:Cl(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,i),upperLatitude:t.getFloat64(e+88,i),lowerLongitude:t.getFloat64(e+104,i),upperLongitude:t.getFloat64(e+120,i),latitudeInterval:t.getFloat64(e+136,i),longitudeInterval:t.getFloat64(e+152,i),gridNodeCount:t.getInt32(e+168,i)}}function Ml(t,e,i,n){for(var r=e+176,s=16,o=[],a=0;a<i.gridNodeCount;a++){var l={latitudeShift:t.getFloat32(r+a*s,n),longitudeShift:t.getFloat32(r+a*s+4,n),latitudeAccuracy:t.getFloat32(r+a*s+8,n),longitudeAccuracy:t.getFloat32(r+a*s+12,n)};o.push(l)}return o}function Il(t,e){if(!(this instanceof Il))return new Il(t);e=e||function(t){if(t)throw t};var i=Wa(t);if("object"==typeof i){var n=Il.projections.get(i.projName);if(n){if(i.datumCode&&"none"!==i.datumCode){var r=ga(gl,i.datumCode);r&&(i.datum_params=i.datum_params||(r.towgs84?r.towgs84.split(","):null),i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var s=fl(i.a,i.b,i.rf,i.ellps,i.sphere),o=pl(s.a,s.b,s.rf,i.R_A),a=vl(i.nadgrids),l=i.datum||ml(i.datumCode,i.datum_params,s.a,s.b,o.es,o.ep2,a);Xa(this,i),Xa(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}else e(t)}else e(t)}function Pl(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===Xo?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==Ho||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}function Ll(t,e,i){var n,r,s,o,a=t.x,l=t.y,h=t.z?t.z:0;if(l<-ia&&l>-1.001*ia)l=-ia;else if(l>ia&&l<1.001*ia)l=ia;else{if(l<-ia)return{x:-1/0,y:-1/0,z:t.z};if(l>ia)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),r=Math.sin(l),o=Math.cos(l),s=r*r,{x:((n=i/Math.sqrt(1-e*s))+h)*o*Math.cos(a),y:(n+h)*o*Math.sin(a),z:(n*(1-e)+h)*r}}function Al(t,e,i,n){var r,s,o,a,l,h,c,u,d,p,f,g,m,_,y,v=1e-12,x=v*v,b=30,E=t.x,w=t.y,C=t.z?t.z:0;if(r=Math.sqrt(E*E+w*w),s=Math.sqrt(E*E+w*w+C*C),r/i<v){if(_=0,s/i<v)return y=-n,{x:t.x,y:t.y,z:t.z}}else _=Math.atan2(w,E);o=C/s,u=(a=r/s)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*a*a)),d=o*l,m=0;do{m++,h=e*(c=i/Math.sqrt(1-e*d*d))/(c+(y=r*u+C*d-c*(1-e*d*d))),g=(f=o*(l=1/Math.sqrt(1-h*(2-h)*a*a)))*u-(p=a*(1-h)*l)*d,u=p,d=f}while(g*g>x&&m<b);return{x:_,y:Math.atan(f/Math.abs(p)),z:y}}function kl(t,e,i){if(e===Xo)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===Ho){var n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],l=i[5],h=i[6];return{x:h*(t.x-l*t.y+a*t.z)+n,y:h*(l*t.x+t.y-o*t.z)+r,z:h*(-a*t.x+o*t.y+t.z)+s}}}function Ol(t,e,i){if(e===Xo)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===Ho){var n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],l=i[5],h=i[6],c=(t.x-n)/h,u=(t.y-r)/h,d=(t.z-s)/h;return{x:c+l*u-a*d,y:-l*c+u+o*d,z:a*c-o*u+d}}}function Nl(t){return t===Xo||t===Ho}function Fl(t,e,i){if(Pl(t,e))return i;if(t.datum_type===$o||e.datum_type===$o)return i;var n=t.a,r=t.es;if(t.datum_type===Ko){if(0!==Dl(t,!1,i))return;n=Jo,r=ta}var s=e.a,o=e.b,a=e.es;return e.datum_type===Ko&&(s=Jo,o=Qo,a=ta),r!==a||n!==s||Nl(t.datum_type)||Nl(e.datum_type)?(i=Ll(i,r,n),Nl(t.datum_type)&&(i=kl(i,t.datum_type,t.datum_params)),Nl(e.datum_type)&&(i=Ol(i,e.datum_type,e.datum_params)),i=Al(i,a,s,o),e.datum_type!==Ko||0===Dl(e,!0,i)?i:void 0):i}function Dl(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-i.x,y:i.y},r={x:Number.NaN,y:Number.NaN},s=[],o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){r=n;break}if(a.mandatory,null!==a.grid){var l=a.grid.subgrids[0],h=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-h,u=l.ll[1]-h,d=l.ll[0]+(l.lim[0]-1)*l.del[0]+h,p=l.ll[1]+(l.lim[1]-1)*l.del[1]+h;if(!(u>n.y||c>n.x||p<n.y||d<n.x||(r=Zl(n,e,l),isNaN(r.x))))break}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*la+" "+n.y*la+" tried: '"+s+"'"),-1):(i.x=-r.x,i.y=r.y,0)}function Zl(t,e,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var r={x:t.x,y:t.y};r.x-=i.ll[0],r.y-=i.ll[1],r.x=Ya(r.x-Math.PI)+Math.PI;var s=jl(r,i);if(e){if(isNaN(s.x))return n;s.x=r.x-s.x,s.y=r.y-s.y;var o,a,l=9,h=1e-12;do{if(a=jl(s,i),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:r.x-(a.x+s.x),y:r.y-(a.y+s.y)},s.x+=o.x,s.y+=o.y}while(l--&&Math.abs(o.x)>h&&Math.abs(o.y)>h);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Ya(s.x+i.ll[0]),n.y=s.y+i.ll[1]}else isNaN(s.x)||(n.x=t.x+s.x,n.y=t.y+s.y);return n}function jl(t,e){var i,n={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(n.x),y:Math.floor(n.y)},s={x:n.x-1*r.x,y:n.y-1*r.y},o={x:Number.NaN,y:Number.NaN};if(r.x<0||r.x>=e.lim[0])return o;if(r.y<0||r.y>=e.lim[1])return o;i=r.y*e.lim[0]+r.x;var a={x:e.cvs[i][0],y:e.cvs[i][1]};i++;var l={x:e.cvs[i][0],y:e.cvs[i][1]};i+=e.lim[0];var h={x:e.cvs[i][0],y:e.cvs[i][1]};i--;var c={x:e.cvs[i][0],y:e.cvs[i][1]},u=s.x*s.y,d=s.x*(1-s.y),p=(1-s.x)*(1-s.y),f=(1-s.x)*s.y;return o.x=p*a.x+d*l.x+f*c.x+u*h.x,o.y=p*a.y+d*l.y+f*c.y+u*h.y,o}function zl(t,e,i){var n,r,s,o=i.x,a=i.y,l=i.z||0,h={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==i.z)switch(0===s?(n=o,r=-1!=="ew".indexOf(t.axis[s])?"x":"y"):1===s?(n=a,r=-1!=="ns".indexOf(t.axis[s])?"y":"x"):(n=l,r="z"),t.axis[s]){case"e":case"n":h[r]=n;break;case"w":case"s":h[r]=-n;break;case"u":void 0!==i[r]&&(h.z=n);break;case"d":void 0!==i[r]&&(h.z=-n);break;default:return null}return h}function Gl(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function Bl(t){Ul(t.x),Ul(t.y)}function Ul(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function Vl(t,e){return(t.datum.datum_type===Xo||t.datum.datum_type===Ho||t.datum.datum_type===Ko)&&"WGS84"!==e.datumCode||(e.datum.datum_type===Xo||e.datum.datum_type===Ho||e.datum.datum_type===Ko)&&"WGS84"!==t.datumCode}function ql(t,e,i,n){var r,s=void 0!==(i=Array.isArray(i)?Gl(i):{x:i.x,y:i.y,z:i.z,m:i.m}).z;if(Bl(i),t.datum&&e.datum&&Vl(t,e)&&(i=ql(t,r=new Il("WGS84"),i,n),t=r),n&&"enu"!==t.axis&&(i=zl(t,!1,i)),"longlat"===t.projName)i={x:i.x*aa,y:i.y*aa,z:i.z||0};else if(t.to_meter&&(i={x:i.x*t.to_meter,y:i.y*t.to_meter,z:i.z||0}),!(i=t.inverse(i)))return;if(t.from_greenwich&&(i.x+=t.from_greenwich),i=Fl(t.datum,e.datum,i))return e.from_greenwich&&(i={x:i.x-e.from_greenwich,y:i.y,z:i.z||0}),"longlat"===e.projName?i={x:i.x*la,y:i.y*la,z:i.z||0}:(i=e.forward(i),e.to_meter&&(i={x:i.x/e.to_meter,y:i.y/e.to_meter,z:i.z||0})),n&&"enu"!==e.axis?zl(e,!0,i):(s||delete i.z,i)}Il.projections=cl,Il.projections.start();var Wl=Il("WGS84");function Xl(t,e,i,n){var r,s,o;return Array.isArray(i)?(r=ql(t,e,i,n)||{x:NaN,y:NaN},i.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(i.splice(3)):[r.x,r.y,i[2]].concat(i.splice(3)):[r.x,r.y].concat(i.splice(2)):[r.x,r.y]):(s=ql(t,e,i,n),2===(o=Object.keys(i)).length||o.forEach((function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;s[n]=i[n]})),s)}function Hl(t){return t instanceof Il?t:t.oProj?t.oProj:Il(t)}function Kl(t,e,i){t=Hl(t);var n,r=!1;return void 0===e?(e=t,t=Wl,r=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=Wl,r=!0),e=Hl(e),i?Xl(t,e,i):(n={forward:function(i,n){return Xl(t,e,i,n)},inverse:function(i,n){return Xl(e,t,i,n)}},r&&(n.oProj=e),n)}var Yl=6,$l="AJSAJS",Jl="AFAFAF",Ql=65,th=73,eh=79,ih=86,nh=90,rh={forward:sh,inverse:oh,toPoint:ah};function sh(t,e){return e=e||5,ph(ch({lat:t[1],lon:t[0]}),e)}function oh(t){var e=uh(_h(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function ah(t){var e=uh(_h(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function lh(t){return t*(Math.PI/180)}function hh(t){return t/Math.PI*180}function ch(t){var e,i,n,r,s,o,a,l=t.lat,h=t.lon,c=6378137,u=.00669438,d=.9996,p=lh(l),f=lh(h);a=Math.floor((h+180)/6)+1,180===h&&(a=60),l>=56&&l<64&&h>=3&&h<12&&(a=32),l>=72&&l<84&&(h>=0&&h<9?a=31:h>=9&&h<21?a=33:h>=21&&h<33?a=35:h>=33&&h<42&&(a=37)),o=lh(6*(a-1)-180+3),e=u/(1-u),i=c/Math.sqrt(1-u*Math.sin(p)*Math.sin(p)),n=Math.tan(p)*Math.tan(p),r=e*Math.cos(p)*Math.cos(p);var g=d*i*((s=Math.cos(p)*(f-o))+(1-n+r)*s*s*s/6+(5-18*n+n*n+72*r-58*e)*s*s*s*s*s/120)+5e5,m=d*(c*((1-u/4-3*u*u/64-5*u*u*u/256)*p-(3*u/8+3*u*u/32+45*u*u*u/1024)*Math.sin(2*p)+(15*u*u/256+45*u*u*u/1024)*Math.sin(4*p)-35*u*u*u/3072*Math.sin(6*p))+i*Math.tan(p)*(s*s/2+(5-n+9*r+4*r*r)*s*s*s*s/24+(61-58*n+n*n+600*r-330*e)*s*s*s*s*s*s/720));return l<0&&(m+=1e7),{northing:Math.round(m),easting:Math.round(g),zoneNumber:a,zoneLetter:dh(l)}}function uh(t){var e=t.northing,i=t.easting,n=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var s,o,a,l,h,c,u,d,p,f=.9996,g=6378137,m=.00669438,_=(1-Math.sqrt(1-m))/(1+Math.sqrt(1-m)),y=i-5e5,v=e;n<"N"&&(v-=1e7),u=6*(r-1)-180+3,s=m/(1-m),p=(d=v/f/(g*(1-m/4-3*m*m/64-5*m*m*m/256)))+(3*_/2-27*_*_*_/32)*Math.sin(2*d)+(21*_*_/16-55*_*_*_*_/32)*Math.sin(4*d)+151*_*_*_/96*Math.sin(6*d),o=g/Math.sqrt(1-m*Math.sin(p)*Math.sin(p)),a=Math.tan(p)*Math.tan(p),l=s*Math.cos(p)*Math.cos(p),h=g*(1-m)/Math.pow(1-m*Math.sin(p)*Math.sin(p),1.5),c=y/(o*f);var x=p-o*Math.tan(p)/h*(c*c/2-(5+3*a+10*l-4*l*l-9*s)*c*c*c*c/24+(61+90*a+298*l+45*a*a-252*s-3*l*l)*c*c*c*c*c*c/720);x=hh(x);var b,E=(c-(1+2*a+l)*c*c*c/6+(5-2*l+28*a-3*l*l+8*s+24*a*a)*c*c*c*c*c/120)/Math.cos(p);if(E=u+hh(E),t.accuracy){var w=uh({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:w.lat,right:w.lon,bottom:x,left:E}}else b={lat:x,lon:E};return b}function dh(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function ph(t,e){var i="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+fh(t.easting,t.northing,t.zoneNumber)+i.substr(i.length-5,e)+n.substr(n.length-5,e)}function fh(t,e,i){var n=gh(i);return mh(Math.floor(t/1e5),Math.floor(e/1e5)%20,n)}function gh(t){var e=t%Yl;return 0===e&&(e=Yl),e}function mh(t,e,i){var n=i-1,r=$l.charCodeAt(n),s=Jl.charCodeAt(n),o=r+t-1,a=s+e,l=!1;return o>nh&&(o=o-nh+Ql-1,l=!0),(o===th||r<th&&o>th||(o>th||r<th)&&l)&&o++,(o===eh||r<eh&&o>eh||(o>eh||r<eh)&&l)&&++o===th&&o++,o>nh&&(o=o-nh+Ql-1),a>ih?(a=a-ih+Ql-1,l=!0):l=!1,(a===th||s<th&&a>th||(a>th||s<th)&&l)&&a++,(a===eh||s<eh&&a>eh||(a>eh||s<eh)&&l)&&++a===th&&a++,a>ih&&(a=a-ih+Ql-1),String.fromCharCode(o)+String.fromCharCode(a)}function _h(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i=t.length,n=null,r="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,s++}var o=parseInt(r,10);if(0===s||s+3>i)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;n=t.substring(s,s+=2);for(var l=gh(o),h=yh(n.charAt(0),l),c=vh(n.charAt(1),l);c<xh(a);)c+=2e6;var u=i-s;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,p,f,g=u/2,m=0,_=0;return g>0&&(d=1e5/Math.pow(10,g),p=t.substring(s,s+g),m=parseFloat(p)*d,f=t.substring(s+g),_=parseFloat(f)*d),{easting:m+h,northing:_+c,zoneLetter:a,zoneNumber:o,accuracy:d}}function yh(t,e){for(var i=$l.charCodeAt(e-1),n=1e5,r=!1;i!==t.charCodeAt(0);){if(++i===th&&i++,i===eh&&i++,i>nh){if(r)throw"Bad character: "+t;i=Ql,r=!0}n+=1e5}return n}function vh(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=Jl.charCodeAt(e-1),n=0,r=!1;i!==t.charCodeAt(0);){if(++i===th&&i++,i===eh&&i++,i>ih){if(r)throw"Bad character: "+t;i=Ql,r=!0}n+=1e5}return n}function xh(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function bh(t,e,i){if(!(this instanceof bh))return new bh(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}bh.fromMGRS=function(t){return new bh(ah(t))},bh.prototype.toMGRS=function(t){return sh([this.x,this.y],t)};var Eh=1,wh=.25,Ch=.046875,Sh=.01953125,Th=.01068115234375,Rh=.75,Mh=.46875,Ih=.013020833333333334,Ph=.007120768229166667,Lh=.3645833333333333,Ah=.005696614583333333,kh=.3076171875;function Oh(t){var e=[];e[0]=Eh-t*(wh+t*(Ch+t*(Sh+t*Th))),e[1]=t*(Rh-t*(Ch+t*(Sh+t*Th)));var i=t*t;return e[2]=i*(Mh-t*(Ih+t*Ph)),i*=t,e[3]=i*(Lh-t*Ah),e[4]=i*t*kh,e}function Nh(t,e,i,n){return i*=e,e*=e,n[0]*t-i*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var Fh=20;function Dh(t,e,i){for(var n=1/(1-e),r=t,s=Fh;s;--s){var o=Math.sin(r),a=1-e*o*o;if(r-=a=(Nh(r,o,Math.cos(r),i)-t)*(a*Math.sqrt(a))*n,Math.abs(a)<oa)return r}return r}function Zh(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Oh(this.es),this.ml0=Nh(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function jh(t){var e,i,n,r=t.x,s=t.y,o=Ya(r-this.long0),a=Math.sin(s),l=Math.cos(s);if(this.es){var h=l*o,c=Math.pow(h,2),u=this.ep2*Math.pow(l,2),d=Math.pow(u,2),p=Math.abs(l)>oa?Math.tan(s):0,f=Math.pow(p,2),g=Math.pow(f,2);e=1-this.es*Math.pow(a,2),h/=Math.sqrt(e);var m=Nh(s,a,l,this.en);i=this.a*(this.k0*h*(1+c/6*(1-f+u+c/20*(5-18*f+g+14*u-58*f*u+c/42*(61+179*g-g*f-479*f)))))+this.x0,n=this.a*(this.k0*(m-this.ml0+a*o*h/2*(1+c/12*(5-f+9*u+4*d+c/30*(61+g-58*f+270*u-330*f*u+c/56*(1385+543*g-g*f-3111*f))))))+this.y0}else{var _=l*Math.sin(o);if(Math.abs(Math.abs(_)-1)<oa)return 93;if(i=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,n=l*Math.cos(o)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(n))>=1){if(_-1>oa)return 93;n=0}else n=Math.acos(n);s<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=i,t.y=n,t}function zh(t){var e,i,n,r,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(i=Dh(e=this.ml0+o/this.k0,this.es,this.en),Math.abs(i)<ia){var a=Math.sin(i),l=Math.cos(i),h=Math.abs(l)>oa?Math.tan(i):0,c=this.ep2*Math.pow(l,2),u=Math.pow(c,2),d=Math.pow(h,2),p=Math.pow(d,2);e=1-this.es*Math.pow(a,2);var f=s*Math.sqrt(e)/this.k0,g=Math.pow(f,2);n=i-(e*=h)*g/(1-this.es)*.5*(1-g/12*(5+3*d-9*c*d+c-4*u-g/30*(61+90*d-252*c*d+45*p+46*c-g/56*(1385+3633*d+4095*p+1574*p*d)))),r=Ya(this.long0+f*(1-g/6*(1+2*d+c-g/20*(5+28*d+24*p+8*c*d+6*c-g/42*(61+662*d+1320*p+720*p*d))))/l)}else n=ia*Ka(o),r=0;else{var m=Math.exp(s/this.k0),_=.5*(m-1/m),y=this.lat0+o/this.k0,v=Math.cos(y);e=Math.sqrt((1-Math.pow(v,2))/(1+Math.pow(_,2))),n=Math.asin(e),o<0&&(n=-n),r=0===_&&0===v?0:Ya(Math.atan2(_,v)+this.long0)}return t.x=r,t.y=n,t}var Gh={init:Zh,forward:jh,inverse:zh,names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Bh(t){var e=Math.exp(t);return e=(e-1/e)/2}function Uh(t,e){t=Math.abs(t),e=Math.abs(e);var i=Math.max(t,e),n=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function Vh(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}function qh(t){var e=Math.abs(t);return e=Vh(e*(1+e/(Uh(1,e)+1))),t<0?-e:e}function Wh(t,e){for(var i,n=2*Math.cos(2*e),r=t.length-1,s=t[r],o=0;--r>=0;)i=n*s-o+t[r],o=s,s=i;return e+i*Math.sin(2*e)}function Xh(t,e){for(var i,n=2*Math.cos(e),r=t.length-1,s=t[r],o=0;--r>=0;)i=n*s-o+t[r],o=s,s=i;return Math.sin(e)*i}function Hh(t){var e=Math.exp(t);return e=(e+1/e)/2}function Kh(t,e,i){for(var n,r,s=Math.sin(e),o=Math.cos(e),a=Bh(i),l=Hh(i),h=2*o*l,c=-2*s*a,u=t.length-1,d=t[u],p=0,f=0,g=0;--u>=0;)n=f,r=p,d=h*(f=d)-n-c*(p=g)+t[u],g=c*f-r+h*p;return[(h=s*l)*d-(c=o*a)*g,h*g+c*d]}function Yh(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Gh.init.apply(this),this.forward=Gh.forward,this.inverse=Gh.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),i*=e,this.cgb[1]=i*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=i*(1237/630+e*(e*(-24832/14175)-2.4)),i*=e,this.cgb[4]=i*(4174/315+e*(-144838/6237)),this.cbg[4]=i*(-734/315+e*(109598/31185)),i*=e,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=i*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=i*(49561/161280+e*(-179/168+e*(6601661/7257600))),i*=e,this.utg[4]=i*(-4583/161280+e*(108847/3991680)),this.gtu[4]=i*(34729/80640+e*(-3418889/1995840)),i*=e,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=.6650675310896665*i;var n=Wh(this.cbg,this.lat0);this.Zb=-this.Qn*(n+Xh(this.gtu,2*n))}function $h(t){var e=Ya(t.x-this.long0),i=t.y;i=Wh(this.cbg,i);var n=Math.sin(i),r=Math.cos(i),s=Math.sin(e),o=Math.cos(e);i=Math.atan2(n,o*r),e=Math.atan2(s*r,Uh(n,r*o)),e=qh(Math.tan(e));var a,l,h=Kh(this.gtu,2*i,2*e);return i+=h[0],e+=h[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*i+this.Zb)+this.y0):(a=1/0,l=1/0),t.x=a,t.y=l,t}function Jh(t){var e,i,n=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var s=Kh(this.utg,2*r,2*n);r+=s[0],n+=s[1],n=Math.atan(Bh(n));var o=Math.sin(r),a=Math.cos(r),l=Math.sin(n),h=Math.cos(n);r=Math.atan2(o*h,Uh(l,h*a)),e=Ya((n=Math.atan2(l,h*a))+this.long0),i=Wh(this.cgb,r)}else e=1/0,i=1/0;return t.x=e,t.y=i,t}var Qh={init:Yh,forward:$h,inverse:Jh,names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};function tc(t,e){if(void 0===t){if((t=Math.floor(30*(Ya(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}function ec(){var t=tc(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*aa,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Qh.init.apply(this),this.forward=Qh.forward,this.inverse=Qh.inverse}var ic={init:ec,names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function nc(t,e){return Math.pow((1-t)/(1+t),e)}var rc=20;function sc(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+ha)/(Math.pow(Math.tan(.5*this.lat0+ha),this.C)*nc(this.e*t,this.ratexp))}function oc(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+ha),this.C)*nc(this.e*Math.sin(i),this.ratexp))-ia,t.x=this.C*e,t}function ac(t){for(var e=1e-14,i=t.x/this.C,n=t.y,r=Math.pow(Math.tan(.5*n+ha)/this.K,1/this.C),s=rc;s>0&&(n=2*Math.atan(r*nc(this.e*Math.sin(t.y),-.5*this.e))-ia,!(Math.abs(n-t.y)<e));--s)t.y=n;return s?(t.x=i,t.y=n,t):null}var lc={init:sc,forward:oc,inverse:ac,names:["gauss"]};function hc(){lc.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function cc(t){var e,i,n,r;return t.x=Ya(t.x-this.long0),lc.forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=r*i*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function uc(t){var e,i,n,r,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),i=Math.cos(o),r=Math.asin(i*this.sinc0+t.y*e*this.cosc0/s),n=Math.atan2(t.x*e,s*this.cosc0*i-t.y*this.sinc0*e)}else r=this.phic0,n=0;return t.x=n,t.y=r,lc.inverse.apply(this,[t]),t.x=Ya(t.x+this.long0),t}var dc={init:hc,forward:cc,inverse:uc,names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};function pc(t,e,i){return e*=i,Math.tan(.5*(ia+t))*Math.pow((1-e)/(1+e),.5*i)}function fc(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=oa&&(this.k0=.5*(1+Ka(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=oa&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=oa&&(this.k0=.5*this.cons*Ha(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/$a(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ha(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-ia,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function gc(t){var e,i,n,r,s,o,a=t.x,l=t.y,h=Math.sin(l),c=Math.cos(l),u=Ya(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=oa&&Math.abs(l+this.lat0)<=oa?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*h+this.coslat0*c*Math.cos(u)),t.x=this.a*e*c*Math.sin(u)+this.x0,t.y=this.a*e*(this.coslat0*h-this.sinlat0*c*Math.cos(u))+this.y0,t):(i=2*Math.atan(this.ssfn_(l,h,this.e))-ia,r=Math.cos(i),n=Math.sin(i),Math.abs(this.coslat0)<=oa?(s=$a(this.e,l*this.con,this.con*h),o=2*this.a*this.k0*s/this.cons,t.x=this.x0+o*Math.sin(a-this.long0),t.y=this.y0-this.con*o*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<oa?(e=2*this.a*this.k0/(1+r*Math.cos(u)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*r*Math.cos(u))),t.y=e*(this.cosX0*n-this.sinX0*r*Math.cos(u))+this.y0),t.x=e*r*Math.sin(u)+this.x0,t))}function mc(t){var e,i,n,r,s;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,i=this.lat0,o<=oa?(t.x=e,t.y=i,t):(i=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),e=Math.abs(this.coslat0)<oa?this.lat0>0?Ya(this.long0+Math.atan2(t.x,-1*t.y)):Ya(this.long0+Math.atan2(t.x,t.y)):Ya(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=i,t)}if(Math.abs(this.coslat0)<=oa){if(o<=oa)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,n=o*this.cons/(2*this.a*this.k0),i=this.con*Ja(this.e,n),e=this.con*Ya(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=oa?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/o),e=Ya(this.long0+Math.atan2(t.x*Math.sin(r),o*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),i=-1*Ja(this.e,Math.tan(.5*(ia+s)));return t.x=e,t.y=i,t}var _c={init:fc,forward:gc,inverse:mc,names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:pc};function yc(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,n=1/this.rf,r=2*n-Math.pow(n,2),s=this.e=Math.sqrt(r);this.R=this.k0*i*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+s*e)/(1-s*e));this.K=o-this.alpha*a+this.alpha*s/2*l}function vc(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t}function xc(t){for(var e=t.x-this.x0,i=t.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,l=0,h=s,c=-1e3,u=0;Math.abs(h-c)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),c=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=h,t}var bc={init:yc,forward:vc,inverse:xc,names:["somerc"]},Ec=1e-7;function wc(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i="object"==typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==e.indexOf(i)}function Cc(){var t,e,i,n,r,s,o,a,l,h,c,u=0,d=0,p=0,f=0,g=0,m=0,_=0;this.no_off=wc(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var v=!1;if("rectified_grid_angle"in this&&(v=!0),y&&(_=this.alpha),v&&(u=this.rectified_grid_angle*aa),y||v)d=this.longc;else if(p=this.long1,g=this.lat1,f=this.long2,m=this.lat2,Math.abs(g-m)<=Ec||(t=Math.abs(g))<=Ec||Math.abs(t-ia)<=Ec||Math.abs(Math.abs(this.lat0)-ia)<=Ec||Math.abs(Math.abs(m)-ia)<=Ec)throw new Error;var x=1-this.es;e=Math.sqrt(x),Math.abs(this.lat0)>oa?(a=Math.sin(this.lat0),i=Math.cos(this.lat0),t=1-this.es*a*a,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/x),this.A=this.B*this.k0*e/t,(r=(n=this.B*e/(i*Math.sqrt(t)))*n-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow($a(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=r=1),y||v?(y?(c=Math.asin(Math.sin(_)/n),v||(u=_)):(c=u,_=Math.asin(n*Math.sin(c))),this.lam0=d-Math.asin(.5*(r-1/r)*Math.tan(c))/this.B):(s=Math.pow($a(this.e,g,Math.sin(g)),this.B),o=Math.pow($a(this.e,m,Math.sin(m)),this.B),r=this.E/s,l=(o-s)/(o+s),h=((h=this.E*this.E)-o*s)/(h+o*s),(t=p-f)<-Math.pi?f-=ca:t>Math.pi&&(f+=ca),this.lam0=Ya(.5*(p+f)-Math.atan(h*Math.tan(.5*this.B*(p-f))/l)/this.B),c=Math.atan(2*Math.sin(this.B*Ya(p-this.lam0))/(r-1/r)),u=_=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(_))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(ha-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(ha+r))}function Sc(t){var e,i,n,r,s,o,a,l,h={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-ia)>oa){if(e=.5*((s=this.E/Math.pow($a(this.e,t.y,Math.sin(t.y)),this.B))-(o=1/s)),i=.5*(s+o),r=Math.sin(this.B*t.x),n=(e*this.singam-r*this.cosgam)/i,Math.abs(Math.abs(n)-1)<oa)throw new Error;l=.5*this.ArB*Math.log((1-n)/(1+n)),o=Math.cos(this.B*t.x),a=Math.abs(o)<Ec?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,o)}else l=t.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*t.y;return this.no_rot?(h.x=a,h.y=l):(a-=this.u_0,h.x=l*this.cosrot+a*this.sinrot,h.y=a*this.cosrot-l*this.sinrot),h.x=this.a*h.x+this.x0,h.y=this.a*h.y+this.y0,h}function Tc(t){var e,i,n,r,s,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((n=Math.exp(-this.BrA*i))-1/n),s=.5*(n+1/n),a=((o=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(a)-1)<oa)l.x=0,l.y=a<0?-ia:ia;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=Ja(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var Rc={init:Cc,forward:Sc,inverse:Tc,names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};function Mc(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<oa)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=Ha(this.e,e,i),r=$a(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=Ha(this.e,s,o),l=$a(this.e,this.lat2,s),h=$a(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>oa?this.ns=Math.log(n/a)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Ic(t){var e=t.x,i=t.y;Math.abs(2*Math.abs(i)-Math.PI)<=oa&&(i=Ka(i)*(ia-2*oa));var n,r,s=Math.abs(Math.abs(i)-ia);if(s>oa)n=$a(this.e,i,Math.sin(i)),r=this.a*this.f0*Math.pow(n,this.ns);else{if((s=i*this.ns)<=0)return null;r=0}var o=this.ns*Ya(e-this.long0);return t.x=this.k0*(r*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(o))+this.y0,t}function Pc(t){var e,i,n,r,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),i=1):(e=-Math.sqrt(o*o+a*a),i=-1);var l=0;if(0!==e&&(l=Math.atan2(i*o,i*a)),0!==e||this.ns>0){if(i=1/this.ns,n=Math.pow(e/(this.a*this.f0),i),-9999===(r=Ja(this.e,n)))return null}else r=-ia;return s=Ya(l/this.ns+this.long0),t.x=s,t.y=r,t}var Lc={init:Mc,forward:Ic,inverse:Pc,names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};function Ac(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function kc(t){var e,i,n,r,s,o,a,l=t.x,h=t.y,c=Ya(l-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),s=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Oc(t){var e,i,n,r,s,o,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),t.x=this.long0-i/this.alfa,o=e,a=0;var h=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(a=1),o=t.y,h+=1}while(0===a&&h<15);return h>=15?null:t}var Nc={init:Ac,forward:kc,inverse:Oc,names:["Krovak","krovak"]};function Fc(t,e,i,n,r){return t*r-e*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)}function Dc(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function Zc(t){return.375*t*(1+.25*t*(1+.46875*t))}function jc(t){return.05859375*t*t*(1+.75*t)}function zc(t){return t*t*t*(35/3072)}function Gc(t,e,i){var n=e*i;return t/Math.sqrt(1-n*n)}function Bc(t){return Math.abs(t)<ia?t:t-Ka(t)*Math.PI}function Uc(t,e,i,n,r){var s,o;s=t/e;for(var a=0;a<15;a++)if(s+=o=(t-(e*s-i*Math.sin(2*s)+n*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*i*Math.cos(2*s)+4*n*Math.cos(4*s)-6*r*Math.cos(6*s)),Math.abs(o)<=1e-10)return s;return NaN}function Vc(){this.sphere||(this.e0=Dc(this.es),this.e1=Zc(this.es),this.e2=jc(this.es),this.e3=zc(this.es),this.ml0=this.a*Fc(this.e0,this.e1,this.e2,this.e3,this.lat0))}function qc(t){var e,i,n=t.x,r=t.y;if(n=Ya(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=Gc(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),h=n*Math.cos(r),c=h*h,u=this.es*o*o/(1-this.es);e=a*h*(1-c*l*(1/6-(8-l+8*u)*c/120)),i=this.a*Fc(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*s/o*c*(.5+(5-l+6*u)*c/24)}return t.x=e+this.x0,t.y=i+this.y0,t}function Wc(t){t.x-=this.x0,t.y-=this.y0;var e,i,n=t.x/this.a,r=t.y/this.a;if(this.sphere){var s=r+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(n)),i=Math.atan2(Math.tan(n),Math.cos(s))}else{var o=Uc(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(o)-ia)<=oa)return t.x=this.long0,t.y=ia,r<0&&(t.y*=-1),t;var a=Gc(this.a,this.e,Math.sin(o)),l=a*a*a/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(o),2),c=n*this.a/a,u=c*c;e=o-a*Math.tan(o)/l*c*c*(.5-(1+3*h)*c*c/24),i=c*(1-u*(h/3+(1+3*h)*h*u/15))/Math.cos(o)}return t.x=Ya(i+this.long0),t.y=Bc(e),t}var Xc={init:Vc,forward:qc,inverse:Wc,names:["Cassini","Cassini_Soldner","cass"]};function Hc(t,e){var i;return t>1e-7?(1-t*t)*(e/(1-(i=t*e)*i)-.5/t*Math.log((1-i)/(1+i))):2*e}function Kc(){var t,e=Math.abs(this.lat0);if(Math.abs(e-ia)<oa?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<oa?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Hc(this.e,1),this.mmf=.5/(1-this.es),this.apa=ru(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Hc(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Yc(t){var e,i,n,r,s,o,a,l,h,c,u=t.x,d=t.y;if(u=Ya(u-this.long0),this.sphere){if(s=Math.sin(d),c=Math.cos(d),n=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+c*n:1+this.sinph0*s+this.cosph0*c*n)<=oa)return null;e=(i=Math.sqrt(2/i))*c*Math.sin(u),i*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<oa)return null;i=ha-.5*d,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(u),i*=n}}else{switch(a=0,l=0,h=0,n=Math.cos(u),r=Math.sin(u),s=Math.sin(d),o=Hc(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:h=1+this.sinb1*a+this.cosb1*l*n;break;case this.EQUIT:h=1+l*n;break;case this.N_POLE:h=ia+d,o=this.qp-o;break;case this.S_POLE:h=d-ia,o=this.qp+o}if(Math.abs(h)<oa)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),i=this.mode===this.OBLIQ?this.ymf*h*(this.cosb1*a-this.sinb1*l*n):(h=Math.sqrt(2/(1+l*n)))*a*this.ymf,e=this.xmf*h*l*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(h=Math.sqrt(o))*r,i=n*(this.mode===this.S_POLE?h:-h)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t}function $c(t){t.x-=this.x0,t.y-=this.y0;var e,i,n,r,s,o,a,l=t.x/this.a,h=t.y/this.a;if(this.sphere){var c,u=0,d=0;if((i=.5*(c=Math.sqrt(l*l+h*h)))>1)return null;switch(i=2*Math.asin(i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(i),u=Math.cos(i)),this.mode){case this.EQUIT:i=Math.abs(c)<=oa?0:Math.asin(h*d/c),l*=d,h=u*c;break;case this.OBLIQ:i=Math.abs(c)<=oa?this.lat0:Math.asin(u*this.sinph0+h*d*this.cosph0/c),l*=d*this.cosph0,h=(u-Math.sin(i)*this.sinph0)*c;break;case this.N_POLE:h=-h,i=ia-i;break;case this.S_POLE:i-=ia}e=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,h):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,h*=this.dd,(o=Math.sqrt(l*l+h*h))<oa)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*o/this.rq),n=Math.cos(r),l*=r=Math.sin(r),this.mode===this.OBLIQ?(a=n*this.sinb1+h*r*this.cosb1/o,s=this.qp*a,h=o*this.cosb1*n-h*this.sinb1*r):(a=h*r/o,s=this.qp*a,h=o*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(s=l*l+h*h))return t.x=this.long0,t.y=this.lat0,t;a=1-s/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(l,h),i=su(Math.asin(a),this.apa)}return t.x=Ya(this.long0+e),t.y=i,t}var Jc=.3333333333333333,Qc=.17222222222222222,tu=.10257936507936508,eu=.06388888888888888,iu=.0664021164021164,nu=.016415012942191543;function ru(t){var e,i=[];return i[0]=t*Jc,e=t*t,i[0]+=e*Qc,i[1]=e*eu,e*=t,i[0]+=e*tu,i[1]+=e*iu,i[2]=e*nu,i}function su(t,e){var i=t+t;return t+e[0]*Math.sin(i)+e[1]*Math.sin(i+i)+e[2]*Math.sin(i+i+i)}var ou={init:Kc,forward:Yc,inverse:$c,names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function au(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function lu(){Math.abs(this.lat1+this.lat2)<oa||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ha(this.e3,this.sin_po,this.cos_po),this.qs1=Hc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ha(this.e3,this.sin_po,this.cos_po),this.qs2=Hc(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Hc(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>oa?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function hu(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=Hc(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*Ya(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return t.x=o,t.y=a,t}function cu(t){var e,i,n,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),r=0,0!==e&&(r=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,i)),s=Ya(r/this.ns0+this.long0),t.x=s,t.y=o,t}function uu(t,e){var i,n,r,s,o=au(.5*e);if(t<oa)return o;for(var a=t*t,l=1;l<=25;l++)if(o+=s=.5*(r=1-(n=t*(i=Math.sin(o)))*n)*r/Math.cos(o)*(e/(1-a)-i/r+.5/t*Math.log((1-n)/(1+n))),Math.abs(s)<=1e-7)return o;return null}var du={init:lu,forward:hu,inverse:cu,names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:uu};function pu(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function fu(t){var e,i,n,r,s,o,a,l,h=t.x,c=t.y;return n=Ya(h-this.long0),e=Math.sin(c),i=Math.cos(c),r=Math.cos(n),s=1,(o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=oa?(a=this.x0+this.a*s*i*Math.sin(n)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*i*r)/o):(a=this.x0+this.infinity_dist*i*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*r)),t.x=a,t.y=l,t}function gu(t){var e,i,n,r,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),i=Math.sin(r),o=au((n=Math.cos(r))*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),s=Ya(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t}var mu={init:pu,forward:fu,inverse:gu,names:["gnom"]};function _u(t,e){var i=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-i)<1e-6)return e<0?-1*ia:ia;for(var n,r,s,o,a=Math.asin(.5*e),l=0;l<30;l++)if(r=Math.sin(a),s=Math.cos(a),o=t*r,a+=n=Math.pow(1-o*o,2)/(2*s)*(e/(1-t*t)-r/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),Math.abs(n)<=1e-10)return a;return NaN}function yu(){this.sphere||(this.k0=Ha(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function vu(t){var e,i,n=t.x,r=t.y,s=Ya(n-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=Hc(this.e,Math.sin(r));e=this.x0+this.a*this.k0*s,i=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=i,t}function xu(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=Ya(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=_u(this.e,2*t.y*this.k0/this.a),e=Ya(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t}var bu={init:yu,forward:vu,inverse:xu,names:["cea"]};function Eu(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function wu(t){var e=t.x,i=t.y,n=Ya(e-this.long0),r=Bc(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*r,t}function Cu(t){var e=t.x,i=t.y;return t.x=Ya(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Bc(this.lat0+(i-this.y0)/this.a),t}var Su={init:Eu,forward:wu,inverse:Cu,names:["Equirectangular","Equidistant_Cylindrical","eqc"]},Tu=20;function Ru(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Dc(this.es),this.e1=Zc(this.es),this.e2=jc(this.es),this.e3=zc(this.es),this.ml0=this.a*Fc(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Mu(t){var e,i,n,r=t.x,s=t.y,o=Ya(r-this.long0);if(n=o*Math.sin(s),this.sphere)Math.abs(s)<=oa?(e=this.a*o,i=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(s),i=this.a*(Bc(s-this.lat0)+(1-Math.cos(n))/Math.tan(s)));else if(Math.abs(s)<=oa)e=this.a*o,i=-1*this.ml0;else{var a=Gc(this.a,this.e,Math.sin(s))/Math.tan(s);e=a*Math.sin(n),i=this.a*Fc(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+a*(1-Math.cos(n))}return t.x=e+this.x0,t.y=i+this.y0,t}function Iu(t){var e,i,n,r,s,o,a,l,h;if(n=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=oa)e=Ya(n/this.a+this.long0),i=0;else{var c;for(o=this.lat0+r/this.a,a=n*n/this.a/this.a+o*o,l=o,s=Tu;s;--s)if(l+=h=-1*(o*(l*(c=Math.tan(l))+1)-l-.5*(l*l+a)*c)/((l-o)/c-1),Math.abs(h)<=oa){i=l;break}e=Ya(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=oa)i=0,e=Ya(this.long0+n/this.a);else{var u,d,p,f,g;for(o=(this.ml0+r)/this.a,a=n*n/this.a/this.a+o*o,l=o,s=Tu;s;--s)if(g=this.e*Math.sin(l),u=Math.sqrt(1-g*g)*Math.tan(l),d=this.a*Fc(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=h=(o*(u*(f=d/this.a)+1)-f-.5*u*(f*f+a))/(this.es*Math.sin(2*l)*(f*f+a-2*o*f)/(4*u)+(o-f)*(u*p-2/Math.sin(2*l))-p),Math.abs(h)<=oa){i=l;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=Ya(this.long0+Math.asin(n*u/this.a)/Math.sin(i))}return t.x=e,t.y=i,t}var Pu={init:Ru,forward:Mu,inverse:Iu,names:["Polyconic","poly"]};function Lu(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function Au(t){var e,i=t.x,n=t.y-this.lat0,r=i-this.long0,s=n/ea*1e-5,o=r,a=1,l=0;for(e=1;e<=10;e++)a*=s,l+=this.A[e]*a;var h,c=l,u=o,d=1,p=0,f=0,g=0;for(e=1;e<=6;e++)h=p*c+d*u,d=d*c-p*u,p=h,f=f+this.B_re[e]*d-this.B_im[e]*p,g=g+this.B_im[e]*d+this.B_re[e]*p;return t.x=g*this.a+this.x0,t.y=f*this.a+this.y0,t}function ku(t){var e,i,n=t.x,r=t.y,s=n-this.x0,o=(r-this.y0)/this.a,a=s/this.a,l=1,h=0,c=0,u=0;for(e=1;e<=6;e++)i=h*o+l*a,l=l*o-h*a,h=i,c=c+this.C_re[e]*l-this.C_im[e]*h,u=u+this.C_im[e]*l+this.C_re[e]*h;for(var d=0;d<this.iterations;d++){var p,f=c,g=u,m=o,_=a;for(e=2;e<=6;e++)p=g*c+f*u,f=f*c-g*u,g=p,m+=(e-1)*(this.B_re[e]*f-this.B_im[e]*g),_+=(e-1)*(this.B_im[e]*f+this.B_re[e]*g);f=1,g=0;var y=this.B_re[1],v=this.B_im[1];for(e=2;e<=6;e++)p=g*c+f*u,f=f*c-g*u,g=p,y+=e*(this.B_re[e]*f-this.B_im[e]*g),v+=e*(this.B_im[e]*f+this.B_re[e]*g);var x=y*y+v*v;c=(m*y+_*v)/x,u=(_*y-m*v)/x}var b=c,E=u,w=1,C=0;for(e=1;e<=9;e++)w*=b,C+=this.D[e]*w;var S=this.lat0+C*ea*1e5,T=this.long0+E;return t.x=T,t.y=S,t}var Ou={init:Lu,forward:Au,inverse:ku,names:["New_Zealand_Map_Grid","nzmg"]};function Nu(){}function Fu(t){var e=t.x,i=t.y,n=Ya(e-this.long0),r=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=r,t.y=s,t}function Du(t){t.x-=this.x0,t.y-=this.y0;var e=Ya(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t}var Zu={init:Nu,forward:Fu,inverse:Du,names:["Miller_Cylindrical","mill"]},ju=20;function zu(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Oh(this.es)}function Gu(t){var e,i,n=t.x,r=t.y;if(n=Ya(n-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(r),o=ju;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<oa)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*n*(this.m+Math.cos(r)),i=this.a*this.C_y*r}else{var l=Math.sin(r),h=Math.cos(r);i=this.a*Nh(r,l,h,this.en),e=this.a*n*h/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=i,t}function Bu(t){var e,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=au((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=au(Math.sin(e)/this.n)),i=Ya(i+this.long0),e=Bc(e)):(e=Dh(t.y/this.a,this.es,this.en),(n=Math.abs(e))<ia?(n=Math.sin(e),i=Ya(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-oa<ia&&(i=this.long0)),t.x=i,t.y=e,t}var Uu={init:zu,forward:Gu,inverse:Bu,names:["Sinusoidal","sinu"]};function Vu(){}function qu(t){for(var e=t.x,i=t.y,n=Ya(e-this.long0),r=i,s=Math.PI*Math.sin(i);;){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<oa)break}r/=2,Math.PI/2-Math.abs(i)<oa&&(n=0);var a=.900316316158*this.a*n*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=a,t.y=l,t}function Wu(t){var e,i;t.x-=this.x0,t.y-=this.y0,i=t.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),e=Math.asin(i);var n=Ya(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*e+Math.sin(2*e))/Math.PI,Math.abs(i)>1&&(i=1);var r=Math.asin(i);return t.x=n,t.y=r,t}var Xu={init:Vu,forward:qu,inverse:Wu,names:["Mollweide","moll"]};function Hu(){Math.abs(this.lat1+this.lat2)<oa||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Dc(this.es),this.e1=Zc(this.es),this.e2=jc(this.es),this.e3=zc(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ha(this.e,this.sinphi,this.cosphi),this.ml1=Fc(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<oa?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ha(this.e,this.sinphi,this.cosphi),this.ml2=Fc(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Fc(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function Ku(t){var e,i=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var r=Fc(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-r)}var s=this.ns*Ya(i-this.long0),o=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=o,t.y=a,t}function Yu(t){var e,i,n,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;return 0!==i&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=Ya(this.long0+s/this.ns),n=Bc(this.g-i/this.a),t.x=r,t.y=n,t):(n=Uc(this.g-i/this.a,this.e0,this.e1,this.e2,this.e3),r=Ya(this.long0+s/this.ns),t.x=r,t.y=n,t)}var $u={init:Hu,forward:Ku,inverse:Yu,names:["Equidistant_Conic","eqdc"]};function Ju(){this.R=this.a}function Qu(t){var e,i,n=t.x,r=t.y,s=Ya(n-this.long0);Math.abs(r)<=oa&&(e=this.x0+this.R*s,i=this.y0);var o=au(2*Math.abs(r/Math.PI));(Math.abs(s)<=oa||Math.abs(Math.abs(r)-ia)<=oa)&&(e=this.x0,i=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/s-s/Math.PI),l=a*a,h=Math.sin(o),c=Math.cos(o),u=c/(h+c-1),d=u*u,p=u*(2/h-1),f=p*p,g=Math.PI*this.R*(a*(u-f)+Math.sqrt(l*(u-f)*(u-f)-(f+l)*(d-f)))/(f+l);s<0&&(g=-g),e=this.x0+g;var m=l+u;return g=Math.PI*this.R*(p*m-a*Math.sqrt((f+l)*(l+1)-m*m))/(f+l),i=r>=0?this.y0+g:this.y0-g,t.x=e,t.y=i,t}function td(t){var e,i,n,r,s,o,a,l,h,c,u,d;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,s=(n=t.x/u)*n+(r=t.y/u)*r,u=3*(r*r/(l=-2*(o=-Math.abs(r)*(1+s))+1+2*r*r+s*s)+(2*(a=o-2*r*r+n*n)*a*a/l/l/l-9*o*a/l/l)/27)/(h=(o-a*a/3/l)/l)/(c=2*Math.sqrt(-h/3)),Math.abs(u)>1&&(u=u>=0?1:-1),d=Math.acos(u)/3,i=t.y>=0?(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:-(-c*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,e=Math.abs(n)<oa?this.long0:Ya(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-r*r)+s*s))/2/n),t.x=e,t.y=i,t}var ed={init:Ju,forward:Qu,inverse:td,names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};function id(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function nd(t){var e,i,n,r,s,o,a,l,h,c,u,d,p,f,g,m,_,y,v,x,b,E,w=t.x,C=t.y,S=Math.sin(t.y),T=Math.cos(t.y),R=Ya(w-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=oa?(t.x=this.x0+this.a*(ia-C)*Math.sin(R),t.y=this.y0-this.a*(ia-C)*Math.cos(R),t):Math.abs(this.sin_p12+1)<=oa?(t.x=this.x0+this.a*(ia+C)*Math.sin(R),t.y=this.y0+this.a*(ia+C)*Math.cos(R),t):(y=this.sin_p12*S+this.cos_p12*T*Math.cos(R),_=(m=Math.acos(y))?m/Math.sin(m):1,t.x=this.x0+this.a*_*T*Math.sin(R),t.y=this.y0+this.a*_*(this.cos_p12*S-this.sin_p12*T*Math.cos(R)),t):(e=Dc(this.es),i=Zc(this.es),n=jc(this.es),r=zc(this.es),Math.abs(this.sin_p12-1)<=oa?(s=this.a*Fc(e,i,n,r,ia),o=this.a*Fc(e,i,n,r,C),t.x=this.x0+(s-o)*Math.sin(R),t.y=this.y0-(s-o)*Math.cos(R),t):Math.abs(this.sin_p12+1)<=oa?(s=this.a*Fc(e,i,n,r,ia),o=this.a*Fc(e,i,n,r,C),t.x=this.x0+(s+o)*Math.sin(R),t.y=this.y0+(s+o)*Math.cos(R),t):(a=S/T,l=Gc(this.a,this.e,this.sin_p12),h=Gc(this.a,this.e,S),c=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(h*T)),v=0===(u=Math.atan2(Math.sin(R),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(R)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(u)-Math.PI)<=oa?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(R)*Math.cos(c)/Math.sin(u)),d=this.e*this.sin_p12/Math.sqrt(1-this.es),m=l*v*(1-(x=v*v)*(g=(p=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es))*p)*(1-g)/6+(b=x*v)/8*(f=d*p)*(1-2*g)+(E=b*v)/120*(g*(4-7*g)-3*d*d*(1-7*g))-E*v/48*f),t.x=this.x0+m*Math.sin(u),t.y=this.y0+m*Math.cos(u),t))}function rd(t){var e,i,n,r,s,o,a,l,h,c,u,d,p,f,g,m,_,y,v,x,b,E,w;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*ia*this.a)return;return i=e/this.a,n=Math.sin(i),r=Math.cos(i),s=this.long0,Math.abs(e)<=oa?o=this.lat0:(o=au(r*this.sin_p12+t.y*n*this.cos_p12/e),a=Math.abs(this.lat0)-ia,s=Math.abs(a)<=oa?this.lat0>=0?Ya(this.long0+Math.atan2(t.x,-t.y)):Ya(this.long0-Math.atan2(-t.x,t.y)):Ya(this.long0+Math.atan2(t.x*n,e*this.cos_p12*r-t.y*this.sin_p12*n))),t.x=s,t.y=o,t}return l=Dc(this.es),h=Zc(this.es),c=jc(this.es),u=zc(this.es),Math.abs(this.sin_p12-1)<=oa?(o=Uc(((d=this.a*Fc(l,h,c,u,ia))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,h,c,u),s=Ya(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=oa?(d=this.a*Fc(l,h,c,u,ia),o=Uc(((e=Math.sqrt(t.x*t.x+t.y*t.y))-d)/this.a,l,h,c,u),s=Ya(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),p=Gc(this.a,this.e,this.sin_p12),m=Math.cos(g),y=-(_=this.e*this.cos_p12*m)*_/(1-this.es),v=3*this.es*(1-y)*this.sin_p12*this.cos_p12*m/(1-this.es),E=1-y*(b=(x=e/p)-y*(1+y)*Math.pow(x,3)/6-v*(1+3*y)*Math.pow(x,4)/24)*b/2-x*b*b*b/6,f=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*m),s=Ya(this.long0+Math.asin(Math.sin(g)*Math.sin(b)/Math.cos(f))),w=Math.sin(f),o=Math.atan2((w-this.es*E*this.sin_p12)*Math.tan(f),w*(1-this.es)),t.x=s,t.y=o,t)}var sd={init:id,forward:nd,inverse:rd,names:["Azimuthal_Equidistant","aeqd"]};function od(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function ad(t){var e,i,n,r,s,o,a,l,h=t.x,c=t.y;return n=Ya(h-this.long0),e=Math.sin(c),i=Math.cos(c),r=Math.cos(n),s=1,((o=this.sin_p14*e+this.cos_p14*i*r)>0||Math.abs(o)<=oa)&&(a=this.a*s*i*Math.sin(n),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*i*r)),t.x=a,t.y=l,t}function ld(t){var e,i,n,r,s,o,a;return t.x-=this.x0,t.y-=this.y0,i=au((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(i),r=Math.cos(i),o=this.long0,Math.abs(e)<=oa?(a=this.lat0,t.x=o,t.y=a,t):(a=au(r*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.abs(this.lat0)-ia,Math.abs(s)<=oa?(o=this.lat0>=0?Ya(this.long0+Math.atan2(t.x,-t.y)):Ya(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=Ya(this.long0+Math.atan2(t.x*n,e*this.cos_p14*r-t.y*this.sin_p14*n)),t.x=o,t.y=a,t))}var hd={init:od,forward:ad,inverse:ld,names:["ortho"]},cd={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},ud={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function dd(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=ia-ha/2?this.face=cd.TOP:this.lat0<=-(ia-ha/2)?this.face=cd.BOTTOM:Math.abs(this.long0)<=ha?this.face=cd.FRONT:Math.abs(this.long0)<=ia+ha?this.face=this.long0>0?cd.RIGHT:cd.LEFT:this.face=cd.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function pd(t){var e,i,n,r,s,o,a={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===cd.TOP)r=ia-e,i>=ha&&i<=ia+ha?(l.value=ud.AREA_0,n=i-ia):i>ia+ha||i<=-(ia+ha)?(l.value=ud.AREA_1,n=i>0?i-ua:i+ua):i>-(ia+ha)&&i<=-ha?(l.value=ud.AREA_2,n=i+ia):(l.value=ud.AREA_3,n=i);else if(this.face===cd.BOTTOM)r=ia+e,i>=ha&&i<=ia+ha?(l.value=ud.AREA_0,n=-i+ia):i<ha&&i>=-ha?(l.value=ud.AREA_1,n=-i):i<-ha&&i>=-(ia+ha)?(l.value=ud.AREA_2,n=-i-ia):(l.value=ud.AREA_3,n=i>0?-i+ua:-i-ua);else{var h,c,u,d,p,f;this.face===cd.RIGHT?i=md(i,+ia):this.face===cd.BACK?i=md(i,+ua):this.face===cd.LEFT&&(i=md(i,-ia)),d=Math.sin(e),p=Math.cos(e),f=Math.sin(i),h=p*Math.cos(i),c=p*f,u=d,this.face===cd.FRONT?n=gd(r=Math.acos(h),u,c,l):this.face===cd.RIGHT?n=gd(r=Math.acos(c),u,-h,l):this.face===cd.BACK?n=gd(r=Math.acos(-h),u,-c,l):this.face===cd.LEFT?n=gd(r=Math.acos(-c),u,h,l):(r=n=0,l.value=ud.AREA_0)}return o=Math.atan(12/ua*(n+Math.acos(Math.sin(n)*Math.cos(ha))-ia)),s=Math.sqrt((1-Math.cos(r))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===ud.AREA_1?o+=ia:l.value===ud.AREA_2?o+=ua:l.value===ud.AREA_3&&(o+=1.5*ua),a.x=s*Math.cos(o),a.y=s*Math.sin(o),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t}function fd(t){var e,i,n,r,s,o,a,l,h,c,u,d,p={lam:0,phi:0},f={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?f.value=ud.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(f.value=ud.AREA_1,e-=ia):t.x<0&&-t.x>=Math.abs(t.y)?(f.value=ud.AREA_2,e=e<0?e+ua:e-ua):(f.value=ud.AREA_3,e+=ia),h=ua/12*Math.tan(e),s=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),o=Math.atan(s),(a=1-(n=Math.cos(e))*n*(r=Math.tan(i))*r*(1-Math.cos(Math.atan(1/Math.cos(o)))))<-1?a=-1:a>1&&(a=1),this.face===cd.TOP)l=Math.acos(a),p.phi=ia-l,f.value===ud.AREA_0?p.lam=o+ia:f.value===ud.AREA_1?p.lam=o<0?o+ua:o-ua:f.value===ud.AREA_2?p.lam=o-ia:p.lam=o;else if(this.face===cd.BOTTOM)l=Math.acos(a),p.phi=l-ia,f.value===ud.AREA_0?p.lam=-o+ia:f.value===ud.AREA_1?p.lam=-o:f.value===ud.AREA_2?p.lam=-o-ia:p.lam=o<0?-o-ua:-o+ua;else{var g,m,_;h=(g=a)*g,m=(h+=(_=h>=1?0:Math.sqrt(1-h)*Math.sin(o))*_)>=1?0:Math.sqrt(1-h),f.value===ud.AREA_1?(h=m,m=-_,_=h):f.value===ud.AREA_2?(m=-m,_=-_):f.value===ud.AREA_3&&(h=m,m=_,_=-h),this.face===cd.RIGHT?(h=g,g=-m,m=h):this.face===cd.BACK?(g=-g,m=-m):this.face===cd.LEFT&&(h=g,g=m,m=-h),p.phi=Math.acos(-_)-ia,p.lam=Math.atan2(m,g),this.face===cd.RIGHT?p.lam=md(p.lam,-ia):this.face===cd.BACK?p.lam=md(p.lam,-ua):this.face===cd.LEFT&&(p.lam=md(p.lam,+ia))}return 0!==this.es&&(c=p.phi<0?1:0,u=Math.tan(p.phi),d=this.b/Math.sqrt(u*u+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-d*d)/(this.one_minus_f*d)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t}function gd(t,e,i,n){var r;return t<oa?(n.value=ud.AREA_0,r=0):(r=Math.atan2(e,i),Math.abs(r)<=ha?n.value=ud.AREA_0:r>ha&&r<=ia+ha?(n.value=ud.AREA_1,r-=ia):r>ia+ha||r<=-(ia+ha)?(n.value=ud.AREA_2,r=r>=0?r-ua:r+ua):(n.value=ud.AREA_3,r+=ia)),r}function md(t,e){var i=t+e;return i<-ua?i+=ca:i>+ua&&(i-=ca),i}var _d={init:dd,forward:pd,inverse:fd,names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},yd=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],vd=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],xd=.8487,bd=1.3523,Ed=la/5,wd=1/Ed,Cd=18,Sd=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},Td=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};function Rd(t,e,i,n){for(var r=e;n;--n){var s=t(r);if(r-=s,Math.abs(s)<i)break}return r}function Md(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function Id(t){var e=Ya(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*Ed);n<0?n=0:n>=Cd&&(n=Cd-1),i=la*(i-wd*n);var r={x:Sd(yd[n],i)*e,y:Sd(vd[n],i)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*xd+this.x0,r.y=r.y*this.a*bd+this.y0,r}function Pd(t){var e={x:(t.x-this.x0)/(this.a*xd),y:Math.abs(t.y-this.y0)/(this.a*bd)};if(e.y>=1)e.x/=yd[Cd][0],e.y=t.y<0?-ia:ia;else{var i=Math.floor(e.y*Cd);for(i<0?i=0:i>=Cd&&(i=Cd-1);;)if(vd[i][0]>e.y)--i;else{if(!(vd[i+1][0]<=e.y))break;++i}var n=vd[i],r=5*(e.y-n[0])/(vd[i+1][0]-n[0]);r=Rd((function(t){return(Sd(n,t)-e.y)/Td(n,t)}),r,oa,100),e.x/=Sd(yd[i],r),e.y=(5*i+r)*aa,t.y<0&&(e.y=-e.y)}return e.x=Ya(e.x+this.long0),e}var Ld={init:Md,forward:Id,inverse:Pd,names:["Robinson","robin"]};function Ad(){this.name="geocent"}function kd(t){return Ll(t,this.es,this.a)}function Od(t){return Al(t,this.es,this.a,this.b)}var Nd={init:Ad,forward:kd,inverse:Od,names:["Geocentric","geocentric","geocent","Geocent"]},Fd={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Dd={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Zd(){if(Object.keys(Dd).forEach(function(t){if(void 0===this[t])this[t]=Dd[t].def;else{if(Dd[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);Dd[t].num&&(this[t]=parseFloat(this[t]))}Dd[t].degrees&&(this[t]=this[t]*aa)}.bind(this)),Math.abs(Math.abs(this.lat0)-ia)<oa?this.mode=this.lat0<0?Fd.S_POLE:Fd.N_POLE:Math.abs(this.lat0)<oa?this.mode=Fd.EQUIT:(this.mode=Fd.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function jd(t){t.x-=this.long0;var e,i,n,r,s=Math.sin(t.y),o=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case Fd.OBLIQ:i=this.sinph0*s+this.cosph0*o*a;break;case Fd.EQUIT:i=o*a;break;case Fd.S_POLE:i=-s;break;case Fd.N_POLE:i=s}switch(e=(i=this.pn1/(this.p-i))*o*Math.sin(t.x),this.mode){case Fd.OBLIQ:i*=this.cosph0*s-this.sinph0*o*a;break;case Fd.EQUIT:i*=s;break;case Fd.N_POLE:i*=-o*a;break;case Fd.S_POLE:i*=o*a}return r=1/((n=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*r,i=n*r,t.x=e*this.a,t.y=i*this.a,t}function zd(t){t.x/=this.a,t.y/=this.a;var e,i,n,r={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,i=this.pn1*t.y*this.cw*n,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var s=Uh(t.x,t.y);if(Math.abs(s)<oa)r.x=0,r.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case Fd.OBLIQ:r.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(r.y))*s,t.x*=a*this.cosph0;break;case Fd.EQUIT:r.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case Fd.N_POLE:r.y=Math.asin(o),t.y=-t.y;break;case Fd.S_POLE:r.y=-Math.asin(o)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t}var Gd={init:Zd,forward:jd,inverse:zd,names:["Tilted_Perspective","tpers"]};function Bd(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function Ud(t){var e,i,n,r,s=t.x,o=t.y;if(s-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var a=this.radius_p/Uh(this.radius_p*Math.cos(o),Math.sin(o));if(i=a*Math.cos(s)*Math.cos(o),n=a*Math.sin(s)*Math.cos(o),r=a*Math.sin(o),(this.radius_g-i)*i-n*n-r*r*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Uh(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(r/Uh(n,e)))}else"sphere"===this.shape&&(e=Math.cos(o),i=Math.cos(s)*e,n=Math.sin(s)*e,r=Math.sin(o),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/Uh(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(r/Uh(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function Vd(t){var e,i,n,r,s=-1,o=0,a=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Uh(1,a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Uh(1,o));var l=a/this.radius_p;if(e=o*o+l*l+s*s,(n=(i=2*this.radius_g*s)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-i-Math.sqrt(n))/(2*e),s=this.radius_g+r*s,o*=r,a*=r,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+a*a+s*s,(n=(i=2*this.radius_g*s)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-i-Math.sqrt(n))/(2*e),s=this.radius_g+r*s,o*=r,a*=r,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s)}return t.x=t.x+this.long0,t}var qd={init:Bd,forward:Ud,inverse:Vd,names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};function Wd(t){t.Proj.projections.add(Gh),t.Proj.projections.add(Qh),t.Proj.projections.add(ic),t.Proj.projections.add(dc),t.Proj.projections.add(_c),t.Proj.projections.add(bc),t.Proj.projections.add(Rc),t.Proj.projections.add(Lc),t.Proj.projections.add(Nc),t.Proj.projections.add(Xc),t.Proj.projections.add(ou),t.Proj.projections.add(du),t.Proj.projections.add(mu),t.Proj.projections.add(bu),t.Proj.projections.add(Su),t.Proj.projections.add(Pu),t.Proj.projections.add(Ou),t.Proj.projections.add(Zu),t.Proj.projections.add(Uu),t.Proj.projections.add(Xu),t.Proj.projections.add($u),t.Proj.projections.add(ed),t.Proj.projections.add(sd),t.Proj.projections.add(hd),t.Proj.projections.add(_d),t.Proj.projections.add(Ld),t.Proj.projections.add(Nd),t.Proj.projections.add(Gd),t.Proj.projections.add(qd)}function Xd({geoJson:t,zIndex:n=1,projectionCode:r="EPSG:5186"}){const s=V(),o=i.useRef(null),a=r,l="EPSG:3857";return i.useEffect((()=>{o.current&&o.current.setZIndex(n)}),[n]),i.useEffect((()=>{const e=(new j.default).readFeatures(t);e.forEach((t=>{const e=t.getGeometry();e&&e.transform(a,l)}));const i=new I.default({features:e}),n=new M.default({source:i});o.current=n,s.addLayer(n)}),[s,t]),e.jsx(e.Fragment,{})}function Hd({zIndex:t,children:n}){return!Array.isArray(n)&&t?i.cloneElement(n,Object.assign(Object.assign({},n.props),{zIndex:t})):Array.isArray(n)&&t?e.jsx(e.Fragment,{children:i.Children.map(n,(e=>i.cloneElement(e,Object.assign(Object.assign({},e.props),{zIndex:t}))))}):e.jsx(e.Fragment,{children:n})}Kl.defaultDatum="WGS84",Kl.Proj=Il,Kl.WGS84=new Kl.Proj("WGS84"),Kl.Point=bh,Kl.toPoint=Gl,Kl.defs=Da,Kl.nadgrid=yl,Kl.transform=ql,Kl.mgrs=rh,Kl.version="__VERSION__",Wd(Kl),Kl.defs("EPSG:5185","+proj=tmerc +lat_0=38 +lon_0=125 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs"),Kl.defs("EPSG:5186","+proj=tmerc +lat_0=38 +lon_0=127 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs"),Kl.defs("EPSG:5187","+proj=tmerc +lat_0=38 +lon_0=129 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs"),Kl.defs("EPSG:5188","+proj=tmerc +lat_0=38 +lon_0=131 +k=1 +x_0=200000 +y_0=600000 +ellps=GRS80 +units=m +no_defs"),Kl.defs("EPSG:3857","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),Kl.defs("WGS:84","+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"),C.register(Kl);const Kd=i.forwardRef((({children:t,isZoomAbled:n=!0,isRotateAbled:r=!1,center:s=[126.841,35.1896563],defaultZoomLevel:o=18,bounds:a,maxZoom:h=24,minZoom:c=3,height:u="1000px",width:d="1000px"},p)=>{const f=i.useRef(new po({controls:_.defaults({zoom:n,rotate:r}).extend([]),layers:[new S.Tile({source:new b.OSM})],view:new Sr({extent:a?l.fromLonLat(z.default([...a[0],...a[1]])):void 0,center:l.fromLonLat(s),zoom:o,maxZoom:n?h:o,minZoom:n?c:o,constrainResolution:!0})}));return i.useImperativeHandle(p,(()=>f)),i.useLayoutEffect((()=>{const t=f.current,e=t.getControls().getArray().find((t=>t instanceof _.Zoom));return e&&t.removeControl(e),t.setTarget("map"),()=>{t.setTarget(void 0)}}),[]),e.jsxs(U.Provider,Object.assign({value:f.current},{children:[e.jsx("div",{id:"map",style:{width:d,height:u}}),t]}))}));function Yd({color:t,size:i,outline:n,children:r}){return e.jsx(e.Fragment,{})}t.Button=Q,t.CompassWheel=bo,t.ControlGroup=yo,t.ControlSection=vo,t.CustomCircle=Ao,t.CustomMarker=ko,t.CustomMultiPoint=Oo,t.CustomPolyLine=Fo,t.CustomPolygon=No,t.CustomRectangle=Do,t.CustomTextMarker=Zo,t.DeleteAnnotation=gt,t.DrawingTools=Eo,t.FullScreenFeature=Mo,t.GeoJsonLayer=Xd,t.LayerGroup=Hd,t.Map=Kd,t.ModifyAnnotattion=go,t.MoveAnnotation=_o,t.MultiPointDrawButton=et,t.PointDrawButton=st,t.PolygonDrawButton=at,t.PolylineDrawButton=ht,t.RectangleDrawButton=ut,t.Text=Yd,t.TextDrawButton=pt,t.TileLayer=qo,t.TileUrl=jo,t.ZoomFeature=Lo,t.getProfileFromFeature=zo,t.getProfileFromMultiPoint=Go,t.getProfileFromPoint=Bo,t.getProfileFromPolygon=Vo,t.getProfileFromPolyline=Uo,t.icon=it,t.makeText=nt,t.useDidUpdate=H,t.useEffectIfMounted=Y,t.useIsMounted=K,t.useMap=V,t.useMapEventHandler=q,t.useMapRotation=W,t.useSelectAnnotation=X,Object.defineProperty(t,"__esModule",{value:!0})}(e,i(2010),i(6687),i(9904),i(6927),i(6098),i(1359),i(921),i(7533),i(3787),i(3941),i(1082),i(3260),i(4669),i(7707),i(1559),i(6660),i(9563),i(3384),i(5983),i(4811),i(9590),i(2729),i(7573),i(2453),i(4907),i(1957))},7625:(t,e,i)=>{"use strict";var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(i(6687));function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a="navigator"in i.g&&/Win/i.test(navigator.platform),l="navigator"in i.g&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),h="npm__react-simple-code-editor__textarea",c="\n/**\n * Reset the text fill color so that placeholder is visible\n */\n."+h+":empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  ."+h+" {\n    color: transparent !important;\n  }\n\n  ."+h+"::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n",u=function(t){function e(){var t,i,r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var s=arguments.length,h=Array(s),c=0;c<s;c++)h[c]=arguments[c];return i=r=o(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(h))),r.state={capture:!0},r._recordCurrentState=function(){var t=r._input;if(t){var e=t.value,i=t.selectionStart,n=t.selectionEnd;r._recordChange({value:e,selectionStart:i,selectionEnd:n})}},r._getLines=function(t,e){return t.substring(0,e).split("\n")},r._recordChange=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=r._history,s=i.stack,o=i.offset;if(s.length&&o>-1){r._history.stack=s.slice(0,o+1);var a=r._history.stack.length;if(a>100){var l=a-100;r._history.stack=s.slice(l,a),r._history.offset=Math.max(r._history.offset-l,0)}}var h=Date.now();if(e){var c=r._history.stack[r._history.offset];if(c&&h-c.timestamp<3e3){var u=/[^a-z0-9]([a-z0-9]+)$/i,d=r._getLines(c.value,c.selectionStart).pop().match(u),p=r._getLines(t.value,t.selectionStart).pop().match(u);if(d&&p&&p[1].startsWith(d[1]))return void(r._history.stack[r._history.offset]=n({},t,{timestamp:h}))}}r._history.stack.push(n({},t,{timestamp:h})),r._history.offset++},r._updateInput=function(t){var e=r._input;e&&(e.value=t.value,e.selectionStart=t.selectionStart,e.selectionEnd=t.selectionEnd,r.props.onValueChange(t.value))},r._applyEdits=function(t){var e=r._input,i=r._history.stack[r._history.offset];i&&e&&(r._history.stack[r._history.offset]=n({},i,{selectionStart:e.selectionStart,selectionEnd:e.selectionEnd})),r._recordChange(t),r._updateInput(t)},r._undoEdit=function(){var t=r._history,e=t.stack,i=t.offset,n=e[i-1];n&&(r._updateInput(n),r._history.offset=Math.max(i-1,0))},r._redoEdit=function(){var t=r._history,e=t.stack,i=t.offset,n=e[i+1];n&&(r._updateInput(n),r._history.offset=Math.min(i+1,e.length-1))},r._handleKeyDown=function(t){var e=r.props,i=e.tabSize,n=e.insertSpaces,s=e.ignoreTabKey,o=e.onKeyDown;if(!o||(o(t),!t.defaultPrevented)){27===t.keyCode&&t.target.blur();var h=t.target,c=h.value,u=h.selectionStart,d=h.selectionEnd,p=(n?" ":"\t").repeat(i);if(9===t.keyCode&&!s&&r.state.capture)if(t.preventDefault(),t.shiftKey){var f=r._getLines(c,u),g=f.length-1,m=r._getLines(c,d).length-1,_=c.split("\n").map((function(t,e){return e>=g&&e<=m&&t.startsWith(p)?t.substring(p.length):t})).join("\n");if(c!==_){var y=f[g];r._applyEdits({value:_,selectionStart:y.startsWith(p)?u-p.length:u,selectionEnd:d-(c.length-_.length)})}}else if(u!==d){var v=r._getLines(c,u),x=v.length-1,b=r._getLines(c,d).length-1,E=v[x];r._applyEdits({value:c.split("\n").map((function(t,e){return e>=x&&e<=b?p+t:t})).join("\n"),selectionStart:/\S/.test(E)?u+p.length:u,selectionEnd:d+p.length*(b-x+1)})}else{var w=u+p.length;r._applyEdits({value:c.substring(0,u)+p+c.substring(d),selectionStart:w,selectionEnd:w})}else if(8===t.keyCode){var C=u!==d;if(c.substring(0,u).endsWith(p)&&!C){t.preventDefault();var S=u-p.length;r._applyEdits({value:c.substring(0,u-p.length)+c.substring(d),selectionStart:S,selectionEnd:S})}}else if(13===t.keyCode){if(u===d){var T=r._getLines(c,u).pop().match(/^\s+/);if(T&&T[0]){t.preventDefault();var R="\n"+T[0],M=u+R.length;r._applyEdits({value:c.substring(0,u)+R+c.substring(d),selectionStart:M,selectionEnd:M})}}}else if(57===t.keyCode||219===t.keyCode||222===t.keyCode||192===t.keyCode){var I=void 0;57===t.keyCode&&t.shiftKey?I=["(",")"]:219===t.keyCode?I=t.shiftKey?["{","}"]:["[","]"]:222===t.keyCode?I=t.shiftKey?['"','"']:["'","'"]:192!==t.keyCode||t.shiftKey||(I=["`","`"]),u!==d&&I&&(t.preventDefault(),r._applyEdits({value:c.substring(0,u)+I[0]+c.substring(u,d)+I[1]+c.substring(d),selectionStart:u,selectionEnd:d+2}))}else!(l?t.metaKey&&90===t.keyCode:t.ctrlKey&&90===t.keyCode)||t.shiftKey||t.altKey?(l?t.metaKey&&90===t.keyCode&&t.shiftKey:a?t.ctrlKey&&89===t.keyCode:t.ctrlKey&&90===t.keyCode&&t.shiftKey)&&!t.altKey?(t.preventDefault(),r._redoEdit()):77!==t.keyCode||!t.ctrlKey||l&&!t.shiftKey||(t.preventDefault(),r.setState((function(t){return{capture:!t.capture}}))):(t.preventDefault(),r._undoEdit())}},r._handleChange=function(t){var e=t.target,i=e.value,n=e.selectionStart,s=e.selectionEnd;r._recordChange({value:i,selectionStart:n,selectionEnd:s},!0),r.props.onValueChange(i)},r._history={stack:[],offset:-1},o(r,i)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"componentDidMount",value:function(){this._recordCurrentState()}},{key:"render",value:function(){var t=this,e=this.props,i=e.value,r=e.style,o=e.padding,a=e.highlight,l=e.textareaId,u=e.autoFocus,p=e.disabled,f=e.form,g=e.maxLength,m=e.minLength,_=e.name,y=e.placeholder,v=e.readOnly,x=e.required,b=e.onClick,E=e.onFocus,w=e.onBlur,C=e.onKeyUp,S=(e.onKeyDown,e.onValueChange,e.tabSize,e.insertSpaces,e.ignoreTabKey,function(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}(e,["value","style","padding","highlight","textareaId","autoFocus","disabled","form","maxLength","minLength","name","placeholder","readOnly","required","onClick","onFocus","onBlur","onKeyUp","onKeyDown","onValueChange","tabSize","insertSpaces","ignoreTabKey"])),T={paddingTop:o,paddingRight:o,paddingBottom:o,paddingLeft:o},R=a(i);return s.createElement("div",n({},S,{style:n({},d.container,r)}),s.createElement("textarea",{ref:function(e){return t._input=e},style:n({},d.editor,d.textarea,T),className:h,id:l,value:i,onChange:this._handleChange,onKeyDown:this._handleKeyDown,onClick:b,onKeyUp:C,onFocus:E,onBlur:w,disabled:p,form:f,maxLength:g,minLength:m,name:_,placeholder:y,readOnly:v,required:x,autoFocus:u,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),s.createElement("pre",n({"aria-hidden":"true",style:n({},d.editor,d.highlight,T)},"string"==typeof R?{dangerouslySetInnerHTML:{__html:R+"<br />"}}:{children:R})),s.createElement("style",{type:"text/css",dangerouslySetInnerHTML:{__html:c}}))}},{key:"session",get:function(){return{history:this._history}},set:function(t){this._history=t.history}}]),e}(s.Component);u.defaultProps={tabSize:2,insertSpaces:!0,ignoreTabKey:!1,padding:0},e.Z=u;var d={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}}},1286:(t,e,i)=>{"use strict";i.d(e,{Z:()=>rt});var n=function(){function t(t){var e=this;this._insertTag=function(t){var i;i=0===e.tags.length?e.insertionPoint?e.insertionPoint.nextSibling:e.prepend?e.container.firstChild:e.before:e.tags[e.tags.length-1].nextSibling,e.container.insertBefore(t,i),e.tags.push(t)},this.isSpeedy=void 0===t.speedy||t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(t){t.forEach(this._insertTag)},e.insert=function(t){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),void 0!==t.nonce&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}(this));var e=this.tags[this.tags.length-1];if(this.isSpeedy){var i=function(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}(e);try{i.insertRule(t,i.cssRules.length)}catch(n){0}}else e.appendChild(document.createTextNode(t));this.ctr++},e.flush=function(){this.tags.forEach((function(t){return t.parentNode&&t.parentNode.removeChild(t)})),this.tags=[],this.ctr=0},t}(),r=Math.abs,s=String.fromCharCode,o=Object.assign;function a(t){return t.trim()}function l(t,e,i){return t.replace(e,i)}function h(t,e){return t.indexOf(e)}function c(t,e){return 0|t.charCodeAt(e)}function u(t,e,i){return t.slice(e,i)}function d(t){return t.length}function p(t){return t.length}function f(t,e){return e.push(t),t}var g=1,m=1,_=0,y=0,v=0,x="";function b(t,e,i,n,r,s,o){return{value:t,root:e,parent:i,type:n,props:r,children:s,line:g,column:m,length:o,return:""}}function E(t,e){return o(b("",null,null,"",null,null,0),t,{length:-t.length},e)}function w(){return v=y>0?c(x,--y):0,m--,10===v&&(m=1,g--),v}function C(){return v=y<_?c(x,y++):0,m++,10===v&&(m=1,g++),v}function S(){return c(x,y)}function T(){return y}function R(t,e){return u(x,t,e)}function M(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function I(t){return g=m=1,_=d(x=t),y=0,[]}function P(t){return x="",t}function L(t){return a(R(y-1,O(91===t?t+2:40===t?t+1:t)))}function A(t){for(;(v=S())&&v<33;)C();return M(t)>2||M(v)>3?"":" "}function k(t,e){for(;--e&&C()&&!(v<48||v>102||v>57&&v<65||v>70&&v<97););return R(t,T()+(e<6&&32==S()&&32==C()))}function O(t){for(;C();)switch(v){case t:return y;case 34:case 39:34!==t&&39!==t&&O(v);break;case 40:41===t&&O(t);break;case 92:C()}return y}function N(t,e){for(;C()&&t+v!==57&&(t+v!==84||47!==S()););return"/*"+R(e,y-1)+"*"+s(47===t?t:C())}function F(t){for(;!M(S());)C();return R(t,y)}var D="-ms-",Z="-moz-",j="-webkit-",z="comm",G="rule",B="decl",U="@keyframes";function V(t,e){for(var i="",n=p(t),r=0;r<n;r++)i+=e(t[r],r,t,e)||"";return i}function q(t,e,i,n){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case B:return t.return=t.return||t.value;case z:return"";case U:return t.return=t.value+"{"+V(t.children,n)+"}";case G:t.value=t.props.join(",")}return d(i=V(t.children,n))?t.return=t.value+"{"+i+"}":""}function W(t){return P(X("",null,null,null,[""],t=I(t),0,[0],t))}function X(t,e,i,n,r,o,a,u,p){for(var g=0,m=0,_=a,y=0,v=0,x=0,b=1,E=1,R=1,M=0,I="",P=r,O=o,D=n,Z=I;E;)switch(x=M,M=C()){case 40:if(108!=x&&58==c(Z,_-1)){-1!=h(Z+=l(L(M),"&","&\f"),"&\f")&&(R=-1);break}case 34:case 39:case 91:Z+=L(M);break;case 9:case 10:case 13:case 32:Z+=A(x);break;case 92:Z+=k(T()-1,7);continue;case 47:switch(S()){case 42:case 47:f(K(N(C(),T()),e,i),p);break;default:Z+="/"}break;case 123*b:u[g++]=d(Z)*R;case 125*b:case 59:case 0:switch(M){case 0:case 125:E=0;case 59+m:-1==R&&(Z=l(Z,/\f/g,"")),v>0&&d(Z)-_&&f(v>32?Y(Z+";",n,i,_-1):Y(l(Z," ","")+";",n,i,_-2),p);break;case 59:Z+=";";default:if(f(D=H(Z,e,i,g,m,r,u,I,P=[],O=[],_),o),123===M)if(0===m)X(Z,e,D,D,P,o,_,u,O);else switch(99===y&&110===c(Z,3)?100:y){case 100:case 108:case 109:case 115:X(t,D,D,n&&f(H(t,D,D,0,0,r,u,I,r,P=[],_),O),r,O,_,u,n?P:O);break;default:X(Z,D,D,D,[""],O,0,u,O)}}g=m=v=0,b=R=1,I=Z="",_=a;break;case 58:_=1+d(Z),v=x;default:if(b<1)if(123==M)--b;else if(125==M&&0==b++&&125==w())continue;switch(Z+=s(M),M*b){case 38:R=m>0?1:(Z+="\f",-1);break;case 44:u[g++]=(d(Z)-1)*R,R=1;break;case 64:45===S()&&(Z+=L(C())),y=S(),m=_=d(I=Z+=F(T())),M++;break;case 45:45===x&&2==d(Z)&&(b=0)}}return o}function H(t,e,i,n,s,o,h,c,d,f,g){for(var m=s-1,_=0===s?o:[""],y=p(_),v=0,x=0,E=0;v<n;++v)for(var w=0,C=u(t,m+1,m=r(x=h[v])),S=t;w<y;++w)(S=a(x>0?_[w]+" "+C:l(C,/&\f/g,_[w])))&&(d[E++]=S);return b(t,e,i,0===s?G:c,d,f,g)}function K(t,e,i){return b(t,e,i,z,s(v),u(t,2,-2),0)}function Y(t,e,i,n){return b(t,e,i,B,u(t,0,n),u(t,n+1,-1),n)}var $=function(t,e,i){for(var n=0,r=0;n=r,r=S(),38===n&&12===r&&(e[i]=1),!M(r);)C();return R(t,y)},J=function(t,e){return P(function(t,e){var i=-1,n=44;do{switch(M(n)){case 0:38===n&&12===S()&&(e[i]=1),t[i]+=$(y-1,e,i);break;case 2:t[i]+=L(n);break;case 4:if(44===n){t[++i]=58===S()?"&\f":"",e[i]=t[i].length;break}default:t[i]+=s(n)}}while(n=C());return t}(I(t),e))},Q=new WeakMap,tt=function(t){if("rule"===t.type&&t.parent&&!(t.length<1)){for(var e=t.value,i=t.parent,n=t.column===i.column&&t.line===i.line;"rule"!==i.type;)if(!(i=i.parent))return;if((1!==t.props.length||58===e.charCodeAt(0)||Q.get(i))&&!n){Q.set(t,!0);for(var r=[],s=J(e,r),o=i.props,a=0,l=0;a<s.length;a++)for(var h=0;h<o.length;h++,l++)t.props[l]=r[a]?s[a].replace(/&\f/g,o[h]):o[h]+" "+s[a]}}},et=function(t){if("decl"===t.type){var e=t.value;108===e.charCodeAt(0)&&98===e.charCodeAt(2)&&(t.return="",t.value="")}};function it(t,e){switch(function(t,e){return 45^c(t,0)?(((e<<2^c(t,0))<<2^c(t,1))<<2^c(t,2))<<2^c(t,3):0}(t,e)){case 5103:return j+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return j+t+Z+t+D+t+t;case 6828:case 4268:return j+t+D+t+t;case 6165:return j+t+D+"flex-"+t+t;case 5187:return j+t+l(t,/(\w+).+(:[^]+)/,j+"box-$1$2"+D+"flex-$1$2")+t;case 5443:return j+t+D+"flex-item-"+l(t,/flex-|-self/,"")+t;case 4675:return j+t+D+"flex-line-pack"+l(t,/align-content|flex-|-self/,"")+t;case 5548:return j+t+D+l(t,"shrink","negative")+t;case 5292:return j+t+D+l(t,"basis","preferred-size")+t;case 6060:return j+"box-"+l(t,"-grow","")+j+t+D+l(t,"grow","positive")+t;case 4554:return j+l(t,/([^-])(transform)/g,"$1"+j+"$2")+t;case 6187:return l(l(l(t,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),t,"")+t;case 5495:case 3959:return l(t,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return l(l(t,/(.+:)(flex-)?(.*)/,j+"box-pack:$3"+D+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+t+t;case 4095:case 3583:case 4068:case 2532:return l(t,/(.+)-inline(.+)/,j+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(d(t)-1-e>6)switch(c(t,e+1)){case 109:if(45!==c(t,e+4))break;case 102:return l(t,/(.+:)(.+)-([^]+)/,"$1"+j+"$2-$3$1"+Z+(108==c(t,e+3)?"$3":"$2-$3"))+t;case 115:return~h(t,"stretch")?it(l(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(115!==c(t,e+1))break;case 6444:switch(c(t,d(t)-3-(~h(t,"!important")&&10))){case 107:return l(t,":",":"+j)+t;case 101:return l(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(45===c(t,14)?"inline-":"")+"box$3$1"+j+"$2$3$1"+D+"$2box$3")+t}break;case 5936:switch(c(t,e+11)){case 114:return j+t+D+l(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return j+t+D+l(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return j+t+D+l(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return j+t+D+t+t}return t}var nt=[function(t,e,i,n){if(t.length>-1&&!t.return)switch(t.type){case B:t.return=it(t.value,t.length);break;case U:return V([E(t,{value:l(t.value,"@","@"+j)})],n);case G:if(t.length)return function(t,e){return t.map(e).join("")}(t.props,(function(e){switch(function(t,e){return(t=e.exec(t))?t[0]:t}(e,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return V([E(t,{props:[l(e,/:(read-\w+)/,":-moz-$1")]})],n);case"::placeholder":return V([E(t,{props:[l(e,/:(plac\w+)/,":"+j+"input-$1")]}),E(t,{props:[l(e,/:(plac\w+)/,":-moz-$1")]}),E(t,{props:[l(e,/:(plac\w+)/,D+"input-$1")]})],n)}return""}))}}],rt=function(t){var e=t.key;if("css"===e){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,(function(t){-1!==t.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(t),t.setAttribute("data-s",""))}))}var r=t.stylisPlugins||nt;var s,o,a={},l=[];s=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),(function(t){for(var e=t.getAttribute("data-emotion").split(" "),i=1;i<e.length;i++)a[e[i]]=!0;l.push(t)}));var h,c,u,d,f=[q,(d=function(t){h.insert(t)},function(t){t.root||(t=t.return)&&d(t)})],g=(c=[tt,et].concat(r,f),u=p(c),function(t,e,i,n){for(var r="",s=0;s<u;s++)r+=c[s](t,e,i,n)||"";return r});o=function(t,e,i,n){h=i,V(W(t?t+"{"+e.styles+"}":e.styles),g),n&&(m.inserted[e.name]=!0)};var m={key:e,sheet:new n({key:e,container:s,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:o};return m.sheet.hydrate(l),m}},6038:(t,e,i)=>{"use strict";function n(t){var e=Object.create(null);return function(i){return void 0===e[i]&&(e[i]=t(i)),e[i]}}i.d(e,{Z:()=>n})},1455:(t,e,i)=>{"use strict";i.d(e,{O:()=>f});var n={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},r=i(6038),s=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(t){return 45===t.charCodeAt(1)},l=function(t){return null!=t&&"boolean"!=typeof t},h=(0,r.Z)((function(t){return a(t)?t:t.replace(s,"-$&").toLowerCase()})),c=function(t,e){switch(t){case"animation":case"animationName":if("string"==typeof e)return e.replace(o,(function(t,e,i){return d={name:e,styles:i,next:d},e}))}return 1===n[t]||a(t)||"number"!=typeof e||0===e?e:e+"px"};function u(t,e,i){if(null==i)return"";if(void 0!==i.__emotion_styles)return i;switch(typeof i){case"boolean":return"";case"object":if(1===i.anim)return d={name:i.name,styles:i.styles,next:d},i.name;if(void 0!==i.styles){var n=i.next;if(void 0!==n)for(;void 0!==n;)d={name:n.name,styles:n.styles,next:d},n=n.next;return i.styles+";"}return function(t,e,i){var n="";if(Array.isArray(i))for(var r=0;r<i.length;r++)n+=u(t,e,i[r])+";";else for(var s in i){var o=i[s];if("object"!=typeof o)null!=e&&void 0!==e[o]?n+=s+"{"+e[o]+"}":l(o)&&(n+=h(s)+":"+c(s,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=e&&void 0!==e[o[0]]){var a=u(t,e,o);switch(s){case"animation":case"animationName":n+=h(s)+":"+a+";";break;default:n+=s+"{"+a+"}"}}else for(var d=0;d<o.length;d++)l(o[d])&&(n+=h(s)+":"+c(s,o[d])+";")}return n}(t,e,i);case"function":if(void 0!==t){var r=d,s=i(t);return d=r,u(t,e,s)}}if(null==e)return i;var o=e[i];return void 0!==o?o:i}var d,p=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var f=function(t,e,i){if(1===t.length&&"object"==typeof t[0]&&null!==t[0]&&void 0!==t[0].styles)return t[0];var n=!0,r="";d=void 0;var s=t[0];null==s||void 0===s.raw?(n=!1,r+=u(i,e,s)):r+=s[0];for(var o=1;o<t.length;o++)r+=u(i,e,t[o]),n&&(r+=s[o]);p.lastIndex=0;for(var a,l="";null!==(a=p.exec(r));)l+="-"+a[1];var h=function(t){for(var e,i=0,n=0,r=t.length;r>=4;++n,r-=4)e=1540483477*(65535&(e=255&t.charCodeAt(n)|(255&t.charCodeAt(++n))<<8|(255&t.charCodeAt(++n))<<16|(255&t.charCodeAt(++n))<<24))+(59797*(e>>>16)<<16),i=1540483477*(65535&(e^=e>>>24))+(59797*(e>>>16)<<16)^1540483477*(65535&i)+(59797*(i>>>16)<<16);switch(r){case 3:i^=(255&t.charCodeAt(n+2))<<16;case 2:i^=(255&t.charCodeAt(n+1))<<8;case 1:i=1540483477*(65535&(i^=255&t.charCodeAt(n)))+(59797*(i>>>16)<<16)}return(((i=1540483477*(65535&(i^=i>>>13))+(59797*(i>>>16)<<16))^i>>>15)>>>0).toString(36)}(r)+l;return{name:h,styles:r,next:d}}},7446:(t,e,i)=>{"use strict";i.d(e,{My:()=>s,fp:()=>n,hC:()=>r});function n(t,e,i){var n="";return i.split(" ").forEach((function(i){void 0!==t[i]?e.push(t[i]+";"):n+=i+" "})),n}var r=function(t,e,i){var n=t.key+"-"+e.name;!1===i&&void 0===t.registered[n]&&(t.registered[n]=e.styles)},s=function(t,e,i){r(t,e,i);var n=t.key+"-"+e.name;if(void 0===t.inserted[e.name]){var s=e;do{t.insert(e===s?"."+n:"",s,t.sheet,!0),s=s.next}while(void 0!==s)}}},6949:t=>{"use strict";function e(t,e,n){n=n||2;var s,o,a,l,u,d,f,g=e&&e.length,m=g?e[0]*n:t.length,_=i(t,0,m,n,!0),y=[];if(!_||_.next===_.prev)return y;if(g&&(_=function(t,e,n,r){var s,o,a,l=[];for(s=0,o=e.length;s<o;s++)(a=i(t,e[s]*r,s<o-1?e[s+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),l.push(p(a));for(l.sort(h),s=0;s<l.length;s++)n=c(l[s],n);return n}(t,e,_,n)),t.length>80*n){s=a=t[0],o=l=t[1];for(var v=n;v<m;v+=n)(u=t[v])<s&&(s=u),(d=t[v+1])<o&&(o=d),u>a&&(a=u),d>l&&(l=d);f=0!==(f=Math.max(a-s,l-o))?32767/f:0}return r(_,y,n,s,o,f,0),y}function i(t,e,i,n,r){var s,o;if(r===T(t,e,i,n)>0)for(s=e;s<i;s+=n)o=w(s,t[s],t[s+1],o);else for(s=i-n;s>=e;s-=n)o=w(s,t[s],t[s+1],o);return o&&_(o,o.next)&&(C(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);var i,n=t;do{if(i=!1,n.steiner||!_(n,n.next)&&0!==m(n.prev,n,n.next))n=n.next;else{if(C(n),(n=e=n.prev)===n.next)break;i=!0}}while(i||n!==e);return e}function r(t,e,i,h,c,u,p){if(t){!p&&u&&function(t,e,i,n){var r=t;do{0===r.z&&(r.z=d(r.x,r.y,e,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,i,n,r,s,o,a,l,h=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,n=i,a=0,e=0;e<h&&(a++,n=n.nextZ);e++);for(l=h;a>0||l>0&&n;)0!==a&&(0===l||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;i=n}s.nextZ=null,h*=2}while(o>1)}(r)}(t,h,c,u);for(var f,g,m=t;t.prev!==t.next;)if(f=t.prev,g=t.next,u?o(t,h,c,u):s(t))e.push(f.i/i|0),e.push(t.i/i|0),e.push(g.i/i|0),C(t),t=g.next,m=g.next;else if((t=g)===m){p?1===p?r(t=a(n(t),e,i),e,i,h,c,u,2):2===p&&l(t,e,i,h,c,u):r(n(t),e,i,h,c,u,1);break}}}function s(t){var e=t.prev,i=t,n=t.next;if(m(e,i,n)>=0)return!1;for(var r=e.x,s=i.x,o=n.x,a=e.y,l=i.y,h=n.y,c=r<s?r<o?r:o:s<o?s:o,u=a<l?a<h?a:h:l<h?l:h,d=r>s?r>o?r:o:s>o?s:o,p=a>l?a>h?a:h:l>h?l:h,g=n.next;g!==e;){if(g.x>=c&&g.x<=d&&g.y>=u&&g.y<=p&&f(r,a,s,l,o,h,g.x,g.y)&&m(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function o(t,e,i,n){var r=t.prev,s=t,o=t.next;if(m(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,h=o.x,c=r.y,u=s.y,p=o.y,g=a<l?a<h?a:h:l<h?l:h,_=c<u?c<p?c:p:u<p?u:p,y=a>l?a>h?a:h:l>h?l:h,v=c>u?c>p?c:p:u>p?u:p,x=d(g,_,e,i,n),b=d(y,v,e,i,n),E=t.prevZ,w=t.nextZ;E&&E.z>=x&&w&&w.z<=b;){if(E.x>=g&&E.x<=y&&E.y>=_&&E.y<=v&&E!==r&&E!==o&&f(a,c,l,u,h,p,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,w.x>=g&&w.x<=y&&w.y>=_&&w.y<=v&&w!==r&&w!==o&&f(a,c,l,u,h,p,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;E&&E.z>=x;){if(E.x>=g&&E.x<=y&&E.y>=_&&E.y<=v&&E!==r&&E!==o&&f(a,c,l,u,h,p,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;w&&w.z<=b;){if(w.x>=g&&w.x<=y&&w.y>=_&&w.y<=v&&w!==r&&w!==o&&f(a,c,l,u,h,p,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function a(t,e,i){var r=t;do{var s=r.prev,o=r.next.next;!_(s,o)&&y(s,r,r.next,o)&&b(s,o)&&b(o,s)&&(e.push(s.i/i|0),e.push(r.i/i|0),e.push(o.i/i|0),C(r),C(r.next),r=t=o),r=r.next}while(r!==t);return n(r)}function l(t,e,i,s,o,a){var l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&g(l,h)){var c=E(l,h);return l=n(l,l.next),c=n(c,c.next),r(l,e,i,s,o,a,0),void r(c,e,i,s,o,a,0)}h=h.next}l=l.next}while(l!==t)}function h(t,e){return t.x-e.x}function c(t,e){var i=function(t,e){var i,n=e,r=t.x,s=t.y,o=-1/0;do{if(s<=n.y&&s>=n.next.y&&n.next.y!==n.y){var a=n.x+(s-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>o&&(o=a,i=n.x<n.next.x?n:n.next,a===r))return i}n=n.next}while(n!==e);if(!i)return null;var l,h=i,c=i.x,d=i.y,p=1/0;n=i;do{r>=n.x&&n.x>=c&&r!==n.x&&f(s<d?r:o,s,c,d,s<d?o:r,s,n.x,n.y)&&(l=Math.abs(s-n.y)/(r-n.x),b(n,t)&&(l<p||l===p&&(n.x>i.x||n.x===i.x&&u(i,n)))&&(i=n,p=l)),n=n.next}while(n!==h);return i}(t,e);if(!i)return e;var r=E(i,t);return n(r,r.next),n(i,i.next)}function u(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function d(t,e,i,n,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function f(t,e,i,n,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(i-o)*(e-a)&&(i-o)*(s-a)>=(r-o)*(n-a)}function g(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&y(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(b(t,e)&&b(e,t)&&function(t,e){var i=t,n=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==t);return n}(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||_(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function _(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,i,n){var r=x(m(t,e,i)),s=x(m(t,e,n)),o=x(m(i,n,t)),a=x(m(i,n,e));return r!==s&&o!==a||(!(0!==r||!v(t,i,e))||(!(0!==s||!v(t,n,e))||(!(0!==o||!v(i,t,n))||!(0!==a||!v(i,e,n)))))}function v(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function x(t){return t>0?1:t<0?-1:0}function b(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function E(t,e){var i=new S(t.i,t.x,t.y),n=new S(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function w(t,e,i,n){var r=new S(t,e,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function C(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function T(t,e,i,n){for(var r=0,s=e,o=i-n;s<i;s+=n)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,n){var r=e&&e.length,s=r?e[0]*i:t.length,o=Math.abs(T(t,0,s,i));if(r)for(var a=0,l=e.length;a<l;a++){var h=e[a]*i,c=a<l-1?e[a+1]*i:t.length;o-=Math.abs(T(t,h,c,i))}var u=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,p=n[a+1]*i,f=n[a+2]*i;u+=Math.abs((t[d]-t[f])*(t[p+1]-t[d+1])-(t[d]-t[p])*(t[f+1]-t[d+1]))}return 0===o&&0===u?0:Math.abs((u-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},n=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[r][s][o]);r>0&&(n+=t[r-1].length,i.holes.push(n))}return i}},9258:(t,e)=>{e.read=function(t,e,i,n,r){var s,o,a=8*r-n-1,l=(1<<a)-1,h=l>>1,c=-7,u=i?r-1:0,d=i?-1:1,p=t[e+u];for(u+=d,s=p&(1<<-c)-1,p>>=-c,c+=a;c>0;s=256*s+t[e+u],u+=d,c-=8);for(o=s&(1<<-c)-1,s>>=-c,c+=n;c>0;o=256*o+t[e+u],u+=d,c-=8);if(0===s)s=1-h;else{if(s===l)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,n),s-=h}return(p?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,i,n,r,s){var o,a,l,h=8*s-r-1,c=(1<<h)-1,u=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:s-1,f=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=c):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),(e+=o+u>=1?d/l:d*Math.pow(2,1-u))*l>=2&&(o++,l/=2),o+u>=c?(a=0,o=c):o+u>=1?(a=(e*l-1)*Math.pow(2,r),o+=u):(a=e*Math.pow(2,u-1)*Math.pow(2,r),o=0));r>=8;t[i+p]=255&a,p+=f,a/=256,r-=8);for(o=o<<r|a,h+=r;h>0;t[i+p]=255&o,p+=f,o/=256,h-=8);t[i+p-f]|=128*g}},7948:(t,e,i)=>{var n=i(1737).Symbol;t.exports=n},9979:t=>{t.exports=function(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}},2692:(t,e,i)=>{var n=i(9979),r=i(8475);t.exports=function t(e,i,s,o,a){var l=-1,h=e.length;for(s||(s=r),a||(a=[]);++l<h;){var c=e[l];i>0&&s(c)?i>1?t(c,i-1,s,o,a):n(a,c):o||(a[a.length]=c)}return a}},9:(t,e,i)=>{var n=i(7948),r=i(7067),s=i(7738),o=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":o&&o in Object(t)?r(t):s(t)}},5898:(t,e,i)=>{var n=i(9),r=i(4007);t.exports=function(t){return r(t)&&"[object Arguments]"==n(t)}},566:t=>{t.exports=function(t,e){var i=-1,n=t.length;for(e||(e=Array(n));++i<n;)e[i]=t[i];return e}},702:(t,e,i)=>{var n="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g;t.exports=n},7067:(t,e,i)=>{var n=i(7948),r=Object.prototype,s=r.hasOwnProperty,o=r.toString,a=n?n.toStringTag:void 0;t.exports=function(t){var e=s.call(t,a),i=t[a];try{t[a]=void 0;var n=!0}catch(l){}var r=o.call(t);return n&&(e?t[a]=i:delete t[a]),r}},8475:(t,e,i)=>{var n=i(7948),r=i(1710),s=i(5821),o=n?n.isConcatSpreadable:void 0;t.exports=function(t){return s(t)||r(t)||!!(o&&t&&t[o])}},7738:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},1737:(t,e,i)=>{var n=i(702),r="object"==typeof self&&self&&self.Object===Object&&self,s=n||r||Function("return this")();t.exports=s},1957:(t,e,i)=>{var n=i(9979),r=i(2692),s=i(566),o=i(5821);t.exports=function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),i=arguments[0],a=t;a--;)e[a-1]=arguments[a];return n(o(i)?s(i):[i],r(e,1))}},1710:(t,e,i)=>{var n=i(5898),r=i(4007),s=Object.prototype,o=s.hasOwnProperty,a=s.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(t){return r(t)&&o.call(t,"callee")&&!a.call(t,"callee")};t.exports=l},5821:t=>{var e=Array.isArray;t.exports=e},4007:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},6313:(t,e)=>{function i(t){let e,i=[];for(let n of t.split(",").map((t=>t.trim())))if(/^-?\d+$/.test(n))i.push(parseInt(n,10));else if(e=n.match(/^(-?\d+)(-|\.\.\.?|\u2025|\u2026|\u22EF)(-?\d+)$/)){let[t,n,r,s]=e;if(n&&s){n=parseInt(n),s=parseInt(s);const t=n<s?1:-1;"-"!==r&&".."!==r&&"\u2025"!==r||(s+=t);for(let e=n;e!==s;e+=t)i.push(e)}}return i}e.default=i,t.exports=i},1812:(t,e,i)=>{"use strict";t.exports=r;var n=i(9258);function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var s=4294967296,o=1/s,a="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function l(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function h(t,e,i){return i?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function c(t,e,i){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(n);for(var r=i.pos-1;r>=t;r--)i.buf[r+n]=i.buf[r]}function u(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function m(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function _(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function y(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function v(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function x(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function b(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function E(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),r=n>>3,s=this.pos;this.type=7&n,t(r,e,this),this.pos===s&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=x(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=E(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=x(this.buf,this.pos)+x(this.buf,this.pos+4)*s;return this.pos+=8,t},readSFixed64:function(){var t=x(this.buf,this.pos)+E(this.buf,this.pos+4)*s;return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,n=this.buf;return e=127&(i=n[this.pos++]),i<128?e:(e|=(127&(i=n[this.pos++]))<<7,i<128?e:(e|=(127&(i=n[this.pos++]))<<14,i<128?e:(e|=(127&(i=n[this.pos++]))<<21,i<128?e:function(t,e,i){var n,r,s=i.buf;if(r=s[i.pos++],n=(112&r)>>4,r<128)return h(t,n,e);if(r=s[i.pos++],n|=(127&r)<<3,r<128)return h(t,n,e);if(r=s[i.pos++],n|=(127&r)<<10,r<128)return h(t,n,e);if(r=s[i.pos++],n|=(127&r)<<17,r<128)return h(t,n,e);if(r=s[i.pos++],n|=(127&r)<<24,r<128)return h(t,n,e);if(r=s[i.pos++],n|=(1&r)<<31,r<128)return h(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(i=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&a?function(t,e,i){return a.decode(t.subarray(e,i))}(this.buf,e,t):function(t,e,i){var n="",r=e;for(;r<i;){var s,o,a,l=t[r],h=null,c=l>239?4:l>223?3:l>191?2:1;if(r+c>i)break;1===c?l<128&&(h=l):2===c?128==(192&(s=t[r+1]))&&(h=(31&l)<<6|63&s)<=127&&(h=null):3===c?(s=t[r+1],o=t[r+2],128==(192&s)&&128==(192&o)&&((h=(15&l)<<12|(63&s)<<6|63&o)<=2047||h>=55296&&h<=57343)&&(h=null)):4===c&&(s=t[r+1],o=t[r+2],a=t[r+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&((h=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,c=1):h>65535&&(h-=65536,n+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),n+=String.fromCharCode(h),r+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==r.Bytes)return t.push(this.readVarint(e));var i=l(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==r.Bytes)return t.push(this.readSVarint());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==r.Bytes)return t.push(this.readBoolean());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==r.Bytes)return t.push(this.readFloat());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==r.Bytes)return t.push(this.readDouble());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed32());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed64());var e=l(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*o),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*o),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var i,n;t>=0?(i=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(i=~(-t%4294967296))?i=i+1|0:(i=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,i){i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos++]=127&t|128,t>>>=7,i.buf[i.pos]=127&t}(i,0,e),function(t,e){var i=(7&t)<<4;if(e.buf[e.pos++]|=i|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var n,r,s=0;s<e.length;s++){if((n=e.charCodeAt(s))>55295&&n<57344){if(!r){n>56319||s+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):r=n;continue}if(n<56320){t[i++]=239,t[i++]=191,t[i++]=189,r=n;continue}n=r-55296<<10|n-56320|65536,r=null}else r&&(t[i++]=239,t[i++]=191,t[i++]=189,r=null);n<128?t[i++]=n:(n<2048?t[i++]=n>>6|192:(n<65536?t[i++]=n>>12|224:(t[i++]=n>>18|240,t[i++]=n>>12&63|128),t[i++]=n>>6&63|128),t[i++]=63&n|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&c(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var n=this.pos-i;n>=128&&c(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,i){this.writeTag(t,r.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,_,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},8085:function(t){t.exports=function(){"use strict";function t(t,n,r,s,o){!function t(i,n,r,s,o){for(;s>r;){if(s-r>600){var a=s-r+1,l=n-r+1,h=Math.log(a),c=.5*Math.exp(2*h/3),u=.5*Math.sqrt(h*c*(a-c)/a)*(l-a/2<0?-1:1);t(i,n,Math.max(r,Math.floor(n-l*c/a+u)),Math.min(s,Math.floor(n+(a-l)*c/a+u)),o)}var d=i[n],p=r,f=s;for(e(i,r,n),o(i[s],d)>0&&e(i,r,s);p<f;){for(e(i,p,f),p++,f--;o(i[p],d)<0;)p++;for(;o(i[f],d)>0;)f--}0===o(i[r],d)?e(i,r,f):e(i,++f,s),f<=n&&(r=f+1),n<=f&&(s=f-1)}}(t,n,r||0,s||t.length-1,o||i)}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}var n=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function s(t,e){o(t,0,t.children.length,e,t)}function o(t,e,i,n,r){r||(r=f(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s=e;s<i;s++){var o=t.children[s];a(r,t.leaf?n(o):o)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function h(t,e){return t.minY-e.minY}function c(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function p(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function g(e,i,n,r,s){for(var o=[i,n];o.length;)if(!((n=o.pop())-(i=o.pop())<=r)){var a=i+Math.ceil((n-i)/r/2)*r;t(e,a,i,n,s),o.push(i,a,a,n)}}return n.prototype.all=function(){return this._all(this.data,[])},n.prototype.search=function(t){var e=this.data,i=[];if(!p(t,e))return i;for(var n=this.toBBox,r=[];e;){for(var s=0;s<e.children.length;s++){var o=e.children[s],a=e.leaf?n(o):o;p(t,a)&&(e.leaf?i.push(o):d(t,a)?this._all(o,i):r.push(o))}e=r.pop()}return i},n.prototype.collides=function(t){var e=this.data;if(!p(t,e))return!1;for(var i=[];e;){for(var n=0;n<e.children.length;n++){var r=e.children[n],s=e.leaf?this.toBBox(r):r;if(p(t,s)){if(e.leaf||d(t,s))return!0;i.push(r)}}e=i.pop()}return!1},n.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},n.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},n.prototype.clear=function(){return this.data=f([]),this},n.prototype.remove=function(t,e){if(!t)return this;for(var i,n,s,o=this.data,a=this.toBBox(t),l=[],h=[];o||l.length;){if(o||(o=l.pop(),n=l[l.length-1],i=h.pop(),s=!0),o.leaf){var c=r(t,o.children,e);if(-1!==c)return o.children.splice(c,1),l.push(o),this._condense(l),this}s||o.leaf||!d(o,a)?n?(i++,o=n.children[i],s=!1):o=null:(l.push(o),h.push(i),i=0,n=o,o=o.children[0])}return this},n.prototype.toBBox=function(t){return t},n.prototype.compareMinX=function(t,e){return t.minX-e.minX},n.prototype.compareMinY=function(t,e){return t.minY-e.minY},n.prototype.toJSON=function(){return this.data},n.prototype.fromJSON=function(t){return this.data=t,this},n.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},n.prototype._build=function(t,e,i,n){var r,o=i-e+1,a=this._maxEntries;if(o<=a)return s(r=f(t.slice(e,i+1)),this.toBBox),r;n||(n=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,n-1))),(r=f([])).leaf=!1,r.height=n;var l=Math.ceil(o/a),h=l*Math.ceil(Math.sqrt(a));g(t,e,i,h,this.compareMinX);for(var c=e;c<=i;c+=h){var u=Math.min(c+h-1,i);g(t,c,u,l,this.compareMinY);for(var d=c;d<=u;d+=l){var p=Math.min(d+l-1,u);r.children.push(this._build(t,d,p,n-1))}}return s(r,this.toBBox),r},n.prototype._chooseSubtree=function(t,e,i,n){for(;n.push(e),!e.leaf&&n.length-1!==i;){for(var r=1/0,s=1/0,o=void 0,a=0;a<e.children.length;a++){var l=e.children[a],h=c(l),u=(d=t,p=l,(Math.max(p.maxX,d.maxX)-Math.min(p.minX,d.minX))*(Math.max(p.maxY,d.maxY)-Math.min(p.minY,d.minY))-h);u<s?(s=u,r=h<r?h:r,o=l):u===s&&h<r&&(r=h,o=l)}e=o||e.children[0]}var d,p;return e},n.prototype._insert=function(t,e,i){var n=i?t:this.toBBox(t),r=[],s=this._chooseSubtree(n,this.data,e,r);for(s.children.push(t),a(s,n);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(n,r,e)},n.prototype._split=function(t,e){var i=t[e],n=i.children.length,r=this._minEntries;this._chooseSplitAxis(i,r,n);var o=this._chooseSplitIndex(i,r,n),a=f(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},n.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},n.prototype._chooseSplitIndex=function(t,e,i){for(var n,r,s,a,l,h,u,d=1/0,p=1/0,f=e;f<=i-e;f++){var g=o(t,0,f,this.toBBox),m=o(t,f,i,this.toBBox),_=(r=g,s=m,a=void 0,l=void 0,h=void 0,u=void 0,a=Math.max(r.minX,s.minX),l=Math.max(r.minY,s.minY),h=Math.min(r.maxX,s.maxX),u=Math.min(r.maxY,s.maxY),Math.max(0,h-a)*Math.max(0,u-l)),y=c(g)+c(m);_<d?(d=_,n=f,p=y<p?y:p):_===d&&y<p&&(p=y,n=f)}return n||i-e},n.prototype._chooseSplitAxis=function(t,e,i){var n=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:h;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,r)&&t.children.sort(n)},n.prototype._allDistMargin=function(t,e,i,n){t.children.sort(n);for(var r=this.toBBox,s=o(t,0,e,r),l=o(t,i-e,i,r),h=u(s)+u(l),c=e;c<i-e;c++){var d=t.children[c];a(s,t.leaf?r(d):d),h+=u(s)}for(var p=i-e-1;p>=e;p--){var f=t.children[p];a(l,t.leaf?r(f):f),h+=u(l)}return h},n.prototype._adjustParentBBoxes=function(t,e,i){for(var n=i;n>=0;n--)a(e[n],t)},n.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():s(t[e],this.toBBox)},n}()},3085:(t,e,i)=>{"use strict";i(8087);var n=i(6687),r=60103;if(e.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var s=Symbol.for;r=s("react.element"),e.Fragment=s("react.fragment")}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a=Object.prototype.hasOwnProperty,l={key:!0,ref:!0,__self:!0,__source:!0};function h(t,e,i){var n,s={},h=null,c=null;for(n in void 0!==i&&(h=""+i),void 0!==e.key&&(h=""+e.key),void 0!==e.ref&&(c=e.ref),e)a.call(e,n)&&!l.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps)void 0===s[n]&&(s[n]=e[n]);return{$$typeof:r,type:t,key:h,ref:c,props:s,_owner:o.current}}e.jsx=h,e.jsxs=h},2010:(t,e,i)=>{"use strict";t.exports=i(3085)},6525:t=>{function e(t,e){const i=new RegExp(e,"g"),n=t.match(i);return n?n.length:0}t.exports=e,t.exports.default=e},7818:(t,e,i)=>{const n=i(1154),r=i(9080),s=i(6525);function o(t,e,i){const o=i&&i.debug||!1,a=!(i&&!1===typeof i.nested),l=i&&i.startIndex||0;o&&console.log("[xml-utils] starting findTagByName with",e," and ",i);const h=n(t,`<${e}[ \n>/]`,l);if(o&&console.log("[xml-utils] start:",h),-1===h)return;const c=t.slice(h+e.length);let u=r(c,"^[^<]*[ /]>",0);const d=-1!==u&&"/"===c[u-1];if(o&&console.log("[xml-utils] selfClosing:",d),!1===d)if(a){let t=0,i=1,n=0;for(;-1!==(u=r(c,"[ /]"+e+">",t));){const r=c.substring(t,u+1);if(i+=s(r,"<"+e+"[ \n\t>]"),n+=s(r,"</"+e+">"),n>=i)break;t=u}}else u=r(c,"[ /]"+e+">",0);const p=h+e.length+u+1;if(o&&console.log("[xml-utils] end:",p),-1===p)return;const f=t.slice(h,p);let g;return g=d?null:f.slice(f.indexOf(">")+1,f.lastIndexOf("<")),{inner:g,outer:f,start:h,end:p}}t.exports=o,t.exports.default=o},5670:(t,e,i)=>{const n=i(7818);function r(t,e,i){const r=[],s=i&&i.debug||!1,o=!i||"boolean"!=typeof i.nested||i.nested;let a,l=i&&i.startIndex||0;for(;a=n(t,e,{debug:s,startIndex:l});)l=o?a.start+1+e.length:a.end,r.push(a);return s&&console.log("findTagsByName found",r.length,"tags"),r}t.exports=r,t.exports.default=r},2113:t=>{function e(t,e,i){const n=i&&i.debug||!1;n&&console.log("[xml-utils] getting "+e+" in "+t);const r="object"==typeof t?t.outer:t,s=r.slice(0,r.indexOf(">")+1),o=['"',"'"];for(let a=0;a<o.length;a++){const t=o[a],i=e+"\\="+t+"([^"+t+"]*)"+t;n&&console.log("[xml-utils] pattern:",i);const r=new RegExp(i).exec(s);if(n&&console.log("[xml-utils] match:",r),r)return r[1]}}t.exports=e,t.exports.default=e},9080:t=>{function e(t,e,i){const n=new RegExp(e).exec(t.slice(i));return n?i+n.index+n[0].length-1:-1}t.exports=e,t.exports.default=e},1154:t=>{function e(t,e,i){const n=new RegExp(e).exec(t.slice(i));return n?i+n.index:-1}t.exports=e,t.exports.default=e},1448:(t,e,i)=>{i(8623),t.exports=i(942).Object.assign},400:t=>{t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},2420:(t,e,i)=>{var n=i(8794);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},4629:(t,e,i)=>{var n=i(7080),r=i(839),s=i(7172);t.exports=function(t){return function(e,i,o){var a,l=n(e),h=r(l.length),c=s(o,h);if(t&&i!=i){for(;h>c;)if((a=l[c++])!=a)return!0}else for(;h>c;c++)if((t||c in l)&&l[c]===i)return t||c||0;return!t&&-1}}},1724:t=>{var e={}.toString;t.exports=function(t){return e.call(t).slice(8,-1)}},942:t=>{var e=t.exports={version:"2.6.12"};"number"==typeof __e&&(__e=e)},1209:(t,e,i)=>{var n=i(400);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,r){return t.call(e,i,n,r)}}return function(){return t.apply(e,arguments)}}},7782:t=>{t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},4056:(t,e,i)=>{t.exports=!i(9988)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},9358:(t,e,i)=>{var n=i(8794),r=i(5356).document,s=n(r)&&n(r.createElement);t.exports=function(t){return s?r.createElement(t):{}}},2886:t=>{t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},2071:(t,e,i)=>{var n=i(5356),r=i(942),s=i(55),o=i(937),a=i(1209),l="prototype",h=function(t,e,i){var c,u,d,p,f=t&h.F,g=t&h.G,m=t&h.S,_=t&h.P,y=t&h.B,v=g?n:m?n[e]||(n[e]={}):(n[e]||{})[l],x=g?r:r[e]||(r[e]={}),b=x[l]||(x[l]={});for(c in g&&(i=e),i)d=((u=!f&&v&&void 0!==v[c])?v:i)[c],p=y&&u?a(d,n):_&&"function"==typeof d?a(Function.call,d):d,v&&o(v,c,d,t&h.U),x[c]!=d&&s(x,c,p),_&&b[c]!=d&&(b[c]=d)};n.core=r,h.F=1,h.G=2,h.S=4,h.P=8,h.B=16,h.W=32,h.U=64,h.R=128,t.exports=h},9988:t=>{t.exports=function(t){try{return!!t()}catch(e){return!0}}},1823:(t,e,i)=>{t.exports=i(8357)("native-function-to-string",Function.toString)},5356:t=>{var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)},8438:t=>{var e={}.hasOwnProperty;t.exports=function(t,i){return e.call(t,i)}},55:(t,e,i)=>{var n=i(5917),r=i(8867);t.exports=i(4056)?function(t,e,i){return n.f(t,e,r(1,i))}:function(t,e,i){return t[e]=i,t}},2700:(t,e,i)=>{t.exports=!i(4056)&&!i(9988)((function(){return 7!=Object.defineProperty(i(9358)("div"),"a",{get:function(){return 7}}).a}))},9692:(t,e,i)=>{var n=i(1724);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},8794:t=>{t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},7880:t=>{t.exports=!1},704:(t,e,i)=>{"use strict";var n=i(4056),r=i(5415),s=i(5802),o=i(6452),a=i(5683),l=i(9692),h=Object.assign;t.exports=!h||i(9988)((function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach((function(t){e[t]=t})),7!=h({},t)[i]||Object.keys(h({},e)).join("")!=n}))?function(t,e){for(var i=a(t),h=arguments.length,c=1,u=s.f,d=o.f;h>c;)for(var p,f=l(arguments[c++]),g=u?r(f).concat(u(f)):r(f),m=g.length,_=0;m>_;)p=g[_++],n&&!d.call(f,p)||(i[p]=f[p]);return i}:h},5917:(t,e,i)=>{var n=i(2420),r=i(2700),s=i(8672),o=Object.defineProperty;e.f=i(4056)?Object.defineProperty:function(t,e,i){if(n(t),e=s(e,!0),n(i),r)try{return o(t,e,i)}catch(a){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},5802:(t,e)=>{e.f=Object.getOwnPropertySymbols},5195:(t,e,i)=>{var n=i(8438),r=i(7080),s=i(4629)(!1),o=i(9397)("IE_PROTO");t.exports=function(t,e){var i,a=r(t),l=0,h=[];for(i in a)i!=o&&n(a,i)&&h.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~s(h,i)||h.push(i));return h}},5415:(t,e,i)=>{var n=i(5195),r=i(2886);t.exports=Object.keys||function(t){return n(t,r)}},6452:(t,e)=>{e.f={}.propertyIsEnumerable},8867:t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},937:(t,e,i)=>{var n=i(5356),r=i(55),s=i(8438),o=i(4826)("src"),a=i(1823),l="toString",h=(""+a).split(l);i(942).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var l="function"==typeof i;l&&(s(i,"name")||r(i,"name",e)),t[e]!==i&&(l&&(s(i,o)||r(i,o,t[e]?""+t[e]:h.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:r(t,e,i):(delete t[e],r(t,e,i)))})(Function.prototype,l,(function(){return"function"==typeof this&&this[o]||a.call(this)}))},9397:(t,e,i)=>{var n=i(8357)("keys"),r=i(4826);t.exports=function(t){return n[t]||(n[t]=r(t))}},8357:(t,e,i)=>{var n=i(942),r=i(5356),s="__core-js_shared__",o=r[s]||(r[s]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(7880)?"pure":"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})},7172:(t,e,i)=>{var n=i(2299),r=Math.max,s=Math.min;t.exports=function(t,e){return(t=n(t))<0?r(t+e,0):s(t,e)}},2299:t=>{var e=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:e)(t)}},7080:(t,e,i)=>{var n=i(9692),r=i(7782);t.exports=function(t){return n(r(t))}},839:(t,e,i)=>{var n=i(2299),r=Math.min;t.exports=function(t){return t>0?r(n(t),9007199254740991):0}},5683:(t,e,i)=>{var n=i(7782);t.exports=function(t){return Object(n(t))}},8672:(t,e,i)=>{var n=i(8794);t.exports=function(t,e){if(!n(t))return t;var i,r;if(e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;if("function"==typeof(i=t.valueOf)&&!n(r=i.call(t)))return r;if(!e&&"function"==typeof(i=t.toString)&&!n(r=i.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},4826:t=>{var e=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++e+i).toString(36))}},8623:(t,e,i)=>{var n=i(2071);n(n.S+n.F,"Object",{assign:i(704)})},4242:(t,e,i)=>{"use strict";i.d(e,{Ie:()=>l,It:()=>s,L:()=>n,L5:()=>c,P1:()=>d,Qb:()=>u,pd:()=>h,sf:()=>a});const n={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},r={};for(const f in n)n.hasOwnProperty(f)&&(r[n[f]]=parseInt(f,10));const s=[r.BitsPerSample,r.ExtraSamples,r.SampleFormat,r.StripByteCounts,r.StripOffsets,r.StripRowCounts,r.TileByteCounts,r.TileOffsets,r.SubIFDs],o={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},a={};for(const f in o)o.hasOwnProperty(f)&&(a[o[f]]=parseInt(f,10));const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},h={Unspecified:0,Assocalpha:1,Unassalpha:2},c={Version:0,AddCompression:1},u={None:0,Deflate:1},d={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},p={};for(const f in d)d.hasOwnProperty(f)&&(p[d[f]]=parseInt(f,10))},2361:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});const n={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:'`renderMode` must be `"hybrid"` or `"vector"`',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class r extends Error{constructor(t){const e=n[t];super(e),this.code=t,this.name="AssertionError",this.message=e}}const s=r},390:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(2361),r=i(9520),s=i(2207),o=i(8685);const a="length";class l extends o.ZP{constructor(t,e,i){super(t),this.element=e,this.index=i}}class h extends r.Z{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(a)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new l(s.Z.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new l(s.Z.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new l(s.Z.REMOVE,i,t)),this.dispatchEvent(new l(s.Z.ADD,e,t))}updateLength_(){this.set(a,this.array_.length)}assertUnique_(t,e){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===t&&i!==e)throw new n.Z(58)}}const c=h},2207:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ADD:"add",REMOVE:"remove"}},2907:(t,e,i)=>{"use strict";i.d(e,{G0:()=>o,ZP:()=>d,px:()=>a,qo:()=>h});var n=i(2779),r=i(5696),s=i(3248);function o(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement?t:null}function a(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}let l=null;function h(t){l||(l=(0,s.E4)(t.width,t.height,void 0,{willReadFrequently:!0}));const e=l.canvas,i=t.width;e.width!==i&&(e.width=i);const n=t.height;return e.height!==n&&(e.height=n),l.clearRect(0,0,i,n),l.drawImage(t,0,0),l.getImageData(0,0,i,n).data}const c=[256,256];class u extends n.Z{constructor(t){const e=r.Z.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null}getSize(){if(this.size_)return this.size_;const t=o(this.data_);return t?[t.width,t.height]:c}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==r.Z.IDLE&&this.state!==r.Z.ERROR)return;this.state=r.Z.LOADING,this.changed();const t=this;this.loader_().then((function(e){t.data_=e,t.state=r.Z.LOADED,t.changed()})).catch((function(e){t.error_=e,t.state=r.Z.ERROR,t.changed()}))}}const d=u},6175:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},5983:(t,e,i)=>{"use strict";i.r(e),i.d(e,{createStyleFunction:()=>l,default:()=>h});var n=i(9520),r=i(1971),s=i(9141),o=i(9640);class a extends n.Z{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new a(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,o.bN)(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=(0,o.oL)(t,r.Z.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?l(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function l(t){if("function"==typeof t)return t;let e;if(Array.isArray(t))e=t;else{(0,s.h)("function"==typeof t.getZIndex,41);e=[t]}return function(){return e}}const h=a},560:(t,e,i)=>{"use strict";i.d(e,{K:()=>c,Z:()=>u});var n=i(1971),r=i(5021),s=i(8089),o=i(4465),a=i(8300),l=i(9640);class h extends r.Z{constructor(t,e,i,n,r,o,a){super(t,e,i,s.Z.IDLE),this.src_=n,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.context_=a,this.unlisten_=null,this.state=s.Z.IDLE,this.imageLoadFunction_=o}getImage(){if(this.state==s.Z.LOADED&&this.context_&&!(this.image_ instanceof HTMLCanvasElement)){const t=this.context_.canvas;t.width=this.image_.width,t.height=this.image_.height,this.context_.drawImage(this.image_,0,0),this.image_=this.context_.canvas}return this.image_}handleImageError_(){this.state=s.Z.ERROR,this.unlistenImage_(),this.changed()}handleImageLoad_(){void 0===this.resolution&&(this.resolution=(0,a.Cr)(this.extent)/this.image_.height),this.state=s.Z.LOADED,this.unlistenImage_(),this.changed()}load(){this.state!=s.Z.IDLE&&this.state!=s.Z.ERROR||(this.state=s.Z.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=c(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}setImage(t){this.image_=t,this.resolution=(0,a.Cr)(this.extent)/this.image_.height}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function c(t,e,i){const r=t;let s=!0,a=!1,h=!1;const c=[(0,l.Vx)(r,n.Z.LOAD,(function(){h=!0,a||e()}))];return r.src&&o.Tp?(a=!0,r.decode().then((function(){s&&e()})).catch((function(t){s&&(h?e():i())}))):c.push((0,l.Vx)(r,n.Z.ERROR,i)),function(){s=!1,c.forEach(l.bN)}}const u=h},5021:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(1135),r=i(1971),s=i(3039);class o extends n.Z{constructor(t,e,i,n){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state=n}changed(){this.dispatchEvent(r.Z.CHANGE)}getExtent(){return this.extent}getImage(){return(0,s.O3)()}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){(0,s.O3)()}}const a=o},6905:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(5021),r=i(8089);class s extends n.Z{constructor(t,e,i,n,s){super(t,e,i,void 0!==s?r.Z.IDLE:r.Z.LOADED),this.loader_=void 0!==s?s:null,this.canvas_=n,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=r.Z.ERROR):this.state=r.Z.LOADED,this.changed()}load(){this.state==r.Z.IDLE&&(this.state=r.Z.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}const o=s},8089:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},4662:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(2779),r=i(5696),s=i(3248),o=i(560);class a extends n.Z{constructor(t,e,i,n,r,s){super(t,e,s),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,null!==n&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=r.Z.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=r.Z.ERROR,this.unlistenImage_(),this.image_=function(){const t=(0,s.E4)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=r.Z.LOADED:this.state=r.Z.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==r.Z.ERROR&&(this.state=r.Z.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==r.Z.IDLE&&(this.state=r.Z.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,o.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}const l=a},2787:(t,e,i)=>{"use strict";i.d(e,{Z:()=>Y});var n=i(9520),r=i(390),s=i(2207),o=i(6175),a=i(3556),l=i(3039),h=i(5034),c=i(8300),u=i(8845),d=i(9486),p=i(6973);class f extends o.Z{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){(0,l.O3)()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;(0,h.qC)(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,h.nb)(n,i)}forEachFeatureAtCoordinate(t,e,i,n,r,s,o,a){let l;const h=e.viewState;function u(t,e,i,n){return r.call(s,e,t?i:null,n)}const f=h.projection,g=(0,p.Cf)(t.slice(),f),m=[[0,0]];if(f.canWrapX()&&n){const t=f.getExtent(),e=(0,c.dz)(t);m.push([-e,0],[e,0])}const _=e.layerStatesArray,y=_.length,v=[],x=[];for(let c=0;c<m.length;c++)for(let n=y-1;n>=0;--n){const r=_[n],s=r.layer;if(s.hasRenderer()&&(0,d.j)(r,h)&&o.call(a,s)){const n=s.getRenderer(),o=s.getSource();if(n&&o){const s=o.getWrapX()?g:t,a=u.bind(null,r.managed);x[0]=s[0]+m[c][0],x[1]=s[1]+m[c][1],l=n.forEachFeatureAtCoordinate(x,e,i,a,v)}if(l)return l}}if(0===v.length)return;const b=1/v.length;return v.forEach(((t,e)=>t.distanceSq+=e*b)),v.sort(((t,e)=>t.distanceSq-e.distanceSq)),v.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,i,n,r,s){return void 0!==this.forEachFeatureAtCoordinate(t,e,i,n,a.uX,this,r,s)}getMap(){return this.map_}renderFrame(t){(0,l.O3)()}scheduleExpireIconCache(t){u.c.canExpireCache()&&t.postRenderFunctions.push(g)}}function g(t,e){u.c.expire()}const m=f;var _=i(9153),y=i(3885),v=i(4950),x=i(2913),b=i(5318),E=i(9640),w=i(3248);const C=class extends m{constructor(t){super(t),this.fontChangeListenerKey_=(0,E.oL)(b.sG,_.Z.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=x.XV+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const n=new y.Z(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){(0,E.bN)(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(v.Z.PRECOMPOSE,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),i=t.viewState;this.children_.length=0;const n=[];let r=null;for(let s=0,o=e.length;s<o;++s){const o=e[s];t.layerIndex=s;const a=o.layer,l=a.getSourceState();if(!(0,d.j)(o,i)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const h=a.render(t,r);h&&(h!==r&&(this.children_.push(h),r=h),"getDeclutter"in a&&n.push(a))}for(let s=n.length-1;s>=0;--s)n[s].renderDeclutter(t);(0,w.hF)(this.element_,this.children_),this.dispatchRenderEvent(v.Z.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}};var S=i(1971),T=i(6316),R=i(233),M=i(8527),I=i(6932),P=i(1135),L=i(4465);class A extends P.Z{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=(0,E.oL)(i,I.Z.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=(0,E.oL)(i,I.Z.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(S.Z.TOUCHMOVE,this.boundHandleTouchMove_,!!L.bM&&{passive:!1})}emulateClick_(t){let e=new R.Z(M.Z.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new R.Z(M.Z.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new R.Z(M.Z.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==M.Z.POINTERUP||e.type==M.Z.POINTERCANCEL){delete this.trackedTouches_[i];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=M.Z.POINTERDOWN&&e.type!=M.Z.POINTERMOVE||(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new R.Z(M.Z.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(E.bN),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new R.Z(M.Z.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,E.oL)(t,M.Z.POINTERMOVE,this.handlePointerMove_,this),(0,E.oL)(t,M.Z.POINTERUP,this.handlePointerUp_,this),(0,E.oL)(this.element_,M.Z.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push((0,E.oL)(this.element_.getRootNode(),M.Z.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new R.Z(M.Z.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new R.Z(M.Z.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,E.bN)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(S.Z.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,E.bN)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(E.bN),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const k=A;var O=i(8731),N=i(6844),F=i(9157),D=i(2161),Z=i(6305),j=i(9265),z=i(9141),G=i(7609),B=i(2306),U=i(7794),V=i(7533),q=i(7273),W=i(7367);function X(t){t instanceof d.Z?t.setMapInternal(null):t instanceof T.Z&&t.getLayers().forEach(X)}function H(t,e){if(t instanceof d.Z)t.setMapInternal(e);else if(t instanceof T.Z){const i=t.getLayers().getArray();for(let t=0,n=i.length;t<n;++t)H(i[t],e)}}class K extends n.Z{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const i={},n=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new T.Z({layers:t.layers});let s,o,a;i[F.Z.LAYERGROUP]=n,i[F.Z.TARGET]=t.target,i[F.Z.VIEW]=t.view instanceof Z.ZP?t.view:new Z.ZP,void 0!==t.controls&&(Array.isArray(t.controls)?s=new r.Z(t.controls.slice()):((0,z.h)("function"==typeof t.controls.getArray,47),s=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new r.Z(t.interactions.slice()):((0,z.h)("function"==typeof t.interactions.getArray,48),o=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?a=new r.Z(t.overlays.slice()):((0,z.h)("function"==typeof t.overlays.getArray,49),a=t.overlays):a=new r.Z;return{controls:s,interactions:o,keyboardEventTarget:e,overlays:a,values:i}}(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:L.MP,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,h.Ue)(),this.pixelToCoordinateTransform_=(0,h.Ue)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||(0,G.c)(),this.interactions=e.interactions||(0,B.c)({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new D.Z(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(F.Z.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(F.Z.VIEW,this.handleViewChanged_),this.addChangeListener(F.Z.SIZE,this.handleSizeChanged_),this.addChangeListener(F.Z.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;!t.view||t.view instanceof Z.ZP||t.view.then((function(t){i.setView(new Z.ZP(t))})),this.controls.addEventListener(s.Z.ADD,(t=>{t.element.setMap(this)})),this.controls.addEventListener(s.Z.REMOVE,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(s.Z.ADD,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(s.Z.REMOVE,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(s.Z.ADD,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(s.Z.REMOVE,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){H(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t),r=void 0!==(i=void 0!==i?i:{}).hitTolerance?i.hitTolerance:0,s=void 0!==i.layerFilter?i.layerFilter:a.uX,o=!1!==i.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,r,o,e,null,s,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,(function(t){i.push(t)}),e),i}getAllLayers(){const t=[];return function e(i){i.forEach((function(i){i instanceof T.Z?e(i.getLayers()):t.push(i)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t),n=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:a.uX,r=void 0!==e.hitTolerance?e.hitTolerance:0,s=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,r,s,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),i=this.getSize(),n=e.width/i[0],r=e.height/i[1],s="changedTouches"in t?t.changedTouches[0]:t;return[(s.clientX-e.left)/n,(s.clientY-e.top)/r]}getTarget(){return this.get(F.Z.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return(0,V.toUserCoordinate)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?(0,h.nn)(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(F.Z.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof r.Z)return void e.setLayers(t);const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e];if(!i.visible)continue;const n=i.layer.getRenderer();if(n&&!n.ready)return!0;const r=i.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=(0,V.fromUserCoordinate)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?(0,h.nn)(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(F.Z.SIZE)}getView(){return this.get(F.Z.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return(0,D.R)(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new R.Z(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===I.Z.POINTERDOWN||i===S.Z.WHEEL||i===S.Z.KEYDOWN){const t=this.getOwnerDocument(),i=this.viewport_.getRootNode?this.viewport_.getRootNode():t,n=e.target;if(this.overlayContainerStopEvent_.contains(n)||!(i===t?t.documentElement:i).contains(n))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let i=e.length-1;i>=0;i--){const n=e[i];if(n.getMap()!==this||!n.getActive()||!this.getTargetElement())continue;if(!n.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let i=this.maxTilesLoading_,n=i;if(t){const e=t.viewHints;if(e[j.Z.ANIMATING]||e[j.Z.INTERACTING]){const e=Date.now()-t.time>8;i=e?0:8,n=e?0:2}}e.getTilesLoading()<i&&(e.reprioritize(),e.loadMoreTiles(i,n))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(v.Z.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(v.Z.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new O.Z(N.Z.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new O.Z(N.Z.LOADSTART,this,t))));const i=this.postRenderFunctions_;for(let n=0,r=i.length;n<r;++n)i[n](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)(0,E.bN)(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(S.Z.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(S.Z.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,(0,w.ZF)(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new C(this)),this.mapBrowserEventHandler_=new k(this,this.moveTolerance_);for(const e in M.Z)this.mapBrowserEventHandler_.addEventListener(M.Z[e],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(S.Z.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(S.Z.WHEEL,this.boundHandleBrowserEvent_,!!L.bM&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[(0,E.oL)(t,S.Z.KEYDOWN,this.handleBrowserEvent,this),(0,E.oL)(t,S.Z.KEYPRESS,this.handleBrowserEvent,this)];const i=e.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.observe(i.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,E.bN)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,E.bN)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=(0,E.oL)(t,_.Z.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,E.oL)(t,S.Z.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(E.bN),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new T.V("addlayer",t)),this.layerGroupPropertyListenerKeys_=[(0,E.oL)(t,_.Z.PROPERTYCHANGE,this.render,this),(0,E.oL)(t,S.Z.CHANGE,this.render,this),(0,E.oL)(t,"addlayer",this.handleLayerAdd_,this),(0,E.oL)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const i=t[e].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){X(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let r=null;if(void 0!==e&&(0,q.py)(e)&&i&&i.isDef()){const n=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=i.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:(0,c.p8)(s.center,s.resolution,s.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:n,wantedTiles:{},mapId:(0,l.sq)(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const t=isNaN(s.nextRotation)?s.rotation:s.nextRotation;r.nextExtent=(0,c.p8)(s.nextCenter,s.nextResolution,t,e)}}if(this.frameState_=r,this.renderer_.renderFrame(r),r){if(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),n){(!this.previousExtent_||!(0,c.xb)(this.previousExtent_)&&!(0,c.fS)(r.extent,this.previousExtent_))&&(this.dispatchEvent(new O.Z(N.Z.MOVESTART,this,n)),this.previousExtent_=(0,c.YN)(this.previousExtent_))}this.previousExtent_&&!r.viewHints[j.Z.ANIMATING]&&!r.viewHints[j.Z.INTERACTING]&&!(0,c.fS)(r.extent,this.previousExtent_)&&(this.dispatchEvent(new O.Z(N.Z.MOVEEND,this,r)),(0,c.d9)(r.extent,this.previousExtent_))}this.dispatchEvent(new O.Z(N.Z.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(N.Z.LOADSTART)||this.hasListener(N.Z.LOADEND)||this.hasListener(v.Z.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new T.V("removelayer",e)),this.set(F.Z.LAYERGROUP,t)}setSize(t){this.set(F.Z.SIZE,t)}setTarget(t){this.set(F.Z.TARGET,t)}setView(t){if(!t||t instanceof Z.ZP)return void this.set(F.Z.VIEW,t);this.set(F.Z.VIEW,new Z.ZP);const e=this;t.then((function(t){e.setView(new Z.ZP(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const i=getComputedStyle(t),n=t.offsetWidth-parseFloat(i.borderLeftWidth)-parseFloat(i.paddingLeft)-parseFloat(i.paddingRight)-parseFloat(i.borderRightWidth),r=t.offsetHeight-parseFloat(i.borderTopWidth)-parseFloat(i.paddingTop)-parseFloat(i.paddingBottom)-parseFloat(i.borderBottomWidth);isNaN(n)||isNaN(r)||(e=[n,r],!(0,q.py)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&(0,W.ZK)("No map visible because the map container's width or height are 0."))}const i=this.getSize();!e||i&&(0,U.fS)(e,i)||(this.setSize(e),this.updateViewportSize_())}updateViewportSize_(){const t=this.getView();if(t){let e;const i=getComputedStyle(this.viewport_);i.width&&i.height&&(e=[parseInt(i.width,10),parseInt(i.height,10)]),t.setViewportSize(e)}}}const Y=K},233:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(8731);class r extends n.Z{constructor(t,e,i,n,r,s){super(t,e,r),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==n&&n,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const s=r},8527:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(1971);const r={SINGLECLICK:"singleclick",CLICK:n.Z.CLICK,DBLCLICK:n.Z.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},8731:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(8685);class r extends n.ZP{constructor(t,e,i){super(t),this.map=e,this.frameState=void 0!==i?i:null}}const s=r},6844:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},9157:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},9520:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(8685),r=i(9153),s=i(2196),o=i(3039),a=i(3878);class l extends n.ZP{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class h extends s.Z{constructor(t){super(),this.on,this.once,this.un,(0,o.sq)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new l(i,t,e)),i=r.Z.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new l(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const i=n[t];n[t]=e,i!==e&&this.notify(t,i)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],(0,a.x)(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const c=h},9153:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={PROPERTYCHANGE:"propertychange"}},2196:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(1135),r=i(1971),s=i(9640);class o extends n.Z{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(r.Z.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=(0,s.oL)(this,t[r],e);return n}return(0,s.oL)(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let r=0;r<n;++r)i[r]=(0,s.Vx)(this,t[r],e)}else i=(0,s.Vx)(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)!function(t){if(Array.isArray(t))for(let e=0,i=t.length;e<i;++e)(0,s.bN)(t[e]);else(0,s.bN)(t)}(i);else if(Array.isArray(t))for(let n=0,r=t.length;n<r;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}o.prototype.on,o.prototype.once,o.prototype.un;const a=o},2779:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(1135),r=i(1971),s=i(5696),o=i(3039),a=i(3816);class l extends n.Z{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(r.Z.CHANGE)}release(){this.state===s.Z.ERROR&&this.setState(s.Z.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){if(!this.interimTile)return this;let t=this.interimTile;do{if(t.getState()==s.Z.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){if(!this.interimTile)return;let t=this.interimTile,e=this;do{if(t.getState()==s.Z.LOADED){t.interimTile=null;break}t.getState()==s.Z.LOADING?e=t:t.getState()==s.Z.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==s.Z.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){(0,o.O3)()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;const n=e-i+1e3/60;return n>=this.transition_?1:(0,a.YQ)(n/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}const h=l},1454:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(4600),r=i(9707);class s extends n.Z{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache();){if(this.peekLast().getKey()in t)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey(),e=(0,r.Ul)(t)[0];this.forEach((t=>{t.tileCoord[0]!==e&&(this.remove((0,r.km)(t.tileCoord)),t.release())}))}}const o=s},2161:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h,R:()=>c});var n=i(1971),r=i(9141),s=i(3878);const o=1/0;const a=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,s.Z)(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){(0,r.h)(!(this.keyFunction_(t)in this.queuedElements_),31);const e=this.priorityFunction_(t);return e!=o&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,r=e[t],s=i[t],o=t;for(;t<n>>1;){const r=this.getLeftChildIndex_(t),s=this.getRightChildIndex_(t),o=s<n&&i[s]<i[r]?s:r;e[t]=e[o],i[t]=i[o],t=o}e[t]=r,i[t]=s,this.siftDown_(o,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,r=i[e],s=n[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(n[t]>s))break;i[e]=i[t],n[e]=n[t],e=t}i[e]=r,n[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const r=e.length;let s,a,l;for(a=0;a<r;++a)s=e[a],l=t(s),l==o?delete this.queuedElements_[this.keyFunction_(s)]:(i[n]=l,e[n++]=s);e.length=n,i.length=n,this.heapify_()}};var l=i(5696);const h=class extends a{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){t[0].addEventListener(n.Z.CHANGE,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===l.Z.LOADED||i===l.Z.ERROR||i===l.Z.EMPTY){i!==l.Z.ERROR&&e.removeEventListener(n.Z.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i,n,r,s=0;for(;this.tilesLoading_<t&&s<e&&this.getCount()>0;)n=this.dequeue()[0],r=n.getKey(),i=n.getState(),i!==l.Z.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++s,n.load())}};function c(t,e,i,n,r){if(!t||!(i in t.wantedTiles))return o;if(!t.wantedTiles[i][e.getKey()])return o;const s=t.viewState.center,a=n[0]-s[0],l=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(a*a+l*l)/r}},8899:(t,e,i)=>{"use strict";i.d(e,{T:()=>r,Z:()=>s});class n{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function r(t,e,i,r,s){return void 0!==s?(s.minX=t,s.maxX=e,s.minY=i,s.maxY=r,s):new n(t,e,i,r)}const s=n},5696:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},6305:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>T});var n=i(9520),r=i(9265),s=i(9690),o=i(4840),a=i(7533),l=i(3556),h=i(6973),c=i(9141),u=i(4898);function d(t,e,i){return function(n,r,s,o,a){if(!n)return;if(!r&&!e)return n;const l=e?0:s[0]*r,h=e?0:s[1]*r,c=a?a[0]:0,d=a?a[1]:0;let p=t[0]+l/2+c,f=t[2]-l/2+c,g=t[1]+h/2+d,m=t[3]-h/2+d;p>f&&(p=(f+p)/2,f=p),g>m&&(g=(m+g)/2,m=g);let _=(0,u.uZ)(n[0],p,f),y=(0,u.uZ)(n[1],g,m);if(o&&i&&r){const t=30*r;_+=-t*Math.log(1+Math.max(0,p-n[0])/t)+t*Math.log(1+Math.max(0,n[0]-f)/t),y+=-t*Math.log(1+Math.max(0,g-n[1])/t)+t*Math.log(1+Math.max(0,n[1]-m)/t)}return[_,y]}}function p(t){return t}var f=i(8300),g=i(7794);function m(t,e,i,n){const r=(0,f.dz)(e)/i[0],s=(0,f.Cr)(e)/i[1];return n?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function _(t,e,i){let n=Math.min(t,e);return n*=Math.log(1+50*Math.max(0,t/e-1))/50+1,i&&(n=Math.max(n,i),n/=Math.log(1+50*Math.max(0,i/t-1))/50+1),(0,u.uZ)(n,i/2,2*e)}function y(t,e,i,n,r){return i=void 0===i||i,function(s,o,a,l){if(void 0!==s){const o=n?m(t,n,a,r):t;return i&&l?_(s,o,e):(0,u.uZ)(s,e,o)}}}var v=i(5219),x=i(3816),b=i(4746);class E extends n.Z{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,a.createProjection)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,a.disableCoordinateWarning)(),t.center&&(t.center=(0,a.fromUserCoordinate)(t.center,this.projection_)),t.extent&&(t.extent=(0,a.fromUserExtent)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const o in s.Z)delete e[o];this.setProperties(e,!0);const i=function(t){let e,i,n;const r=28,s=2;let l=void 0!==t.minZoom?t.minZoom:0,h=void 0!==t.maxZoom?t.maxZoom:r;const c=void 0!==t.zoomFactor?t.zoomFactor:s,d=void 0!==t.multiWorld&&t.multiWorld,p=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,v=void 0!==t.showFullExtent&&t.showFullExtent,x=(0,a.createProjection)(t.projection,"EPSG:3857"),b=x.getExtent();let E=t.constrainOnlyCenter,w=t.extent;d||w||!x.isGlobal()||(E=!1,w=b);if(void 0!==t.resolutions){const r=t.resolutions;i=r[l],n=void 0!==r[h]?r[h]:r[r.length-1],e=t.constrainResolution?function(t,e,i,n){return e=void 0===e||e,function(r,s,o,a){if(void 0!==r){const l=t[0],h=t[t.length-1],c=i?m(l,i,o,n):l;if(a)return e?_(r,c,h):(0,u.uZ)(r,h,c);const d=Math.min(c,r),p=Math.floor((0,g.h7)(t,d,s));return t[p]>c&&p<t.length-1?t[p+1]:t[p]}}}(r,p,!E&&w,v):y(i,n,p,!E&&w,v)}else{const d=(b?Math.max((0,f.dz)(b),(0,f.Cr)(b)):360*a.METERS_PER_UNIT.degrees/x.getMetersPerUnit())/o.S/Math.pow(s,0),g=d/Math.pow(s,r-0);i=t.maxResolution,void 0!==i?l=0:i=d/Math.pow(c,l),n=t.minResolution,void 0===n&&(n=void 0!==t.maxZoom?void 0!==t.maxResolution?i/Math.pow(c,h):d/Math.pow(c,h):g),h=l+Math.floor(Math.log(i/n)/Math.log(c)),n=i/Math.pow(c,h-l),e=t.constrainResolution?function(t,e,i,n,r,s){return n=void 0===n||n,i=void 0!==i?i:0,function(o,a,l,h){if(void 0!==o){const c=r?m(e,r,l,s):e;if(h)return n?_(o,c,i):(0,u.uZ)(o,i,c);const d=1e-9,p=Math.ceil(Math.log(e/c)/Math.log(t)-d),f=-a*(.5-d)+.5,g=Math.min(c,o),y=Math.floor(Math.log(e/g)/Math.log(t)+f),v=Math.max(p,y),x=e/Math.pow(t,v);return(0,u.uZ)(x,i,c)}}}(c,i,n,p,!E&&w,v):y(i,n,p,!E&&w,v)}return{constraint:e,maxResolution:i,minResolution:n,minZoom:l,zoomFactor:c}}(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return d(t.extent,t.constrainOnlyCenter,e)}const e=(0,a.createProjection)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,d(t,!1,!1)}return p}(t),r=i.constraint,l=function(t){const e=void 0===t.enableRotation||t.enableRotation;if(e){const e=t.constrainRotation;return void 0===e||!0===e?(0,v.Gw)():!1===e?v.YP:"number"==typeof e?(0,v.gE)(e):v.YP}return v.h$}(t);this.constraints_={center:n,resolution:r,rotation:l},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),s=r/2*(n[3]-e[3]+e[1]-n[1]),o=r/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+s,i[1]-o])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let t=arguments[i];t.center&&(t=Object.assign({},t),t.center=(0,a.fromUserCoordinate)(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=(0,a.fromUserCoordinate)(t.anchor,this.getProjection())),e[i]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,i=arguments.length;i>1&&"function"==typeof arguments[i-1]&&(e=arguments[i-1],--i);let n=0;for(;n<i&&!this.isDef();++n){const t=arguments[n];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(n===i)return void(e&&w(e,!0));let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const h=[];for(;n<i;++n){const t=arguments[n],i={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||x.rd,callback:e};if(t.center&&(i.sourceCenter=o,i.targetCenter=t.center.slice(),o=i.targetCenter),void 0!==t.zoom?(i.sourceResolution=a,i.targetResolution=this.getResolutionForZoom(t.zoom),a=i.targetResolution):t.resolution&&(i.sourceResolution=a,i.targetResolution=t.resolution,a=i.targetResolution),void 0!==t.rotation){i.sourceRotation=l;const e=(0,u.$W)(t.rotation-l+Math.PI,2*Math.PI)-Math.PI;i.targetRotation=l+e,l=i.targetRotation}C(i)?i.complete=!0:s+=i.duration,h.push(i)}this.animations_.push(h),this.setHint(r.Z.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[r.Z.ANIMATING]>0}getInteracting(){return this.hints_[r.Z.INTERACTING]>0}cancelAnimations(){let t;this.setHint(r.Z.ANIMATING,-this.hints_[r.Z.ANIMATING]);for(let e=0,i=this.animations_.length;e<i;++e){const i=this.animations_[e];if(i[0].callback&&w(i[0].callback,!1),!t)for(let e=0,n=i.length;e<n;++e){const n=i[e];if(!n.complete){t=n.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let s=!0;for(let i=0,r=n.length;i<r;++i){const r=n[i];if(r.complete)continue;const o=t-r.start;let a=r.duration>0?o/r.duration:1;a>=1?(r.complete=!0,a=1):s=!1;const l=r.easing(a);if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1],i=r.targetCenter[0],n=r.targetCenter[1];this.nextCenter_=r.targetCenter;const s=t+l*(i-t),o=e+l*(n-e);this.targetCenter_=[s,o]}if(r.sourceResolution&&r.targetResolution){const t=1===l?r.targetResolution:r.sourceResolution+l*(r.targetResolution-r.sourceResolution);if(r.anchor){const e=this.getViewportSize_(this.getRotation()),i=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(i,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===l?(0,u.$W)(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+l*(r.targetRotation-r.sourceRotation);if(r.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!r.complete)break}if(s){this.animations_[i]=null,this.setHint(r.Z.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=n[0].callback;t&&w(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();return void 0!==n&&(i=[n[0]-e[0],n[1]-e[1]],(0,h.U1)(i,t-this.getRotation()),(0,h.IH)(i,e)),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),r=this.getResolution();if(void 0!==n&&void 0!==r){i=[e[0]-t*(e[0]-n[0])/r,e[1]-t*(e[1]-n[1])/r]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?(0,a.toUserCoordinate)(t,this.getProjection()):t}getCenterInternal(){return this.get(s.Z.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return(0,a.toUserExtent)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();(0,c.h)(e,1);const i=this.getResolution();(0,c.h)(void 0!==i,2);const n=this.getRotation();return(0,c.h)(void 0!==n,3),(0,f.p8)(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(s.Z.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,a.fromUserExtent)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=(0,f.dz)(t)/e[0],n=(0,f.Cr)(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(i){return e/Math.pow(t,i*n)}}getRotation(){return this.get(s.Z.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(i/n)/e;return function(t){return Math.log(i/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const r=this.padding_;if(r){const t=this.getViewportSizeMinusPadding_();n=S(n,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,i)}return{center:n.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,i,n=this.minZoom_||0;if(this.resolutions_){const r=(0,g.h7)(this.resolutions_,t,1);n=r,e=this.resolutions_[r],i=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(e/t)/Math.log(i)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=(0,u.uZ)(Math.floor(t),0,this.resolutions_.length-2),i=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(i,(0,u.uZ)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if((0,c.h)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,24),Array.isArray(t)){(0,c.h)(!(0,f.xb)(t),25);const e=(0,a.fromUserExtent)(t,this.getProjection());i=(0,b.oJ)(e)}else if("Circle"===t.getType()){const e=(0,a.fromUserExtent)(t.getExtent(),this.getProjection());i=(0,b.oJ)(e),i.rotate(this.getRotation(),(0,f.qg)(e))}else{const e=(0,a.getUserProjection)();i=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),r=t.getFlatCoordinates(),s=t.getStride();let o=1/0,a=1/0,l=-1/0,h=-1/0;for(let c=0,u=r.length;c<u;c+=s){const t=r[c]*i-r[c+1]*n,e=r[c]*n+r[c+1]*i;o=Math.min(o,t),a=Math.min(a,e),l=Math.max(l,t),h=Math.max(h,e)}return[o,a,l,h]}fitInternal(t,e){let i=(e=e||{}).size;i||(i=this.getViewportSizeMinusPadding_());const n=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let s;s=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const o=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(o,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);a=isNaN(a)?s:Math.max(a,s),a=this.getConstrainedResolution(a,r?0:1);const h=this.getRotation(),c=Math.sin(h),u=Math.cos(h),d=(0,f.qg)(o);d[0]+=(n[1]-n[3])/2*a,d[1]+=(n[0]-n[2])/2*a;const p=d[0]*u-d[1]*c,g=d[1]*u+d[0]*c,m=this.getConstrainedCenter([p,g],a),_=e.callback?e.callback:l.Zn;void 0!==e.duration?this.animateInternal({resolution:a,center:m,duration:e.duration,easing:e.easing},_):(this.targetResolution_=a,this.targetCenter_=m,this.applyTargetState_(!1,!0),w(_,!0))}centerOn(t,e,i){this.centerOnInternal((0,a.fromUserCoordinate)(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(S(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let r;const s=this.padding_;if(s&&t){const o=this.getViewportSizeMinusPadding_(-i),a=S(t,n,[o[0]/2+s[3],o[1]/2+s[0]],e,i);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,a.toUserCoordinate)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,a.fromUserCoordinate)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,a.fromUserCoordinate)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,a.fromUserCoordinate)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),r=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,r,i),a=this.constraints_.center(this.targetCenter_,o,r,i,this.calculateCenterShift(this.targetCenter_,o,n,r));this.get(s.Z.ROTATION)!==n&&this.set(s.Z.ROTATION,n),this.get(s.Z.RESOLUTION)!==o&&(this.set(s.Z.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get(s.Z.CENTER)&&(0,h.fS)(this.get(s.Z.CENTER),a)||this.set(s.Z.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=void 0!==t?t:200;const n=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,n,s),a=this.constraints_.center(this.targetCenter_,o,s,!1,this.calculateCenterShift(this.targetCenter_,o,r,s));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=o,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();i=i||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===o&&this.getRotation()===r&&this.getCenterInternal()&&(0,h.fS)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:o,duration:t,easing:x.Vv,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(r.Z.INTERACTING,1)}endInteraction(t,e,i){i=i&&(0,a.fromUserCoordinate)(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(r.Z.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function w(t,e){setTimeout((function(){t(e)}),0)}function C(t){return!(t.sourceCenter&&t.targetCenter&&!(0,h.fS)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function S(t,e,i,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-i[0])*n,l+=(i[1]-e[1]/2)*n,o=-o;return[a*s-l*o,l*s+a*o]}const T=E},9265:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ANIMATING:0,INTERACTING:1}},9690:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},7794:(t,e,i)=>{"use strict";function n(t,e,i){let n,s;i=i||r;let o=0,a=t.length,l=!1;for(;o<a;)n=o+(a-o>>1),s=+i(t[n],e),s<0?o=n+1:(a=n,l=!s);return l?o:~o}function r(t,e){return t>e?1:t<e?-1:0}function s(t,e,i){if(t[0]<=e)return 0;const n=t.length;if(e<=t[n-1])return n-1;if("function"==typeof i){for(let r=1;r<n;++r){const n=t[r];if(n===e)return r;if(n<e)return i(e,t[r-1],n)>0?r-1:r}return n-1}if(i>0){for(let i=1;i<n;++i)if(t[i]<e)return i-1;return n-1}if(i<0){for(let i=1;i<n;++i)if(t[i]<=e)return i;return n-1}for(let r=1;r<n;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return n-1}function o(t,e,i){for(;e<i;){const n=t[e];t[e]=t[i],t[i]=n,++e,--i}}function a(t,e){const i=Array.isArray(e)?e:[e],n=i.length;for(let r=0;r<n;r++)t[t.length]=i[r]}function l(t,e){const i=t.length;if(i!==e.length)return!1;for(let n=0;n<i;n++)if(t[n]!==e[n])return!1;return!0}function h(t,e,i){const n=e||r;return t.every((function(e,r){if(0===r)return!0;const s=n(t[r-1],e);return!(s>0||i&&0===s)}))}i.d(e,{FZ:()=>o,fS:()=>l,h7:()=>s,j2:()=>r,l7:()=>a,pT:()=>h,ry:()=>n})},9141:(t,e,i)=>{"use strict";i.d(e,{h:()=>r});var n=i(2361);function r(t,e){if(!t)throw new n.Z(e)}},3139:(t,e,i)=>{"use strict";i.d(e,{BB:()=>d,XC:()=>a,_2:()=>c,e1:()=>p,mL:()=>h});var n=i(9141),r=i(4898);const s=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,o=/^([a-z]*)$|^hsla?\(.*\)$/i;function a(t){return"string"==typeof t?t:d(t)}function l(t){const e=document.createElement("div");if(e.style.color=t,""!==e.style.color){document.body.appendChild(e);const t=getComputedStyle(e).color;return document.body.removeChild(e),t}return""}const h=function(){const t={};let e=0;return function(i){let r;if(t.hasOwnProperty(i))r=t[i];else{if(e>=1024){let i=0;for(const n in t)0==(3&i++)&&(delete t[n],--e)}r=function(t){let e,i,r,a,h;o.exec(t)&&(t=l(t));if(s.exec(t)){const n=t.length-1;let s;s=n<=4?1:2;const o=4===n||8===n;e=parseInt(t.substr(1+0*s,s),16),i=parseInt(t.substr(1+1*s,s),16),r=parseInt(t.substr(1+2*s,s),16),a=o?parseInt(t.substr(1+3*s,s),16):255,1==s&&(e=(e<<4)+e,i=(i<<4)+i,r=(r<<4)+r,o&&(a=(a<<4)+a)),h=[e,i,r,a/255]}else t.startsWith("rgba(")?(h=t.slice(5,-1).split(",").map(Number),u(h)):t.startsWith("rgb(")?(h=t.slice(4,-1).split(",").map(Number),h.push(1),u(h)):(0,n.h)(!1,14);return h}(i),t[i]=r,++e}return r}}();function c(t){return Array.isArray(t)?t:h(t)}function u(t){return t[0]=(0,r.uZ)(t[0]+.5|0,0,255),t[1]=(0,r.uZ)(t[1]+.5|0,0,255),t[2]=(0,r.uZ)(t[2]+.5|0,0,255),t[3]=(0,r.uZ)(t[3],0,1),t}function d(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let i=t[1];i!=(0|i)&&(i=i+.5|0);let n=t[2];n!=(0|n)&&(n=n+.5|0);return"rgba("+e+","+i+","+n+","+(void 0===t[3]?1:Math.round(100*t[3])/100)+")"}function p(t){return o.test(t)&&(t=l(t)),s.test(t)||t.startsWith("rgba(")||t.startsWith("rgb(")}},4975:(t,e,i)=>{"use strict";i.d(e,{y:()=>r});var n=i(3139);function r(t){return Array.isArray(t)?(0,n.BB)(t):t}},7367:(t,e,i)=>{"use strict";i.d(e,{ZK:()=>s,vU:()=>o});const n={info:1,warn:2,error:3,none:4};let r=n.info;function s(...t){r>n.warn||console.warn(...t)}function o(...t){r>n.error||console.error(...t)}},9563:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Attribution:()=>n.Z,Control:()=>r.Z,FullScreen:()=>_,MousePosition:()=>C,OverviewMap:()=>V,Rotate:()=>q.Z,ScaleLine:()=>$,Zoom:()=>J.Z,ZoomSlider:()=>st,ZoomToExtent:()=>at,defaults:()=>lt.c});var n=i(9636),r=i(1339),s=i(1971),o=i(9157),a=i(2913),l=i(9640),h=i(3248);const c=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],u="enterfullscreen",d="leavefullscreen";class p extends r.Z{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=void 0!==t.keys&&t.keys,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==t.className?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==t.activeClassName?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==t.inactiveClassName?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const e=void 0!==t.label?t.label:"\u2922";this.labelNode_="string"==typeof e?document.createTextNode(e):e;const i=void 0!==t.labelActive?t.labelActive:"\xd7";this.labelActiveNode_="string"==typeof i?document.createTextNode(i):i;const n=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=n,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(s.Z.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${a.XV} ${a.hg}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const e=t.getOwnerDocument();if(f(e))if(g(e))!function(t){t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(e);else{let i;i=this.source_?"string"==typeof this.source_?e.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():m(t)}(i):m(i)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const e=this.isInFullscreen_;this.isInFullscreen_=g(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,h.$H)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(u)):((0,h.$H)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(d)),t.updateSize())}setClassName_(t,e){e?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const e=this.getMap();e&&e.removeChangeListener(o.Z.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(o.Z.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let i=0,n=t.length;i<n;++i)(0,l.bN)(t[i]);t.length=0;const e=this.getMap();if(e){const i=e.getOwnerDocument();f(i)?this.element.classList.remove(a.Qi):this.element.classList.add(a.Qi);for(let e=0,n=c.length;e<n;++e)t.push((0,l.oL)(i,c[e],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function f(t){const e=t.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&t.fullscreenEnabled)}function g(t){return!(!t.webkitIsFullScreen&&!t.fullscreenElement)}function m(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}const _=p;var y=i(6932),v=i(7533),x=i(6973);const b="projection",E="coordinateFormat";class w extends r.Z{constructor(t){t=t||{};const e=document.createElement("div");e.className=void 0!==t.className?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un,this.addChangeListener(b,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=void 0!==t.placeholder,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==t.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(E)}getProjection(){return this.get(b)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push((0,l.oL)(e,y.Z.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,l.oL)(e,y.Z.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(E,t)}setProjection(t){this.set(b,(0,v.get)(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const t=this.getProjection();this.transform_=t?(0,v.getTransformFromProjections)(this.mapProjection_,t):v.identityTransform}const i=this.getMap().getCoordinateFromPixelInternal(t);if(i){const t=(0,v.getUserProjection)();if(t&&(this.transform_=(0,v.getTransformFromProjections)(this.mapProjection_,t)),this.transform_(i,i),this.wrapX_){const e=t||this.getProjection()||this.mapProjection_;(0,x.Cf)(i,e)}const n=this.getCoordinateFormat();e=n?n(i):i.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}const C=w;var S=i(390),T=i(2787),R=i(6844),M=i(9153),I=i(9520),P=i(8300);const L="element",A="map",k="offset",O="position",N="positioning";class F extends I.Z{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+a.$A,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(L,this.handleElementChanged),this.addChangeListener(A,this.handleMapChanged),this.addChangeListener(k,this.handleOffsetChanged),this.addChangeListener(O,this.handlePositionChanged),this.addChangeListener(N,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(L)}getId(){return this.id}getMap(){return this.get(A)||null}getOffset(){return this.get(k)}getPosition(){return this.get(O)}getPositioning(){return this.get(N)}handleElementChanged(){(0,h.ep)(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,h.ZF)(this.element),(0,l.bN)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,l.oL)(t,R.Z.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(L,t)}setMap(t){this.set(A,t)}setOffset(t){this.set(k,t)}setPosition(t){this.set(O,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(O))return;const i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),r=this.getRect(n,[(0,h.iO)(n),(0,h.Pb)(n)]),s=void 0===(t=t||{}).margin?20:t.margin;if(!(0,P.r4)(i,r)){const n=r[0]-i[0],o=i[2]-r[2],a=r[1]-i[1],l=i[3]-r[3],h=[0,0];if(n<0?h[0]=n-s:o<0&&(h[0]=Math.abs(o)+s),a<0?h[1]=a-s:l<0&&(h[1]=Math.abs(l)+s),0!==h[0]||0!==h[1]){const i=e.getView().getCenterInternal(),n=e.getPixelFromCoordinateInternal(i);if(!n)return;const r=[n[0]+h[0],n[1]+h[1]],s=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(r),duration:s.duration,easing:s.easing})}}}getRect(t,e){const i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+e[0],r+e[1]]}setPositioning(t){this.set(N,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(t,e){const i=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);let s="0%",o="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?s="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(s="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?o="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(o="-50%");const a=`translate(${s}, ${o}) translate(${Math.round(t[0]+n[0])+"px"}, ${Math.round(t[1]+n[1])+"px"})`;this.rendered.transform_!=a&&(this.rendered.transform_=a,i.transform=a)}getOptions(){return this.options}}const D=F;var Z=i(6305),j=i(9690),z=i(4746);const G=.75,B=.1;class U extends r.Z{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;const e=void 0!==t.className?t.className:"ol-overviewmap",i=void 0!==t.tipLabel?t.tipLabel:"Overview map",n=void 0!==t.collapseLabel?t.collapseLabel:"\u2039";"string"==typeof n?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=n):this.collapseLabel_=n;const r=void 0!==t.label?t.label:"\u203a";"string"==typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,l=document.createElement("button");l.setAttribute("type","button"),l.title=i,l.appendChild(o),l.addEventListener(s.Z.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;const h=new T.Z({view:t.view,controls:new S.Z,interactions:new S.Z});this.ovmap_=h,t.layers&&t.layers.forEach((function(t){h.addLayer(t)}));const c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",this.boxOverlay_=new D({position:[0,0],positioning:"center-center",element:c}),this.ovmap_.addOverlay(this.boxOverlay_);const u=e+" "+a.XV+" "+a.hg+(this.collapsed_&&this.collapsible_?" "+a.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),d=this.element;d.className=u,d.appendChild(this.ovmapDiv_),d.appendChild(l);const p=this,f=this.boxOverlay_,g=this.boxOverlay_.getElement(),m=function(t){const e={clientX:(i=t).clientX,clientY:i.clientY};var i;const n=h.getEventCoordinateInternal(e);f.setPosition(n)},_=function(t){const e=h.getEventCoordinateInternal(t);p.getMap().getView().setCenterInternal(e),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",_)};g.addEventListener("mousedown",(function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",_)}))}setMap(t){const e=this.getMap();if(t!==e){if(e){const t=e.getView();t&&this.unbindView_(t),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,l.oL)(t,M.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const e=t.getView();e&&(this.bindView_(e),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if(t.key===o.Z.VIEW){const e=t.oldValue;e&&this.unbindView_(e);const i=this.getMap().getView();this.bindView_(i)}else this.ovmap_.isRendered()||t.key!==o.Z.TARGET&&t.key!==o.Z.SIZE||this.ovmap_.updateSize()}bindView_(t){if(!this.view_){const e=new Z.ZP({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(j.Z.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(t){t.removeChangeListener(j.Z.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const i=t.getSize(),n=t.getView().calculateExtentInternal(i);if(this.viewExtent_&&(0,P.fS)(n,this.viewExtent_))return;this.viewExtent_=n;const r=e.getSize(),s=e.getView().calculateExtentInternal(r),o=e.getPixelFromCoordinateInternal((0,P.rL)(n)),a=e.getPixelFromCoordinateInternal((0,P.w$)(n)),l=Math.abs(o[0]-a[0]),h=Math.abs(o[1]-a[1]),c=r[0],u=r[1];l<c*B||h<u*B||l>c*G||h>u*G?this.resetExtent_():(0,P.r4)(s,n)||this.recenter_()}resetExtent_(){const t=this.getMap(),e=this.ovmap_,i=t.getSize(),n=t.getView().calculateExtentInternal(i),r=e.getView(),s=Math.log(7.5)/Math.LN2,o=1/(Math.pow(2,s/2)*B);(0,P.H9)(n,o),r.fitInternal((0,z.oJ)(n))}recenter_(){const t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenterInternal(i.getCenterInternal())}updateBox_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const i=t.getSize(),n=t.getView(),r=e.getView(),s=this.rotateWithView_?0:-n.getRotation(),o=this.boxOverlay_,a=this.boxOverlay_.getElement(),l=n.getCenterInternal(),h=n.getResolution(),c=r.getResolution(),u=i[0]*h/c,d=i[1]*h/c;if(o.setPosition(l),a){a.style.width=u+"px",a.style.height=d+"px";const t="rotate("+s+"rad)";a.style.transform=t}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,l.Vx)(this.ovmap_,R.Z.POSTRENDER,(function(t){delete this.ovmapPostrenderKey_,this.updateBox_()}),this))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(a.hN),this.collapsed_?(0,h.$H)(this.collapseLabel_,this.label_):(0,h.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}}const V=U;var q=i(4297),W=i(9141);const X="units",H=[1,2,5],K=25.4/.28;class Y extends r.Z{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const i=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+a.XV,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(X,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(X)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(X,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,i=t.projection,n=this.getUnits(),r="degrees"==n?"degrees":"m";let s=(0,v.getPointResolution)(i,t.resolution,e,r);const o=this.minWidth_*(this.dpi_||K)/K,a=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||K)/K:void 0;let l=o*s,h="";if("degrees"==n){const t=v.METERS_PER_UNIT.degrees;l*=t,l<t/60?(h="\u2033",s*=3600):l<t?(h="\u2032",s*=60):h="\xb0"}else"imperial"==n?l<.9144?(h="in",s/=.0254):l<1609.344?(h="ft",s/=.3048):(h="mi",s/=1609.344):"nautical"==n?(s/=1852,h="NM"):"metric"==n?l<.001?(h="\u03bcm",s*=1e6):l<1?(h="mm",s*=1e3):l<1e3?h="m":(h="km",s/=1e3):"us"==n?l<.9144?(h="in",s*=39.37):l<1609.344?(h="ft",s/=.30480061):(h="mi",s/=1609.3472):(0,W.h)(!1,33);let c,u,d,p,f,g,m=3*Math.floor(Math.log(o*s)/Math.log(10));for(;;){d=Math.floor(m/3);const t=Math.pow(10,d);if(c=H[(m%3+3)%3]*t,u=Math.round(c/s),isNaN(u))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==a&&u>=a){c=p,u=f,d=g;break}if(u>=o)break;p=c,f=u,g=d,++m}const _=this.scaleBar_?this.createScaleBar(u,c,h):c.toFixed(d<0?-d:0)+" "+h;this.renderedHTML_!=_&&(this.innerElement_.innerHTML=_,this.renderedHTML_=_),this.renderedWidth_!=u&&(this.innerElement_.style.width=u+"px",this.renderedWidth_=u),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,i){const n=this.getScaleForResolution(),r=n<1?Math.round(1/n).toLocaleString()+" : 1":"1 : "+Math.round(n).toLocaleString(),s=this.scaleBarSteps_,o=t/s,a=[this.createMarker("absolute")];for(let l=0;l<s;++l){const n=l%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";a.push(`<div><div class="ol-scale-singlebar ${n}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(l%2==0||2===s?this.createStepText(l,t,!1,e,i):"")+"</div>")}a.push(this.createStepText(s,t,!0,e,i));return(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+r+"</div>":"")+a.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${"absolute"===t?3:-10}px;"></div>`}createStepText(t,e,i,n,r){const s=(0===t?0:Math.round(n/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+r);return`<div class="ol-scale-step-text" style="margin-left: ${0===t?-3:e/this.scaleBarSteps_*-1}px;text-align: ${0===t?"left":"center"};min-width: ${0===t?0:e/this.scaleBarSteps_*2}px;left: ${i?e+"px":"unset"};">`+s+"</div>"}getScaleForResolution(){return(0,v.getPointResolution)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||K)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}}const $=Y;var J=i(7231),Q=i(4898),tt=i(3816),et=i(8685);const it=0,nt=1;class rt extends r.Z{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=it,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==t.duration?t.duration:200;const e=void 0!==t.className?t.className:"ol-zoomslider",i=document.createElement("button");i.setAttribute("type","button"),i.className=e+"-thumb "+a.XV;const n=this.element;n.className=e+" "+a.XV+" "+a.hg,n.appendChild(i),n.addEventListener(y.Z.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),n.addEventListener(y.Z.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),n.addEventListener(y.Z.POINTERUP,this.handleDraggerEnd_.bind(this),!1),n.addEventListener(s.Z.CLICK,this.handleContainerClick_.bind(this),!1),i.addEventListener(s.Z.CLICK,et.UW,!1)}setMap(t){super.setMap(t),t&&t.render()}initSlider_(){const t=this.element;let e=t.offsetWidth,i=t.offsetHeight;if(0===e&&0===i)return this.sliderInitialized_=!1;const n=getComputedStyle(t);e-=parseFloat(n.paddingRight)+parseFloat(n.paddingLeft),i-=parseFloat(n.paddingTop)+parseFloat(n.paddingBottom);const r=t.firstElementChild,s=getComputedStyle(r),o=r.offsetWidth+parseFloat(s.marginRight)+parseFloat(s.marginLeft),a=r.offsetHeight+parseFloat(s.marginTop)+parseFloat(s.marginBottom);return this.thumbSize_=[o,a],e>i?(this.direction_=nt,this.widthLimit_=e-o):(this.direction_=it,this.heightLimit_=i-a),this.sliderInitialized_=!0}handleContainerClick_(t){const e=this.getMap().getView(),i=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),n=this.getResolutionForPosition_(i),r=e.getConstrainedZoom(e.getZoomForResolution(n));e.animateInternal({zoom:r,duration:this.duration_,easing:tt.Vv})}handleDraggerStart_(t){if(!this.dragging_&&t.target===this.element.firstElementChild){const e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){const t=this.handleDraggerDrag_,e=this.handleDraggerEnd_,i=this.getMap().getOwnerDocument();this.dragListenerKeys_.push((0,l.oL)(i,y.Z.POINTERMOVE,t,this),(0,l.oL)(i,y.Z.POINTERUP,e,this))}}}handleDraggerDrag_(t){if(this.dragging_){const e=t.clientX-this.startX_,i=t.clientY-this.startY_,n=this.getRelativePosition_(e,i);this.currentResolution_=this.getResolutionForPosition_(n),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(t){if(this.dragging_){this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(l.bN),this.dragListenerKeys_.length=0}}setThumbPosition_(t){const e=this.getPositionForResolution_(t),i=this.element.firstElementChild;this.direction_==nt?i.style.left=this.widthLimit_*e+"px":i.style.top=this.heightLimit_*e+"px"}getRelativePosition_(t,e){let i;return i=this.direction_===nt?t/this.widthLimit_:e/this.heightLimit_,(0,Q.uZ)(i,0,1)}getResolutionForPosition_(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)}getPositionForResolution_(t){const e=this.getMap().getView().getValueForResolutionFunction();return(0,Q.uZ)(1-e(t),0,1)}render(t){if(!t.frameState)return;if(!this.sliderInitialized_&&!this.initSlider_())return;const e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}const st=rt;class ot extends r.Z{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const e=void 0!==t.className?t.className:"ol-zoom-extent",i=void 0!==t.label?t.label:"E",n=void 0!==t.tipLabel?t.tipLabel:"Fit to extent",r=document.createElement("button");r.setAttribute("type","button"),r.title=n,r.appendChild("string"==typeof i?document.createTextNode(i):i),r.addEventListener(s.Z.CLICK,this.handleClick_.bind(this),!1);const o=e+" "+a.XV+" "+a.hg,l=this.element;l.className=o,l.appendChild(r)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap().getView(),e=this.extent?this.extent:t.getProjection().getExtent();t.fitInternal((0,z.oJ)(e))}}const at=ot;var lt=i(7609)},9636:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(1339),r=i(1971),s=i(2913),o=i(7794),a=i(3248);class l extends n.Z{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",i=void 0!==t.tipLabel?t.tipLabel:"Attributions",n=void 0!==t.expandClassName?t.expandClassName:e+"-expand",o=void 0!==t.collapseLabel?t.collapseLabel:"\u203a",a=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof o?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=a):this.collapseLabel_=o;const l=void 0!==t.label?t.label:"i";"string"==typeof l?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=n):this.label_=l;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(r.Z.CLICK,this.handleClick_.bind(this),!1);const c=e+" "+s.XV+" "+s.hg+(this.collapsed_&&this.collapsible_?" "+s.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap((e=>e.getAttributions(t))))),i=!this.getMap().getAllLayers().some((t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(i),e}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!(0,o.fS)(e,this.renderedAttributions_)){(0,a.ep)(this.ulElement_);for(let t=0,i=e.length;t<i;++t){const i=document.createElement("li");i.innerHTML=e[t],this.ulElement_.appendChild(i)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(s.hN),this.collapsed_?(0,a.$H)(this.collapseLabel_,this.label_):(0,a.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}const h=l},1339:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(9520),r=i(6844),s=i(3556),o=i(9640),a=i(3248);class l extends n.Z{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){(0,a.ZF)(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&(0,a.ZF)(this.element);for(let e=0,i=this.listenerKeys.length;e<i;++e)(0,o.bN)(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,t){(this.target_?this.target_:t.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==s.Zn&&this.listenerKeys.push((0,o.oL)(t,r.Z.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}}const h=l},4297:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(1339),r=i(1971),s=i(2913),o=i(3816);class a extends n.Z{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",i=void 0!==t.label?t.label:"\u21e7",n=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof i?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const o=t.tipLabel?t.tipLabel:"Reset rotation",a=document.createElement("button");a.className=e+"-reset",a.setAttribute("type","button"),a.title=o,a.appendChild(this.label_),a.addEventListener(r.Z.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+s.XV+" "+s.hg,h=this.element;h.className=l,h.appendChild(a),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(s.oj)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:o.Vv}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const t="rotate("+i+"rad)";if(this.autoHide_){const t=this.element.classList.contains(s.oj);t||0!==i?t&&0!==i&&this.element.classList.remove(s.oj):this.element.classList.add(s.oj)}this.label_.style.transform=t}this.rotation_=i}}const l=a},7231:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(1339),r=i(1971),s=i(2913),o=i(3816);class a extends n.Z{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",i=void 0!==t.delta?t.delta:1,n=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",o=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",a=void 0!==t.zoomInLabel?t.zoomInLabel:"+",l=void 0!==t.zoomOutLabel?t.zoomOutLabel:"\u2013",h=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",c=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=n,u.setAttribute("type","button"),u.title=h,u.appendChild("string"==typeof a?document.createTextNode(a):a),u.addEventListener(r.Z.CLICK,this.handleClick_.bind(this,i),!1);const d=document.createElement("button");d.className=o,d.setAttribute("type","button"),d.title=c,d.appendChild("string"==typeof l?document.createTextNode(l):l),d.addEventListener(r.Z.CLICK,this.handleClick_.bind(this,-i),!1);const p=e+" "+s.XV+" "+s.hg,f=this.element;f.className=p,f.appendChild(u),f.appendChild(d),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const i=e.getZoom();if(void 0!==i){const n=e.getConstrainedZoom(i+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:n,duration:this.duration_,easing:o.Vv})):e.setZoom(n)}}}const l=a},7609:(t,e,i)=>{"use strict";i.d(e,{c:()=>a});var n=i(9636),r=i(390),s=i(4297),o=i(7231);function a(t){t=t||{};const e=new r.Z;(void 0===t.zoom||t.zoom)&&e.push(new o.Z(t.zoomOptions));(void 0===t.rotate||t.rotate)&&e.push(new s.Z(t.rotateOptions));return(void 0===t.attribution||t.attribution)&&e.push(new n.Z(t.attributionOptions)),e}},6973:(t,e,i)=>{"use strict";i.d(e,{Bs:()=>g,Cf:()=>m,Ed:()=>a,I8:()=>h,IH:()=>o,TE:()=>f,U1:()=>u,bA:()=>d,bI:()=>p,fS:()=>c,jk:()=>_,oL:()=>l});var n=i(8300),r=i(4898),s=i(7365);function o(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function a(t,e){const i=e.getRadius(),n=e.getCenter(),r=n[0],s=n[1];let o=t[0]-r;const a=t[1]-s;0===o&&0===a&&(o=1);const l=Math.sqrt(o*o+a*a);return[r+i*o/l,s+i*a/l]}function l(t,e){const i=t[0],n=t[1],r=e[0],s=e[1],o=r[0],a=r[1],l=s[0],h=s[1],c=l-o,u=h-a,d=0===c&&0===u?0:(c*(i-o)+u*(n-a))/(c*c+u*u||0);let p,f;return d<=0?(p=o,f=a):d>=1?(p=l,f=h):(p=o+d*c,f=a+d*u),[p,f]}function h(t,e,i){const n=(0,r.$W)(e+180,360)-180,o=Math.abs(3600*n),a=i||0;let l=Math.floor(o/3600),h=Math.floor((o-3600*l)/60),c=(0,r.FH)(o-3600*l-60*h,a);c>=60&&(c=0,h+=1),h>=60&&(h=0,l+=1);let u=l+"\xb0";return 0===h&&0===c||(u+=" "+(0,s.v)(h,2)+"\u2032"),0!==c&&(u+=" "+(0,s.v)(c,2,a)+"\u2033"),0!==n&&(u+=" "+t.charAt(n<0?1:0)),u}function c(t,e){let i=!0;for(let n=t.length-1;n>=0;--n)if(t[n]!=e[n]){i=!1;break}return i}function u(t,e){const i=Math.cos(e),n=Math.sin(e),r=t[0]*i-t[1]*n,s=t[1]*i+t[0]*n;return t[0]=r,t[1]=s,t}function d(t,e){return t[0]*=e,t[1]*=e,t}function p(t,e){const i=t[0]-e[0],n=t[1]-e[1];return i*i+n*n}function f(t,e){return Math.sqrt(p(t,e))}function g(t,e){return p(t,l(t,e))}function m(t,e){if(e.canWrapX()){const i=(0,n.dz)(e.getExtent()),r=_(t,e,i);r&&(t[0]-=r*i)}return t}function _(t,e,i){const r=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(i=i||(0,n.dz)(r),s=Math.floor((t[0]-r[0])/i)),s}},2913:(t,e,i)=>{"use strict";i.d(e,{$A:()=>r,Qi:()=>o,XV:()=>s,hN:()=>l,hg:()=>a,oj:()=>n,p:()=>u});const n="ol-hidden",r="ol-selectable",s="ol-unselectable",o="ol-unsupported",a="ol-control",l="ol-collapsed",h=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),c=["style","variant","weight","size","lineHeight","family"],u=function(t){const e=t.match(h);if(!e)return null;const i={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,r=c.length;n<r;++n){const t=e[n+1];void 0!==t&&(i[c[n]]=t)}return i.families=i.family.split(/,\s?/),i}},3248:(t,e,i)=>{"use strict";i.d(e,{$H:()=>l,E4:()=>r,Pb:()=>a,ZF:()=>h,ep:()=>c,hF:()=>u,iO:()=>o,jy:()=>s});var n=i(4465);function r(t,e,i,r){let s;return s=i&&i.length?i.shift():n.Id?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(s.width=t),e&&(s.height=e),s.getContext("2d",r)}function s(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function o(t){let e=t.offsetWidth;const i=getComputedStyle(t);return e+=parseInt(i.marginLeft,10)+parseInt(i.marginRight,10),e}function a(t){let e=t.offsetHeight;const i=getComputedStyle(t);return e+=parseInt(i.marginTop,10)+parseInt(i.marginBottom,10),e}function l(t,e){const i=e.parentNode;i&&i.replaceChild(t,e)}function h(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function c(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function u(t,e){const i=t.childNodes;for(let n=0;;++n){const r=i[n],s=e[n];if(!r&&!s)break;r!==s&&(r?s?t.insertBefore(s,r):(t.removeChild(r),--n):t.appendChild(s))}}},3816:(t,e,i)=>{"use strict";function n(t){return Math.pow(t,3)}function r(t){return 1-n(1-t)}function s(t){return 3*t*t-2*t*t*t}function o(t){return t}i.d(e,{GE:()=>o,Vv:()=>r,YQ:()=>n,rd:()=>s})},9640:(t,e,i)=>{"use strict";i.d(e,{Vx:()=>s,bN:()=>o,oL:()=>r});var n=i(3878);function r(t,e,i,n,r){if(n&&n!==t&&(i=i.bind(n)),r){const n=i;i=function(){t.removeEventListener(e,i),n.apply(this,arguments)}}const s={target:t,type:e,listener:i};return t.addEventListener(e,i),s}function s(t,e,i,n){return r(t,e,i,n,!0)}function o(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,n.Z)(t))}},8685:(t,e,i)=>{"use strict";i.d(e,{UW:()=>n,ZP:()=>r});function n(t){t.stopPropagation()}const r=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},1971:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},1135:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(6175),r=i(8685),s=i(3556),o=i(3878);class a extends n.Z{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e="string"==typeof t,i=e?t:t.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const o=e?new r.ZP(t):t;o.target||(o.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});let h;i in a||(a[i]=0,l[i]=0),++a[i];for(let r=0,s=n.length;r<s;++r)if(h="handleEvent"in n[r]?n[r].handleEvent(o):n[r].call(this,o),!1===h||o.propagationStopped){h=!1;break}if(0==--a[i]){let t=l[i];for(delete l[i];t--;)this.removeEventListener(i,s.Zn);delete a[i]}return h}disposeInternal(){this.listeners_&&(0,o.Z)(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){const i=this.listeners_&&this.listeners_[t];if(i){const n=i.indexOf(e);-1!==n&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=s.Zn,++this.pendingRemovals_[t]):(i.splice(n,1),0===i.length&&delete this.listeners_[t]))}}}const l=a},6660:(t,e,i)=>{"use strict";i.r(e),i.d(e,{all:()=>a,altKeyOnly:()=>l,altShiftKeysOnly:()=>h,always:()=>d,click:()=>p,doubleClick:()=>y,focus:()=>c,focusWithTabindex:()=>u,mouseActionButton:()=>f,mouseOnly:()=>w,never:()=>g,noModifierKeys:()=>v,penOnly:()=>S,platformModifierKeyOnly:()=>x,pointerMove:()=>m,primaryAction:()=>T,shiftKeyOnly:()=>b,singleClick:()=>_,targetNotEditable:()=>E,touchOnly:()=>C});var n=i(8527),r=i(3556),s=i(4465),o=i(9141);function a(t){const e=arguments;return function(t){let i=!0;for(let n=0,r=e.length;n<r&&(i=i&&e[n](t),i);++n);return i}}const l=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},h=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},c=function(t){const e=t.map.getTargetElement(),i=t.map.getOwnerDocument().activeElement;return e.contains(i)},u=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||c(t)},d=r.uX,p=function(t){return t.type==n.Z.CLICK},f=function(t){const e=t.originalEvent;return 0==e.button&&!(s.G$&&s.tK&&e.ctrlKey)},g=r.Dv,m=function(t){return"pointermove"==t.type},_=function(t){return t.type==n.Z.SINGLECLICK},y=function(t){return t.type==n.Z.DBLCLICK},v=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},x=function(t){const e=t.originalEvent;return!e.altKey&&(s.tK?e.metaKey:e.ctrlKey)&&!e.shiftKey},b=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},E=function(t){const e=t.originalEvent,i=e.target.tagName;return"INPUT"!==i&&"SELECT"!==i&&"TEXTAREA"!==i&&!e.target.isContentEditable},w=function(t){const e=t.originalEvent;return(0,o.h)(void 0!==e,56),"mouse"==e.pointerType},C=function(t){const e=t.originalEvent;return(0,o.h)(void 0!==e,56),"touch"===e.pointerType},S=function(t){const e=t.originalEvent;return(0,o.h)(void 0!==e,56),"pen"===e.pointerType},T=function(t){const e=t.originalEvent;return(0,o.h)(void 0!==e,56),e.isPrimary&&0===e.button}},8300:(t,e,i)=>{"use strict";i.d(e,{Cf:()=>U,Cr:()=>A,EO:()=>j,Ed:()=>k,GN:()=>_,H6:()=>C,H9:()=>z,HK:()=>m,I7:()=>G,MV:()=>V,Ne:()=>B,T9:()=>f,Wj:()=>b,Xv:()=>N,YN:()=>g,b8:()=>h,bg:()=>S,d9:()=>a,dY:()=>L,dz:()=>F,f3:()=>o,fS:()=>y,g0:()=>I,hC:()=>T,hI:()=>s,iW:()=>v,jE:()=>u,kK:()=>D,l7:()=>x,lJ:()=>p,p8:()=>P,pX:()=>d,qP:()=>E,qf:()=>l,qg:()=>M,r4:()=>c,rL:()=>O,w$:()=>R,xb:()=>Z});var n=i(7543),r=i(9141);function s(t){const e=p();for(let i=0,n=t.length;i<n;++i)b(e,t[i]);return e}function o(t,e,i){return i?(i[0]=t[0]-e,i[1]=t[1]-e,i[2]=t[2]+e,i[3]=t[3]+e,i):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function a(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function l(t,e,i){let n,r;return n=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=i<t[1]?t[1]-i:t[3]<i?i-t[3]:0,n*n+r*r}function h(t,e){return u(t,e[0],e[1])}function c(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function u(t,e,i){return t[0]<=e&&e<=t[2]&&t[1]<=i&&i<=t[3]}function d(t,e){const i=t[0],r=t[1],s=t[2],o=t[3],a=e[0],l=e[1];let h=n.Z.UNKNOWN;return a<i?h|=n.Z.LEFT:a>s&&(h|=n.Z.RIGHT),l<r?h|=n.Z.BELOW:l>o&&(h|=n.Z.ABOVE),h===n.Z.UNKNOWN&&(h=n.Z.INTERSECTING),h}function p(){return[1/0,1/0,-1/0,-1/0]}function f(t,e,i,n,r){return r?(r[0]=t,r[1]=e,r[2]=i,r[3]=n,r):[t,e,i,n]}function g(t){return f(1/0,1/0,-1/0,-1/0,t)}function m(t,e){const i=t[0],n=t[1];return f(i,n,i,n,e)}function _(t,e,i,n,r){return E(g(r),t,e,i,n)}function y(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function v(t,e,i){return Math.abs(t[0]-e[0])<i&&Math.abs(t[2]-e[2])<i&&Math.abs(t[1]-e[1])<i&&Math.abs(t[3]-e[3])<i}function x(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function b(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function E(t,e,i,n,r){for(;i<n;i+=r)w(t,e[i],e[i+1]);return t}function w(t,e,i){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],i),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],i)}function C(t,e){let i;return i=e(T(t)),i||(i=e(R(t)),i||(i=e(N(t)),i||(i=e(O(t)),i||!1)))}function S(t){let e=0;return Z(t)||(e=F(t)*A(t)),e}function T(t){return[t[0],t[1]]}function R(t){return[t[2],t[1]]}function M(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function I(t,e){let i;return"bottom-left"===e?i=T(t):"bottom-right"===e?i=R(t):"top-left"===e?i=O(t):"top-right"===e?i=N(t):(0,r.h)(!1,13),i}function P(t,e,i,n,r){const[s,o,a,l,h,c,u,d]=L(t,e,i,n);return f(Math.min(s,a,h,u),Math.min(o,l,c,d),Math.max(s,a,h,u),Math.max(o,l,c,d),r)}function L(t,e,i,n){const r=e*n[0]/2,s=e*n[1]/2,o=Math.cos(i),a=Math.sin(i),l=r*o,h=r*a,c=s*o,u=s*a,d=t[0],p=t[1];return[d-l+u,p-h-c,d-l-u,p-h+c,d+l-u,p+h+c,d+l+u,p+h-c,d-l+u,p-h-c]}function A(t){return t[3]-t[1]}function k(t,e,i){const n=i||[1/0,1/0,-1/0,-1/0];return D(t,e)?(t[0]>e[0]?n[0]=t[0]:n[0]=e[0],t[1]>e[1]?n[1]=t[1]:n[1]=e[1],t[2]<e[2]?n[2]=t[2]:n[2]=e[2],t[3]<e[3]?n[3]=t[3]:n[3]=e[3]):g(n),n}function O(t){return[t[0],t[3]]}function N(t){return[t[2],t[3]]}function F(t){return t[2]-t[0]}function D(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function Z(t){return t[2]<t[0]||t[3]<t[1]}function j(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function z(t,e){const i=(t[2]-t[0])/2*(e-1),n=(t[3]-t[1])/2*(e-1);t[0]-=i,t[2]+=i,t[1]-=n,t[3]+=n}function G(t,e,i){let r=!1;const s=d(t,e),o=d(t,i);if(s===n.Z.INTERSECTING||o===n.Z.INTERSECTING)r=!0;else{const a=t[0],l=t[1],h=t[2],c=t[3],u=e[0],d=e[1],p=i[0],f=i[1],g=(f-d)/(p-u);let m,_;o&n.Z.ABOVE&&!(s&n.Z.ABOVE)&&(m=p-(f-c)/g,r=m>=a&&m<=h),r||!(o&n.Z.RIGHT)||s&n.Z.RIGHT||(_=f-(p-h)*g,r=_>=l&&_<=c),r||!(o&n.Z.BELOW)||s&n.Z.BELOW||(m=p-(f-l)/g,r=m>=a&&m<=h),r||!(o&n.Z.LEFT)||s&n.Z.LEFT||(_=f-(p-a)*g,r=_>=l&&_<=c)}return r}function B(t,e,i,n){if(Z(t))return g(i);let r=[];if(n>1){const e=t[2]-t[0],i=t[3]-t[1];for(let s=0;s<n;++s)r.push(t[0]+e*s/n,t[1],t[2],t[1]+i*s/n,t[2]-e*s/n,t[3],t[0],t[3]-i*s/n)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return function(t,e,i){return f(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),i)}(s,o,i)}function U(t,e){const i=e.getExtent(),n=M(t);if(e.canWrapX()&&(n[0]<i[0]||n[0]>=i[2])){const e=F(i),r=Math.floor((n[0]-i[0])/e)*e;t[0]-=r,t[2]-=r}return t}function V(t,e){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];U(t,e);const n=F(i);if(F(t)>n)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+n,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-n,t[3]]]}return[t]}},7543:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},5275:(t,e,i)=>{"use strict";i.d(e,{Be:()=>o,ov:()=>s});var n=i(3556);let r=!1;function s(t,e,i,n,s,o,a){const l=new XMLHttpRequest;l.open("GET","function"==typeof t?t(i,n,s):t,!0),"arraybuffer"==e.getType()&&(l.responseType="arraybuffer"),l.withCredentials=r,l.onload=function(t){if(!l.status||l.status>=200&&l.status<300){const t=e.getType();let n;"json"==t||"text"==t?n=l.responseText:"xml"==t?(n=l.responseXML,n||(n=(new DOMParser).parseFromString(l.responseText,"application/xml"))):"arraybuffer"==t&&(n=l.response),n?o(e.readFeatures(n,{extent:i,featureProjection:s}),e.readProjection(n)):a()}else a()},l.onerror=a,l.send()}function o(t,e){return function(i,r,o,a,l){const h=this;s(t,e,i,r,o,(function(t,e){h.addFeatures(t),void 0!==a&&a(t)}),l||n.Zn)}}},9184:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>s,fI:()=>o});var n=i(3039),r=i(7533);const s=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?(0,r.get)(e.dataProjection):this.readProjection(t);e.extent&&i&&"tile-pixels"===i.getUnits()&&(i=(0,r.get)(i),i.setWorldExtent(e.extent)),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection},t)}getType(){return(0,n.O3)()}readFeature(t,e){return(0,n.O3)()}readFeatures(t,e){return(0,n.O3)()}readGeometry(t,e){return(0,n.O3)()}readProjection(t){return(0,n.O3)()}writeFeature(t,e){return(0,n.O3)()}writeFeatures(t,e){return(0,n.O3)()}writeGeometry(t,e){return(0,n.O3)()}};function o(t,e,i){const n=i?(0,r.get)(i.featureProjection):null,s=i?(0,r.get)(i.dataProjection):null;let o;if(o=n&&s&&!(0,r.equivalent)(n,s)?(e?t.clone():t).transform(e?n:s,e?s:n):t,e&&i&&void 0!==i.decimals){const e=Math.pow(10,i.decimals),n=function(t){for(let i=0,n=t.length;i<n;++i)t[i]=Math.round(t[i]*e)/e;return t};o===t&&(o=t.clone()),o.applyTransform(n)}return o}},7573:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>b});var n=i(5983),r=i(955),s=i(9184),o=i(3039);class a extends s.ZP{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(l(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(l(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return(0,o.O3)()}readFeaturesFromObject(t,e){return(0,o.O3)()}readGeometry(t,e){return this.readGeometryFromObject(l(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return(0,o.O3)()}readProjection(t){return this.readProjectionFromObject(l(t))}readProjectionFromObject(t){return(0,o.O3)()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return(0,o.O3)()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return(0,o.O3)()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return(0,o.O3)()}}function l(t){if("string"==typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}const h=a;var c=i(9583),u=i(832),d=i(8237),p=i(1637),f=i(6665),g=i(4746),m=i(9141),_=i(7533),y=i(3878);function v(t,e){if(!t)return null;let i;switch(t.type){case"Point":i=function(t){return new f.Z(t.coordinates)}(t);break;case"LineString":i=function(t){return new c.Z(t.coordinates)}(t);break;case"Polygon":i=function(t){return new g.ZP(t.coordinates)}(t);break;case"MultiPoint":i=function(t){return new d.Z(t.coordinates)}(t);break;case"MultiLineString":i=function(t){return new u.Z(t.coordinates)}(t);break;case"MultiPolygon":i=function(t){return new p.Z(t.coordinates)}(t);break;case"GeometryCollection":i=function(t,e){const i=t.geometries.map((function(t){return v(t,e)}));return new r.Z(i)}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return(0,s.fI)(i,!1,e)}function x(t,e){const i=(t=(0,s.fI)(t,!0,e)).getType();let n;switch(i){case"Point":n=function(t,e){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":n=function(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":n=function(t,e){let i;e&&(i=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(i)}}(t,e);break;case"MultiPoint":n=function(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":n=function(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":n=function(t,e){let i;e&&(i=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(i)}}(t,e);break;case"GeometryCollection":n=function(t,e){e=Object.assign({},e),delete e.featureProjection;const i=t.getGeometriesArray().map((function(t){return x(t,e)}));return{type:"GeometryCollection",geometries:i}}(t,e);break;case"Circle":n={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+i)}return n}const b=class extends h{constructor(t){t=t||{},super(),this.dataProjection=(0,_.get)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=(0,_.get)(t.featureProjection)),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null;i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const r=v(i.geometry,e),s=new n.default;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in i!==void 0&&s.setGeometryName(i.geometry_name),s.setGeometry(r),"id"in i&&s.setId(i.id),i.properties&&s.setProperties(i.properties,!0),s}readFeaturesFromObject(t,e){let i=null;if("FeatureCollection"===t.type){i=[];const n=t.features;for(let t=0,r=n.length;t<r;++t)i.push(this.readFeatureFromObject(n[t],e))}else i=[this.readFeatureFromObject(t,e)];return i}readGeometryFromObject(t,e){return v(t,e)}readProjectionFromObject(t){const e=t.crs;let i;return e?"name"==e.type?i=(0,_.get)(e.properties.name):"EPSG"===e.type?i=(0,_.get)("EPSG:"+e.properties.code):(0,m.h)(!1,36):i=this.dataProjection,i}writeFeatureObject(t,e){e=this.adaptOptions(e);const i={type:"Feature",geometry:null,properties:null},n=t.getId();if(void 0!==n&&(i.id=n),!t.hasProperties())return i;const r=t.getProperties(),s=t.getGeometry();return s&&(i.geometry=x(s,e),delete r[t.getGeometryName()]),(0,y.x)(r)||(i.properties=r),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);const i=[];for(let n=0,r=t.length;n<r;++n)i.push(this.writeFeatureObject(t[n],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return x(t,this.adaptOptions(e))}}},3556:(t,e,i)=>{"use strict";i.d(e,{Dv:()=>s,Vi:()=>l,Zn:()=>o,qe:()=>a,uX:()=>r});var n=i(7794);function r(){return!0}function s(){return!1}function o(){}function a(t){let e,i,r,s=!1;return function(){const o=Array.prototype.slice.call(arguments);return s&&this===r&&(0,n.fS)(o,i)||(s=!0,r=this,i=o,e=t.apply(this,arguments)),e}}function l(t){return function(){let e;try{e=t()}catch(i){return Promise.reject(i)}return e instanceof Promise?e:Promise.resolve(e)}()}},4811:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Circle:()=>n.default,Geometry:()=>r.Z,GeometryCollection:()=>s.Z,LineString:()=>a.Z,LinearRing:()=>o.Z,MultiLineString:()=>l.Z,MultiPoint:()=>h.Z,MultiPolygon:()=>c.Z,Point:()=>u.Z,Polygon:()=>d.ZP,SimpleGeometry:()=>p.ZP});var n=i(3384),r=i(6046),s=i(955),o=i(9503),a=i(9583),l=i(832),h=i(8237),c=i(1637),u=i(6665),d=i(4746),p=i(2682)},3384:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>l});var n=i(2682),r=i(8300),s=i(5207),o=i(1420);class a extends n.ZP{constructor(t,e,i){super(),void 0!==i&&void 0===e?this.setFlatCoordinates(i,t):(e=e||0,this.setCenterAndRadius(t,e,i))}clone(){const t=new a(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const r=this.flatCoordinates,s=t-r[0],o=e-r[1],a=s*s+o*o;if(a<n){if(0===a)for(let t=0;t<this.stride;++t)i[t]=r[t];else{const t=this.getRadius()/Math.sqrt(a);i[0]=r[0]+t*s,i[1]=r[1]+t*o;for(let e=2;e<this.stride;++e)i[e]=r[e]}return i.length=this.stride,a}return n}containsXY(t,e){const i=this.flatCoordinates,n=t-i[0],r=e-i[1];return n*n+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,i=e[this.stride]-e[0];return(0,r.T9)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if((0,r.kK)(t,e)){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||(0,r.H6)(t,this.intersectsCoordinate.bind(this)))}return!1}setCenter(t){const e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(let r=1;r<e;++r)n[e+r]=t[r];this.setFlatCoordinates(this.layout,n),this.changed()}setCenterAndRadius(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const n=this.flatCoordinates;let r=(0,s.IG)(n,0,t,this.stride);n[r++]=n[0]+e;for(let s=1,o=this.stride;s<o;++s)n[r++]=n[s];n.length=r,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const i=this.getCenter(),n=this.getStride();this.setCenter((0,o.U1)(i,0,i.length,n,t,e,i)),this.changed()}}a.prototype.transform;const l=a},6046:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(9520),r=i(3039),s=i(5034),o=i(8300),a=i(7533),l=i(3556),h=i(1420);const c=(0,s.Ue)();class u extends n.Z{constructor(){super(),this.extent_=(0,o.lJ)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,l.qe)((function(t,e,i){if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return(0,r.O3)()}closestPointXY(t,e,i,n){return(0,r.O3)()}containsXY(t,e){const i=this.getClosestPoint([t,e]);return i[0]===t&&i[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return(0,r.O3)()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&(0,o.YN)(t),this.extentRevision_=this.getRevision()}return(0,o.EO)(this.extent_,t)}rotate(t,e){(0,r.O3)()}scale(t,e,i){(0,r.O3)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return(0,r.O3)()}getType(){return(0,r.O3)()}applyTransform(t){(0,r.O3)()}intersectsExtent(t){return(0,r.O3)()}translate(t,e){(0,r.O3)()}transform(t,e){const i=(0,a.get)(t),n="tile-pixels"==i.getUnits()?function(t,n,r){const l=i.getExtent(),u=i.getWorldExtent(),d=(0,o.Cr)(u)/(0,o.Cr)(l);return(0,s.qC)(c,u[0],u[3],d,-d,0,0,0),(0,h.vT)(t,0,t.length,r,c,n),(0,a.getTransform)(i,e)(t,n,r)}:(0,a.getTransform)(i,e);return this.applyTransform(n),this}}const d=u},955:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(1971),r=i(6046),s=i(8300),o=i(9640);class a extends r.Z{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(o.bN),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push((0,o.oL)(this.geometries_[t],n.Z.CHANGE,this.changed,this))}clone(){const t=new a(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<(0,s.qf)(this.getExtent(),t,e))return n;const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)n=r[s].closestPointXY(t,e,i,n);return n}containsXY(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)if(i[n].containsXY(t,e))return!0;return!1}computeExtent(t){(0,s.YN)(t);const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)(0,s.l7)(t,e[i].getExtent());return t}getGeometries(){return l(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],i=this.geometries_;let n=!1;for(let r=0,s=i.length;r<s;++r){const s=i[r],o=s.getSimplifiedGeometry(t);e.push(o),o!==s&&(n=!0)}if(n){const t=new a(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].rotate(t,e);this.changed()}scale(t,e,i){i||(i=(0,s.qg)(this.getExtent()));const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(l(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let i=0,n=e.length;i<n;++i)e[i].applyTransform(t);this.changed()}translate(t,e){const i=this.geometries_;for(let n=0,r=i.length;n<r;++n)i[n].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function l(t){const e=[];for(let i=0,n=t.length;i<n;++i)e.push(t[i].clone());return e}const h=a},9583:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var n=i(2682),r=i(822),s=i(8300),o=i(5207),a=i(9082),l=i(7794),h=i(1858),c=i(2203),u=i(1654),d=i(2688),p=i(3434);class f extends n.ZP{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){this.flatCoordinates?(0,l.l7)(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()}clone(){const t=new f(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<(0,s.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))}forEachSegment(t){return(0,h.E)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,(0,u.iJ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return(0,c.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return(0,u.WW)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return(0,p.W)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,a.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new f(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return(0,d.Kz)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}const g=f},9503:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(2682),r=i(822),s=i(8300),o=i(5207),a=i(9082),l=i(2203),h=i(305);class c extends n.ZP{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new c(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<(0,s.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,r.Bv)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,r.H$)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return(0,h.QQ)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,l.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,a.dt)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new c(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}const u=c},832:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n=i(9583),r=i(2682),s=i(822),o=i(8300),a=i(5207),l=i(9082),h=i(7794),c=i(2203),u=i(1654),d=i(2688);class p extends r.ZP{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let e=this.getLayout();const i=t,n=[],r=[];for(let t=0,s=i.length;t<s;++t){const s=i[t];0===t&&(e=s.getLayout()),(0,h.l7)(n,s.getFlatCoordinates()),r.push(n.length)}this.setFlatCoordinates(e,n),this.ends_=r}}appendLineString(t){this.flatCoordinates?(0,h.l7)(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new p(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<(0,o.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,s.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,s.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))}getCoordinateAtM(t,e,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,i=void 0!==i&&i,(0,u.dG)(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return(0,c.o1)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new n.Z(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,i=this.layout,r=[];let s=0;for(let o=0,a=e.length;o<a;++o){const a=e[o],l=new n.Z(t.slice(s,a),i);r.push(l),s=a}return r}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let i=0;const n=this.ends_,r=this.stride;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=(0,u.WW)(e,i,o,r,.5);(0,h.l7)(t,a),i=o}return t}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,l.UJ)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new p(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return(0,d.AW)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,a._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const f=p},8237:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(6665),r=i(2682),s=i(8300),o=i(5207),a=i(7794),l=i(2203),h=i(4898);class c extends r.ZP{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){this.flatCoordinates?(0,a.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()}clone(){const t=new c(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){if(n<(0,s.qf)(this.getExtent(),t,e))return n;const r=this.flatCoordinates,o=this.stride;for(let s=0,a=r.length;s<a;s+=o){const a=(0,h.bI)(t,e,r[s],r[s+1]);if(a<n){n=a;for(let t=0;t<o;++t)i[t]=r[s+t];i.length=o}}return n}getCoordinates(){return(0,l.Ml)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new n.Z(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,i=this.stride,r=[];for(let s=0,o=t.length;s<o;s+=i){const o=new n.Z(t.slice(s,s+i),e);r.push(o)}return r}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,i=this.stride;for(let n=0,r=e.length;n<r;n+=i){const i=e[n],r=e[n+1];if((0,s.jE)(t,i,r))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o.Sg)(this.flatCoordinates,0,t,this.stride),this.changed()}}const u=c},1637:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n=i(8237),r=i(4746),s=i(2682),o=i(822),a=i(8300),l=i(5207),h=i(7794),c=i(2691),u=i(2203),d=i(2688),p=i(204),f=i(305),g=i(1046),m=i(2659),_=i(9082);class y extends s.ZP{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let n=this.getLayout();const r=t,s=[],o=[];for(let t=0,e=r.length;t<e;++t){const e=r[t];0===t&&(n=e.getLayout());const i=s.length,a=e.getEnds();for(let t=0,n=a.length;t<n;++t)a[t]+=i;(0,h.l7)(s,e.getFlatCoordinates()),o.push(a)}e=n,t=s,i=o}void 0!==e&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const i=this.flatCoordinates.length;(0,h.l7)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,n=e.length;t<n;++t)e[t]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let n=0;n<t;++n)e[n]=this.endss_[n].slice();const i=new y(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,n){return n<(0,a.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.sD)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.gI)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return(0,m.Zl)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,f.Eu)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,p.dL)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,u.ug)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=(0,g.E)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,c.U)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new n.Z(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,p.Oj)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,p.dL)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,_.Pp)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new y(e,"XY",i)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const i=this.endss_[t-1];e=i[i.length-1]}const i=this.endss_[t].slice(),n=i[i.length-1];if(0!==e)for(let r=0,s=i.length;r<s;++r)i[r]-=e;return new r.ZP(this.flatCoordinates.slice(e,n),this.layout,i)}getPolygons(){const t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[];let s=0;for(let o=0,a=i.length;o<a;++o){const a=i[o].slice(),l=a[a.length-1];if(0!==s)for(let t=0,e=a.length;t<e;++t)a[t]-=s;const h=new r.ZP(e.slice(s,l),t,a);n.push(h),s=l}return n}getType(){return"MultiPolygon"}intersectsExtent(t){return(0,d.oW)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,l.QT)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{const t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}const v=y},6665:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(2682),r=i(8300),s=i(5207),o=i(4898);class a extends n.ZP{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new a(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const r=this.flatCoordinates,s=(0,o.bI)(t,e,r[0],r[1]);if(s<n){const t=this.stride;for(let e=0;e<t;++e)i[e]=r[e];return i.length=t,s}return n}getCoordinates(){return this.flatCoordinates?this.flatCoordinates.slice():[]}computeExtent(t){return(0,r.HK)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return(0,r.jE)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.IG)(this.flatCoordinates,0,t,this.stride),this.changed()}}const l=a},4746:(t,e,i)=>{"use strict";i.d(e,{Bb:()=>b,Ej:()=>E,ZP:()=>v,oJ:()=>x});var n=i(9503),r=i(6665),s=i(2682),o=i(822),a=i(8300),l=i(5207),h=i(7794),c=i(2691),u=i(2203),d=i(2688),p=i(204),f=i(305),g=i(2659),m=i(4898),_=i(9082);class y extends s.ZP{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?(0,h.l7)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new y(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<(0,a.qf)(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.Af)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.Xl)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return(0,g.wY)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return(0,f.KP)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,p.zX)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,u.o1)(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,a.qg)(this.getExtent());this.flatInteriorPoint_=(0,c.X)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new r.Z(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new n.Z(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,r=[];let s=0;for(let o=0,a=i.length;o<a;++o){const a=i[o],l=new n.Z(e.slice(s,a),t);r.push(l),s=a}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,p.$v)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,p.zX)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=(0,_.Zh)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new y(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return(0,d.ac)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=(0,l._5)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}const v=y;function x(t){const e=t[0],i=t[1],n=t[2],r=t[3],s=[e,i,e,r,n,r,n,i,e,i];return new y(s,"XY",[s.length])}function b(t,e,i){e=e||32;const n=t.getStride(),r=t.getLayout(),s=t.getCenter(),o=n*(e+1),a=new Array(o);for(let c=0;c<o;c+=n){a[c]=0,a[c+1]=0;for(let t=2;t<n;t++)a[c+t]=s[t]}const l=[a.length],h=new y(a,r,l);return E(h,s,t.getRadius(),i),h}function E(t,e,i,n){const r=t.getFlatCoordinates(),s=t.getStride(),o=r.length/s-1,a=n||0;for(let l=0;l<=o;++l){const t=l*s,n=a+2*(0,m.$W)(l,o)*Math.PI/o;r[t]=e[0]+i*Math.cos(n),r[t+1]=e[1]+i*Math.sin(n)}t.changed()}},2682:(t,e,i)=>{"use strict";i.d(e,{Kr:()=>h,ZP:()=>c,tP:()=>l});var n=i(6046),r=i(3039),s=i(8300),o=i(1420);class a extends n.Z{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates=null}computeExtent(t){return(0,s.GN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return(0,r.O3)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=l(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){(0,r.O3)()}setLayout(t,e,i){let n;if(t)n=l(t);else{for(let t=0;t<i;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}n=e.length,t=function(t){let e;2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM");return e}(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();(0,o.U1)(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){void 0===e&&(e=t),i||(i=(0,s.qg)(this.getExtent()));const n=this.getFlatCoordinates();if(n){const r=this.getStride();(0,o.bA)(n,0,n.length,r,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();(0,o.Iu)(i,0,i.length,n,t,e,i),this.changed()}}}function l(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function h(t,e,i){const n=t.getFlatCoordinates();if(!n)return null;const r=t.getStride();return(0,o.vT)(n,0,n.length,r,e,i)}const c=a},305:(t,e,i)=>{"use strict";function n(t,e,i,n){let r=0,s=t[i-n],o=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];r+=o*i-s*n,s=i,o=n}return r/2}function r(t,e,i,r){let s=0;for(let o=0,a=i.length;o<a;++o){const a=i[o];s+=n(t,e,a,r),e=a}return s}function s(t,e,i,n){let s=0;for(let o=0,a=i.length;o<a;++o){const a=i[o];s+=r(t,e,a,n),e=a[a.length-1]}return s}i.d(e,{Eu:()=>s,KP:()=>r,QQ:()=>n})},1046:(t,e,i)=>{"use strict";i.d(e,{E:()=>r});var n=i(8300);function r(t,e,i,r){const s=[];let o=(0,n.lJ)();for(let a=0,l=i.length;a<l;++a){const l=i[a];o=(0,n.GN)(t,e,l[0],r),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return s}},822:(t,e,i)=>{"use strict";i.d(e,{Af:()=>o,Bv:()=>s,H$:()=>l,Xl:()=>h,gI:()=>c,sD:()=>a});var n=i(4898);function r(t,e,i,r,s,o,a){const l=t[e],h=t[e+1],c=t[i]-l,u=t[i+1]-h;let d;if(0===c&&0===u)d=e;else{const p=((s-l)*c+(o-h)*u)/(c*c+u*u);if(p>1)d=i;else{if(p>0){for(let s=0;s<r;++s)a[s]=(0,n.t7)(t[e+s],t[i+s],p);return void(a.length=r)}d=e}}for(let n=0;n<r;++n)a[n]=t[d+n];a.length=r}function s(t,e,i,r,s){let o=t[e],a=t[e+1];for(e+=r;e<i;e+=r){const i=t[e],r=t[e+1],l=(0,n.bI)(o,a,i,r);l>s&&(s=l),o=i,a=r}return s}function o(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o){const a=i[o];r=s(t,e,a,n,r),e=a}return r}function a(t,e,i,n,r){for(let s=0,a=i.length;s<a;++s){const a=i[s];r=o(t,e,a,n,r),e=a[a.length-1]}return r}function l(t,e,i,s,o,a,l,h,c,u,d){if(e==i)return u;let p,f;if(0===o){if(f=(0,n.bI)(l,h,t[e],t[e+1]),f<u){for(p=0;p<s;++p)c[p]=t[e+p];return c.length=s,f}return u}d=d||[NaN,NaN];let g=e+s;for(;g<i;)if(r(t,g-s,g,s,l,h,d),f=(0,n.bI)(l,h,d[0],d[1]),f<u){for(u=f,p=0;p<s;++p)c[p]=d[p];c.length=s,g+=s}else g+=s*Math.max((Math.sqrt(f)-Math.sqrt(u))/o|0,1);if(a&&(r(t,i-s,e,s,l,h,d),f=(0,n.bI)(l,h,d[0],d[1]),f<u)){for(u=f,p=0;p<s;++p)c[p]=d[p];c.length=s}return u}function h(t,e,i,n,r,s,o,a,h,c,u){u=u||[NaN,NaN];for(let d=0,p=i.length;d<p;++d){const p=i[d];c=l(t,e,p,n,r,s,o,a,h,c,u),e=p}return c}function c(t,e,i,n,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let d=0,p=i.length;d<p;++d){const p=i[d];c=h(t,e,p,n,r,s,o,a,l,c,u),e=p[p.length-1]}return c}},2659:(t,e,i)=>{"use strict";i.d(e,{TG:()=>s,Zl:()=>a,uG:()=>r,wY:()=>o});var n=i(8300);function r(t,e,i,r,o){return!(0,n.H6)(o,(function(n){return!s(t,e,i,r,n[0],n[1])}))}function s(t,e,i,n,r,s){let o=0,a=t[i-n],l=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];l<=s?n>s&&(i-a)*(s-l)-(r-a)*(n-l)>0&&o++:n<=s&&(i-a)*(s-l)-(r-a)*(n-l)<0&&o--,a=i,l=n}return 0!==o}function o(t,e,i,n,r,o){if(0===i.length)return!1;if(!s(t,e,i[0],n,r,o))return!1;for(let a=1,l=i.length;a<l;++a)if(s(t,i[a-1],i[a],n,r,o))return!1;return!0}function a(t,e,i,n,r,s){if(0===i.length)return!1;for(let a=0,l=i.length;a<l;++a){const l=i[a];if(o(t,e,l,n,r,s))return!0;e=l[l.length-1]}return!1}},5207:(t,e,i)=>{"use strict";function n(t,e,i,n){for(let r=0,s=i.length;r<s;++r)t[e++]=i[r];return e}function r(t,e,i,n){for(let r=0,s=i.length;r<s;++r){const s=i[r];for(let i=0;i<n;++i)t[e++]=s[i]}return e}function s(t,e,i,n,s){s=s||[];let o=0;for(let a=0,l=i.length;a<l;++a){const l=r(t,e,i[a],n);s[o++]=l,e=l}return s.length=o,s}function o(t,e,i,n,r){r=r||[];let o=0;for(let a=0,l=i.length;a<l;++a){const l=s(t,e,i[a],n,r[o]);0===l.length&&(l[0]=e),r[o++]=l,e=l[l.length-1]}return r.length=o,r}i.d(e,{IG:()=>n,QT:()=>o,Sg:()=>r,_5:()=>s})},2203:(t,e,i)=>{"use strict";function n(t,e,i,n,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<i;o+=n)r[s++]=t.slice(o,o+n);return r.length=s,r}function r(t,e,i,r,s){s=void 0!==s?s:[];let o=0;for(let a=0,l=i.length;a<l;++a){const l=i[a];s[o++]=n(t,e,l,r,s[o]),e=l}return s.length=o,s}function s(t,e,i,n,s){s=void 0!==s?s:[];let o=0;for(let a=0,l=i.length;a<l;++a){const l=i[a];s[o++]=1===l.length&&l[0]===e?[]:r(t,e,l,n,s[o]),e=l[l.length-1]}return s.length=o,s}i.d(e,{Ml:()=>n,o1:()=>r,ug:()=>s})},2691:(t,e,i)=>{"use strict";i.d(e,{U:()=>o,X:()=>s});var n=i(7794),r=i(2659);function s(t,e,i,s,o,a,l){let h,c,u,d,p,f,g;const m=o[a+1],_=[];for(let n=0,r=i.length;n<r;++n){const r=i[n];for(d=t[r-s],f=t[r-s+1],h=e;h<r;h+=s)p=t[h],g=t[h+1],(m<=f&&g<=m||f<=m&&m<=g)&&(u=(m-f)/(g-f)*(p-d)+d,_.push(u)),d=p,f=g}let y=NaN,v=-1/0;for(_.sort(n.j2),d=_[0],h=1,c=_.length;h<c;++h){p=_[h];const n=Math.abs(p-d);n>v&&(u=(d+p)/2,(0,r.wY)(t,e,i,s,u,m)&&(y=u,v=n)),d=p}return isNaN(y)&&(y=o[a]),l?(l.push(y,m,v),l):[y,m,v]}function o(t,e,i,n,r){let o=[];for(let a=0,l=i.length;a<l;++a){const l=i[a];o=s(t,e,l,n,r,2*a,o),e=l[l.length-1]}return o}},1654:(t,e,i)=>{"use strict";i.d(e,{WW:()=>s,dG:()=>a,iJ:()=>o});var n=i(7794),r=i(4898);function s(t,e,i,s,o,a,l){let h,c;const u=(i-e)/s;if(1===u)h=e;else if(2===u)h=e,c=o;else if(0!==u){let r=t[e],a=t[e+1],l=0;const u=[0];for(let n=e+s;n<i;n+=s){const e=t[n],i=t[n+1];l+=Math.sqrt((e-r)*(e-r)+(i-a)*(i-a)),u.push(l),r=e,a=i}const d=o*l,p=(0,n.ry)(u,d);p<0?(c=(d-u[-p-2])/(u[-p-1]-u[-p-2]),h=e+(-p-2)*s):h=e+p*s}l=l>1?l:2,a=a||new Array(l);for(let n=0;n<l;++n)a[n]=void 0===h?NaN:void 0===c?t[h+n]:(0,r.t7)(t[h+n],t[h+s+n],c);return a}function o(t,e,i,n,s,o){if(i==e)return null;let a;if(s<t[e+n-1])return o?(a=t.slice(e,e+n),a[n-1]=s,a):null;if(t[i-1]<s)return o?(a=t.slice(i-n,i),a[n-1]=s,a):null;if(s==t[e+n-1])return t.slice(e,e+n);let l=e/n,h=i/n;for(;l<h;){const e=l+h>>1;s<t[(e+1)*n-1]?h=e:l=e+1}const c=t[l*n-1];if(s==c)return t.slice((l-1)*n,(l-1)*n+n);const u=(s-c)/(t[(l+1)*n-1]-c);a=[];for(let d=0;d<n-1;++d)a.push((0,r.t7)(t[(l-1)*n+d],t[l*n+d],u));return a.push(s),a}function a(t,e,i,n,r,s,a){if(a)return o(t,e,i[i.length-1],n,r,s);let l;if(r<t[n-1])return s?(l=t.slice(0,n),l[n-1]=r,l):null;if(t[t.length-1]<r)return s?(l=t.slice(t.length-n),l[n-1]=r,l):null;for(let h=0,c=i.length;h<c;++h){const s=i[h];if(e!=s){if(r<t[e+n-1])return null;if(r<=t[s-1])return o(t,e,s,n,r,!1);e=s}}return null}},2688:(t,e,i)=>{"use strict";i.d(e,{AW:()=>a,Kz:()=>o,ac:()=>h,mV:()=>l,oW:()=>c});var n=i(8300),r=i(1858),s=i(2659);function o(t,e,i,s,o){const a=(0,n.qP)((0,n.lJ)(),t,e,i,s);return!!(0,n.kK)(o,a)&&(!!(0,n.r4)(o,a)||(a[0]>=o[0]&&a[2]<=o[2]||(a[1]>=o[1]&&a[3]<=o[3]||(0,r.E)(t,e,i,s,(function(t,e){return(0,n.I7)(o,t,e)})))))}function a(t,e,i,n,r){for(let s=0,a=i.length;s<a;++s){if(o(t,e,i[s],n,r))return!0;e=i[s]}return!1}function l(t,e,i,n,r){return!!o(t,e,i,n,r)||(!!(0,s.TG)(t,e,i,n,r[0],r[1])||(!!(0,s.TG)(t,e,i,n,r[0],r[3])||(!!(0,s.TG)(t,e,i,n,r[2],r[1])||!!(0,s.TG)(t,e,i,n,r[2],r[3]))))}function h(t,e,i,n,r){if(!l(t,e,i[0],n,r))return!1;if(1===i.length)return!0;for(let a=1,l=i.length;a<l;++a)if((0,s.uG)(t,i[a-1],i[a],n,r)&&!o(t,i[a-1],i[a],n,r))return!1;return!0}function c(t,e,i,n,r){for(let s=0,o=i.length;s<o;++s){const o=i[s];if(h(t,e,o,n,r))return!0;e=o[o.length-1]}return!1}},3434:(t,e,i)=>{"use strict";function n(t,e,i,n){let r=t[e],s=t[e+1],o=0;for(let a=e+n;a<i;a+=n){const e=t[a],i=t[a+1];o+=Math.sqrt((e-r)*(e-r)+(i-s)*(i-s)),r=e,s=i}return o}i.d(e,{W:()=>n})},204:(t,e,i)=>{"use strict";function n(t,e,i,n){for(;e<i-n;){for(let r=0;r<n;++r){const s=t[e+r];t[e+r]=t[i-n+r],t[i-n+r]=s}e+=n,i-=n}}function r(t,e,i,n){let r=0,s=t[i-n],o=t[i-n+1];for(;e<i;e+=n){const i=t[e],n=t[e+1];r+=(i-s)*(n+o),s=i,o=n}return 0===r?void 0:r>0}function s(t,e,i,n,s){s=void 0!==s&&s;for(let o=0,a=i.length;o<a;++o){const a=i[o],l=r(t,e,a,n);if(0===o){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function o(t,e,i,n,r){for(let o=0,a=i.length;o<a;++o){const a=i[o];if(!s(t,e,a,n,r))return!1;a.length&&(e=a[a.length-1])}return!0}function a(t,e,i,s,o){o=void 0!==o&&o;for(let a=0,l=i.length;a<l;++a){const l=i[a],h=r(t,e,l,s);(0===a?o&&h||!o&&!h:o&&!h||!o&&h)&&n(t,e,l,s),e=l}return e}function l(t,e,i,n,r){for(let s=0,o=i.length;s<o;++s)e=a(t,e,i[s],n,r);return e}function h(t,e){const i=[];let n=0,s=0;for(let o=0,a=e.length;o<a;++o){const a=e[o];if(r(t,n,a,2)){if(0===i.length)continue;i[i.length-1].push(e[s])}else i.push(e.slice(s,o+1));s=o+1,n=a}return i}i.d(e,{Q3:()=>h,$v:()=>s,Oj:()=>o,zX:()=>a,dL:()=>l})},1858:(t,e,i)=>{"use strict";function n(t,e,i,n,r){let s;for(e+=n;e<i;e+=n)if(s=r(t.slice(e-n,e),t.slice(e,e+n)),s)return s;return!1}i.d(e,{E:()=>n})},9082:(t,e,i)=>{"use strict";i.d(e,{Pp:()=>h,UJ:()=>s,Zh:()=>l,dt:()=>r,uZ:()=>o});var n=i(4898);function r(t,e,i,r,s,o,a){const l=(i-e)/r;if(l<3){for(;e<i;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}const h=new Array(l);h[0]=1,h[l-1]=1;const c=[e,i-r];let u=0;for(;c.length>0;){const i=c.pop(),o=c.pop();let a=0;const l=t[o],d=t[o+1],p=t[i],f=t[i+1];for(let e=o+r;e<i;e+=r){const i=t[e],r=t[e+1],s=(0,n.rU)(i,r,l,d,p,f);s>a&&(u=e,a=s)}a>s&&(h[(u-e)/r]=1,o+r<u&&c.push(o,u),u+r<i&&c.push(u,i))}for(let n=0;n<l;++n)h[n]&&(o[a++]=t[e+n*r],o[a++]=t[e+n*r+1]);return a}function s(t,e,i,n,s,o,a,l){for(let h=0,c=i.length;h<c;++h){const c=i[h];a=r(t,e,c,n,s,o,a),l.push(a),e=c}return a}function o(t,e){return e*Math.round(t/e)}function a(t,e,i,n,r,s,a){if(e==i)return a;let l,h,c=o(t[e],r),u=o(t[e+1],r);e+=n,s[a++]=c,s[a++]=u;do{if(l=o(t[e],r),h=o(t[e+1],r),(e+=n)==i)return s[a++]=l,s[a++]=h,a}while(l==c&&h==u);for(;e<i;){const i=o(t[e],r),d=o(t[e+1],r);if(e+=n,i==l&&d==h)continue;const p=l-c,f=h-u,g=i-c,m=d-u;p*m==f*g&&(p<0&&g<p||p==g||p>0&&g>p)&&(f<0&&m<f||f==m||f>0&&m>f)?(l=i,h=d):(s[a++]=l,s[a++]=h,c=l,u=h,l=i,h=d)}return s[a++]=l,s[a++]=h,a}function l(t,e,i,n,r,s,o,l){for(let h=0,c=i.length;h<c;++h){const c=i[h];o=a(t,e,c,n,r,s,o),l.push(o),e=c}return o}function h(t,e,i,n,r,s,o,a){for(let h=0,c=i.length;h<c;++h){const c=i[h],u=[];o=l(t,e,c,n,r,s,o,u),a.push(u),e=c[c.length-1]}return o}},1420:(t,e,i)=>{"use strict";function n(t,e,i,n,r,s){s=s||[];let o=0;for(let a=e;a<i;a+=n){const e=t[a],i=t[a+1];s[o++]=r[0]*e+r[2]*i+r[4],s[o++]=r[1]*e+r[3]*i+r[5]}return s&&s.length!=o&&(s.length=o),s}function r(t,e,i,n,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),h=s[0],c=s[1];let u=0;for(let d=e;d<i;d+=n){const e=t[d]-h,i=t[d+1]-c;o[u++]=h+e*a-i*l,o[u++]=c+e*l+i*a;for(let r=d+2;r<d+n;++r)o[u++]=t[r]}return o&&o.length!=u&&(o.length=u),o}function s(t,e,i,n,r,s,o,a){a=a||[];const l=o[0],h=o[1];let c=0;for(let u=e;u<i;u+=n){const e=t[u]-l,i=t[u+1]-h;a[c++]=l+r*e,a[c++]=h+s*i;for(let r=u+2;r<u+n;++r)a[c++]=t[r]}return a&&a.length!=c&&(a.length=c),a}function o(t,e,i,n,r,s,o){o=o||[];let a=0;for(let l=e;l<i;l+=n){o[a++]=t[l]+r,o[a++]=t[l+1]+s;for(let e=l+2;e<l+n;++e)o[a++]=t[e]}return o&&o.length!=a&&(o.length=a),o}i.d(e,{Iu:()=>o,U1:()=>r,bA:()=>s,vT:()=>n})},4465:(t,e,i)=>{"use strict";i.d(e,{G$:()=>o,Id:()=>h,ME:()=>s,MP:()=>l,Tp:()=>c,V:()=>r,bM:()=>u,tK:()=>a});const n="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",r=n.includes("firefox"),s=n.includes("safari")&&!n.includes("chrom")&&(n.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(n)),o=n.includes("webkit")&&!n.includes("edge"),a=n.includes("macintosh"),l="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,h="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,c="undefined"!=typeof Image&&Image.prototype.decode,u=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(e){}return t}()},9904:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DblClickDragZoom:()=>a,DoubleClickZoom:()=>n.Z,DragAndDrop:()=>m,DragBox:()=>_.Z,DragPan:()=>y.Z,DragRotate:()=>v.Z,DragRotateAndZoom:()=>w,DragZoom:()=>C.Z,Draw:()=>S.default,Extent:()=>G,Interaction:()=>r.ZP,KeyboardPan:()=>B.Z,KeyboardZoom:()=>U.Z,Link:()=>Y,Modify:()=>pt,MouseWheelZoom:()=>ft.Z,PinchRotate:()=>gt.Z,PinchZoom:()=>mt.Z,Pointer:()=>x.Z,Select:()=>Et,Snap:()=>Tt,Translate:()=>kt,defaults:()=>Ot.c});var n=i(970),r=i(6953),s=i(8527);class o extends r.ZP{constructor(t){const e=t||{};super(e),e.stopDown&&(this.stopDown=e.stopDown),this.scaleDeltaByPixel_=e.delta?e.delta:.01,this.duration_=void 0!==e.duration?e.duration:250,this.handlingDownUpSequence_=!1,this.handlingDoubleDownSequence_=!1,this.trackedPointers_={},this.targetPointers=[]}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence_){if(t.type==s.Z.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==s.Z.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence_=e}}else if(t.type==s.Z.POINTERDOWN)if(this.handlingDoubleDownSequence_){this.handlingDoubleDownSequence_=!1;const i=this.handleDownEvent(t);this.handlingDownUpSequence_=i,e=this.stopDown(i)}else e=this.stopDown(!1),this.waitForDblTap();return!e}handleDragEvent(t){let e=1;const i=this.targetPointers[0],n=this.down_.originalEvent,r=i.clientY-n.clientY;void 0!==this.lastDistance_&&(e=1-(this.lastDistance_-r)*this.scaleDeltaByPixel_),this.lastDistance_=r,1!=e&&(this.lastScaleDelta_=e);const s=t.map,o=s.getView();s.render(),o.adjustResolutionInternal(e)}handleDownEvent(t){if(1==this.targetPointers.length){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.down_=t,this.handlingDownUpSequence_||e.getView().beginInteraction(),!0}return!1}handleUpEvent(t){if(0==this.targetPointers.length){const e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),this.handlingDownUpSequence_=!1,this.handlingDoubleDownSequence_=!1,!1}return!0}stopDown(t){return t}updateTrackedPointers_(t){if(function(t){const e=t.type;return e===s.Z.POINTERDOWN||e===s.Z.POINTERDRAG||e===s.Z.POINTERUP}(t)){const e=t.originalEvent,i=e.pointerId.toString();t.type==s.Z.POINTERUP?delete this.trackedPointers_[i]:(t.type==s.Z.POINTERDOWN||i in this.trackedPointers_)&&(this.trackedPointers_[i]=e),this.targetPointers=Object.values(this.trackedPointers_)}}waitForDblTap(){void 0!==this.doubleTapTimeoutId_?(clearTimeout(this.doubleTapTimeoutId_),this.doubleTapTimeoutId_=void 0):(this.handlingDoubleDownSequence_=!0,this.doubleTapTimeoutId_=setTimeout(this.endInteraction.bind(this),250))}endInteraction(){this.handlingDoubleDownSequence_=!1,this.doubleTapTimeoutId_=void 0}}const a=o;var l=i(8685),h=i(1971),c=i(3556),u=i(7533),d=i(9640);const p="addfeatures";class f extends l.ZP{constructor(t,e,i,n){super(t),this.features=i,this.file=e,this.projection=n}}class g extends r.ZP{constructor(t){t=t||{},super({handleEvent:c.uX}),this.on,this.once,this.un,this.readAsBuffer_=!1,this.formats_=[];const e=t.formatConstructors?t.formatConstructors:[];for(let i=0,n=e.length;i<n;++i){let t=e[i];"function"==typeof t&&(t=new t),this.formats_.push(t),this.readAsBuffer_=this.readAsBuffer_||"arraybuffer"===t.getType()}this.projection_=t.projection?(0,u.get)(t.projection):null,this.dropListenKeys_=null,this.source_=t.source||null,this.target=t.target?t.target:null}handleResult_(t,e){const i=e.target.result,n=this.getMap();let r,s=this.projection_;if(!s&&(s=(0,u.getUserProjection)(),!s)){s=n.getView().getProjection()}const o=this.formats_;for(let a=0,l=o.length;a<l;++a){const e=o[a];let n=i;this.readAsBuffer_&&"arraybuffer"!==e.getType()&&(void 0===r&&(r=(new TextDecoder).decode(i)),n=r);const l=this.tryReadFeatures_(e,n,{featureProjection:s});if(l&&l.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(l)),this.dispatchEvent(new f(p,t,l,s));break}}}registerListeners_(){const t=this.getMap();if(t){const e=this.target?this.target:t.getViewport();this.dropListenKeys_=[(0,d.oL)(e,h.Z.DROP,this.handleDrop,this),(0,d.oL)(e,h.Z.DRAGENTER,this.handleStop,this),(0,d.oL)(e,h.Z.DRAGOVER,this.handleStop,this),(0,d.oL)(e,h.Z.DROP,this.handleStop,this)]}}setActive(t){!this.getActive()&&t&&this.registerListeners_(),this.getActive()&&!t&&this.unregisterListeners_(),super.setActive(t)}setMap(t){this.unregisterListeners_(),super.setMap(t),this.getActive()&&this.registerListeners_()}tryReadFeatures_(t,e,i){try{return t.readFeatures(e,i)}catch(n){return null}}unregisterListeners_(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(d.bN),this.dropListenKeys_=null)}handleDrop(t){const e=t.dataTransfer.files;for(let i=0,n=e.length;i<n;++i){const t=e.item(i),n=new FileReader;n.addEventListener(h.Z.LOAD,this.handleResult_.bind(this,t)),this.readAsBuffer_?n.readAsArrayBuffer(t):n.readAsText(t)}}handleStop(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}}const m=g;var _=i(9618),y=i(4204),v=i(7113),x=i(4306),b=i(6660);class E extends x.Z{constructor(t){super(t=t||{}),this.condition_=t.condition?t.condition:b.shiftKeyOnly,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==t.duration?t.duration:400}handleDragEvent(t){if(!(0,b.mouseOnly)(t))return;const e=t.map,i=e.getSize(),n=t.pixel,r=n[0]-i[0]/2,s=i[1]/2-n[1],o=Math.atan2(s,r),a=Math.sqrt(r*r+s*s),l=e.getView();if(void 0!==this.lastAngle_){const t=this.lastAngle_-o;l.adjustRotationInternal(t)}this.lastAngle_=o,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/a),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a),this.lastMagnitude_=a}handleUpEvent(t){if(!(0,b.mouseOnly)(t))return!0;const e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),this.lastScaleDelta_=0,!1}handleDownEvent(t){return!!(0,b.mouseOnly)(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}}const w=E;var C=i(34),S=i(1559),T=i(5983),R=i(6665),M=i(6927),I=i(6098),P=i(8300),L=i(6973),A=i(1359),k=i(4746);const O="extentchanged";class N extends l.ZP{constructor(t){super(O),this.extent=t}}class F extends x.Z{constructor(t){super(t=t||{}),this.on,this.once,this.un,this.condition_=t.condition?t.condition:b.always,this.extent_=null,this.pointerHandler_=null,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.extentFeature_=null,this.vertexFeature_=null,t||(t={}),this.extentOverlay_=new M.default({source:new I.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:D(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.vertexOverlay_=new M.default({source:new I.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:Z(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&this.setExtent(t.extent)}snapToVertex_(t,e){const i=e.getCoordinateFromPixelInternal(t),n=function(t,e){return(0,L.Bs)(i,t)-(0,L.Bs)(i,e)},r=this.getExtentInternal();if(r){const s=function(t){return[[[t[0],t[1]],[t[0],t[3]]],[[t[0],t[3]],[t[2],t[3]]],[[t[2],t[3]],[t[2],t[1]]],[[t[2],t[1]],[t[0],t[1]]]]}(r);s.sort(n);const o=s[0];let a=(0,L.oL)(i,o);const l=e.getPixelFromCoordinateInternal(a);if((0,L.TE)(t,l)<=this.pixelTolerance_){const t=e.getPixelFromCoordinateInternal(o[0]),i=e.getPixelFromCoordinateInternal(o[1]),n=(0,L.bI)(l,t),r=(0,L.bI)(l,i),s=Math.sqrt(Math.min(n,r));return this.snappedToVertex_=s<=this.pixelTolerance_,this.snappedToVertex_&&(a=n>r?o[1]:o[0]),a}}return null}handlePointerMove_(t){const e=t.pixel,i=t.map;let n=this.snapToVertex_(e,i);n||(n=i.getCoordinateFromPixelInternal(e)),this.createOrUpdatePointerFeature_(n)}createOrUpdateExtentFeature_(t){let e=this.extentFeature_;return e?t?e.setGeometry((0,k.oJ)(t)):e.setGeometry(void 0):(e=t?new T.default((0,k.oJ)(t)):new T.default({}),this.extentFeature_=e,this.extentOverlay_.getSource().addFeature(e)),e}createOrUpdatePointerFeature_(t){let e=this.vertexFeature_;if(e){e.getGeometry().setCoordinates(t)}else e=new T.default(new R.Z(t)),this.vertexFeature_=e,this.vertexOverlay_.getSource().addFeature(e);return e}handleEvent(t){return!t.originalEvent||!this.condition_(t)||(t.type!=s.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),super.handleEvent(t),!1)}handleDownEvent(t){const e=t.pixel,i=t.map,n=this.getExtentInternal();let r=this.snapToVertex_(e,i);const s=function(t){let e=null,i=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?i=n[3]:t[1]==n[3]&&(i=n[1]),null!==e&&null!==i?[e,i]:null};if(r&&n){const t=r[0]==n[0]||r[0]==n[2]?r[0]:null,e=r[1]==n[1]||r[1]==n[3]?r[1]:null;null!==t&&null!==e?this.pointerHandler_=j(s(r)):null!==t?this.pointerHandler_=z(s([t,n[1]]),s([t,n[3]])):null!==e&&(this.pointerHandler_=z(s([n[0],e]),s([n[2],e])))}else r=i.getCoordinateFromPixelInternal(e),this.setExtent([r[0],r[1],r[0],r[1]]),this.pointerHandler_=j(r);return!0}handleDragEvent(t){if(this.pointerHandler_){const e=t.coordinate;this.setExtent(this.pointerHandler_(e)),this.createOrUpdatePointerFeature_(e)}}handleUpEvent(t){this.pointerHandler_=null;const e=this.getExtentInternal();return e&&0!==(0,P.bg)(e)||this.setExtent(null),!1}setMap(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),super.setMap(t)}getExtent(){return(0,u.toUserExtent)(this.getExtentInternal(),this.getMap().getView().getProjection())}getExtentInternal(){return this.extent_}setExtent(t){this.extent_=t||null,this.createOrUpdateExtentFeature_(t),this.dispatchEvent(new N(this.extent_))}}function D(){const t=(0,A.createEditingStyle)();return function(e,i){return t.Polygon}}function Z(){const t=(0,A.createEditingStyle)();return function(e,i){return t.Point}}function j(t){return function(e){return(0,P.hI)([t,e])}}function z(t,e){return t[0]==e[0]?function(i){return(0,P.hI)([t,[i[0],e[1]]])}:t[1]==e[1]?function(i){return(0,P.hI)([t,[e[0],i[1]]])}:null}const G=F;var B=i(4145),U=i(4268),V=i(6844),q=i(4898);function W(t){return parseFloat(t)}function X(t){return function(t){return(0,q.FH)(t,5)}(t).toString()}function H(t,e){return!isNaN(t)&&t!==W(X(e))}class K extends r.ZP{constructor(t){let e;super(),e=!0===(t=Object.assign({animate:!0,params:["x","y","z","r","l"],replace:!1,prefix:""},t||{})).animate?{duration:250}:t.animate?t.animate:null,this.animationOptions_=e,this.params_=t.params.reduce(((t,e)=>(t[e]=!0,t)),{}),this.replace_=t.replace,this.prefix_=t.prefix,this.listenerKeys_=[],this.initial_=!0,this.updateState_=this.updateState_.bind(this)}getParamName_(t){return this.prefix_?this.prefix_+t:t}get_(t,e){return t.get(this.getParamName_(e))}set_(t,e,i){e in this.params_&&t.set(this.getParamName_(e),i)}delete_(t,e){e in this.params_&&t.delete(this.getParamName_(e))}setMap(t){const e=this.getMap();super.setMap(t),t!==e&&(e&&this.unregisterListeners_(e),t&&(this.initial_=!0,this.updateState_(),this.registerListeners_(t)))}registerListeners_(t){this.listenerKeys_.push((0,d.oL)(t,V.Z.MOVEEND,this.updateUrl_,this),(0,d.oL)(t.getLayerGroup(),h.Z.CHANGE,this.updateUrl_,this),(0,d.oL)(t,"change:layergroup",this.handleChangeLayerGroup_,this)),this.replace_||addEventListener("popstate",this.updateState_)}unregisterListeners_(t){for(let n=0,r=this.listenerKeys_.length;n<r;++n)(0,d.bN)(this.listenerKeys_[n]);this.listenerKeys_.length=0,this.replace_||removeEventListener("popstate",this.updateState_);const e=new URL(window.location.href),i=e.searchParams;this.delete_(i,"x"),this.delete_(i,"y"),this.delete_(i,"z"),this.delete_(i,"r"),this.delete_(i,"l"),window.history.replaceState(null,"",e)}handleChangeLayerGroup_(){const t=this.getMap();t&&(this.unregisterListeners_(t),this.registerListeners_(t),this.initial_=!0,this.updateUrl_())}updateState_(){const t=this.getMap();if(!t)return;const e=t.getView();if(!e)return;const i=new URL(window.location.href).searchParams;let n=!1;const r={},s=W(this.get_(i,"z"));"z"in this.params_&&H(s,e.getZoom())&&(n=!0,r.zoom=s);const o=W(this.get_(i,"r"));"r"in this.params_&&H(o,e.getRotation())&&(n=!0,r.rotation=o);const a=[W(this.get_(i,"x")),W(this.get_(i,"y"))];var l,h;("x"in this.params_||"y"in this.params_)&&(l=a,h=e.getCenter(),H(l[0],h[0])||H(l[1],h[1]))&&(n=!0,r.center=a),n&&(!this.initial_&&this.animationOptions_?e.animate(Object.assign(r,this.animationOptions_)):(r.center&&e.setCenter(r.center),"zoom"in r&&e.setZoom(r.zoom),"rotation"in r&&e.setRotation(r.rotation)));const c=t.getAllLayers(),u=this.get_(i,"l");if("l"in this.params_&&u&&u.length===c.length)for(let d=0,p=c.length;d<p;++d){const t=parseInt(u[d]);if(!isNaN(t)){const e=Boolean(t),i=c[d];i.getVisible()!==e&&i.setVisible(e)}}}updateUrl_(){const t=this.getMap();if(!t)return;const e=t.getView();if(!e)return;const i=this.initial_;this.initial_=!1;const n=e.getCenter(),r=e.getZoom(),s=e.getRotation(),o=t.getAllLayers(),a=new Array(o.length);for(let c=0,u=o.length;c<u;++c)a[c]=o[c].getVisible()?"1":"0";const l=new URL(window.location.href),h=l.searchParams;this.set_(h,"x",X(n[0])),this.set_(h,"y",X(n[1])),this.set_(h,"z",X(r)),this.set_(h,"r",X(s)),this.set_(h,"l",a.join("")),l.href!==window.location.href&&(i||this.replace_?window.history.replaceState(history.state,"",l):window.history.pushState(null,"",l))}}const Y=K;var $=i(390),J=i(2207),Q=i(7847),tt=i(9449),et=i(7794),it=i(3039);const nt=[0,0,0,0],rt=[],st="modifystart",ot="modifyend";class at extends l.ZP{constructor(t,e,i){super(t),this.features=e,this.mapBrowserEvent=i}}class lt extends x.Z{constructor(t){let e;if(super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:b.primaryAction,this.defaultDeleteCondition_=function(t){return(0,b.altKeyOnly)(t)&&(0,b.singleClick)(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:b.always,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new Q.Z,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new M.default({source:new I.default({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:dt(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,t.features?e=t.features:t.source&&(this.source_=t.source,e=new $.Z(this.source_.getFeatures()),this.source_.addEventListener(tt.Z.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(tt.Z.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!e)throw new Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(J.Z.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(J.Z.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===t.snapToPointer?!this.hitDetection_:t.snapToPointer}addFeature_(t){const e=t.getGeometry();if(e){const i=this.SEGMENT_WRITERS_[e.getType()];i&&i(t,e)}const i=this.getMap();i&&i.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,i),t.addEventListener(h.Z.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new $.Z;const i=this.featuresBeingModified_.getArray();for(let t=0,n=e.length;t<n;++t){const n=e[t];for(let t=0,e=n.length;t<e;++t){const e=n[t].feature;e&&!i.includes(e)&&this.featuresBeingModified_.push(e)}}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new at(st,this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(h.Z.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const e=this.rBush_,i=[];e.forEach((function(e){t===e.feature&&i.push(e)}));for(let n=i.length-1;n>=0;--n){const t=i[n];for(let e=this.dragSegments_.length-1;e>=0;--e)this.dragSegments_[e][0]===t&&this.dragSegments_.splice(e,1);e.remove(t)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,e){const i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)}writeMultiPointGeometry_(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const r=i[n],s={feature:t,geometry:e,depth:[n],index:n,segment:[r,r]};this.rBush_.insert(e.getExtent(),s)}}writeLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,r=i.length-1;n<r;++n){const r=i.slice(n,n+2),s={feature:t,geometry:e,index:n,segment:r};this.rBush_.insert((0,P.hI)(r),s)}}writeMultiLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let i=0,s=r.length-1;i<s;++i){const s=r.slice(i,i+2),o={feature:t,geometry:e,depth:[n],index:i,segment:s};this.rBush_.insert((0,P.hI)(s),o)}}}writePolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let i=0,s=r.length-1;i<s;++i){const s=r.slice(i,i+2),o={feature:t,geometry:e,depth:[n],index:i,segment:s};this.rBush_.insert((0,P.hI)(s),o)}}}writeMultiPolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const r=i[n];for(let i=0,s=r.length;i<s;++i){const s=r[i];for(let r=0,o=s.length-1;r<o;++r){const o=s.slice(r,r+2),a={feature:t,geometry:e,depth:[i,n],index:r,segment:o};this.rBush_.insert((0,P.hI)(o),a)}}}}writeCircleGeometry_(t,e){const i=e.getCenter(),n={feature:t,geometry:e,index:0,segment:[i,i]},r={feature:t,geometry:e,index:1,segment:[i,i]},s=[n,r];n.featureSegments=s,r.featureSegments=s,this.rBush_.insert((0,P.HK)(i),n);let o=e;const a=(0,u.getUserProjection)();if(a&&this.getMap()){const t=this.getMap().getView().getProjection();o=o.clone().transform(a,t),o=(0,k.Bb)(o).transform(t,a)}this.rBush_.insert(o.getExtent(),r)}writeGeometryCollectionGeometry_(t,e){const i=e.getGeometriesArray();for(let n=0;n<i.length;++n){const e=i[n];(0,this.SEGMENT_WRITERS_[e.getType()])(t,e)}}createOrUpdateVertexFeature_(t,e,i){let n=this.vertexFeature_;if(n){n.getGeometry().setCoordinates(t)}else n=new T.default(new R.Z(t)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n);return n.set("features",e),n.set("geometries",i),n}handleEvent(t){if(!t.originalEvent)return!0;let e;return this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=s.Z.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=s.Z.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==s.Z.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!e}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);const e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],i=[],n=[];for(let r=0,s=this.dragSegments_.length;r<s;++r){const s=this.dragSegments_[r],o=s[0],a=o.feature;i.includes(a)||i.push(a);const l=o.geometry;n.includes(l)||n.push(l);const h=o.depth;let c;const d=o.segment,p=s[1];for(;e.length<l.getStride();)e.push(d[p][e.length]);switch(l.getType()){case"Point":c=e,d[0]=e,d[1]=e;break;case"MultiPoint":c=l.getCoordinates(),c[o.index]=e,d[0]=e,d[1]=e;break;case"LineString":c=l.getCoordinates(),c[o.index+p]=e,d[p]=e;break;case"MultiLineString":case"Polygon":c=l.getCoordinates(),c[h[0]][o.index+p]=e,d[p]=e;break;case"MultiPolygon":c=l.getCoordinates(),c[h[1]][h[0]][o.index+p]=e,d[p]=e;break;case"Circle":if(d[0]=e,d[1]=e,0===o.index)this.changingFeature_=!0,l.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;const i=t.map.getView().getProjection();let n=(0,L.TE)((0,u.fromUserCoordinate)(l.getCenter(),i),(0,u.fromUserCoordinate)(e,i));const r=(0,u.getUserProjection)();if(r){const t=l.clone().transform(r,i);t.setRadius(n),n=t.transform(i,r).getRadius()}l.setRadius(n),this.changingFeature_=!1}}c&&this.setGeometryCoordinates_(l,c)}this.createOrUpdateVertexFeature_(e,i,n)}handleDownEvent(t){if(!this.condition_(t))return!1;const e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const i=this.vertexFeature_;if(i){const n=t.map.getView().getProjection(),r=[],s=i.getGeometry().getCoordinates(),o=(0,P.hI)([s]),a=this.rBush_.getInExtent(o),l={};a.sort(ht);for(let i=0,h=a.length;i<h;++i){const o=a[i],h=o.segment;let c=(0,it.sq)(o.geometry);const u=o.depth;if(u&&(c+="-"+u.join("-")),l[c]||(l[c]=new Array(2)),"Circle"!==o.geometry.getType()||1!==o.index)if(!(0,L.fS)(h[0],s)||l[c][0])if(!(0,L.fS)(h[1],s)||l[c][1])(0,it.sq)(h)in this.vertexSegments_&&!l[c][0]&&!l[c][1]&&this.insertVertexCondition_(t)&&r.push(o);else{if(l[c][0]&&0===l[c][0].index){let t=o.geometry.getCoordinates();switch(o.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":t=t[u[1]];case"Polygon":if(o.index!==t[u[0]].length-2)continue}}this.dragSegments_.push([o,1]),l[c][1]=o}else this.dragSegments_.push([o,0]),l[c][0]=o;else{const t=ut(e,o,n);(0,L.fS)(t,s)&&!l[c][0]&&(this.dragSegments_.push([o,0]),l[c][0]=o)}}r.length&&this.willModifyFeatures_(t,[r]);for(let t=r.length-1;t>=0;--t)this.insertVertex_(r[t],s)}return!!this.vertexFeature_}handleUpEvent(t){for(let e=this.dragSegments_.length-1;e>=0;--e){const i=this.dragSegments_[e][0],n=i.geometry;if("Circle"===n.getType()){const e=n.getCenter(),r=i.featureSegments[0],s=i.featureSegments[1];r.segment[0]=e,r.segment[1]=e,s.segment[0]=e,s.segment[1]=e,this.rBush_.update((0,P.HK)(e),r);let o=n;const a=(0,u.getUserProjection)();if(a){const e=t.map.getView().getProjection();o=o.clone().transform(a,e),o=(0,k.Bb)(o).transform(e,a)}this.rBush_.update(o.getExtent(),s)}else this.rBush_.update((0,P.hI)(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new at(ot,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)}handlePointerAtPixel_(t,e,i){const n=i||e.getCoordinateFromPixel(t),r=e.getView().getProjection(),s=function(t,e){return ct(n,t,r)-ct(n,e,r)};let o,a;if(this.hitDetection_){const i="object"==typeof this.hitDetection_?t=>t===this.hitDetection_:void 0;e.forEachFeatureAtPixel(t,((t,e,i)=>{i&&(i=new R.Z((0,u.toUserCoordinate)(i.getCoordinates(),r)));const n=i||t.getGeometry();if("Point"===n.getType()&&t instanceof T.default&&this.features_.getArray().includes(t)){a=n;const e=t.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:t,geometry:a,segment:[e,e]}]}return!0}),{layerFilter:i})}if(!o){const t=(0,u.fromUserExtent)((0,P.HK)(n,nt),r),i=e.getView().getResolution()*this.pixelTolerance_,s=(0,u.toUserExtent)((0,P.f3)(t,i,nt),r);o=this.rBush_.getInExtent(s)}if(o&&o.length>0){const i=o.sort(s)[0],l=i.segment;let h=ut(n,i,r);const c=e.getPixelFromCoordinate(h);let u=(0,L.TE)(t,c);if(a||u<=this.pixelTolerance_){const t={};if(t[(0,it.sq)(l)]=!0,this.snapToPointer_||(this.delta_[0]=h[0]-n[0],this.delta_[1]=h[1]-n[1]),"Circle"===i.geometry.getType()&&1===i.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(h,[i.feature],[i.geometry]);else{const n=e.getPixelFromCoordinate(l[0]),r=e.getPixelFromCoordinate(l[1]),s=(0,L.bI)(c,n),a=(0,L.bI)(c,r);u=Math.sqrt(Math.min(s,a)),this.snappedToVertex_=u<=this.pixelTolerance_,this.snappedToVertex_&&(h=s>a?l[1]:l[0]),this.createOrUpdateVertexFeature_(h,[i.feature],[i.geometry]);const d={};d[(0,it.sq)(i.geometry)]=!0;for(let e=1,i=o.length;e<i;++e){const i=o[e].segment;if(!((0,L.fS)(l[0],i[0])&&(0,L.fS)(l[1],i[1])||(0,L.fS)(l[0],i[1])&&(0,L.fS)(l[1],i[0])))break;{const n=(0,it.sq)(o[e].geometry);n in d||(d[n]=!0,t[(0,it.sq)(i)]=!0)}}}return void(this.vertexSegments_=t)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,e){const i=t.segment,n=t.feature,r=t.geometry,s=t.depth,o=t.index;let a;for(;e.length<r.getStride();)e.push(0);switch(r.getType()){case"MultiLineString":case"Polygon":a=r.getCoordinates(),a[s[0]].splice(o+1,0,e);break;case"MultiPolygon":a=r.getCoordinates(),a[s[1]][s[0]].splice(o+1,0,e);break;case"LineString":a=r.getCoordinates(),a.splice(o+1,0,e);break;default:return}this.setGeometryCoordinates_(r,a);const l=this.rBush_;l.remove(t),this.updateSegmentIndices_(r,o,s,1);const h={segment:[i[0],e],feature:n,geometry:r,depth:s,index:o};l.insert((0,P.hI)(h.segment),h),this.dragSegments_.push([h,1]);const c={segment:[e,i[1]],feature:n,geometry:r,depth:s,index:o+1};l.insert((0,P.hI)(c.segment),c),this.dragSegments_.push([c,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=s.Z.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);const e=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new at(ot,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1}removeVertex_(){const t=this.dragSegments_,e={};let i,n,r,s,o,a,l,h,c,u,d,p=!1;for(o=t.length-1;o>=0;--o)r=t[o],u=r[0],d=(0,it.sq)(u.feature),u.depth&&(d+="-"+u.depth.join("-")),d in e||(e[d]={}),0===r[1]?(e[d].right=u,e[d].index=u.index):1==r[1]&&(e[d].left=u,e[d].index=u.index+1);for(d in e){switch(c=e[d].right,l=e[d].left,a=e[d].index,h=a-1,u=void 0!==l?l:c,h<0&&(h=0),s=u.geometry,n=s.getCoordinates(),i=n,p=!1,s.getType()){case"MultiLineString":n[u.depth[0]].length>2&&(n[u.depth[0]].splice(a,1),p=!0);break;case"LineString":n.length>2&&(n.splice(a,1),p=!0);break;case"MultiPolygon":i=i[u.depth[1]];case"Polygon":i=i[u.depth[0]],i.length>4&&(a==i.length-1&&(a=0),i.splice(a,1),p=!0,0===a&&(i.pop(),i.push(i[0]),h=i.length-1))}if(p){this.setGeometryCoordinates_(s,n);const e=[];if(void 0!==l&&(this.rBush_.remove(l),e.push(l.segment[0])),void 0!==c&&(this.rBush_.remove(c),e.push(c.segment[1])),void 0!==l&&void 0!==c){const t={depth:u.depth,feature:u.feature,geometry:u.geometry,index:h,segment:e};this.rBush_.insert((0,P.hI)(t.segment),t)}this.updateSegmentIndices_(s,a,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return p}setGeometryCoordinates_(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),(function(r){r.geometry===t&&(void 0===i||void 0===r.depth||(0,et.fS)(r.depth,i))&&r.index>e&&(r.index+=n)}))}}function ht(t,e){return t.index-e.index}function ct(t,e,i){const n=e.geometry;if("Circle"===n.getType()){let r=n;if(1===e.index){const e=(0,u.getUserProjection)();e&&(r=r.clone().transform(e,i));const n=(0,L.bI)(r.getCenter(),(0,u.fromUserCoordinate)(t,i)),s=Math.sqrt(n)-r.getRadius();return s*s}}const r=(0,u.fromUserCoordinate)(t,i);return rt[0]=(0,u.fromUserCoordinate)(e.segment[0],i),rt[1]=(0,u.fromUserCoordinate)(e.segment[1],i),(0,L.Bs)(r,rt)}function ut(t,e,i){const n=e.geometry;if("Circle"===n.getType()&&1===e.index){let e=n;const r=(0,u.getUserProjection)();return r&&(e=e.clone().transform(r,i)),(0,u.toUserCoordinate)(e.getClosestPoint((0,u.fromUserCoordinate)(t,i)),i)}const r=(0,u.fromUserCoordinate)(t,i);return rt[0]=(0,u.fromUserCoordinate)(e.segment[0],i),rt[1]=(0,u.fromUserCoordinate)(e.segment[1],i),(0,u.toUserCoordinate)((0,L.oL)(r,rt),i)}function dt(){const t=(0,A.createEditingStyle)();return function(e,i){return t.Point}}const pt=lt;var ft=i(2970),gt=i(926),mt=i(5801),_t=i(3878);const yt="select";class vt extends l.ZP{constructor(t,e,i,n){super(t),this.selected=e,this.deselected=i,this.mapBrowserEvent=n}}const xt={};class bt extends r.ZP{constructor(t){let e;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:b.singleClick,this.addCondition_=t.addCondition?t.addCondition:b.never,this.removeCondition_=t.removeCondition?t.removeCondition:b.never,this.toggleCondition_=t.toggleCondition?t.toggleCondition:b.shiftKeyOnly,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:c.uX,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){const t=(0,A.createEditingStyle)();return(0,et.l7)(t.Polygon,t.LineString),(0,et.l7)(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),this.features_=t.features||new $.Z,t.layers)if("function"==typeof t.layers)e=t.layers;else{const i=t.layers;e=function(t){return i.includes(t)}}else e=c.uX;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[(0,it.sq)(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[(0,it.sq)(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(J.Z.ADD,this.boundAddFeature_),this.features_.addEventListener(J.Z.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(J.Z.ADD,this.boundAddFeature_),this.features_.removeEventListener(J.Z.REMOVE,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const t=this.getMap().getAllLayers().find((function(t){if(t instanceof M.default&&t.getSource()&&t.getSource().hasFeature(e))return t}));t&&this.addFeatureLayerAssociation_(e,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=(0,it.sq)(t);e in xt||(xt[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let n=e.length-1;n>=0;--n){const i=e[n];if(i!==this&&i instanceof bt&&i.getStyle()&&-1!==i.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(i.getStyle())}const i=(0,it.sq)(t);t.setStyle(xt[i]),delete xt[i]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[(0,it.sq)(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),i=this.removeCondition_(t),n=this.toggleCondition_(t),r=!e&&!i&&!n,s=t.map,o=this.getFeatures(),a=[],l=[];if(r){(0,_t.Z)(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,((t,e)=>{if(t instanceof T.default&&this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),l.push(t),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=o.getLength()-1;t>=0;--t){const e=o.item(t),i=l.indexOf(e);i>-1?l.splice(i,1):(o.remove(e),a.push(e))}0!==l.length&&o.extend(l)}else{s.forEachFeatureAtPixel(t.pixel,((t,r)=>{if(t instanceof T.default&&this.filter_(t,r))return!e&&!n||o.getArray().includes(t)?(i||n)&&o.getArray().includes(t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,r),l.push(t)),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.length-1;t>=0;--t)o.remove(a[t]);o.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new vt(yt,l,a,t)),!0}}const Et=bt;function wt(t){return t.feature?t.feature:t.element?t.element:null}const Ct=[];class St extends x.Z{constructor(t){const e=t=t||{};e.handleDownEvent||(e.handleDownEvent=c.uX),e.stopDown||(e.stopDown=c.Dv),super(e),this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.rBush_=new Q.Z,this.GEOMETRY_SEGMENTERS_={Point:this.segmentPointGeometry_.bind(this),LineString:this.segmentLineStringGeometry_.bind(this),LinearRing:this.segmentLineStringGeometry_.bind(this),Polygon:this.segmentPolygonGeometry_.bind(this),MultiPoint:this.segmentMultiPointGeometry_.bind(this),MultiLineString:this.segmentMultiLineStringGeometry_.bind(this),MultiPolygon:this.segmentMultiPolygonGeometry_.bind(this),GeometryCollection:this.segmentGeometryCollectionGeometry_.bind(this),Circle:this.segmentCircleGeometry_.bind(this)}}addFeature(t,e){e=void 0===e||e;const i=(0,it.sq)(t),n=t.getGeometry();if(n){const e=this.GEOMETRY_SEGMENTERS_[n.getType()];if(e){this.indexedFeaturesExtents_[i]=n.getExtent((0,P.lJ)());const r=[];if(e(r,n),1===r.length)this.rBush_.insert((0,P.hI)(r[0]),{feature:t,segment:r[0]});else if(r.length>1){const e=r.map((t=>(0,P.hI)(t))),i=r.map((e=>({feature:t,segment:e})));this.rBush_.load(e,i)}}}e&&(this.featureChangeListenerKeys_[i]=(0,d.oL)(t,h.Z.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t}handleEvent(t){const e=this.snapTo(t.pixel,t.coordinate,t.map);return e&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel),super.handleEvent(t)}handleFeatureAdd_(t){const e=wt(t);e&&this.addFeature(e)}handleFeatureRemove_(t){const e=wt(t);e&&this.removeFeature(e)}handleFeatureChange_(t){const e=t.target;if(this.handlingDownUpSequence){const t=(0,it.sq)(e);t in this.pendingFeatures_||(this.pendingFeatures_[t]=e)}else this.updateFeature_(e)}handleUpEvent(t){const e=Object.values(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(t,e){const i=void 0===e||e,n=(0,it.sq)(t),r=this.indexedFeaturesExtents_[n];if(r){const e=this.rBush_,i=[];e.forEachInExtent(r,(function(e){t===e.feature&&i.push(e)}));for(let t=i.length-1;t>=0;--t)e.remove(i[t])}i&&((0,d.bN)(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])}setMap(t){const e=this.getMap(),i=this.featuresListenerKeys_,n=this.getFeatures_();e&&(i.forEach(d.bN),i.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(d.bN),this.featureChangeListenerKeys_={}),super.setMap(t),t&&(this.features_?i.push((0,d.oL)(this.features_,J.Z.ADD,this.handleFeatureAdd_,this),(0,d.oL)(this.features_,J.Z.REMOVE,this.handleFeatureRemove_,this)):this.source_&&i.push((0,d.oL)(this.source_,tt.Z.ADDFEATURE,this.handleFeatureAdd_,this),(0,d.oL)(this.source_,tt.Z.REMOVEFEATURE,this.handleFeatureRemove_,this)),n.forEach((t=>this.addFeature(t))))}snapTo(t,e,i){const n=i.getView().getProjection(),r=(0,u.fromUserCoordinate)(e,n),s=(0,u.toUserExtent)((0,P.f3)((0,P.hI)([r]),i.getView().getResolution()*this.pixelTolerance_),n),o=this.rBush_.getInExtent(s),a=o.length;if(0===a)return null;let l,h=1/0;const c=this.pixelTolerance_*this.pixelTolerance_,d=()=>{if(l){const e=i.getPixelFromCoordinate(l);if((0,L.bI)(t,e)<=c)return{vertex:l,vertexPixel:[Math.round(e[0]),Math.round(e[1])]}}return null};if(this.vertex_){for(let e=0;e<a;++e){const t=o[e];"Circle"!==t.feature.getGeometry().getType()&&t.segment.forEach((t=>{const e=(0,u.fromUserCoordinate)(t,n),i=(0,L.bI)(r,e);i<h&&(l=t,h=i)}))}const t=d();if(t)return t}if(this.edge_){for(let e=0;e<a;++e){let t=null;const i=o[e];if("Circle"===i.feature.getGeometry().getType()){let e=i.feature.getGeometry();const s=(0,u.getUserProjection)();s&&(e=e.clone().transform(s,n)),t=(0,L.Ed)(r,e)}else{const[e,s]=i.segment;s&&(Ct[0]=(0,u.fromUserCoordinate)(e,n),Ct[1]=(0,u.fromUserCoordinate)(s,n),t=(0,L.oL)(r,Ct))}if(t){const e=(0,L.bI)(r,t);e<h&&(l=(0,u.toUserCoordinate)(t,n),h=e)}}const t=d();if(t)return t}return null}updateFeature_(t){this.removeFeature(t,!1),this.addFeature(t,!1)}segmentCircleGeometry_(t,e){const i=this.getMap().getView().getProjection();let n=e;const r=(0,u.getUserProjection)();r&&(n=n.clone().transform(r,i));const s=(0,k.Bb)(n);r&&s.transform(i,r);const o=s.getCoordinates()[0];for(let a=0,l=o.length-1;a<l;++a)t.push(o.slice(a,a+2))}segmentGeometryCollectionGeometry_(t,e){const i=e.getGeometriesArray();for(let n=0;n<i.length;++n){const e=this.GEOMETRY_SEGMENTERS_[i[n].getType()];e&&e(t,i[n])}}segmentLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,r=i.length-1;n<r;++n)t.push(i.slice(n,n+2))}segmentMultiLineStringGeometry_(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const e=i[n];for(let i=0,n=e.length-1;i<n;++i)t.push(e.slice(i,i+2))}}segmentMultiPointGeometry_(t,e){e.getCoordinates().forEach((e=>{t.push([e])}))}segmentMultiPolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const e=i[n];for(let i=0,n=e.length;i<n;++i){const n=e[i];for(let e=0,i=n.length-1;e<i;++e)t.push(n.slice(e,e+2))}}}segmentPointGeometry_(t,e){t.push([e.getCoordinates()])}segmentPolygonGeometry_(t,e){const i=e.getCoordinates();for(let n=0,r=i.length;n<r;++n){const e=i[n];for(let i=0,n=e.length-1;i<n;++i)t.push(e.slice(i,i+2))}}}const Tt=St;var Rt=i(4497);const Mt="translatestart",It="translating",Pt="translateend";class Lt extends l.ZP{constructor(t,e,i,n,r){super(t),this.features=e,this.coordinate=i,this.startCoordinate=n,this.mapBrowserEvent=r}}class At extends x.Z{constructor(t){let e;if(super(t=t||{}),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==t.features?t.features:null,t.layers&&!this.features_)if("function"==typeof t.layers)e=t.layers;else{const i=t.layers;e=function(t){return i.includes(t)}}else e=c.uX;this.layerFilter_=e,this.filter_=t.filter&&!this.features_?t.filter:c.uX,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.condition_=t.condition?t.condition:b.always,this.lastFeature_=null,this.addChangeListener(Rt.Z.ACTIVE,this.handleActiveChanged_)}handleDownEvent(t){if(!t.originalEvent||!this.condition_(t))return!1;if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);const e=this.features_||new $.Z([this.lastFeature_]);return this.dispatchEvent(new Lt(Mt,e,t.coordinate,this.startCoordinate_,t)),!0}return!1}handleUpEvent(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);const e=this.features_||new $.Z([this.lastFeature_]);return this.dispatchEvent(new Lt(Pt,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1}handleDragEvent(t){if(this.lastCoordinate_){const e=t.coordinate,i=t.map.getView().getProjection(),n=(0,u.fromUserCoordinate)(e,i),r=(0,u.fromUserCoordinate)(this.lastCoordinate_,i),s=n[0]-r[0],o=n[1]-r[1],a=this.features_||new $.Z([this.lastFeature_]),l=(0,u.getUserProjection)();a.forEach((function(t){const e=t.getGeometry();l?(e.transform(l,i),e.translate(s,o),e.transform(i,l)):e.translate(s,o),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new Lt(It,a,e,this.startCoordinate_,t))}}handleMoveEvent(t){const e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(t,e){return e.forEachFeatureAtPixel(t,((t,e)=>{if(t instanceof T.default&&this.filter_(t,e)&&(!this.features_||this.features_.getArray().includes(t)))return t}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(t){this.hitTolerance_=t}setMap(t){const e=this.getMap();super.setMap(t),this.updateState_(e)}handleActiveChanged_(){this.updateState_(null)}updateState_(t){let e=this.getMap();const i=this.getActive();if((!e||!i)&&(e=e||t,e)){e.getViewport().classList.remove("ol-grab","ol-grabbing")}}}const kt=At;var Ot=i(2306)},970:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(6953),r=i(8527);class s extends n.ZP{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==r.Z.DBLCLICK){const i=t.originalEvent,r=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=r.getView();(0,n.FW)(a,o,s,this.duration_),i.preventDefault(),e=!0}return!e}}const o=s},9618:(t,e,i)=>{"use strict";i.d(e,{Z:()=>m});var n=i(8685),r=i(4306),s=i(6175),o=i(4746);class a extends s.Z{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,i=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new o.ZP([i])}getGeometry(){return this.geometry_}}const l=a;var h=i(6660);const c="boxstart",u="boxdrag",d="boxend",p="boxcancel";class f extends n.ZP{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class g extends r.Z{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new l(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:h.mouseActionButton,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],r=i[1]-e[1];return n*n+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new f(u,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new f(e?d:p,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new f(c,t.coordinate,t)),!0)}onBoxEnd(t){}}const m=g},4204:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(4306),r=i(3556),s=i(6660),o=i(3816),a=i(6973);class l extends n.Z{constructor(t){super({stopDown:r.Dv}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:(0,s.all)(s.noModifierKeys,s.primaryAction);this.condition_=t.onFocusOnly?(0,s.all)(s.focusWithTabindex,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,r=e.getEventPixel((0,n.S)(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const e=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],i=t.map.getView();(0,a.bA)(e,i.getResolution()),(0,a.U1)(e,i.getRotation()),i.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),n=this.kinetic_.getAngle(),r=i.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),a=e.getCoordinateFromPixelInternal([s[0]-t*Math.cos(n),s[1]-t*Math.sin(n)]);i.animateInternal({center:i.getConstrainedCenter(a),duration:500,easing:o.Vv})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const h=l},7113:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(4306),r=i(3556),s=i(6660),o=i(5219);class a extends n.Z{constructor(t){t=t||{},super({stopDown:r.Dv}),this.condition_=t.condition?t.condition:s.altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!(0,s.mouseOnly)(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===o.h$)return;const n=e.getSize(),r=t.pixel,a=Math.atan2(n[1]/2-r[1],r[0]-n[0]/2);if(void 0!==this.lastAngle_){const t=a-this.lastAngle_;i.adjustRotationInternal(-t)}this.lastAngle_=a}handleUpEvent(t){if(!(0,s.mouseOnly)(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!(0,s.mouseOnly)(t))return!1;if((0,s.mouseActionButton)(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}}const l=a},34:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(9618),r=i(3816),s=i(6660);class o extends n.Z{constructor(t){super({condition:(t=t||{}).condition?t.condition:s.shiftKeyOnly,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let i=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(i),n=e.getResolutionForExtentInternal(t),r=e.getResolution()/n;i=i.clone(),i.scale(r*r)}e.fitInternal(i,{duration:this.duration_,easing:r.Vv})}}const a=o},1559:(t,e,i)=>{"use strict";i.r(e),i.d(e,{DrawEvent:()=>L,createBox:()=>V,createRegularPolygon:()=>U,default:()=>q});var n=i(3384),r=i(8685),s=i(1971),o=i(5983),a=i(955),l=i(4497),h=i(9583),c=i(233),u=i(8527),d=i(832),p=i(8237),f=i(1637),g=i(6665),m=i(4306),_=i(4746),y=i(6927),v=i(6098),x=i(3556),b=i(6660),E=i(8300),w=i(4898),C=i(1359),S=i(6973),T=i(7533),R=i(2682);const M="drawstart",I="drawend",P="drawabort";class L extends r.ZP{constructor(t,e){super(t),this.feature=e}}function A(t,e){return(0,w.bI)(t[0],t[1],e[0],e[1])}function k(t,e){const i=t.length;return e<0?t[e+i]:e>=i?t[e-i]:t[e]}function O(t,e,i){let n,r;e<i?(n=e,r=i):(n=i,r=e);const s=Math.ceil(n),o=Math.floor(r);if(s>o){return A(z(t,n),z(t,r))}let a=0;if(n<s){a+=A(z(t,n),k(t,s))}if(o<r){a+=A(k(t,o),z(t,r))}for(let l=s;l<o-1;++l){a+=A(k(t,l),k(t,l+1))}return a}function N(t,e,i){if(e instanceof h.Z)D(t,e.getCoordinates(),!1,i);else if(e instanceof d.Z){const n=e.getCoordinates();for(let e=0,r=n.length;e<r;++e)D(t,n[e],!1,i)}else if(e instanceof _.ZP){const n=e.getCoordinates();for(let e=0,r=n.length;e<r;++e)D(t,n[e],!0,i)}else if(e instanceof f.Z){const n=e.getCoordinates();for(let e=0,r=n.length;e<r;++e){const r=n[e];for(let e=0,n=r.length;e<n;++e)D(t,r[e],!0,i)}}else if(e instanceof a.Z){const n=e.getGeometries();for(let e=0;e<n.length;++e)N(t,n[e],i)}else;}const F={index:-1,endIndex:NaN};function D(t,e,i,n){const r=t[0],s=t[1];for(let o=0,a=e.length-1;o<a;++o){const t=j(r,s,e[o],e[o+1]);if(0===t.squaredDistance){const r=o+t.along;return void n.push({coordinates:e,ring:i,startIndex:r,endIndex:r})}}}const Z={along:0,squaredDistance:0};function j(t,e,i,n){const r=i[0],s=i[1],o=n[0]-r,a=n[1]-s;let l=0,h=r,c=s;return 0===o&&0===a||(l=(0,w.uZ)(((t-r)*o+(e-s)*a)/(o*o+a*a),0,1),h+=o*l,c+=a*l),Z.along=l,Z.squaredDistance=(0,w.FH)((0,w.bI)(t,e,h,c),10),Z}function z(t,e){const i=t.length;let n=Math.floor(e);const r=e-n;n>=i?n-=i:n<0&&(n+=i);let s=n+1;s>=i&&(s-=i);const o=t[n],a=o[0],l=o[1],h=t[s];return[a+(h[0]-a)*r,l+(h[1]-l)*r]}class G extends m.Z{constructor(t){const e=t;e.stopDown||(e.stopDown=x.Dv),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:x.uX,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let i=t.geometryFunction;if(!i){const t=this.mode_;if("Circle"===t)i=function(t,e,i){const r=e||new n.default([NaN,NaN]),s=(0,T.fromUserCoordinate)(t[0],i),o=(0,S.bI)(s,(0,T.fromUserCoordinate)(t[t.length-1],i));r.setCenterAndRadius(s,Math.sqrt(o),this.geometryLayout_);const a=(0,T.getUserProjection)();return a&&r.transform(i,a),r};else{let e;"Point"===t?e=g.Z:"LineString"===t?e=h.Z:"Polygon"===t&&(e=_.ZP),i=function(i,n,r){return n?"Polygon"===t?i[0].length?n.setCoordinates([i[0].concat([i[0][0]])],this.geometryLayout_):n.setCoordinates([],this.geometryLayout_):n.setCoordinates(i,this.geometryLayout_):n=new e(i,this.geometryLayout_),n}}}this.geometryFunction_=i,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new y.default({source:new v.default({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:B(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:b.noModifierKeys,this.freehandCondition_,t.freehand?this.freehandCondition_=b.always:this.freehandCondition_=t.freehandCondition?t.freehandCondition:b.shiftKeyOnly,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(l.Z.ACTIVE,this.updateState_)}setTrace(t){let e;e=t?!0===t?b.always:t:b.never,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===s.Z.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);let e=t.type===u.Z.POINTERMOVE,i=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===u.Z.POINTERDRAG){Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===u.Z.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),i=!1):this.freehand_&&t.type===u.Z.POINTERDOWN?i=!1:e&&this.getPointerCount()<2?(i=t.type===u.Z.POINTERMOVE,i&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===u.Z.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t)):t.type===u.Z.DBLCLICK&&(i=!1),super.handleEvent(t)&&i}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((()=>{this.handlePointerMove_(new c.Z(u.Z.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),i=e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),n=e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_]),r=(0,E.hI)([i,n]),s=this.traceSource_.getFeaturesInExtent(r);if(0===s.length)return;const o=function(t,e){const i=[];for(let n=0;n<e.length;++n)N(t,e[n].getGeometry(),i);return i}(t.coordinate,s);o.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:o,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const i=t.startIndex<=t.endIndex;i===t.startIndex<=e?i&&e>t.endIndex||!i&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(i&&e<t.endIndex||!i&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let i=0;if(t<e){const n=Math.ceil(t);let r=Math.floor(e);r===e&&(r-=1),i=r-n+1}else{const n=Math.floor(t);let r=Math.ceil(e);r===e&&(r+=1),i=n-r+1}i>0&&this.removeLastPoints_(i)}addTracedCoordinates_(t,e,i){if(e===i)return;const n=[];if(e<i){const r=Math.ceil(e);let s=Math.floor(i);s===i&&(s-=1);for(let e=r;e<=s;++e)n.push(k(t.coordinates,e))}else{const r=Math.floor(e);let s=Math.ceil(i);s===i&&(s+=1);for(let e=r;e>=s;--e)n.push(k(t.coordinates,e))}n.length&&this.appendCoordinates(n)}updateTrace_(t){const e=this.traceState_;if(!e.active)return;if(-1===e.targetIndex&&(0,S.TE)(e.startPx,t.pixel)<this.snapTolerance_)return;const i=function(t,e,i,n){const r=t[0],s=t[1];let o=1/0,a=-1,l=NaN;for(let u=0;u<e.targets.length;++u){const t=e.targets[u],i=t.coordinates;let n,h=1/0;for(let e=0;e<i.length-1;++e){const t=j(r,s,i[e],i[e+1]);t.squaredDistance<h&&(h=t.squaredDistance,n=e+t.along)}h<o&&(o=h,t.ring&&e.targetIndex===u&&(t.endIndex>t.startIndex?n<t.startIndex&&(n+=i.length):t.endIndex<t.startIndex&&n>t.startIndex&&(n-=i.length)),l=n,a=u)}const h=e.targets[a];let c=h.ring;if(e.targetIndex===a&&c){const t=z(h.coordinates,l),r=i.getPixelFromCoordinate(t);(0,S.TE)(r,e.startPx)>n&&(c=!1)}if(c){const t=h.coordinates,e=t.length,i=h.startIndex,n=l;if(i<n){const r=O(t,i,n);O(t,i,n-e)<r&&(l-=e)}else{const r=O(t,i,n);O(t,i,n+e)<r&&(l+=e)}}return F.index=a,F.endIndex=l,F}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==i.index){if(-1!==e.targetIndex){const t=e.targets[e.targetIndex];this.removeTracedCoordinates_(t.startIndex,t.endIndex)}const t=e.targets[i.index];this.addTracedCoordinates_(t,t.startIndex,i.endIndex)}else{const t=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(t,i.endIndex)}e.targetIndex=i.index;const n=e.targets[e.targetIndex];n.endIndex=i.endIndex;const r=z(n.coordinates,n.endIndex),s=this.getMap().getPixelFromCoordinate(r);t.coordinate=r,t.pixel=[Math.round(s[0]),Math.round(s[1])]}handleUpEvent(t){let e=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const i=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const n=!this.finishCoordinate_;n&&this.startDrawing_(t.coordinate),!n&&this.freehand_?this.finishDrawing():this.freehand_||n&&"Point"!==this.mode_||(this.atFinish_(t.pixel,i)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],s=n*n+r*r;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let i=!1;if(this.sketchFeature_){let n=!1,r=[this.finishCoordinate_];const s=this.mode_;if("Point"===s)i=!0;else if("Circle"===s)i=2===this.sketchCoords_.length;else if("LineString"===s)n=!e&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===s){const t=this.sketchCoords_;n=t[0].length>this.minPoints_,r=[t[0][0],t[0][t[0].length-2]],r=e?[t[0][0]]:[t[0][0],t[0][t[0].length-2]]}if(n){const e=this.getMap();for(let n=0,s=r.length;n<s;n++){const s=r[n],o=e.getPixelFromCoordinate(s),a=t[0]-o[0],l=t[1]-o[1],h=this.freehand_?1:this.snapTolerance_;if(i=Math.sqrt(a*a+l*l)<=h,i){this.finishCoordinate_=s;break}}}}return i}createOrUpdateSketchPoint_(t){if(this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(t)}else this.sketchPoint_=new o.default(new g.Z(t)),this.updateSketchFeatures_()}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new o.default);const e=t.getLinearRing(0);let i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new h.Z(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))}startDrawing_(t){const e=this.getMap().getView().getProjection(),i=(0,R.tP)(this.geometryLayout_);for(;t.length<i;)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.default(new h.Z(this.sketchLineCoords_)));const n=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new o.default,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(n),this.updateSketchFeatures_(),this.dispatchEvent(new L(M,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),i=this.sketchFeature_.getGeometry(),n=e.getView().getProjection(),r=(0,R.tP)(this.geometryLayout_);let s,o;for(;t.length<r;)t.push(0);if("Point"===this.mode_?o=this.sketchCoords_:"Polygon"===this.mode_?(s=this.sketchCoords_[0],o=s[s.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(s=this.sketchCoords_,o=s[s.length-1]),o[0]=t[0],o[1]=t[1],this.geometryFunction_(this.sketchCoords_,i,n),this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(t)}if("Polygon"===i.getType()&&"Polygon"!==this.mode_)this.createOrUpdateCustomSketchLine_(i);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection();let n,r;const s=this.mode_;"LineString"===s||"Circle"===s?(this.finishCoordinate_=t.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0),r.push(t.slice()),this.geometryFunction_(r,e,i)):"Polygon"===s&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():n=!0),r.push(t.slice()),n&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,e,i)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),n&&this.finishDrawing()}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),n=this.mode_;for(let r=0;r<t;++r){let t;if("LineString"===n||"Circle"===n){if(t=this.sketchCoords_,t.splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();const e=this.finishCoordinate_.slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}this.geometryFunction_(t,e,i),"Polygon"===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===n){t=this.sketchCoords_[0],t.splice(-2,1);const n=this.sketchLine_.getGeometry();if(t.length>=2){const e=t[t.length-2].slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}n.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)}if(1===t.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return;let e=this.sketchCoords_;const i=t.getGeometry(),n=this.getMap().getView().getProjection();"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,i,n)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,i,n),e=i.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new p.Z([e])):"MultiLineString"===this.type_?t.setGeometry(new d.Z([e])):"MultiPolygon"===this.type_&&t.setGeometry(new f.Z([e])),this.dispatchEvent(new L(I,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new L(P,t))}appendCoordinates(t){const e=this.mode_,i=!this.sketchFeature_;let n;if(i&&this.startDrawing_(t[0]),"LineString"===e||"Circle"===e)n=this.sketchCoords_;else{if("Polygon"!==e)return;n=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}i&&n.shift(),n.pop();for(let s=0;s<t.length;s++)this.addToDrawing_(t[s]);const r=t[t.length-1];this.addToDrawing_(r),this.modifyDrawing_(r)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new o.default(new g.Z(i)),this.updateSketchFeatures_(),this.dispatchEvent(new L(M,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function B(){const t=(0,C.createEditingStyle)();return function(e,i){return t[e.getGeometry().getType()]}}function U(t,e){return function(i,r,s){const o=(0,T.fromUserCoordinate)(i[0],s),a=(0,T.fromUserCoordinate)(i[i.length-1],s),l=Math.sqrt((0,S.bI)(o,a));r=r||(0,_.Bb)(new n.default(o),t);let h=e;if(!e&&0!==e){const t=a[0]-o[0],e=a[1]-o[1];h=Math.atan2(e,t)}(0,_.Ej)(r,o,l,h);const c=(0,T.getUserProjection)();return c&&r.transform(s,c),r}}function V(){return function(t,e,i){const n=(0,E.hI)([t[0],t[t.length-1]].map((function(t){return(0,T.fromUserCoordinate)(t,i)}))),r=[[(0,E.hC)(n),(0,E.w$)(n),(0,E.Xv)(n),(0,E.rL)(n),(0,E.hC)(n)]];e?e.setCoordinates(r):e=new _.ZP(r);const s=(0,T.getUserProjection)();return s&&e.transform(i,s),e}}const q=G},6953:(t,e,i)=>{"use strict";i.d(e,{Cv:()=>a,FW:()=>l,ZP:()=>h});var n=i(9520),r=i(4497),s=i(3816);class o extends n.Z{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(r.Z.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(r.Z.ACTIVE,t)}setMap(t){this.map_=t}}function a(t,e,i){const n=t.getCenterInternal();if(n){const r=[n[0]+e[0],n[1]+e[1]];t.animateInternal({duration:void 0!==i?i:250,easing:s.GE,center:t.getConstrainedCenter(r)})}}function l(t,e,i,n){const r=t.getZoom();if(void 0===r)return;const o=t.getConstrainedZoom(r+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:i,duration:void 0!==n?n:250,easing:s.Vv})}const h=o},4145:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(1971),r=i(6953);const s="ArrowLeft",o="ArrowUp",a="ArrowRight",l="ArrowDown";var h=i(6660),c=i(6973);class u extends r.ZP{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return(0,h.noModifierKeys)(t)&&(0,h.targetNotEditable)(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==n.Z.KEYDOWN){const i=t.originalEvent,n=i.key;if(this.condition_(t)&&(n==l||n==s||n==a||n==o)){const o=t.map.getView(),h=o.getResolution()*this.pixelDelta_;let u=0,d=0;n==l?d=-h:n==s?u=-h:n==a?u=h:d=h;const p=[u,d];(0,c.U1)(p,o.getRotation()),(0,r.Cv)(o,p,this.duration_),i.preventDefault(),e=!0}}return!e}}const d=u},4268:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(1971),r=i(6953),s=i(6660);class o extends r.ZP{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:s.targetNotEditable,this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==n.Z.KEYDOWN||t.type==n.Z.KEYPRESS){const i=t.originalEvent,n=i.key;if(this.condition_(t)&&("+"===n||"-"===n)){const s=t.map,o="+"===n?this.delta_:-this.delta_,a=s.getView();(0,r.FW)(a,o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}const a=o},2970:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(1971),r=i(6953),s=i(4465),o=i(6660),a=i(4898);class l extends r.ZP{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:o.always;this.condition_=t.onFocusOnly?(0,o.all)(o.focusWithTabindex,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==n.Z.WHEEL)return!0;const e=t.map,i=t.originalEvent;let r;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==n.Z.WHEEL&&(r=i.deltaY,s.V&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=s.MP),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),0===r)return!1;this.lastDelta_=r;const o=Date.now();void 0===this.startTime_&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const a=e.getView();if("trackpad"===this.mode_&&!a.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=r;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-(0,a.uZ)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),(0,r.FW)(e,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}const h=l},926:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(4306),r=i(3556),s=i(5219);class o extends n.Z{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=r.Dv),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(void 0!==this.lastAngle_){const t=o-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=o;const a=t.map,l=a.getView();l.getConstraints().rotation!==s.h$&&(this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel((0,n.S)(this.targetPointers))),this.rotating_&&(a.render(),l.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const a=o},5801:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(4306),r=i(3556);class s extends n.Z{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=r.Dv),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],r=this.targetPointers[1],s=i.clientX-r.clientX,o=i.clientY-r.clientY,a=Math.sqrt(s*s+o*o);void 0!==this.lastDistance_&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,h=l.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel((0,n.S)(this.targetPointers))),l.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),i=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}const o=s},4306:(t,e,i)=>{"use strict";i.d(e,{S:()=>o,Z:()=>a});var n=i(6953),r=i(8527);class s extends n.ZP{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==r.Z.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==r.Z.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==r.Z.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==r.Z.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function o(t){const e=t.length;let i=0,n=0;for(let r=0;r<e;r++)i+=t[r].clientX,n+=t[r].clientY;return{clientX:i/e,clientY:n/e}}const a=s},4497:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ACTIVE:"active"}},2306:(t,e,i)=>{"use strict";i.d(e,{c:()=>f});var n=i(390),r=i(970),s=i(4204),o=i(7113),a=i(34),l=i(4145),h=i(4268);const c=class{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const r=this.points_[e]-this.points_[i],s=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(s,r),this.initialVelocity_=Math.sqrt(r*r+s*s)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}};var u=i(2970),d=i(926),p=i(5801);function f(t){t=t||{};const e=new n.Z,i=new c(-.005,.05,100);(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new o.Z);(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new r.Z({delta:t.zoomDelta,duration:t.zoomDuration}));(void 0===t.dragPan||t.dragPan)&&e.push(new s.Z({onFocusOnly:t.onFocusOnly,kinetic:i}));(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new d.Z);(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new p.Z({duration:t.zoomDuration}));(void 0===t.keyboard||t.keyboard)&&(e.push(new l.Z),e.push(new h.Z({delta:t.zoomDelta,duration:t.zoomDuration})));(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new u.Z({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));return(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new a.Z({duration:t.zoomDuration})),e}},4907:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Graticule:()=>S,Group:()=>T.Z,Heatmap:()=>Rt,Image:()=>Mt.Z,Layer:()=>It.Z,MapboxVector:()=>lo,Tile:()=>ho.default,Vector:()=>d.default,VectorImage:()=>vo,VectorTile:()=>ue,WebGLPoints:()=>Sa,WebGLTile:()=>Ia});var n=i(390),r=i(4950),s=i(5983),o=i(1082),a=i(9583),l=i(6665),h=i(3260),c=i(1359),u=i(4669),d=i(6927),p=i(6098),f=i(8300),g=i(4898),m=i(6973),_=i(7533),y=i(1438),v=i(5034),x=i(6526);function b(t,e,i){const n=[];let r=t(0),s=t(1),o=e(r),a=e(s);const l=[s,r],h=[a,o],c=[1,0],u={};let d,p,f,m,_,y,v=1e5;for(;--v>0&&c.length>0;)f=c.pop(),r=l.pop(),o=h.pop(),y=f.toString(),y in u||(n.push(o[0],o[1]),u[y]=!0),m=c.pop(),s=l.pop(),a=h.pop(),_=(f+m)/2,d=t(_),p=e(d),(0,g.rU)(p[0],p[1],o[0],o[1],a[0],a[1])<i?(n.push(a[0],a[1]),y=m.toString(),u[y]=!0):(c.push(m,_,_,f),h.push(a,p,p,o),l.push(s,d,d,r));return n}const E=new h.default({color:"rgba(0,0,0,0.2)"}),w=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class C extends d.default{constructor(t){t=t||{};const e=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,super(e),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=void 0!==t.targetSize?t.targetSize:100,this.maxLines_=void 0!==t.maxLines?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==t.strokeStyle?t.strokeStyle:E,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=null==t.lonLabelFormatter?m.I8.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=null==t.latLabelFormatter?m.I8.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=null==t.lonLabelPosition?0:t.lonLabelPosition,this.latLabelPosition_=null==t.latLabelPosition?1:t.latLabelPosition,this.lonLabelStyleBase_=new c.default({text:void 0!==t.lonLabelStyle?t.lonLabelStyle.clone():new u.default({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new o.default({color:"rgba(0,0,0,1)"}),stroke:new h.default({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=t=>{const e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_},this.latLabelStyleBase_=new c.default({text:void 0!==t.latLabelStyle?t.latLabelStyle.clone():new u.default({font:"12px Calibri,sans-serif",textAlign:"right",fill:new o.default({color:"rgba(0,0,0,1)"}),stroke:new h.default({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=t=>{const e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(r.Z.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=void 0!==t.intervals?t.intervals:w,this.setSource(new p.default({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new n.Z,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new c.default({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,e){let i=t.slice();return this.projection_&&this.getSource().getWrapX()&&(0,f.Cf)(i,this.projection_),this.loadedExtent_&&((0,f.iW)(this.loadedExtent_,i,e)?i=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[i]}loaderFunction(t,e,i){this.loadedExtent_=t;const n=this.getSource(),r=this.getExtent()||[-1/0,-1/0,1/0,1/0],o=(0,f.Ed)(r,t);if(this.renderedExtent_&&(0,f.fS)(this.renderedExtent_,o)&&this.renderedResolution_===e)return;if(this.renderedExtent_=o,this.renderedResolution_=e,(0,f.xb)(o))return;const a=(0,f.qg)(o),l=e*e/4;(!this.projection_||!(0,_.equivalent)(this.projection_,i))&&this.updateProjectionInfo_(i),this.createGraticule_(o,a,e,l);let h,c=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(c+=this.meridians_.length),this.parallelsLabels_&&(c+=this.parallels_.length);c>this.featurePool_.length;)h=new s.default,this.featurePool_.push(h);const u=n.getFeaturesCollection();u.clear();let d,p,g=0;for(d=0,p=this.meridians_.length;d<p;++d)h=this.featurePool_[g++],h.setGeometry(this.meridians_[d]),h.setStyle(this.lineStyle_),u.push(h);for(d=0,p=this.parallels_.length;d<p;++d)h=this.featurePool_[g++],h.setGeometry(this.parallels_[d]),h.setStyle(this.lineStyle_),u.push(h)}addMeridian_(t,e,i,n,r,s){const o=this.getMeridian_(t,e,i,n,s);if((0,f.kK)(o.getExtent(),r)){if(this.meridiansLabels_){const e=this.lonLabelFormatter_(t);s in this.meridiansLabels_?this.meridiansLabels_[s].text=e:this.meridiansLabels_[s]={geom:new l.Z([]),text:e}}this.meridians_[s++]=o}return s}addParallel_(t,e,i,n,r,s){const o=this.getParallel_(t,e,i,n,s);if((0,f.kK)(o.getExtent(),r)){if(this.parallelsLabels_){const e=this.latLabelFormatter_(t);s in this.parallelsLabels_?this.parallelsLabels_[s].text=e:this.parallelsLabels_[s]={geom:new l.Z([]),text:e}}this.parallels_[s++]=o}return s}drawLabels_(t){const e=t.frameState.viewState.rotation,i=t.frameState.viewState.resolution,n=t.frameState.size,r=t.frameState.extent,s=(0,f.qg)(r);let o=r;if(e){const t=n[0]*i,e=n[1]*i;o=[s[0]-t/2,s[1]-e/2,s[0]+t/2,s[1]+e/2]}let a=0,l=0,h=this.latLabelPosition_<.5;const c=this.projection_.getExtent(),u=(0,f.dz)(c);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,f.r4)(c,r)){a=Math.floor((r[0]-c[0])/u),l=Math.ceil((r[2]-c[2])/u);h=h!==Math.abs(e)>Math.PI/2}const d=function(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=t.inversePixelTransform[0],i=t.inversePixelTransform[1],n=Math.sqrt(e*e+i*i),r=t.frameState,s=(0,v.Jp)(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),o=(0,x.se)(r.viewState.resolution,n);let a;const l=(0,_.getUserProjection)();return l&&(a=(0,_.getTransformFromProjections)(l,r.viewState.projection)),new y.Z(t.context,n,r.extent,s,r.viewState.rotation,o,a)}(t);for(let p=a;p<=l;++p){let t,i,n,c,f=this.meridians_.length+this.parallels_.length;if(this.meridiansLabels_)for(i=0,n=this.meridiansLabels_.length;i<n;++i){const n=this.meridians_[i];if(e||0!==p){const t=n.clone();t.translate(p*u,0),t.rotate(-e,s),c=this.getMeridianPoint_(t,o,i),c.rotate(e,s)}else c=this.getMeridianPoint_(n,r,i);t=this.featurePool_[f++],t.setGeometry(c),t.set("graticule_label",this.meridiansLabels_[i].text),d.drawFeature(t,this.lonLabelStyle_(t))}if(this.parallelsLabels_&&(p===a&&h||p===l&&!h))for(i=0,n=this.parallels_.length;i<n;++i){const n=this.parallels_[i];if(e||0!==p){const t=n.clone();t.translate(p*u,0),t.rotate(-e,s),c=this.getParallelPoint_(t,o,i),c.rotate(e,s)}else c=this.getParallelPoint_(n,r,i);t=this.featurePool_[f++],t.setGeometry(c),t.set("graticule_label",this.parallelsLabels_[i].text),d.drawFeature(t,this.latLabelStyle_(t))}}}createGraticule_(t,e,i,n){const r=this.getInterval_(i);if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));let s=!1;const o=this.projection_.getExtent(),a=(0,f.dz)(o);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,f.r4)(o,t)&&((0,f.dz)(t)>=a?(t[0]=o[0],t[2]=o[2]):s=!0);const l=[(0,g.uZ)(e[0],this.minX_,this.maxX_),(0,g.uZ)(e[1],this.minY_,this.maxY_)],h=this.toLonLatTransform_(l);isNaN(h[1])&&(h[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let c=(0,g.uZ)(h[0],this.minLon_,this.maxLon_),u=(0,g.uZ)(h[1],this.minLat_,this.maxLat_);const d=this.maxLines_;let p,m,_,y,v=t;s||(v=[(0,g.uZ)(t[0],this.minX_,this.maxX_),(0,g.uZ)(t[1],this.minY_,this.maxY_),(0,g.uZ)(t[2],this.minX_,this.maxX_),(0,g.uZ)(t[3],this.minY_,this.maxY_)]);const x=(0,f.Ne)(v,this.toLonLatTransform_,void 0,8);let b=x[3],E=x[2],w=x[1],C=x[0];if(s||((0,f.b8)(v,this.bottomLeft_)&&(C=this.minLon_,w=this.minLat_),(0,f.b8)(v,this.bottomRight_)&&(E=this.maxLon_,w=this.minLat_),(0,f.b8)(v,this.topLeft_)&&(C=this.minLon_,b=this.maxLat_),(0,f.b8)(v,this.topRight_)&&(E=this.maxLon_,b=this.maxLat_),b=(0,g.uZ)(b,u,this.maxLat_),E=(0,g.uZ)(E,c,this.maxLon_),w=(0,g.uZ)(w,this.minLat_,u),C=(0,g.uZ)(C,this.minLon_,c)),c=Math.floor(c/r)*r,y=(0,g.uZ)(c,this.minLon_,this.maxLon_),m=this.addMeridian_(y,w,b,n,t,0),p=0,s)for(;(y-=r)>=C&&p++<d;)m=this.addMeridian_(y,w,b,n,t,m);else for(;y!=this.minLon_&&p++<d;)y=Math.max(y-r,this.minLon_),m=this.addMeridian_(y,w,b,n,t,m);if(y=(0,g.uZ)(c,this.minLon_,this.maxLon_),p=0,s)for(;(y+=r)<=E&&p++<d;)m=this.addMeridian_(y,w,b,n,t,m);else for(;y!=this.maxLon_&&p++<d;)y=Math.min(y+r,this.maxLon_),m=this.addMeridian_(y,w,b,n,t,m);for(this.meridians_.length=m,this.meridiansLabels_&&(this.meridiansLabels_.length=m),u=Math.floor(u/r)*r,_=(0,g.uZ)(u,this.minLat_,this.maxLat_),m=this.addParallel_(_,C,E,n,t,0),p=0;_!=this.minLat_&&p++<d;)_=Math.max(_-r,this.minLat_),m=this.addParallel_(_,C,E,n,t,m);for(_=(0,g.uZ)(u,this.minLat_,this.maxLat_),p=0;_!=this.maxLat_&&p++<d;)_=Math.min(_+r,this.maxLat_),m=this.addParallel_(_,C,E,n,t,m);this.parallels_.length=m,this.parallelsLabels_&&(this.parallelsLabels_.length=m)}getInterval_(t){const e=this.projectionCenterLonLat_[0],i=this.projectionCenterLonLat_[1];let n=-1;const r=Math.pow(this.targetSize_*t,2),s=[],o=[];for(let a=0,l=this.intervals_.length;a<l;++a){const t=(0,g.uZ)(this.intervals_[a]/2,0,90),l=(0,g.uZ)(i,-90+t,90-t);s[0]=e-t,s[1]=l-t,o[0]=e+t,o[1]=l+t,this.fromLonLatTransform_(s,s),this.fromLonLatTransform_(o,o);if(Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)<=r)break;n=this.intervals_[a]}return n}getMeridian_(t,e,i,n,r){const s=function(t,e,i,n,r){const s=(0,_.get)("EPSG:4326");return b((function(n){return[t,e+(i-e)*n]}),(0,_.getTransform)(s,n),r)}(t,e,i,this.projection_,n);let o=this.meridians_[r];return o?(o.setFlatCoordinates("XY",s),o.changed()):(o=new a.Z(s,"XY"),this.meridians_[r]=o),o}getMeridianPoint_(t,e,i){const n=t.getFlatCoordinates();let r=1,s=n.length-1;n[r]>n[s]&&(r=s,s=1);const o=Math.max(e[1],n[r]),a=Math.min(e[3],n[s]),l=(0,g.uZ)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,o,a),h=[n[r-1]+(n[s-1]-n[r-1])*(l-n[r])/(n[s]-n[r]),l],c=this.meridiansLabels_[i].geom;return c.setCoordinates(h),c}getMeridians(){return this.meridians_}getParallel_(t,e,i,n,r){const s=function(t,e,i,n,r){const s=(0,_.get)("EPSG:4326");return b((function(n){return[e+(i-e)*n,t]}),(0,_.getTransform)(s,n),r)}(t,e,i,this.projection_,n);let o=this.parallels_[r];return o?(o.setFlatCoordinates("XY",s),o.changed()):o=new a.Z(s,"XY"),o}getParallelPoint_(t,e,i){const n=t.getFlatCoordinates();let r=0,s=n.length-2;n[r]>n[s]&&(r=s,s=0);const o=Math.max(e[0],n[r]),a=Math.min(e[2],n[s]),l=(0,g.uZ)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,o,a),h=[l,n[r+1]+(n[s+1]-n[r+1])*(l-n[r])/(n[s]-n[r])],c=this.parallelsLabels_[i].geom;return c.setCoordinates(h),c}getParallels(){return this.parallels_}updateProjectionInfo_(t){const e=(0,_.get)("EPSG:4326"),i=t.getWorldExtent();this.maxLat_=i[3],this.maxLon_=i[2],this.minLat_=i[1],this.minLon_=i[0];const n=(0,_.getTransform)(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=n;else{const t=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(e,i,r){const s=n(e,i,r=r||2);for(let n=0,o=s.length;n<o;n+=r)s[n]<t&&(s[n]+=360);return s}}this.fromLonLatTransform_=(0,_.getTransform)(e,t);const r=(0,f.Ne)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=r[0],this.maxX_=r[2],this.minY_=r[1],this.maxY_=r[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,f.qg)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}const S=C;var T=i(6316),R=i(9913),M=i(9449),I=i(9265),P=i(4465);const L=34962,A=34963,k=35044,O=35048,N=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function F(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!P.ME},e);const i=N.length;for(let r=0;r<i;++r)try{const i=t.getContext(N[r],e);if(i)return i}catch(n){}return null}var D=i(9141);const Z=k;function j(t){switch(t){case L:return Float32Array;case A:return Uint32Array;default:return Float32Array}}const z=class{constructor(t,e){this.array=null,this.type=t,(0,D.h)(t===L||t===A,62),this.usage=void 0!==e?e:Z}ofSize(t){return this.array=new(j(this.type))(t),this}fromArray(t){return this.array=j(this.type).from(t),this}fromArrayBuffer(t){return this.array=new(j(this.type))(t),this}getType(){return this.type}getArray(){return this.array}getUsage(){return this.usage}getSize(){return this.array?this.array.length:0}};var G=i(812),B=i(9829),U=i(3885);const V="webglcontextlost",q="webglcontextrestored";var W=i(6175),X=i(3039);const H=class{constructor(t){this.gl_=t.webGlContext;const e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer();const i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t.vertexShader||"\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(i);const n=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(n,t.fragmentShader||"\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),e.compileShader(n),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,i),e.attachShader(this.renderTargetProgram_,n),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach((i=>{this.uniforms_.push({value:t.uniforms[i],location:e.getUniformLocation(this.renderTargetProgram_,i)})}))}getGL(){return this.gl_}init(t){const e=this.getGL(),i=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;const t=0,n=e.RGBA,r=0,s=e.RGBA,o=e.UNSIGNED_BYTE,a=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,t,n,i[0],i[1],r,s,o,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0)}}apply(t,e,i,n){const r=this.getGL(),s=t.size;if(r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),!e){const e=(0,X.sq)(r.canvas);if(!t.renderTargets[e]){const i=r.getContextAttributes();i&&i.preserveDrawingBuffer&&(r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT)),t.renderTargets[e]=!0}}r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),r.uniform1i(this.renderTargetTextureLocation_,0);const o=t.layerStatesArray[t.layerIndex].opacity;r.uniform1f(this.renderTargetOpacityLocation_,o),this.applyUniforms(t),i&&i(r,t),r.drawArrays(r.TRIANGLES,0,6),n&&n(r,t)}getFrameBuffer(){return this.frameBuffer_}applyUniforms(t){const e=this.getGL();let i,n=1;this.uniforms_.forEach((function(r){if(i="function"==typeof r.value?r.value(t):r.value,i instanceof HTMLCanvasElement||i instanceof ImageData)r.texture||(r.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${n}`]),e.bindTexture(e.TEXTURE_2D,r.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),i instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,i.width,i.height,0,e.UNSIGNED_BYTE,new Uint8Array(i.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.uniform1i(r.location,n++);else if(Array.isArray(i))switch(i.length){case 2:return void e.uniform2f(r.location,i[0],i[1]);case 3:return void e.uniform3f(r.location,i[0],i[1],i[2]);case 4:return void e.uniform4f(r.location,i[0],i[1],i[2],i[3]);default:return}else"number"==typeof i&&e.uniform1f(r.location,i)}))}};var K=i(3878);function Y(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const $="u_projectionMatrix",J="u_offsetScaleMatrix",Q="u_offsetRotateMatrix",tt="u_time",et="u_zoom",it="u_resolution",nt="u_viewportSizePx",rt="u_pixelRatio",st={UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126},ot={};function at(t){return"shared/"+t}let lt=0;class ht extends W.Z{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?at(t.canvasCacheKey):function(){const t="unique/"+lt;return lt+=1,t}(),this.canvas_=function(t){let e=ot[t];if(!e){const i=document.createElement("canvas");i.style.position="absolute",i.style.left="0",e={users:0,canvas:i},ot[t]=e}return e.users+=1,e.canvas}(this.canvasCacheKey_),this.gl_=F(this.canvas_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.canvas_.addEventListener(V,this.boundHandleWebGLContextLost_),this.canvas_.addEventListener(q,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=(0,v.Ue)(),this.offsetScaleMatrix_=(0,v.Ue)(),this.tmpMat4_=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map((t=>new H({webGlContext:this.gl_,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms}))):[new H({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[];for(const e in t)this.uniforms_.push({name:e,value:t[e]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===at(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e}bindBuffer(t){const e=this.gl_,i=(0,X.sq)(t);let n=this.bufferCache_[i];if(!n){n={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[i]=n}e.bindBuffer(t.getType(),n.webGlBuffer)}flushBufferData(t){const e=this.gl_;this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const e=this.gl_,i=(0,X.sq)(t),n=this.bufferCache_[i];n&&!e.isContextLost()&&e.deleteBuffer(n.webGlBuffer),delete this.bufferCache_[i]}disposeInternal(){this.canvas_.removeEventListener(V,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(q,this.boundHandleWebGLContextRestored_),function(t){const e=ot[t];if(!e)return;if(e.users-=1,e.users>0)return;const i=F(e.canvas).getExtension("WEBGL_lose_context");i&&i.loseContext(),delete ot[t]}(this.canvasCacheKey_),delete this.gl_,delete this.canvas_}prepareDraw(t,e){const i=this.gl_,n=this.getCanvas(),r=t.size,s=t.pixelRatio;n.width===r[0]*s&&n.height===r[1]*s||(n.width=r[0]*s,n.height=r[1]*s,n.style.width=r[0]+"px",n.style.height=r[1]+"px");for(let o=this.postProcessPasses_.length-1;o>=0;o--)this.postProcessPasses_[o].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,e?i.ZERO:i.ONE_MINUS_SRC_ALPHA)}bindTexture(t,e,i){const n=this.gl_;n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,t),n.uniform1i(this.getUniformLocation(i),e)}prepareDrawToRenderTarget(t,e,i){const n=this.gl_,r=e.getSize();n.bindFramebuffer(n.FRAMEBUFFER,e.getFramebuffer()),n.viewport(0,0,r[0],r[1]),n.bindTexture(n.TEXTURE_2D,e.getTexture()),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.enable(n.BLEND),n.blendFunc(n.ONE,i?n.ZERO:n.ONE_MINUS_SRC_ALPHA)}drawElements(t,e){const i=this.gl_;this.getExtension("OES_element_index_uint");const n=i.UNSIGNED_INT,r=e-t,s=4*t;i.drawElements(i.TRIANGLES,r,n,s)}finalizeDraw(t,e,i){for(let n=0,r=this.postProcessPasses_.length;n<r;n++)n===r-1?this.postProcessPasses_[n].apply(t,null,e,i):this.postProcessPasses_[n].apply(t,this.postProcessPasses_[n+1])}getCanvas(){return this.canvas_}getGL(){return this.gl_}applyFrameState(t){const e=t.size,i=t.viewState.rotation,n=t.pixelRatio,r=(0,v.mc)(this.offsetScaleMatrix_);(0,v.bA)(r,2/e[0],2/e[1]);const s=(0,v.mc)(this.offsetRotateMatrix_);0!==i&&(0,v.U1)(s,-i),this.setUniformMatrixValue(J,Y(this.tmpMat4_,r)),this.setUniformMatrixValue(Q,Y(this.tmpMat4_,s)),this.setUniformFloatValue(tt,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(et,t.viewState.zoom),this.setUniformFloatValue(it,t.viewState.resolution),this.setUniformFloatValue(rt,n),this.setUniformFloatVec2(nt,[e[0],e[1]])}applyUniforms(t){const e=this.gl_;let i,n=0;this.uniforms_.forEach((r=>{if(i="function"==typeof r.value?r.value(t):r.value,i instanceof HTMLCanvasElement||i instanceof HTMLImageElement||i instanceof ImageData){r.texture||(r.prevValue=void 0,r.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${n}`]),e.bindTexture(e.TEXTURE_2D,r.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);(!(i instanceof HTMLImageElement)||i.complete)&&r.prevValue!==i&&(r.prevValue=i,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i)),e.uniform1i(this.getUniformLocation(r.name),n++)}else if(Array.isArray(i)&&6===i.length)this.setUniformMatrixValue(r.name,Y(this.tmpMat4_,i));else if(Array.isArray(i)&&i.length<=4)switch(i.length){case 2:return void e.uniform2f(this.getUniformLocation(r.name),i[0],i[1]);case 3:return void e.uniform3f(this.getUniformLocation(r.name),i[0],i[1],i[2]);case 4:return void e.uniform4f(this.getUniformLocation(r.name),i[0],i[1],i[2],i[3]);default:return}else"number"==typeof i&&e.uniform1f(this.getUniformLocation(r.name),i)}))}useProgram(t,e){this.gl_.useProgram(t),this.currentProgram_=t,this.applyFrameState(e),this.applyUniforms(e)}compileShader(t,e){const i=this.gl_,n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}getProgram(t,e){const i=this.gl_,n=this.compileShader(t,i.FRAGMENT_SHADER),r=this.compileShader(e,i.VERTEX_SHADER),s=i.createProgram();if(i.attachShader(s,n),i.attachShader(s,r),i.linkProgram(s),!i.getShaderParameter(n,i.COMPILE_STATUS)){const t=`Fragment shader compilation failed: ${i.getShaderInfoLog(n)}`;throw new Error(t)}if(i.deleteShader(n),!i.getShaderParameter(r,i.COMPILE_STATUS)){const t=`Vertex shader compilation failed: ${i.getShaderInfoLog(r)}`;throw new Error(t)}if(i.deleteShader(r),!i.getProgramParameter(s,i.LINK_STATUS)){const t=`GL program linking failed: ${i.getProgramInfoLog(s)}`;throw new Error(t)}return s}getUniformLocation(t){const e=(0,X.sq)(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[e]&&(this.uniformLocationsByProgram_[e]={}),void 0===this.uniformLocationsByProgram_[e][t]&&(this.uniformLocationsByProgram_[e][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[e][t]}getAttributeLocation(t){const e=(0,X.sq)(this.currentProgram_);return void 0===this.attribLocationsByProgram_[e]&&(this.attribLocationsByProgram_[e]={}),void 0===this.attribLocationsByProgram_[e][t]&&(this.attribLocationsByProgram_[e][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[e][t]}makeProjectionTransform(t,e){const i=t.size,n=t.viewState.rotation,r=t.viewState.resolution,s=t.viewState.center;return(0,v.qC)(e,0,0,2/(r*i[0]),2/(r*i[1]),-n,-s[0],-s[1]),e}setUniformFloatValue(t,e){this.gl_.uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.gl_.uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.gl_.uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}enableAttributeArray_(t,e,i,n,r){const s=this.getAttributeLocation(t);s<0||(this.gl_.enableVertexAttribArray(s),this.gl_.vertexAttribPointer(s,e,i,!1,n,r))}enableAttributes(t){const e=function(t){let e=0;for(let i=0;i<t.length;i++){const n=t[i];e+=n.size*ct(n.type)}return e}(t);let i=0;for(let n=0;n<t.length;n++){const r=t[n];this.enableAttributeArray_(r.name,r.size,r.type||5126,e,i),i+=r.size*ct(r.type)}}handleWebGLContextLost(){(0,K.Z)(this.bufferCache_),this.currentProgram_=null}handleWebGLContextRestored(){}createTexture(t,e,i){const n=this.gl_;i=i||n.createTexture();const r=n.RGBA,s=n.RGBA,o=n.UNSIGNED_BYTE;return n.bindTexture(n.TEXTURE_2D,i),e?n.texImage2D(n.TEXTURE_2D,0,r,s,o,e):n.texImage2D(n.TEXTURE_2D,0,r,t[0],t[1],0,s,o,null),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),i}}function ct(t){switch(t){case st.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case st.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case st.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case st.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}const ut=ht;class dt extends B.Z{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=(0,v.Ue)(),this.pixelContext_=null,this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,this.helper,t.addChangeListener(G.Z.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){const i=this.getLayer();if(i.hasListener(r.Z.PRECOMPOSE)){const n=new U.Z(r.Z.PRECOMPOSE,void 0,e,t);i.dispatchEvent(n)}}dispatchPostComposeEvent(t,e){const i=this.getLayer();if(i.hasListener(r.Z.POSTCOMPOSE)){const n=new U.Z(r.Z.POSTCOMPOSE,void 0,e,t);i.dispatchEvent(n)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e,i=!0,n=-1;for(let s=0,o=t.layerStatesArray.length;s<o;s++){const r=t.layerStatesArray[s].layer,o=r.getRenderer();if(!(o instanceof dt)){i=!0;continue}const a=r.getClassName();if((i||a!==e)&&(n+=1,i=!1),e=a,o===this)break}const r="map/"+t.mapId+"/group/"+n;this.helper&&this.helper.canvasCacheKeyMatches(r)||(this.removeHelper(),this.helper=new ut({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:r}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){(0,v.qC)(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);const r=new U.Z(t,this.inversePixelTransform_,i,e);n.dispatchEvent(r)}}preRender(t,e){this.dispatchRenderEvent_(r.Z.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(r.Z.POSTRENDER,t,e)}}const pt=dt;var ft=i(7794);const gt=new Uint8Array(4);const mt=class{constructor(t,e){this.helper_=t;const i=t.getGL();this.texture_=i.createTexture(),this.framebuffer_=i.createFramebuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){(0,ft.fS)(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return gt[0]=0,gt[1]=0,gt[2]=0,gt[3]=0,gt;this.readAll();const i=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return gt[0]=this.data_[4*i],gt[1]=this.data_[4*i+1],gt[2]=this.data_[4*i+2],gt[3]=this.data_[4*i+3],gt}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}updateSize_(){const t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),this.data_=new Uint8Array(t[0]*t[1]*4)}},_t="GENERATE_POINT_BUFFERS";i(6949);function yt(t,e){const i=256,n=255;return(e=e||[])[0]=Math.floor(t/i/i/i)/n,e[1]=Math.floor(t/i/i)%i/n,e[2]=Math.floor(t/i)%i/n,e[3]=t%i/n,e}var vt=i(9640);const xt=class extends pt{constructor(t,e){const i=e.uniforms||{},n=(0,v.Ue)();i[$]=n,super(t,{uniforms:i,postProcesses:e.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new z(L,O),this.hitVerticesBuffer_=new z(L,O),this.indicesBuffer_=new z(A,O),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.program_,this.hitDetectionEnabled_=!(!e.hitFragmentShader||!e.hitVertexShader),this.hitVertexShader_=e.hitVertexShader,this.hitFragmentShader_=e.hitFragmentShader,this.hitProgram_;const r=e.attributes?e.attributes.map((function(t){return{name:"a_"+t.name,size:1,type:st.FLOAT}})):[];this.attributes=[{name:"a_position",size:2,type:st.FLOAT},{name:"a_index",size:1,type:st.FLOAT}].concat(r),this.hitDetectionAttributes=[{name:"a_position",size:2,type:st.FLOAT},{name:"a_index",size:1,type:st.FLOAT},{name:"a_hitColor",size:4,type:st.FLOAT},{name:"a_featureUid",size:1,type:st.FLOAT}].concat(r),this.customAttributes=e.attributes?e.attributes:[],this.previousExtent_=(0,f.lJ)(),this.currentTransform_=n,this.renderTransform_=(0,v.Ue)(),this.invertRenderTransform_=(0,v.Ue)(),this.renderInstructions_=new Float32Array(0),this.hitRenderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=function(){const t='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS",r={1:"The view center is not defined",2:"The view resolution is not defined",3:"The view rotation is not defined",4:"`image` and `src` cannot be provided at the same time",5:"`imgSize` must be set when `image` is provided",7:"`format` must be set when `url` is set",8:"Unknown `serverType` configured",9:"`url` must be configured or set using `#setUrl()`",10:"The default `geometryFunction` can only handle `Point` geometries",11:"`options.featureTypes` must be an Array",12:"`options.geometryName` must also be provided when `options.bbox` is set",13:"Invalid corner",14:"Invalid color",15:"Tried to get a value for a key that does not exist in the cache",16:"Tried to set a value for a key that is used already",17:"`resolutions` must be sorted in descending order",18:"Either `origin` or `origins` must be configured, never both",19:"Number of `tileSizes` and `resolutions` must be equal",20:"Number of `origins` and `resolutions` must be equal",22:"Either `tileSize` or `tileSizes` must be configured, never both",24:"Invalid extent or geometry provided as `geometry`",25:"Cannot fit empty extent provided as `geometry`",26:"Features must have an id set",27:"Features must have an id set",28:\'`renderMode` must be `"hybrid"` or `"vector"`\',30:"The passed `feature` was already added to the source",31:"Tried to enqueue an `element` that was already added to the queue",32:"Transformation matrix cannot be inverted",33:"Invalid units",34:"Invalid geometry layout",36:"Unknown SRS type",37:"Unknown geometry type found",38:"`styleMapValue` has an unknown type",39:"Unknown geometry type",40:"Expected `feature` to have a geometry",41:"Expected an `ol/style/Style` or an array of `ol/style/Style.js`",42:"Question unknown, the answer is 42",43:"Expected `layers` to be an array or a `Collection`",47:"Expected `controls` to be an array or an `ol/Collection`",48:"Expected `interactions` to be an array or an `ol/Collection`",49:"Expected `overlays` to be an array or an `ol/Collection`",50:"`options.featureTypes` should be an Array",51:"Either `url` or `tileJSON` options must be provided",52:"Unknown `serverType` configured",53:"Unknown `tierSizeCalculation` configured",55:"The {-y} placeholder requires a tile grid with extent",56:"mapBrowserEvent must originate from a pointer event",57:"At least 2 conditions are required",59:"Invalid command found in the PBF",60:"Missing or invalid `size`",61:"Cannot determine IIIF Image API version from provided image information JSON",62:"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`",64:"Layer opacity must be a number",66:"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has not been enabled. This is done by providing adequate shaders using the `hitVertexShader` and `hitFragmentShader` properties of `WebGLPointsLayerRenderer`",67:"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both",68:"A VectorTile source can only be rendered if it has a projection compatible with the view projection",69:"`width` or `height` cannot be provided together with `scale`"};class o extends Error{constructor(e){const t=r[e];super(t),this.code=e,this.name="AssertionError",this.message=t}}var i=o;function a(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function s(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new i(t)}(0!==n,32);const o=t[0],a=t[1],s=t[2],u=t[3],f=t[4],x=t[5];return e[0]=u/n,e[1]=-a/n,e[2]=-s/n,e[3]=o/n,e[4]=(s*x-u*f)/n,e[5]=-(o*x-a*f)/n,e}function u(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var f={exports:{}};function x(e,t,n){n=n||2;var r,o,i,a,s,u,f,x=t&&t.length,h=x?t[0]*n:e.length,v=l(e,0,h,n,!0),d=[];if(!v||v.next===v.prev)return d;if(x&&(v=function(e,t,n,r){var o,i,a,s=[];for(o=0,i=t.length;o<i;o++)(a=l(e,t[o]*r,o<i-1?t[o+1]*r:e.length,r,!1))===a.next&&(a.steiner=!0),s.push(A(a));for(s.sort(b),o=0;o<s.length;o++)n=g(s[o],n);return n}(e,t,v,n)),e.length>80*n){r=i=e[0],o=a=e[1];for(var y=n;y<h;y+=n)(s=e[y])<r&&(r=s),(u=e[y+1])<o&&(o=u),s>i&&(i=s),u>a&&(a=u);f=0!==(f=Math.max(i-r,a-o))?32767/f:0}return c(v,d,n,r,o,f,0),d}function l(e,t,n,r,o){var i,a;if(o===P(e,t,n,r)>0)for(i=t;i<n;i+=r)a=k(i,e[i],e[i+1],a);else for(i=n-r;i>=t;i-=r)a=k(i,e[i],e[i+1],a);return a&&F(a,a.next)&&(R(a),a=a.next),a}function h(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!F(r,r.next)&&0!==Z(r.prev,r,r.next))r=r.next;else{if(R(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function c(e,t,n,r,o,i,a){if(e){!a&&i&&function(e,t,n,r){var o=e;do{0===o.z&&(o.z=w(o.x,o.y,t,n,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,function(e){var t,n,r,o,i,a,s,u,f=1;do{for(n=e,e=null,i=null,a=0;n;){for(a++,r=n,s=0,t=0;t<f&&(s++,r=r.nextZ);t++);for(u=f;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(o=n,n=n.nextZ,s--):(o=r,r=r.nextZ,u--),i?i.nextZ=o:e=o,o.prevZ=i,i=o;n=r}i.nextZ=null,f*=2}while(a>1)}(o)}(e,r,o,i);for(var s,u,f=e;e.prev!==e.next;)if(s=e.prev,u=e.next,i?d(e,r,o,i):v(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(u.i/n|0),R(e),e=u.next,f=u.next;else if((e=u)===f){a?1===a?c(e=y(h(e),t,n),t,n,r,o,i,2):2===a&&p(e,t,n,r,o,i):c(h(e),t,n,r,o,i,1);break}}}function v(e){var t=e.prev,n=e,r=e.next;if(Z(t,n,r)>=0)return!1;for(var o=t.x,i=n.x,a=r.x,s=t.y,u=n.y,f=r.y,x=o<i?o<a?o:a:i<a?i:a,l=s<u?s<f?s:f:u<f?u:f,h=o>i?o>a?o:a:i>a?i:a,c=s>u?s>f?s:f:u>f?u:f,v=r.next;v!==t;){if(v.x>=x&&v.x<=h&&v.y>=l&&v.y<=c&&E(o,s,i,u,a,f,v.x,v.y)&&Z(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function d(e,t,n,r){var o=e.prev,i=e,a=e.next;if(Z(o,i,a)>=0)return!1;for(var s=o.x,u=i.x,f=a.x,x=o.y,l=i.y,h=a.y,c=s<u?s<f?s:f:u<f?u:f,v=x<l?x<h?x:h:l<h?l:h,d=s>u?s>f?s:f:u>f?u:f,y=x>l?x>h?x:h:l>h?l:h,p=w(c,v,t,n,r),b=w(d,y,t,n,r),g=e.prevZ,m=e.nextZ;g&&g.z>=p&&m&&m.z<=b;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&E(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,m.x>=c&&m.x<=d&&m.y>=v&&m.y<=y&&m!==o&&m!==a&&E(s,x,u,l,f,h,m.x,m.y)&&Z(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;g&&g.z>=p;){if(g.x>=c&&g.x<=d&&g.y>=v&&g.y<=y&&g!==o&&g!==a&&E(s,x,u,l,f,h,g.x,g.y)&&Z(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;m&&m.z<=b;){if(m.x>=c&&m.x<=d&&m.y>=v&&m.y<=y&&m!==o&&m!==a&&E(s,x,u,l,f,h,m.x,m.y)&&Z(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function y(e,t,n){var r=e;do{var o=r.prev,i=r.next.next;!F(o,i)&&T(o,r,r.next,i)&&z(o,i)&&z(i,o)&&(t.push(o.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),R(r),R(r.next),r=e=i),r=r.next}while(r!==e);return h(r)}function p(e,t,n,r,o,i){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&M(a,s)){var u=U(a,s);return a=h(a,a.next),u=h(u,u.next),c(a,t,n,r,o,i,0),void c(u,t,n,r,o,i,0)}s=s.next}a=a.next}while(a!==e)}function b(e,t){return e.x-t.x}function g(e,t){var n=function(e,t){var n,r=t,o=e.x,i=e.y,a=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=o&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===o))return n}r=r.next}while(r!==t);if(!n)return null;var u,f=n,x=n.x,l=n.y,h=1/0;r=n;do{o>=r.x&&r.x>=x&&o!==r.x&&E(i<l?o:a,i,x,l,i<l?a:o,i,r.x,r.y)&&(u=Math.abs(i-r.y)/(o-r.x),z(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&m(n,r)))&&(n=r,h=u)),r=r.next}while(r!==f);return n}(e,t);if(!n)return t;var r=U(n,e);return h(r,r.next),h(n,n.next)}function m(e,t){return Z(e.prev,e,t.prev)<0&&Z(t.next,e,e.next)<0}function w(e,t,n,r,o){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*o|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*o|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function A(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function E(e,t,n,r,o,i,a,s){return(o-a)*(t-s)>=(e-a)*(i-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(i-s)>=(o-a)*(r-s)}function M(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&T(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,o=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&o<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(Z(e.prev,e,t.prev)||Z(e,t.prev,t))||F(e,t)&&Z(e.prev,e,e.next)>0&&Z(t.prev,t,t.next)>0)}function Z(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function F(e,t){return e.x===t.x&&e.y===t.y}function T(e,t,n,r){var o=S(Z(e,t,n)),i=S(Z(e,t,r)),a=S(Z(n,r,e)),s=S(Z(n,r,t));return o!==i&&a!==s||(!(0!==o||!I(e,n,t))||(!(0!==i||!I(e,r,t))||(!(0!==a||!I(n,e,r))||!(0!==s||!I(n,t,r)))))}function I(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function S(e){return e>0?1:e<0?-1:0}function z(e,t){return Z(e.prev,e,e.next)<0?Z(e,t,e.next)>=0&&Z(e,e.prev,t)>=0:Z(e,t,e.prev)<0||Z(e,e.next,t)<0}function U(e,t){var n=new B(e.i,e.x,e.y),r=new B(t.i,t.x,t.y),o=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=o,o.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function k(e,t,n,r){var o=new B(e,t,n);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function R(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function B(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(e,t,n,r){for(var o=0,i=t,a=n-r;i<n;i+=r)o+=(e[a]-e[i])*(e[i+1]+e[a+1]),a=i;return o}f.exports=x,f.exports.default=x,x.deviation=function(e,t,n,r){var o=t&&t.length,i=o?t[0]*n:e.length,a=Math.abs(P(e,0,i,n));if(o)for(var s=0,u=t.length;s<u;s++){var f=t[s]*n,x=s<u-1?t[s+1]*n:e.length;a-=Math.abs(P(e,f,x,n))}var l=0;for(s=0;s<r.length;s+=3){var h=r[s]*n,c=r[s+1]*n,v=r[s+2]*n;l+=Math.abs((e[h]-e[v])*(e[c+1]-e[h+1])-(e[h]-e[c])*(e[v+1]-e[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},x.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,o=0;o<e.length;o++){for(var i=0;i<e[o].length;i++)for(var a=0;a<t;a++)n.vertices.push(e[o][i][a]);o>0&&(r+=e[o-1].length,n.holes.push(r))}return n};var N=u(f.exports);const _=[],O={vertexPosition:0,indexPosition:0};function q(e,t,n,r,o){e[t+0]=n,e[t+1]=r,e[t+2]=o}function L(e,t,n,r,o,i){const a=3+o,s=e[t+0],u=e[t+1],f=_;f.length=o;for(let n=0;n<f.length;n++)f[n]=e[t+2+n];let x=i?i.vertexPosition:0,l=i?i.indexPosition:0;const h=x/a;return q(n,x,s,u,0),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,1),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,2),f.length&&n.set(f,x+3),x+=a,q(n,x,s,u,3),f.length&&n.set(f,x+3),x+=a,r[l++]=h,r[l++]=h+1,r[l++]=h+3,r[l++]=h+1,r[l++]=h+2,r[l++]=h+3,O.vertexPosition=x,O.indexPosition=l,O}function C(e,t,n,r,o,i,s,u,f,x){const l=5+u.length,h=i.length/l,c=[e[t+0],e[t+1]],v=[e[n],e[n+1]],d=a(x,[...c]),y=a(x,[...v]);function p(e,t,n){const r=1e4;return Math.round(1500*t)+Math.round(1500*n)*r+e*r*r}function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),o=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-o[1],o[0]],a=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),s=[(n[0]-e[0])/a,(n[1]-e[1])/a],u=0===r||0===a?0:Math.acos((f=s[0]*o[0]+s[1]*o[1],x=-1,l=1,Math.min(Math.max(f,x),l)));var f,x,l;return s[0]*i[0]+s[1]*i[1]>0?u:2*Math.PI-u}const g=null!==o;let m=0,w=0;if(null!==r){m=b(d,y,a(x,[...[e[r],e[r+1]]]))}if(g){w=b(y,d,a(x,[...[e[o],e[o+1]]]))}i.push(c[0],c[1],v[0],v[1],p(0,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(1,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(2,m,w)),i.push(...u),i.push(c[0],c[1],v[0],v[1],p(3,m,w)),i.push(...u),s.push(h,h+1,h+2,h+1,h+3,h+2)}function G(e,t,n,r,o){const i=2+o;let a=t;const s=e.slice(a,a+o);a+=o;const u=e[a++];let f=0;const x=new Array(u-1);for(let t=0;t<u;t++)f+=e[a++],t<u-1&&(x[t]=f);const l=e.slice(a,a+2*f),h=N(l,x,2);for(let e=0;e<h.length;e++)r.push(h[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...s);return a+2*f}const j=self;j.onmessage=r=>{const o=r.data;switch(o.type){case t:{const e=3,t=2,n=o.customAttributesSize,r=t+n,i=new Float32Array(o.renderInstructions),a=i.length/r,s=4*a*(n+e),u=new Uint32Array(6*a),f=new Float32Array(s);let x;for(let e=0;e<i.length;e+=r)x=L(i,e,f,u,n,x);const l=Object.assign({vertexBuffer:f.buffer,indexBuffer:u.buffer,renderInstructions:i.buffer},o);j.postMessage(l,[f.buffer,u.buffer,i.buffer]);break}case n:{const e=[],t=[],n=o.customAttributesSize,r=2,i=new Float32Array(o.renderInstructions);let a=0;const u=o.renderInstructionsTransform,f=[1,0,0,1,0,0];let x,l;for(s(f,u);a<i.length;){l=Array.from(i.slice(a,a+n)),a+=n,x=i[a++];for(let n=0;n<x-1;n++)C(i,a+n*r,a+(n+1)*r,n>0?a+(n-1)*r:null,n<x-2?a+(n+2)*r:null,e,t,l,0,f);a+=x*r}const h=Uint32Array.from(t),c=Float32Array.from(e),v=Object.assign({vertexBuffer:c.buffer,indexBuffer:h.buffer,renderInstructions:i.buffer},o);j.postMessage(v,[c.buffer,h.buffer,i.buffer]);break}case e:{const e=[],t=[],n=o.customAttributesSize,r=new Float32Array(o.renderInstructions);let i=0;for(;i<r.length;)i=G(r,i,e,t,n);const a=Uint32Array.from(t),s=Float32Array.from(e),u=Object.assign({vertexBuffer:s.buffer,indexBuffer:a.buffer,renderInstructions:r.buffer},o);j.postMessage(u,[s.buffer,a.buffer,r.buffer]);break}}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}(),this.worker_.addEventListener("message",(t=>{const e=t.data;if(e.type===_t){const i=e.projectionTransform;e.hitDetection?(this.hitVerticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.hitVerticesBuffer_)):(this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_)),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=i,(0,v.nb)(this.invertRenderTransform_,this.renderTransform_),e.hitDetection?this.hitRenderInstructions_=new Float32Array(t.data.renderInstructions):(this.renderInstructions_=new Float32Array(t.data.renderInstructions),e.id===this.lastSentId&&(this.ready=!0)),this.getLayer().changed()}})),this.featureCache_={},this.featureCount_=0;const s=this.getLayer().getSource();this.sourceListenKeys_=[(0,vt.oL)(s,M.Z.ADDFEATURE,this.handleSourceFeatureAdded_,this),(0,vt.oL)(s,M.Z.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),(0,vt.oL)(s,M.Z.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),(0,vt.oL)(s,M.Z.CLEAR,this.handleSourceFeatureClear_,this)],s.forEachFeature((t=>{this.featureCache_[(0,X.sq)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitProgram_=this.helper.getProgram(this.hitFragmentShader_,this.hitVertexShader_),this.hitRenderTarget_=new mt(this.helper))}handleSourceFeatureAdded_(t){const e=t.feature;this.featureCache_[(0,X.sq)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(t){const e=t.feature;this.featureCache_[(0,X.sq)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}}handleSourceFeatureDelete_(t){const e=t.feature;delete this.featureCache_[(0,X.sq)(e)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const e=this.helper.getGL();this.preRender(e,t);const i=t.viewState.projection,n=this.getLayer().getSource().getWrapX()&&i.canWrapX(),r=i.getExtent(),s=t.extent,o=n?(0,f.dz)(r):null,a=n?Math.ceil((s[2]-r[2])/o)+1:1,l=n?Math.floor((s[0]-r[0])/o):0;let h=l;const c=this.indicesBuffer_.getSize();do{this.helper.makeProjectionTransform(t,this.currentTransform_),(0,v.Iu)(this.currentTransform_,h*o,0),(0,v.Jp)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.drawElements(0,c)}while(++h<a);this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const u=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderHitDetection(t,l,a,o),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),u}prepareFrameInternal(t){const e=this.getLayer(),i=e.getSource(),n=t.viewState,r=!t.viewHints[I.Z.ANIMATING]&&!t.viewHints[I.Z.INTERACTING],s=!(0,f.fS)(this.previousExtent_,t.extent),o=this.sourceRevision_<i.getRevision();if(o&&(this.sourceRevision_=i.getRevision()),r&&(s||o)){const r=n.projection,s=n.resolution,o=e instanceof R.Z?e.getRenderBuffer():0,a=(0,f.f3)(t.extent,o*s);i.loadFeatures(a,s,r),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const e=(0,v.Ue)();this.helper.makeProjectionTransform(t,e);const i=(2+this.customAttributes.length)*this.featureCount_;if(this.renderInstructions_&&this.renderInstructions_.length===i||(this.renderInstructions_=new Float32Array(i)),this.hitDetectionEnabled_){const t=(7+this.customAttributes.length)*this.featureCount_;this.hitRenderInstructions_&&this.hitRenderInstructions_.length===t||(this.hitRenderInstructions_=new Float32Array(t))}let n,r;const s=[],o=[];let a,l=0,h=0;for(const u in this.featureCache_){if(n=this.featureCache_[u],r=n.geometry,!r||"Point"!==r.getType())continue;let t;s[0]=r.getFlatCoordinates()[0],s[1]=r.getFlatCoordinates()[1],(0,v.nn)(e,s),a=yt(h+6,o),this.renderInstructions_[l++]=s[0],this.renderInstructions_[l++]=s[1],this.hitDetectionEnabled_&&(this.hitRenderInstructions_[h++]=s[0],this.hitRenderInstructions_[h++]=s[1],this.hitRenderInstructions_[h++]=a[0],this.hitRenderInstructions_[h++]=a[1],this.hitRenderInstructions_[h++]=a[2],this.hitRenderInstructions_[h++]=a[3],this.hitRenderInstructions_[h++]=Number(u));for(let e=0;e<this.customAttributes.length;e++)t=this.customAttributes[e].callback(n.feature,n.properties),this.renderInstructions_[l++]=t,this.hitDetectionEnabled_&&(this.hitRenderInstructions_[h++]=t)}const c={id:++this.lastSentId,type:_t,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:this.customAttributes.length};if(c.projectionTransform=e,this.ready=!1,this.worker_.postMessage(c,[this.renderInstructions_.buffer]),this.renderInstructions_=null,this.hitDetectionEnabled_){const t={id:0,type:_t,renderInstructions:this.hitRenderInstructions_.buffer,customAttributesSize:5+this.customAttributes.length};t.projectionTransform=e,t.hitDetection=!0,this.worker_.postMessage(t,[this.hitRenderInstructions_.buffer]),this.hitRenderInstructions_=null}}forEachFeatureAtCoordinate(t,e,i,n,r){if((0,D.h)(this.hitDetectionEnabled_,66),!this.hitRenderInstructions_)return;const s=(0,v.nn)(e.coordinateToPixelTransform,t.slice()),o=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),a=function(t){let e=0;const i=256,n=255;return e+=Math.round(t[0]*i*i*i*n),e+=Math.round(t[1]*i*i*n),e+=Math.round(t[2]*i*n),e+=Math.round(t[3]*n),e}([o[0]/255,o[1]/255,o[2]/255,o[3]/255]),l=this.hitRenderInstructions_[a],h=Math.floor(l).toString(),c=this.getLayer().getSource().getFeatureByUid(h);return c?n(c,this.getLayer(),null):void 0}renderHitDetection(t,e,i,n){if(!this.hitVerticesBuffer_.getSize())return;let r=e;this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.useProgram(this.hitProgram_,t),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0),this.helper.bindBuffer(this.hitVerticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.hitDetectionAttributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),(0,v.Iu)(this.currentTransform_,r*n,0),(0,v.Jp)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t);const e=this.indicesBuffer_.getSize();this.helper.drawElements(0,e)}while(++r<i)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(t){(0,vt.bN)(t)})),this.sourceListenKeys_=null,super.disposeInternal()}};var bt=i(3248);const Et="blur",wt="gradient",Ct="radius",St=["#00f","#0ff","#0f0","#ff0","#f00"];class Tt extends R.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,super(e),this.gradient_=null,this.addChangeListener(wt,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:St),this.setBlur(void 0!==t.blur?t.blur:15),this.setRadius(void 0!==t.radius?t.radius:8);const i=t.weight?t.weight:"weight";this.weightFunction_="string"==typeof i?function(t){return t.get(i)}:i,this.setRenderOrder(null)}getBlur(){return this.get(Et)}getGradient(){return this.get(wt)}getRadius(){return this.get(Ct)}handleGradientChanged_(){this.gradient_=function(t){const e=1,i=256,n=(0,bt.E4)(e,i),r=n.createLinearGradient(0,0,e,i),s=1/(t.length-1);for(let o=0,a=t.length;o<a;++o)r.addColorStop(o*s,t[o]);return n.fillStyle=r,n.fillRect(0,0,e,i),n.canvas}(this.getGradient())}setBlur(t){this.set(Et,t)}setGradient(t){this.set(wt,t)}setRadius(t){this.set(Ct,t)}createRenderer(){return new xt(this,{className:this.getClassName(),attributes:[{name:"weight",callback:t=>{const e=this.weightFunction_(t);return void 0!==e?(0,g.uZ)(e,0,1):1}}],vertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_weight = a_weight;\n        }",fragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\n        }",hitVertexShader:"\n        precision mediump float;\n        uniform mat4 u_projectionMatrix;\n        uniform mat4 u_offsetScaleMatrix;\n        uniform float u_size;\n        attribute vec2 a_position;\n        attribute float a_index;\n        attribute float a_weight;\n        attribute vec4 a_hitColor;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          mat4 offsetMatrix = u_offsetScaleMatrix;\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\n          v_texCoord = vec2(u, v);\n          v_hitColor = a_hitColor;\n          v_weight = a_weight;\n        }",hitFragmentShader:"\n        precision mediump float;\n        uniform float u_blurSlope;\n\n        varying vec2 v_texCoord;\n        varying float v_weight;\n        varying vec4 v_hitColor;\n\n        void main(void) {\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\n          if (alpha < 0.05) {\n            discard;\n          }\n\n          gl_FragColor = v_hitColor;\n        }",uniforms:{u_size:()=>2*(this.get(Ct)+this.get(Et)),u_blurSlope:()=>this.get(Ct)/Math.max(1,this.get(Et))},postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}const Rt=Tt;var Mt=i(5069),It=i(9486),Pt=i(8685),Lt=i(1971),At=i(9184),kt=i(832),Ot=i(8237),Nt=i(1637),Ft=i(1812),Dt=i(4746),Zt=i(4560),jt=i(2691),zt=i(1654),Gt=i(1046),Bt=i(1420);const Ut=(0,v.Ue)();class Vt{constructor(t,e,i,n,r){this.styleFunction,this.extent_,this.id_=r,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=n}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,f.HK)(this.flatCoordinates_):(0,f.GN)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=(0,f.qg)(this.getExtent());this.flatInteriorPoints_=(0,jt.X)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=(0,Gt.E)(this.flatCoordinates_,0,this.ends_,2);this.flatInteriorPoints_=(0,jt.U)(this.flatCoordinates_,0,this.ends_,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,zt.WW)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let n=0,r=i.length;n<r;++n){const r=i[n],s=(0,zt.WW)(t,e,r,2,.5);(0,ft.l7)(this.flatMidpoints_,s),e=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getStride(){return 2}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=(0,_.get)(t)).getExtent(),i=t.getWorldExtent();if(e&&i){const t=(0,f.Cr)(i)/(0,f.Cr)(e);(0,v.qC)(Ut,i[0],i[3],t,-t,0,0,0),(0,Bt.vT)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Ut,this.flatCoordinates_)}}getEnds(){return this.ends_}}Vt.prototype.getEndss=Vt.prototype.getEnds,Vt.prototype.getFlatCoordinates=Vt.prototype.getOrientedFlatCoordinates;const qt=Vt;var Wt=i(204);class Xt extends At.ZP{constructor(t){super(),t=t||{},this.dataProjection=new Zt.Z({code:"",units:"tile-pixels"}),this.featureClass_=t.featureClass?t.featureClass:qt,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,i,n){t.pos=e.geometry;const r=t.readVarint()+t.pos;let s=1,o=0,a=0,l=0,h=0,c=0;for(;t.pos<r;){if(!o){const e=t.readVarint();s=7&e,o=e>>3}o--,1===s||2===s?(a+=t.readSVarint(),l+=t.readSVarint(),1===s&&h>c&&(n.push(h),c=h),i.push(a,l),h+=2):7===s?h>c&&(i.push(i[c],i[c+1]),h+=2):(0,D.h)(!1,59)}h>c&&(n.push(h),c=h)}createFeature_(t,e,i){const n=e.type;if(0===n)return null;let r;const s=e.properties;let o;this.idProperty_?(o=s[this.idProperty_],delete s[this.idProperty_]):o=e.id,s[this.layerName_]=e.layer.name;const h=[],c=[];this.readRawGeometry_(t,e,h,c);const u=function(t,e){let i;1===t?i=1===e?"Point":"MultiPoint":2===t?i=1===e?"LineString":"MultiLineString":3===t&&(i="Polygon");return i}(n,c.length);if(this.featureClass_===qt)r=new this.featureClass_(u,h,c,s,o),r.transform(i.dataProjection);else{let t;if("Polygon"==u){const e=(0,Wt.Q3)(h,c);t=e.length>1?new Nt.Z(h,"XY",e):new Dt.ZP(h,"XY",c)}else t="Point"===u?new l.Z(h,"XY"):"LineString"===u?new a.Z(h,"XY"):"MultiPoint"===u?new Ot.Z(h,"XY"):"MultiLineString"===u?new kt.Z(h,"XY",c):null;r=new(0,this.featureClass_),this.geometryName_&&r.setGeometryName(this.geometryName_);const e=(0,At.fI)(t,!1,i);r.setGeometry(e),void 0!==o&&r.setId(o),r.setProperties(s,!0)}return r}getType(){return"arraybuffer"}readFeatures(t,e){const i=this.layers_;e=this.adaptOptions(e);const n=(0,_.get)(e.dataProjection);n.setWorldExtent(e.extent),e.dataProjection=n;const r=new Ft(t),s=r.readFields(Ht,{}),o=[];for(const a in s){if(i&&!i.includes(a))continue;const t=s[a],l=t?[0,0,t.extent,t.extent]:null;n.setExtent(l);for(let i=0,n=t.length;i<n;++i){const n=$t(r,t,i),s=this.createFeature_(r,n,e);null!==s&&o.push(s)}}return o}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function Ht(t,e,i){if(3===t){const t={keys:[],values:[],features:[]},n=i.readVarint()+i.pos;i.readFields(Kt,t,n),t.length=t.features.length,t.length&&(e[t.name]=t)}}function Kt(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){let n=null;const r=i.readVarint()+i.pos;for(;i.pos<r;)n=1===(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(n)}}function Yt(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t){const t=i.readVarint()+i.pos;for(;i.pos<t;){const t=e.layer.keys[i.readVarint()],n=e.layer.values[i.readVarint()];e.properties[t]=n}}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}function $t(t,e,i){t.pos=e.features[i];const n=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(Yt,r,n),r}const Jt=Xt;var Qt=i(7522),te=i(5249),ee=i(2841),ie=i(5696),ne=i(7409),re=i(7273);const se={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},oe={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class ae extends ee.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=(0,v.Ue)()}prepareTile(t,e,i){let n;const r=t.getState();return r!==ie.Z.LOADED&&r!==ie.Z.ERROR||(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t)&&(n=!0)),n}getTile(t,e,i,n){const r=n.pixelRatio,s=n.viewState,o=s.resolution,a=s.projection,l=this.getLayer(),h=l.getSource().getTile(t,e,i,r,a),c=n.viewHints,u=!(c[I.Z.ANIMATING]||c[I.Z.INTERACTING]);!u&&h.wantedResolution||(h.wantedResolution=o);return this.prepareTile(h,r,a)&&(u||Date.now()-n.time<8)&&"vector"!==l.getRenderMode()&&this.renderTileImage_(h,n),super.getTile(t,e,i,n)}isDrawableTile(t){const e=this.getLayer();return super.isDrawableTile(t)&&("vector"===e.getRenderMode()?(0,X.sq)(e)in t.executorGroups:t.hasContext(e))}getTileImage(t){return t.getImage(this.getLayer())}prepareFrame(t){const e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,i){const n=this.getLayer(),r=n.getRevision(),s=n.getRenderOrder()||null,o=t.wantedResolution,a=t.getReplayState(n);if(!a.dirty&&a.renderedResolution===o&&a.renderedRevision==r&&a.renderedRenderOrder==s)return;const l=n.getSource(),h=n.getDeclutter(),c=l.getTileGrid(),u=l.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),d=l.getSourceTiles(e,i,t),p=(0,X.sq)(n);delete t.hitDetectionImageData[p],t.executorGroups[p]=[],h&&(t.declutterExecutorGroups[p]=[]),a.dirty=!1;for(let g=0,m=d.length;g<m;++g){const i=d[g];if(i.getState()!=ie.Z.LOADED)continue;const r=i.tileCoord,m=c.getTileCoordExtent(r),_=(0,f.Ed)(u,m),y=(0,f.f3)(_,n.getRenderBuffer()*o,this.tmpExtent),v=(0,f.fS)(m,_)?null:y,b=new Qt.Z(0,y,o,e),E=h?new Qt.Z(0,_,o,e):void 0,w=(0,x.se)(o,e),C=function(t){let e;const i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,o)),e){const i=this.renderFeature(t,w,e,b,E);a.dirty=a.dirty||i}},S=i.getFeatures();s&&s!==a.renderedRenderOrder&&S.sort(s);for(let t=0,e=S.length;t<e;++t){const e=S[t];v&&!(0,f.kK)(v,e.getGeometry().getExtent())||C.call(this,e)}const T=b.finish(),R="vector"!==n.getRenderMode()&&h&&1===d.length?null:_,M=new te.Z(R,o,e,l.getOverlaps(),T,n.getRenderBuffer());if(t.executorGroups[p].push(M),E){const i=new te.Z(null,o,e,l.getOverlaps(),E.finish(),n.getRenderBuffer());t.declutterExecutorGroups[p].push(i)}}a.renderedRevision=r,a.renderedRenderOrder=s,a.renderedResolution=o}forEachFeatureAtCoordinate(t,e,i,n,r){const s=e.viewState.resolution,o=e.viewState.rotation;i=null==i?0:i;const a=this.getLayer(),l=a.getSource().getTileGridForProjection(e.viewState.projection),h=(0,f.hI)([t]);(0,f.f3)(h,s*i,h);const c={},u=function(t,e,i){let s=t.getId();void 0===s&&(s=(0,X.sq)(t));const o=c[s];if(o){if(!0!==o&&i<o.distanceSq){if(0===i)return c[s]=!0,r.splice(r.lastIndexOf(o),1),n(t,a,e);o.geometry=e,o.distanceSq=i}}else{if(0===i)return c[s]=!0,n(t,a,e);r.push(c[s]={feature:t,layer:a,geometry:e,distanceSq:i,callback:n})}},d=this.renderedTiles;let p;for(let g=0,m=d.length;!p&&g<m;++g){const n=d[g],r=l.getTileCoordExtent(n.wrappedTileCoord);if(!(0,f.kK)(r,h))continue;const c=(0,X.sq)(a),m=[n.executorGroups[c]],_=n.declutterExecutorGroups[c];_&&m.push(_),m.some((n=>{const r=n===_?e.declutterTree.all().map((t=>t.value)):null;for(let e=0,a=n.length;e<a;++e){const a=n[e];if(p=a.forEachFeatureAtCoordinate(t,s,o,i,u,r),p)return!0}}))}return p}getFeatures(t){return new Promise(((e,i)=>{const n=this.getLayer(),r=(0,X.sq)(n),s=n.getSource(),o=this.renderedProjection,a=o.getExtent(),l=this.renderedResolution,h=s.getTileGridForProjection(o),c=(0,v.nn)(this.renderedPixelToCoordinateTransform_,t.slice()),u=h.getTileCoordForCoordAndResolution(c,l);let d;for(let t=0,v=this.renderedTiles.length;t<v;++t)if(u.toString()===this.renderedTiles[t].tileCoord.toString()){if(d=this.renderedTiles[t],d.getState()===ie.Z.LOADED){const t=h.getTileCoordExtent(d.tileCoord);s.getWrapX()&&o.canWrapX()&&!(0,f.r4)(a,t)&&(0,m.Cf)(c,o);break}d=void 0}if(!d||d.loadingSourceTiles>0)return void e([]);const p=h.getTileCoordExtent(d.wrappedTileCoord),g=(0,f.rL)(p),_=[(c[0]-g[0])/l,(g[1]-c[1])/l],y=d.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]);let x=d.hitDetectionImageData[r];if(!x){const t=(0,re.Pq)(h.getTileSize(h.getZForResolution(l,s.zDirection))),e=this.renderedRotation_,i=[this.getRenderTransform(h.getTileCoordCenter(d.wrappedTileCoord),l,0,ne.UN,t[0]*ne.UN,t[1]*ne.UN,0)];x=(0,ne.TU)(t,i,y,n.getStyleFunction(),h.getTileCoordExtent(d.wrappedTileCoord),d.getReplayState(n).renderedResolution,e),d.hitDetectionImageData[r]=x}e((0,ne.ix)(_,y,x))}))}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t){const e=this.context,i=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();const n=t.viewHints,r=!(n[I.Z.ANIMATING]||n[I.Z.INTERACTING]),s=this.renderedTiles;for(let o=0,a=s.length;o<a;++o){const e=s[o],i=e.declutterExecutorGroups[(0,X.sq)(this.getLayer())];if(i)for(let n=i.length-1;n>=0;--n)i[n].execute(this.context,1,this.getTileRenderTransform(e,t),t.viewState.rotation,r,void 0,t.declutterTree)}e.globalAlpha=i}getTileRenderTransform(t,e){const i=e.pixelRatio,n=e.viewState,r=n.center,s=n.resolution,o=n.rotation,a=e.size,l=Math.round(a[0]*i),h=Math.round(a[1]*i),c=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),u=t.tileCoord,d=c.getTileCoordExtent(t.wrappedTileCoord),p=c.getTileCoordExtent(u,this.tmpExtent)[0]-d[0];return(0,v.Jp)((0,v.bA)(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(r,s,o,i,l,h,p))}postRender(t,e){const i=e.viewHints,n=!(i[I.Z.ANIMATING]||i[I.Z.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;const r=this.getLayer(),s=r.getRenderMode(),o=t.globalAlpha;t.globalAlpha=r.getOpacity();const a=oe[s],l=e.viewState,h=l.rotation,c=r.getSource(),u=c.getTileGridForProjection(l.projection).getZForResolution(l.resolution,c.zDirection),d=this.renderedTiles,p=[],g=[];let m=!0;for(let _=d.length-1;_>=0;--_){const i=d[_];m=m&&!i.getReplayState(r).dirty;const s=i.executorGroups[(0,X.sq)(r)].filter((t=>t.hasExecutors(a)));if(0===s.length)continue;const o=this.getTileRenderTransform(i,e),l=i.tileCoord[0];let c=!1;const y=s[0].getClipCoords(o);if(y){for(let e=0,i=p.length;e<i;++e)if(u!==l&&l<g[e]){const i=p[e];(0,f.kK)([y[0],y[3],y[4],y[7]],[i[0],i[3],i[4],i[7]])&&(c||(t.save(),c=!0),t.beginPath(),t.moveTo(y[0],y[1]),t.lineTo(y[2],y[3]),t.lineTo(y[4],y[5]),t.lineTo(y[6],y[7]),t.moveTo(i[6],i[7]),t.lineTo(i[4],i[5]),t.lineTo(i[2],i[3]),t.lineTo(i[0],i[1]),t.clip())}p.push(y),g.push(l)}for(let e=0,r=s.length;e<r;++e){s[e].execute(t,1,o,h,n,a)}c&&t.restore()}t.globalAlpha=o,this.ready=m,super.postRender(t,e)}renderFeature(t,e,i,n,r){if(!i)return!1;let s=!1;if(Array.isArray(i))for(let o=0,a=i.length;o<a;++o)s=(0,x.Pn)(n,t,i[o],e,this.boundHandleStyleImageChange_,void 0,r)||s;else s=(0,x.Pn)(n,t,i,e,this.boundHandleStyleImageChange_,void 0,r);return s}tileImageNeedsRender_(t){const e=this.getLayer();if("vector"===e.getRenderMode())return!1;const i=t.getReplayState(e),n=e.getRevision(),r=t.wantedResolution;return i.renderedTileResolution!==r||i.renderedTileRevision!==n}renderTileImage_(t,e){const i=this.getLayer(),n=t.getReplayState(i),r=i.getRevision(),s=t.executorGroups[(0,X.sq)(i)];n.renderedTileRevision=r;const o=t.wrappedTileCoord,a=o[0],l=i.getSource();let h=e.pixelRatio;const c=e.viewState.projection,u=l.getTileGridForProjection(c),d=u.getResolution(t.tileCoord[0]),p=e.pixelRatio/t.wantedResolution*d,f=u.getResolution(a),g=t.getContext(i);h=Math.round(Math.max(h,p/h));const m=l.getTilePixelSize(a,h,c);g.canvas.width=m[0],g.canvas.height=m[1];const _=h/p;if(1!==_){const t=(0,v.mc)(this.tmpTransform_);(0,v.bA)(t,_,_),g.setTransform.apply(g,t)}const y=u.getTileCoordExtent(o,this.tmpExtent),x=p/f,b=(0,v.mc)(this.tmpTransform_);(0,v.bA)(b,x,-x),(0,v.Iu)(b,-y[0],-y[3]);for(let v=0,E=s.length;v<E;++v){s[v].execute(g,_,b,0,!0,se[i.getRenderMode()])}n.renderedTileResolution=t.wantedResolution}}const le=ae;var he=i(5364);class ce extends R.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un;const i=t.renderMode||"hybrid";(0,D.h)("hybrid"==i||"vector"==i,28),this.renderMode_=i,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new le(this)}getFeatures(t){return super.getFeatures(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(he.Z.PRELOAD)}getUseInterimTilesOnError(){return this.get(he.Z.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(he.Z.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(he.Z.USE_INTERIM_TILES_ON_ERROR,t)}}const ue=ce;var de,pe=i(6908),fe=i(213),ge=i(7707),me=i(5318),_e=i(6671),ye=i(7573),ve=i(2787),xe=i(112),be=i(4458),Ee=i(9835),we=i(7343),Ce=i(4687),Se={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Te(t){return(t=Math.round(t))<0?0:t>255?255:t}function Re(t){return t<0?0:t>1?1:t}function Me(t){return"%"===t[t.length-1]?Te(parseFloat(t)/100*255):Te(parseInt(t))}function Ie(t){return"%"===t[t.length-1]?Re(parseFloat(t)/100):Re(parseFloat(t))}function Pe(t,e,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{de={}.parseCSSColor=function(t){var e,i=t.replace(/ /g,"").toLowerCase();if(i in Se)return Se[i].slice();if("#"===i[0])return 4===i.length?(e=parseInt(i.substr(1),16))>=0&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===i.length&&(e=parseInt(i.substr(1),16))>=0&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var n=i.indexOf("("),r=i.indexOf(")");if(-1!==n&&r+1===i.length){var s=i.substr(0,n),o=i.substr(n+1,r-(n+1)).split(","),a=1;switch(s){case"rgba":if(4!==o.length)return null;a=Ie(o.pop());case"rgb":return 3!==o.length?null:[Me(o[0]),Me(o[1]),Me(o[2]),a];case"hsla":if(4!==o.length)return null;a=Ie(o.pop());case"hsl":if(3!==o.length)return null;var l=(parseFloat(o[0])%360+360)%360/360,h=Ie(o[1]),c=Ie(o[2]),u=c<=.5?c*(h+1):c+h-c*h,d=2*c-u;return[Te(255*Pe(d,u,l+1/3)),Te(255*Pe(d,u,l)),Te(255*Pe(d,u,l-1/3)),a];default:return null}}return null}}catch(Pa){}var Le=function(t,e,i,n){void 0===n&&(n=1),this.r=t,this.g=e,this.b=i,this.a=n};Le.parse=function(t){if(t){if(t instanceof Le)return t;if("string"==typeof t){var e=de(t);if(e)return new Le(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},Le.prototype.toString=function(){var t=this.toArray(),e=t[0],i=t[1],n=t[2],r=t[3];return"rgba("+Math.round(e)+","+Math.round(i)+","+Math.round(n)+","+r+")"},Le.prototype.toArray=function(){var t=this,e=t.r,i=t.g,n=t.b,r=t.a;return 0===r?[0,0,0,0]:[255*e/r,255*i/r,255*n/r,r]},Le.prototype.toArray01=function(){var t=this,e=t.r,i=t.g,n=t.b,r=t.a;return 0===r?[0,0,0,0]:[e/r,i/r,n/r,r]},Le.prototype.toArray01PremultipliedAlpha=function(){var t=this;return[t.r,t.g,t.b,t.a]},Le.black=new Le(0,0,0,1),Le.white=new Le(1,1,1,1),Le.transparent=new Le(0,0,0,0),Le.red=new Le(1,0,0,1),Le.blue=new Le(0,0,1,1);var Ae=Le;function ke(t){return"object"==typeof t?["literal",t]:t}function Oe(t,e){var i=t.stops;if(!i)return function(t,e){var i=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",i]:i;if("enum"===e.type)return["match",i,Object.keys(e.values),i,t.default];var n=["color"===e.type?"to-color":e.type,i,ke(t.default)];return"array"===e.type&&n.splice(1,0,e.value,e.length||null),n}(t,e);var n=i&&"object"==typeof i[0][0],r=n||void 0!==t.property,s=n||!r;return i=i.map((function(t){return!r&&e.tokens&&"string"==typeof t[1]?[t[0],Ge(t[1])]:[t[0],ke(t[1])]})),n?function(t,e,i){for(var n={},r={},s=[],o=0;o<i.length;o++){var a=i[o],l=a[0].zoom;void 0===n[l]&&(n[l]={zoom:l,type:t.type,property:t.property,default:t.default},r[l]=[],s.push(l)),r[l].push([a[0].value,a[1]])}var h=ze({},e);if("exponential"===h){for(var c=[Ne(t),["linear"],["zoom"]],u=0,d=s;u<d.length;u+=1){var p=d[u];je(c,p,De(n[p],e,r[p]),!1)}return c}for(var f=["step",["zoom"]],g=0,m=s;g<m.length;g+=1){var _=m[g];je(f,_,De(n[_],e,r[_]),!0)}return Ze(f),f}(t,e,i):s?function(t,e,i,n){void 0===n&&(n=["zoom"]);var r,s=ze(t,e),o=!1;if("interval"===s)r=["step",n],o=!0;else{if("exponential"!==s)throw new Error('Unknown zoom function type "'+s+'"');var a=void 0!==t.base?t.base:1;r=[Ne(t),1===a?["linear"]:["exponential",a],n]}for(var l=0,h=i;l<h.length;l+=1){var c=h[l];je(r,c[0],c[1],o)}return Ze(r),r}(t,e,i):De(t,e,i)}function Ne(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Fe(t,e){var i,n,r=ke((i=t.default,n=e.default,void 0!==i?i:void 0!==n?n:void 0));return void 0===r&&"resolvedImage"===e.type?"":r}function De(t,e,i){var n=ze(t,e),r=["get",t.property];if("categorical"===n&&"boolean"==typeof i[0][0]){for(var s=["case"],o=0,a=i;o<a.length;o+=1){var l=a[o];s.push(["==",r,l[0]],l[1])}return s.push(Fe(t,e)),s}if("categorical"===n){for(var h=["match",r],c=0,u=i;c<u.length;c+=1){var d=u[c];je(h,d[0],d[1],!1)}return h.push(Fe(t,e)),h}if("interval"===n){for(var p=["step",["number",r]],f=0,g=i;f<g.length;f+=1){var m=g[f];je(p,m[0],m[1],!0)}return Ze(p),void 0===t.default?p:["case",["==",["typeof",r],"number"],p,ke(t.default)]}if("exponential"===n){for(var _=void 0!==t.base?t.base:1,y=[Ne(t),1===_?["linear"]:["exponential",_],["number",r]],v=0,x=i;v<x.length;v+=1){var b=x[v];je(y,b[0],b[1],!1)}return void 0===t.default?y:["case",["==",["typeof",r],"number"],y,ke(t.default)]}throw new Error("Unknown property function type "+n)}function Ze(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function je(t,e,i,n){t.length>3&&e===t[t.length-2]||(n&&2===t.length||t.push(e),t.push(i))}function ze(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function Ge(t){for(var e=["concat"],i=/{([^{}]+)}/g,n=0,r=i.exec(t);null!==r;r=i.exec(t)){var s=t.slice(n,i.lastIndex-r[0].length);n=i.lastIndex,s.length>0&&e.push(s),e.push(["get",r[1]])}if(1===e.length)return t;if(n<t.length)e.push(t.slice(n));else if(2===e.length)return["to-string",e[1]];return e}var Be=function(t){function e(e,i){t.call(this,i),this.message=i,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),Ue=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,n=e;i<n.length;i+=1){var r=n[i],s=r[0],o=r[1];this.bindings[s]=o}};Ue.prototype.concat=function(t){return new Ue(this,t)},Ue.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},Ue.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var Ve=Ue,qe={kind:"null"},We={kind:"number"},Xe={kind:"string"},He={kind:"boolean"},Ke={kind:"color"},Ye={kind:"object"},$e={kind:"value"},Je={kind:"collator"},Qe={kind:"formatted"},ti={kind:"resolvedImage"};function ei(t,e){return{kind:"array",itemType:t,N:e}}function ii(t){if("array"===t.kind){var e=ii(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}return t.kind}var ni=[qe,We,Xe,He,Ke,Qe,Ye,ei($e),ti];function ri(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!ri(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var i=0,n=ni;i<n.length;i+=1){if(!ri(n[i],e))return null}}return"Expected "+ii(t)+" but found "+ii(e)+" instead."}function si(t,e){return e.some((function(e){return e.kind===t.kind}))}function oi(t,e){return e.some((function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t}))}var ai=function(t,e,i){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};ai.prototype.compare=function(t,e){return this.collator.compare(t,e)},ai.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var li=ai,hi=function(t,e,i,n,r){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=i,this.fontStack=n,this.textColor=r},ci=function(t){this.sections=t};ci.fromString=function(t){return new ci([new hi(t,null,null,null,null)])},ci.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some((function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length}))},ci.factory=function(t){return t instanceof ci?t:ci.fromString(t)},ci.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map((function(t){return t.text})).join("")},ci.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var n=i[e];if(n.image)t.push(["image",n.image.name]);else{t.push(n.text);var r={};n.fontStack&&(r["text-font"]=["literal",n.fontStack.split(",")]),n.scale&&(r["font-scale"]=n.scale),n.textColor&&(r["text-color"]=["rgba"].concat(n.textColor.toArray())),t.push(r)}}return t};var ui=ci,di=function(t){this.name=t.name,this.available=t.available};di.prototype.toString=function(){return this.name},di.fromString=function(t){return t?new di({name:t,available:!1}):null},di.prototype.serialize=function(){return["image",this.name]};var pi=di;function fi(t,e,i,n){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[t,e,i,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[t,e,i,n]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function gi(t){if(null===t)return!0;if("string"==typeof t)return!0;if("boolean"==typeof t)return!0;if("number"==typeof t)return!0;if(t instanceof Ae)return!0;if(t instanceof li)return!0;if(t instanceof ui)return!0;if(t instanceof pi)return!0;if(Array.isArray(t)){for(var e=0,i=t;e<i.length;e+=1){if(!gi(i[e]))return!1}return!0}if("object"==typeof t){for(var n in t)if(!gi(t[n]))return!1;return!0}return!1}function mi(t){if(null===t)return qe;if("string"==typeof t)return Xe;if("boolean"==typeof t)return He;if("number"==typeof t)return We;if(t instanceof Ae)return Ke;if(t instanceof li)return Je;if(t instanceof ui)return Qe;if(t instanceof pi)return ti;if(Array.isArray(t)){for(var e,i=t.length,n=0,r=t;n<r.length;n+=1){var s=mi(r[n]);if(e){if(e===s)continue;e=$e;break}e=s}return ei(e||$e,i)}return Ye}function _i(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof Ae||t instanceof ui||t instanceof pi?t.toString():JSON.stringify(t)}var yi=function(t,e){this.type=t,this.value=e};yi.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!gi(t[1]))return e.error("invalid value");var i=t[1],n=mi(i),r=e.expectedType;return"array"!==n.kind||0!==n.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(n=r),new yi(n,i)},yi.prototype.evaluate=function(){return this.value},yi.prototype.eachChild=function(){},yi.prototype.outputDefined=function(){return!0},yi.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Ae?["rgba"].concat(this.value.toArray()):this.value instanceof ui?this.value.serialize():this.value};var vi=yi,xi=function(t){this.name="ExpressionEvaluationError",this.message=t};xi.prototype.toJSON=function(){return this.message};var bi=xi,Ei={string:Xe,number:We,boolean:He,object:Ye},wi=function(t,e){this.type=t,this.args=e};wi.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i,n=1,r=t[0];if("array"===r){var s,o;if(t.length>2){var a=t[1];if("string"!=typeof a||!(a in Ei)||"object"===a)return e.error('The item type argument of "array" must be one of string, number, boolean',1);s=Ei[a],n++}else s=$e;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);o=t[2],n++}i=ei(s,o)}else i=Ei[r];for(var l=[];n<t.length;n++){var h=e.parse(t[n],n,$e);if(!h)return null;l.push(h)}return new wi(i,l)},wi.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!ri(this.type,mi(i)))return i;if(e===this.args.length-1)throw new bi("Expected value to be of type "+ii(this.type)+", but found "+ii(mi(i))+" instead.")}return null},wi.prototype.eachChild=function(t){this.args.forEach(t)},wi.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},wi.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var n=t.N;("number"==typeof n||this.args.length>1)&&e.push(n)}}return e.concat(this.args.map((function(t){return t.serialize()})))};var Ci=wi,Si=function(t){this.type=Qe,this.sections=t};Si.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var n=[],r=!1,s=1;s<=t.length-1;++s){var o=t[s];if(r&&"object"==typeof o&&!Array.isArray(o)){r=!1;var a=null;if(o["font-scale"]&&!(a=e.parse(o["font-scale"],1,We)))return null;var l=null;if(o["text-font"]&&!(l=e.parse(o["text-font"],1,ei(Xe))))return null;var h=null;if(o["text-color"]&&!(h=e.parse(o["text-color"],1,Ke)))return null;var c=n[n.length-1];c.scale=a,c.font=l,c.textColor=h}else{var u=e.parse(t[s],1,$e);if(!u)return null;var d=u.type.kind;if("string"!==d&&"value"!==d&&"null"!==d&&"resolvedImage"!==d)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,n.push({content:u,scale:null,font:null,textColor:null})}}return new Si(n)},Si.prototype.evaluate=function(t){return new ui(this.sections.map((function(e){var i=e.content.evaluate(t);return mi(i)===ti?new hi("",i,null,null,null):new hi(_i(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)})))},Si.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var n=i[e];t(n.content),n.scale&&t(n.scale),n.font&&t(n.font),n.textColor&&t(n.textColor)}},Si.prototype.outputDefined=function(){return!1},Si.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var n=i[e];t.push(n.content.serialize());var r={};n.scale&&(r["font-scale"]=n.scale.serialize()),n.font&&(r["text-font"]=n.font.serialize()),n.textColor&&(r["text-color"]=n.textColor.serialize()),t.push(r)}return t};var Ti=Si,Ri=function(t){this.type=ti,this.input=t};Ri.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,Xe);return i?new Ri(i):e.error("No image name provided.")},Ri.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=pi.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i},Ri.prototype.eachChild=function(t){t(this.input)},Ri.prototype.outputDefined=function(){return!1},Ri.prototype.serialize=function(){return["image",this.input.serialize()]};var Mi=Ri,Ii={"to-boolean":He,"to-color":Ke,"to-number":We,"to-string":Xe},Pi=function(t,e){this.type=t,this.args=e};Pi.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var n=Ii[i],r=[],s=1;s<t.length;s++){var o=e.parse(t[s],s,$e);if(!o)return null;r.push(o)}return new Pi(n,r)},Pi.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e,i,n=0,r=this.args;n<r.length;n+=1){if(i=null,(e=r[n].evaluate(t))instanceof Ae)return e;if("string"==typeof e){var s=t.parseColor(e);if(s)return s}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":fi(e[0],e[1],e[2],e[3])))return new Ae(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new bi(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var o=null,a=0,l=this.args;a<l.length;a+=1){if(null===(o=l[a].evaluate(t)))return 0;var h=Number(o);if(!isNaN(h))return h}throw new bi("Could not convert "+JSON.stringify(o)+" to number.")}return"formatted"===this.type.kind?ui.fromString(_i(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?pi.fromString(_i(this.args[0].evaluate(t))):_i(this.args[0].evaluate(t))},Pi.prototype.eachChild=function(t){this.args.forEach(t)},Pi.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},Pi.prototype.serialize=function(){if("formatted"===this.type.kind)return new Ti([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Mi(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild((function(e){t.push(e.serialize())})),t};var Li=Pi,Ai=["Unknown","Point","LineString","Polygon"],ki=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};ki.prototype.id=function(){return this.feature&&void 0!==this.feature.id?this.feature.id:null},ki.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ai[this.feature.type]:this.feature.type:null},ki.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ki.prototype.canonicalID=function(){return this.canonical},ki.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ki.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var t=this.featureDistanceData.center,e=this.featureDistanceData.scale,i=this.featureTileCoord,n=i.x,r=i.y,s=n*e-t[0],o=r*e-t[1];return this.featureDistanceData.bearing[0]*s+this.featureDistanceData.bearing[1]*o}return 0},ki.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=Ae.parse(t)),e};var Oi=ki,Ni=function(t,e,i,n){this.name=t,this.type=e,this._evaluate=i,this.args=n};Ni.prototype.evaluate=function(t){return this._evaluate(t,this.args)},Ni.prototype.eachChild=function(t){this.args.forEach(t)},Ni.prototype.outputDefined=function(){return!1},Ni.prototype.serialize=function(){return[this.name].concat(this.args.map((function(t){return t.serialize()})))},Ni.parse=function(t,e){var i,n=t[0],r=Ni.definitions[n];if(!r)return e.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var s=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter((function(e){var i=e[0];return!Array.isArray(i)||i.length===t.length-1})),l=null,h=0,c=a;h<c.length;h+=1){var u=c[h],d=u[0],p=u[1];l=new cn(e.registry,e.path,null,e.scope);for(var f=[],g=!1,m=1;m<t.length;m++){var _=t[m],y=Array.isArray(d)?d[m-1]:d.type,v=l.parse(_,1+f.length,y);if(!v){g=!0;break}f.push(v)}if(!g)if(Array.isArray(d)&&d.length!==f.length)l.error("Expected "+d.length+" arguments, but found "+f.length+" instead.");else{for(var x=0;x<f.length;x++){var b=Array.isArray(d)?d[x]:d.type,E=f[x];l.concat(x+1).checkSubtype(b,E.type)}if(0===l.errors.length)return new Ni(n,s,p,f)}}if(1===a.length)(i=e.errors).push.apply(i,l.errors);else{for(var w=(a.length?a:o).map((function(t){var e,i=t[0];return e=i,Array.isArray(e)?"("+e.map(ii).join(", ")+")":"("+ii(e.type)+"...)"})).join(" | "),C=[],S=1;S<t.length;S++){var T=e.parse(t[S],1+C.length);if(!T)return null;C.push(ii(T.type))}e.error("Expected arguments of type "+w+", but found ("+C.join(", ")+") instead.")}return null},Ni.register=function(t,e){for(var i in Ni.definitions=e,e)t[i]=Ni};var Fi=Ni,Di=function(t,e,i){this.type=Je,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};Di.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var n=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,He);if(!n)return null;var r=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,He);if(!r)return null;var s=null;return i.locale&&!(s=e.parse(i.locale,1,Xe))?null:new Di(n,r,s)},Di.prototype.evaluate=function(t){return new li(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},Di.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},Di.prototype.outputDefined=function(){return!1},Di.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var Zi=Di,ji=8192;function zi(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function Gi(t,e){return!(t[0]<=e[0])&&(!(t[2]>=e[2])&&(!(t[1]<=e[1])&&!(t[3]>=e[3])))}function Bi(t,e){var i,n=(180+t[0])/360,r=(i=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360),s=Math.pow(2,e.z);return[Math.round(n*s*ji),Math.round(r*s*ji)]}function Ui(t,e,i){return e[1]>t[1]!=i[1]>t[1]&&t[0]<(i[0]-e[0])*(t[1]-e[1])/(i[1]-e[1])+e[0]}function Vi(t,e){for(var i,n,r,s,o,a,l,h=!1,c=0,u=e.length;c<u;c++)for(var d=e[c],p=0,f=d.length;p<f-1;p++){if(i=t,n=d[p],r=d[p+1],s=void 0,o=void 0,a=void 0,l=void 0,s=i[0]-n[0],o=i[1]-n[1],a=i[0]-r[0],l=i[1]-r[1],s*l-a*o==0&&s*a<=0&&o*l<=0)return!1;Ui(t,d[p],d[p+1])&&(h=!h)}return h}function qi(t,e){for(var i=0;i<e.length;i++)if(Vi(t,e[i]))return!0;return!1}function Wi(t,e,i,n){var r=t[0]-i[0],s=t[1]-i[1],o=e[0]-i[0],a=e[1]-i[1],l=n[0]-i[0],h=n[1]-i[1],c=r*h-l*s,u=o*h-l*a;return c>0&&u<0||c<0&&u>0}function Xi(t,e,i){for(var n=0,r=i;n<r.length;n+=1)for(var s=r[n],o=0;o<s.length-1;++o)if(a=t,l=e,h=s[o],c=s[o+1],u=void 0,d=void 0,p=void 0,f=void 0,p=[l[0]-a[0],l[1]-a[1]],f=[c[0]-h[0],c[1]-h[1]],0!=(u=f)[0]*(d=p)[1]-u[1]*d[0]&&Wi(a,l,h,c)&&Wi(h,c,a,l))return!0;var a,l,h,c,u,d,p,f;return!1}function Hi(t,e){for(var i=0;i<t.length;++i)if(!Vi(t[i],e))return!1;for(var n=0;n<t.length-1;++n)if(Xi(t[n],t[n+1],e))return!1;return!0}function Ki(t,e){for(var i=0;i<e.length;i++)if(Hi(t,e[i]))return!0;return!1}function Yi(t,e,i){for(var n=[],r=0;r<t.length;r++){for(var s=[],o=0;o<t[r].length;o++){var a=Bi(t[r][o],i);zi(e,a),s.push(a)}n.push(s)}return n}function $i(t,e,i){for(var n=[],r=0;r<t.length;r++){var s=Yi(t[r],e,i);n.push(s)}return n}function Ji(t,e,i,n){if(t[0]<i[0]||t[0]>i[2]){var r=.5*n,s=t[0]-i[0]>r?-n:i[0]-t[0]>r?n:0;0===s&&(s=t[0]-i[2]>r?-n:i[2]-t[0]>r?n:0),t[0]+=s}zi(e,t)}function Qi(t,e,i,n){var r=Math.pow(2,n.z)*ji,s=[n.x*ji,n.y*ji],o=[];if(!t)return o;for(var a=0,l=t;a<l.length;a+=1)for(var h=0,c=l[a];h<c.length;h+=1){var u=c[h],d=[u.x+s[0],u.y+s[1]];Ji(d,e,i,r),o.push(d)}return o}function tn(t,e,i,n){var r,s=Math.pow(2,n.z)*ji,o=[n.x*ji,n.y*ji],a=[];if(!t)return a;for(var l=0,h=t;l<h.length;l+=1){for(var c=[],u=0,d=h[l];u<d.length;u+=1){var p=d[u],f=[p.x+o[0],p.y+o[1]];zi(e,f),c.push(f)}a.push(c)}if(e[2]-e[0]<=s/2){(r=e)[0]=r[1]=1/0,r[2]=r[3]=-1/0;for(var g=0,m=a;g<m.length;g+=1)for(var _=0,y=m[g];_<y.length;_+=1){Ji(y[_],e,i,s)}}return a}var en=function(t,e){this.type=He,this.geojson=t,this.geometries=e};en.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(gi(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var n=0;n<i.features.length;++n){var r=i.features[n].geometry.type;if("Polygon"===r||"MultiPolygon"===r)return new en(i,i.features[n].geometry)}else if("Feature"===i.type){var s=i.geometry.type;if("Polygon"===s||"MultiPolygon"===s)return new en(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new en(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},en.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if(!r)return!1;if("Polygon"===e.type){var s=Yi(e.coordinates,n,r),o=Qi(t.geometry(),i,n,r);if(!Gi(i,n))return!1;for(var a=0,l=o;a<l.length;a+=1)if(!Vi(l[a],s))return!1}if("MultiPolygon"===e.type){var h=$i(e.coordinates,n,r),c=Qi(t.geometry(),i,n,r);if(!Gi(i,n))return!1;for(var u=0,d=c;u<d.length;u+=1)if(!qi(d[u],h))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if(!r)return!1;if("Polygon"===e.type){var s=Yi(e.coordinates,n,r),o=tn(t.geometry(),i,n,r);if(!Gi(i,n))return!1;for(var a=0,l=o;a<l.length;a+=1)if(!Hi(l[a],s))return!1}if("MultiPolygon"===e.type){var h=$i(e.coordinates,n,r),c=tn(t.geometry(),i,n,r);if(!Gi(i,n))return!1;for(var u=0,d=c;u<d.length;u+=1)if(!Ki(d[u],h))return!1}return!0}(t,this.geometries)}return!1},en.prototype.eachChild=function(){},en.prototype.outputDefined=function(){return!0},en.prototype.serialize=function(){return["within",this.geojson]};var nn=en;function rn(t){if(t instanceof Fi){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof nn)return!1;var e=!0;return t.eachChild((function(t){e&&!rn(t)&&(e=!1)})),e}function sn(t){if(t instanceof Fi&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild((function(t){e&&!sn(t)&&(e=!1)})),e}function on(t,e){if(t instanceof Fi&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild((function(t){i&&!on(t,e)&&(i=!1)})),i}var an=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};an.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new an(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},an.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},an.prototype.eachChild=function(){},an.prototype.outputDefined=function(){return!1},an.prototype.serialize=function(){return["var",this.name]};var ln=an,hn=function(t,e,i,n,r){void 0===e&&(e=[]),void 0===n&&(n=new Ve),void 0===r&&(r=[]),this.registry=t,this.path=e,this.key=e.map((function(t){return"["+t+"]"})).join(""),this.scope=n,this.errors=r,this.expectedType=i};hn.prototype.parse=function(t,e,i,n,r){return void 0===r&&(r={}),e?this.concat(e,i,n)._parse(t,r):this._parse(t,r)},hn.prototype._parse=function(t,e){function i(t,e,i){return"assert"===i?new Ci(e,[t]):"coerce"===i?new Li(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var n=t[0];if("string"!=typeof n)return this.error("Expression name must be a string, but found "+typeof n+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var r=this.registry[n];if(r){var s=r.parse(t,this);if(!s)return null;if(this.expectedType){var o=this.expectedType,a=s.type;if("string"!==o.kind&&"number"!==o.kind&&"boolean"!==o.kind&&"object"!==o.kind&&"array"!==o.kind||"value"!==a.kind)if("color"!==o.kind&&"formatted"!==o.kind&&"resolvedImage"!==o.kind||"value"!==a.kind&&"string"!==a.kind){if(this.checkSubtype(o,a))return null}else s=i(s,o,e.typeAnnotation||"coerce");else s=i(s,o,e.typeAnnotation||"assert")}if(!(s instanceof vi)&&"resolvedImage"!==s.type.kind&&un(s)){var l=new Oi;try{s=new vi(s.type,s.evaluate(l))}catch(Pa){return this.error(Pa.message),null}}return s}return this.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},hn.prototype.concat=function(t,e,i){var n="number"==typeof t?this.path.concat(t):this.path,r=i?this.scope.concat(i):this.scope;return new hn(this.registry,n,e||null,r,this.errors)},hn.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var n=""+this.key+e.map((function(t){return"["+t+"]"})).join("");this.errors.push(new Be(n,t))},hn.prototype.checkSubtype=function(t,e){var i=ri(t,e);return i&&this.error(i),i};var cn=hn;function un(t){if(t instanceof ln)return un(t.boundExpression);if(t instanceof Fi&&"error"===t.name)return!1;if(t instanceof Zi)return!1;if(t instanceof nn)return!1;var e=t instanceof Li||t instanceof Ci,i=!0;return t.eachChild((function(t){i=e?i&&un(t):i&&t instanceof vi})),!!i&&(rn(t)&&on(t,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]))}function dn(t,e){for(var i,n,r=t.length-1,s=0,o=r,a=0;s<=o;)if(i=t[a=Math.floor((s+o)/2)],n=t[a+1],i<=e){if(a===r||e<n)return a;s=a+1}else{if(!(i>e))throw new bi("Input is not a number.");o=a-1}return 0}var pn=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var n=0,r=i;n<r.length;n+=1){var s=r[n],o=s[0],a=s[1];this.labels.push(o),this.outputs.push(a)}};pn.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,We);if(!i)return null;var n=[],r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var s=1;s<t.length;s+=2){var o=1===s?-1/0:t[s],a=t[s+1],l=s,h=s+1;if("number"!=typeof o)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(n.length&&n[n.length-1][0]>=o)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(a,h,r);if(!c)return null;r=r||c.type,n.push([o,c])}return new pn(r,i,n)},pn.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);var r=e.length;return n>=e[r-1]?i[r-1].evaluate(t):i[dn(e,n)].evaluate(t)},pn.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1){t(i[e])}},pn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},pn.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var fn=pn,gn=mn;function mn(t,e,i,n){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=n,this.p2x=i,this.p2y=n}function _n(t,e,i){return t*(1-i)+e*i}mn.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},mn.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},mn.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},mn.prototype.solveCurveX=function(t,e){var i,n,r,s,o;for(void 0===e&&(e=1e-6),r=t,o=0;o<8;o++){if(s=this.sampleCurveX(r)-t,Math.abs(s)<e)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r-=s/a}if((r=t)<(i=0))return i;if(r>(n=1))return n;for(;i<n;){if(s=this.sampleCurveX(r),Math.abs(s-t)<e)return r;t>s?i=r:n=r,r=.5*(n-i)+i}return r},mn.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var yn=Object.freeze({__proto__:null,number:_n,color:function(t,e,i){return new Ae(_n(t.r,e.r,i),_n(t.g,e.g,i),_n(t.b,e.b,i),_n(t.a,e.a,i))},array:function(t,e,i){return t.map((function(t,n){return _n(t,e[n],i)}))}}),vn=.95047,xn=1,bn=1.08883,En=4/29,wn=6/29,Cn=3*wn*wn,Sn=wn*wn*wn,Tn=Math.PI/180,Rn=180/Math.PI;function Mn(t){return t>Sn?Math.pow(t,1/3):t/Cn+En}function In(t){return t>wn?t*t*t:Cn*(t-En)}function Pn(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ln(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function An(t){var e=Ln(t.r),i=Ln(t.g),n=Ln(t.b),r=Mn((.4124564*e+.3575761*i+.1804375*n)/vn),s=Mn((.2126729*e+.7151522*i+.072175*n)/xn);return{l:116*s-16,a:500*(r-s),b:200*(s-Mn((.0193339*e+.119192*i+.9503041*n)/bn)),alpha:t.a}}function kn(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,n=isNaN(t.b)?e:e-t.b/200;return e=xn*In(e),i=vn*In(i),n=bn*In(n),new Ae(Pn(3.2404542*i-1.5371385*e-.4985314*n),Pn(-.969266*i+1.8760108*e+.041556*n),Pn(.0556434*i-.2040259*e+1.0572252*n),t.alpha)}function On(t,e,i){var n=e-t;return t+i*(n>180||n<-180?n-360*Math.round(n/360):n)}var Nn={forward:An,reverse:kn,interpolate:function(t,e,i){return{l:_n(t.l,e.l,i),a:_n(t.a,e.a,i),b:_n(t.b,e.b,i),alpha:_n(t.alpha,e.alpha,i)}}},Fn={forward:function(t){var e=An(t),i=e.l,n=e.a,r=e.b,s=Math.atan2(r,n)*Rn;return{h:s<0?s+360:s,c:Math.sqrt(n*n+r*r),l:i,alpha:t.a}},reverse:function(t){var e=t.h*Tn,i=t.c;return kn({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){return{h:On(t.h,e.h,i),c:_n(t.c,e.c,i),l:_n(t.l,e.l,i),alpha:_n(t.alpha,e.alpha,i)}}},Dn=function(t,e,i,n,r){this.type=t,this.operator=e,this.interpolation=i,this.input=n,this.labels=[],this.outputs=[];for(var s=0,o=r;s<o.length;s+=1){var a=o[s],l=a[0],h=a[1];this.labels.push(l),this.outputs.push(h)}};function Zn(t,e,i,n){var r=n-i,s=t-i;return 0===r?0:1===e?s/r:(Math.pow(e,s)-1)/(Math.pow(e,r)-1)}Dn.interpolationFactor=function(t,e,i,n){var r=0;if("exponential"===t.name)r=Zn(e,t.base,i,n);else if("linear"===t.name)r=Zn(e,1,i,n);else if("cubic-bezier"===t.name){var s=t.controlPoints;r=new gn(s[0],s[1],s[2],s[3]).solve(Zn(e,1,i,n))}return r},Dn.parse=function(t,e){var i=t[0],n=t[1],r=t[2],s=t.slice(3);if(!Array.isArray(n)||0===n.length)return e.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var o=n[1];if("number"!=typeof o)return e.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:o}}else{if("cubic-bezier"!==n[0])return e.error("Unknown interpolation type "+String(n[0]),1,0);var a=n.slice(1);if(4!==a.length||a.some((function(t){return"number"!=typeof t||t<0||t>1})))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:a}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(r=e.parse(r,2,We)))return null;var l=[],h=null;"interpolate-hcl"===i||"interpolate-lab"===i?h=Ke:e.expectedType&&"value"!==e.expectedType.kind&&(h=e.expectedType);for(var c=0;c<s.length;c+=2){var u=s[c],d=s[c+1],p=c+3,f=c+4;if("number"!=typeof u)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(l.length&&l[l.length-1][0]>=u)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',p);var g=e.parse(d,f,h);if(!g)return null;h=h||g.type,l.push([u,g])}return"number"===h.kind||"color"===h.kind||"array"===h.kind&&"number"===h.itemType.kind&&"number"==typeof h.N?new Dn(h,i,n,r,l):e.error("Type "+ii(h)+" is not interpolatable.")},Dn.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var n=this.input.evaluate(t);if(n<=e[0])return i[0].evaluate(t);var r=e.length;if(n>=e[r-1])return i[r-1].evaluate(t);var s=dn(e,n),o=e[s],a=e[s+1],l=Dn.interpolationFactor(this.interpolation,n,o,a),h=i[s].evaluate(t),c=i[s+1].evaluate(t);return"interpolate"===this.operator?yn[this.type.kind.toLowerCase()](h,c,l):"interpolate-hcl"===this.operator?Fn.reverse(Fn.interpolate(Fn.forward(h),Fn.forward(c),l)):Nn.reverse(Nn.interpolate(Nn.forward(h),Nn.forward(c),l))},Dn.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1){t(i[e])}},Dn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))},Dn.prototype.serialize=function(){var t;t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var jn=Dn,zn=function(t,e){this.type=t,this.args=e};zn.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,n=e.expectedType;n&&"value"!==n.kind&&(i=n);for(var r=[],s=0,o=t.slice(1);s<o.length;s+=1){var a=o[s],l=e.parse(a,1+r.length,i,void 0,{typeAnnotation:"omit"});if(!l)return null;i=i||l.type,r.push(l)}var h=n&&r.some((function(t){return ri(n,t.type)}));return new zn(h?$e:i,r)},zn.prototype.evaluate=function(t){for(var e,i=null,n=0,r=0,s=this.args;r<s.length;r+=1){if(n++,(i=s[r].evaluate(t))&&i instanceof pi&&!i.available&&(e||(e=i),i=null,n===this.args.length))return e;if(null!==i)break}return i},zn.prototype.eachChild=function(t){this.args.forEach(t)},zn.prototype.outputDefined=function(){return this.args.every((function(t){return t.outputDefined()}))},zn.prototype.serialize=function(){var t=["coalesce"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Gn=zn,Bn=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Bn.prototype.evaluate=function(t){return this.result.evaluate(t)},Bn.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1){t(i[e][1])}t(this.result)},Bn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],n=1;n<t.length-1;n+=2){var r=t[n];if("string"!=typeof r)return e.error("Expected string, but found "+typeof r+" instead.",n);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",n);var s=e.parse(t[n+1],n+1);if(!s)return null;i.push([r,s])}var o=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return o?new Bn(i,o):null},Bn.prototype.outputDefined=function(){return this.result.outputDefined()},Bn.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var n=i[e],r=n[0],s=n[1];t.push(r,s.serialize())}return t.push(this.result.serialize()),t};var Un=Bn,Vn=function(t,e,i){this.type=t,this.index=e,this.input=i};Vn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,We),n=e.parse(t[2],2,ei(e.expectedType||$e));if(!i||!n)return null;var r=n.type;return new Vn(r.itemType,i,n)},Vn.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new bi("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new bi("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new bi("Array index must be an integer, but found "+e+" instead.");return i[e]},Vn.prototype.eachChild=function(t){t(this.index),t(this.input)},Vn.prototype.outputDefined=function(){return!1},Vn.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var qn=Vn,Wn=function(t,e){this.type=He,this.needle=t,this.haystack=e};Wn.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,$e),n=e.parse(t[2],2,$e);return i&&n?si(i.type,[He,Xe,We,qe,$e])?new Wn(i,n):e.error("Expected first argument to be of type boolean, string, number or null, but found "+ii(i.type)+" instead"):null},Wn.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(null==i)return!1;if(!oi(e,["boolean","string","number","null"]))throw new bi("Expected first argument to be of type boolean, string, number or null, but found "+ii(mi(e))+" instead.");if(!oi(i,["string","array"]))throw new bi("Expected second argument to be of type array or string, but found "+ii(mi(i))+" instead.");return i.indexOf(e)>=0},Wn.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},Wn.prototype.outputDefined=function(){return!0},Wn.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Xn=Wn,Hn=function(t,e,i){this.type=We,this.needle=t,this.haystack=e,this.fromIndex=i};Hn.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,$e),n=e.parse(t[2],2,$e);if(!i||!n)return null;if(!si(i.type,[He,Xe,We,qe,$e]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+ii(i.type)+" instead");if(4===t.length){var r=e.parse(t[3],3,We);return r?new Hn(i,n,r):null}return new Hn(i,n)},Hn.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!oi(e,["boolean","string","number","null"]))throw new bi("Expected first argument to be of type boolean, string, number or null, but found "+ii(mi(e))+" instead.");if(!oi(i,["string","array"]))throw new bi("Expected second argument to be of type array or string, but found "+ii(mi(i))+" instead.");if(this.fromIndex){var n=this.fromIndex.evaluate(t);return i.indexOf(e,n)}return i.indexOf(e)},Hn.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},Hn.prototype.outputDefined=function(){return!1},Hn.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Kn=Hn,Yn=function(t,e,i,n,r,s){this.inputType=t,this.type=e,this.input=i,this.cases=n,this.outputs=r,this.otherwise=s};Yn.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var i,n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r={},s=[],o=2;o<t.length-1;o+=2){var a=t[o],l=t[o+1];Array.isArray(a)||(a=[a]);var h=e.concat(o);if(0===a.length)return h.error("Expected at least one branch label.");for(var c=0,u=a;c<u.length;c+=1){var d=u[c];if("number"!=typeof d&&"string"!=typeof d)return h.error("Branch labels must be numbers or strings.");if("number"==typeof d&&Math.abs(d)>Number.MAX_SAFE_INTEGER)return h.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof d&&Math.floor(d)!==d)return h.error("Numeric branch labels must be integer values.");if(i){if(h.checkSubtype(i,mi(d)))return null}else i=mi(d);if(void 0!==r[String(d)])return h.error("Branch labels must be unique.");r[String(d)]=s.length}var p=e.parse(l,o,n);if(!p)return null;n=n||p.type,s.push(p)}var f=e.parse(t[1],1,$e);if(!f)return null;var g=e.parse(t[t.length-1],t.length-1,n);return g?"value"!==f.type.kind&&e.concat(1).checkSubtype(i,f.type)?null:new Yn(i,n,f,r,s,g):null},Yn.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(mi(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},Yn.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},Yn.prototype.outputDefined=function(){return this.outputs.every((function(t){return t.outputDefined()}))&&this.otherwise.outputDefined()},Yn.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=[],n={},r=0,s=Object.keys(this.cases).sort();r<s.length;r+=1){var o=s[r];void 0===(u=n[this.cases[o]])?(n[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[u][1].push(o)}for(var a=function(e){return"number"===t.inputType.kind?Number(e):e},l=0,h=i;l<h.length;l+=1){var c=h[l],u=c[0],d=c[1];1===d.length?e.push(a(d[0])):e.push(d.map(a)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var $n=Yn,Jn=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};Jn.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var n=[],r=1;r<t.length-1;r+=2){var s=e.parse(t[r],r,He);if(!s)return null;var o=e.parse(t[r+1],r+1,i);if(!o)return null;n.push([s,o]),i=i||o.type}var a=e.parse(t[t.length-1],t.length-1,i);return a?new Jn(i,n,a):null},Jn.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var n=i[e],r=n[0],s=n[1];if(r.evaluate(t))return s.evaluate(t)}return this.otherwise.evaluate(t)},Jn.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var n=i[e],r=n[0],s=n[1];t(r),t(s)}t(this.otherwise)},Jn.prototype.outputDefined=function(){return this.branches.every((function(t){return t[0],t[1].outputDefined()}))&&this.otherwise.outputDefined()},Jn.prototype.serialize=function(){var t=["case"];return this.eachChild((function(e){t.push(e.serialize())})),t};var Qn=Jn,tr=function(t,e,i,n){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=n};tr.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,$e),n=e.parse(t[2],2,We);if(!i||!n)return null;if(!si(i.type,[ei($e),Xe,$e]))return e.error("Expected first argument to be of type array or string, but found "+ii(i.type)+" instead");if(4===t.length){var r=e.parse(t[3],3,We);return r?new tr(i.type,i,n,r):null}return new tr(i.type,i,n)},tr.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!oi(e,["string","array"]))throw new bi("Expected first argument to be of type array or string, but found "+ii(mi(e))+" instead.");if(this.endIndex){var n=this.endIndex.evaluate(t);return e.slice(i,n)}return e.slice(i)},tr.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},tr.prototype.outputDefined=function(){return!1},tr.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var er=tr;function ir(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function nr(t,e,i,n){return 0===n.compare(e,i)}function rr(t,e,i){var n="=="!==t&&"!="!==t;return function(){function r(t,e,i){this.type=He,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return r.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var i=t[0],s=e.parse(t[1],1,$e);if(!s)return null;if(!ir(i,s.type))return e.concat(1).error('"'+i+"\" comparisons are not supported for type '"+ii(s.type)+"'.");var o=e.parse(t[2],2,$e);if(!o)return null;if(!ir(i,o.type))return e.concat(2).error('"'+i+"\" comparisons are not supported for type '"+ii(o.type)+"'.");if(s.type.kind!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return e.error("Cannot compare types '"+ii(s.type)+"' and '"+ii(o.type)+"'.");n&&("value"===s.type.kind&&"value"!==o.type.kind?s=new Ci(o.type,[s]):"value"!==s.type.kind&&"value"===o.type.kind&&(o=new Ci(s.type,[o])));var a=null;if(4===t.length){if("string"!==s.type.kind&&"string"!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(a=e.parse(t[3],3,Je)))return null}return new r(s,o,a)},r.prototype.evaluate=function(r){var s=this.lhs.evaluate(r),o=this.rhs.evaluate(r);if(n&&this.hasUntypedArgument){var a=mi(s),l=mi(o);if(a.kind!==l.kind||"string"!==a.kind&&"number"!==a.kind)throw new bi('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+a.kind+", "+l.kind+") instead.")}if(this.collator&&!n&&this.hasUntypedArgument){var h=mi(s),c=mi(o);if("string"!==h.kind||"string"!==c.kind)return e(r,s,o)}return this.collator?i(r,s,o,this.collator.evaluate(r)):e(r,s,o)},r.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},r.prototype.outputDefined=function(){return!0},r.prototype.serialize=function(){var e=[t];return this.eachChild((function(t){e.push(t.serialize())})),e},r}()}var sr=rr("==",(function(t,e,i){return e===i}),nr),or=rr("!=",(function(t,e,i){return e!==i}),(function(t,e,i,n){return!nr(0,e,i,n)})),ar=rr("<",(function(t,e,i){return e<i}),(function(t,e,i,n){return n.compare(e,i)<0})),lr=rr(">",(function(t,e,i){return e>i}),(function(t,e,i,n){return n.compare(e,i)>0})),hr=rr("<=",(function(t,e,i){return e<=i}),(function(t,e,i,n){return n.compare(e,i)<=0})),cr=rr(">=",(function(t,e,i){return e>=i}),(function(t,e,i,n){return n.compare(e,i)>=0})),ur=function(t,e,i,n,r,s){this.type=Xe,this.number=t,this.locale=e,this.currency=i,this.unit=n,this.minFractionDigits=r,this.maxFractionDigits=s};ur.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,We);if(!i)return null;var n=t[2];if("object"!=typeof n||Array.isArray(n))return e.error("NumberFormat options argument must be an object.");var r=null;if(n.locale&&!(r=e.parse(n.locale,1,Xe)))return null;var s=null;if(n.currency&&!(s=e.parse(n.currency,1,Xe)))return null;var o=null;if(n.unit&&!(o=e.parse(n.unit,1,Xe)))return null;var a=null;if(n["min-fraction-digits"]&&!(a=e.parse(n["min-fraction-digits"],1,We)))return null;var l=null;return n["max-fraction-digits"]&&!(l=e.parse(n["max-fraction-digits"],1,We))?null:new ur(i,r,s,o,a,l)},ur.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(t):void 0,unit:this.unit?this.unit.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},ur.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.unit&&t(this.unit),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},ur.prototype.outputDefined=function(){return!1},ur.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.unit&&(t.unit=this.unit.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var dr=ur,pr=function(t){this.type=We,this.input=t};pr.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+ii(i.type)+" instead."):new pr(i):null},pr.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new bi("Expected value to be of type string or array, but found "+ii(mi(e))+" instead.")},pr.prototype.eachChild=function(t){t(this.input)},pr.prototype.outputDefined=function(){return!1},pr.prototype.serialize=function(){var t=["length"];return this.eachChild((function(e){t.push(e.serialize())})),t};var fr={"==":sr,"!=":or,">":lr,"<":ar,">=":cr,"<=":hr,array:Ci,at:qn,boolean:Ci,case:Qn,coalesce:Gn,collator:Zi,format:Ti,image:Mi,in:Xn,"index-of":Kn,interpolate:jn,"interpolate-hcl":jn,"interpolate-lab":jn,length:pr,let:Un,literal:vi,match:$n,number:Ci,"number-format":dr,object:Ci,slice:er,step:fn,string:Ci,"to-boolean":Li,"to-color":Li,"to-number":Li,"to-string":Li,var:ln,within:nn};function gr(t,e){var i=e[0],n=e[1],r=e[2],s=e[3];i=i.evaluate(t),n=n.evaluate(t),r=r.evaluate(t);var o=s?s.evaluate(t):1,a=fi(i,n,r,o);if(a)throw new bi(a);return new Ae(i/255*o,n/255*o,r/255*o,o)}function mr(t,e){return t in e}function _r(t,e){var i=e[t];return void 0===i?null:i}function yr(t){return{type:t}}Fi.register(fr,{error:[{kind:"error"},[Xe],function(t,e){var i=e[0];throw new bi(i.evaluate(t))}],typeof:[Xe,[$e],function(t,e){return ii(mi(e[0].evaluate(t)))}],"to-rgba":[ei(We,4),[Ke],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[Ke,[We,We,We],gr],rgba:[Ke,[We,We,We,We],gr],has:{type:He,overloads:[[[Xe],function(t,e){return mr(e[0].evaluate(t),t.properties())}],[[Xe,Ye],function(t,e){var i=e[0],n=e[1];return mr(i.evaluate(t),n.evaluate(t))}]]},get:{type:$e,overloads:[[[Xe],function(t,e){return _r(e[0].evaluate(t),t.properties())}],[[Xe,Ye],function(t,e){var i=e[0],n=e[1];return _r(i.evaluate(t),n.evaluate(t))}]]},"feature-state":[$e,[Xe],function(t,e){return _r(e[0].evaluate(t),t.featureState||{})}],properties:[Ye,[],function(t){return t.properties()}],"geometry-type":[Xe,[],function(t){return t.geometryType()}],id:[$e,[],function(t){return t.id()}],zoom:[We,[],function(t){return t.globals.zoom}],pitch:[We,[],function(t){return t.globals.pitch||0}],"distance-from-center":[We,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[We,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[We,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[We,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[$e,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[We,yr(We),function(t,e){for(var i=0,n=0,r=e;n<r.length;n+=1){i+=r[n].evaluate(t)}return i}],"*":[We,yr(We),function(t,e){for(var i=1,n=0,r=e;n<r.length;n+=1){i*=r[n].evaluate(t)}return i}],"-":{type:We,overloads:[[[We,We],function(t,e){var i=e[0],n=e[1];return i.evaluate(t)-n.evaluate(t)}],[[We],function(t,e){return-e[0].evaluate(t)}]]},"/":[We,[We,We],function(t,e){var i=e[0],n=e[1];return i.evaluate(t)/n.evaluate(t)}],"%":[We,[We,We],function(t,e){var i=e[0],n=e[1];return i.evaluate(t)%n.evaluate(t)}],ln2:[We,[],function(){return Math.LN2}],pi:[We,[],function(){return Math.PI}],e:[We,[],function(){return Math.E}],"^":[We,[We,We],function(t,e){var i=e[0],n=e[1];return Math.pow(i.evaluate(t),n.evaluate(t))}],sqrt:[We,[We],function(t,e){var i=e[0];return Math.sqrt(i.evaluate(t))}],log10:[We,[We],function(t,e){var i=e[0];return Math.log(i.evaluate(t))/Math.LN10}],ln:[We,[We],function(t,e){var i=e[0];return Math.log(i.evaluate(t))}],log2:[We,[We],function(t,e){var i=e[0];return Math.log(i.evaluate(t))/Math.LN2}],sin:[We,[We],function(t,e){var i=e[0];return Math.sin(i.evaluate(t))}],cos:[We,[We],function(t,e){var i=e[0];return Math.cos(i.evaluate(t))}],tan:[We,[We],function(t,e){var i=e[0];return Math.tan(i.evaluate(t))}],asin:[We,[We],function(t,e){var i=e[0];return Math.asin(i.evaluate(t))}],acos:[We,[We],function(t,e){var i=e[0];return Math.acos(i.evaluate(t))}],atan:[We,[We],function(t,e){var i=e[0];return Math.atan(i.evaluate(t))}],min:[We,yr(We),function(t,e){return Math.min.apply(Math,e.map((function(e){return e.evaluate(t)})))}],max:[We,yr(We),function(t,e){return Math.max.apply(Math,e.map((function(e){return e.evaluate(t)})))}],abs:[We,[We],function(t,e){var i=e[0];return Math.abs(i.evaluate(t))}],round:[We,[We],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[We,[We],function(t,e){var i=e[0];return Math.floor(i.evaluate(t))}],ceil:[We,[We],function(t,e){var i=e[0];return Math.ceil(i.evaluate(t))}],"filter-==":[He,[Xe,$e],function(t,e){var i=e[0],n=e[1];return t.properties()[i.value]===n.value}],"filter-id-==":[He,[$e],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[He,[Xe],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[He,[Xe,$e],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],s=n.value;return typeof r==typeof s&&r<s}],"filter-id-<":[He,[$e],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&n<r}],"filter->":[He,[Xe,$e],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],s=n.value;return typeof r==typeof s&&r>s}],"filter-id->":[He,[$e],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&n>r}],"filter-<=":[He,[Xe,$e],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],s=n.value;return typeof r==typeof s&&r<=s}],"filter-id-<=":[He,[$e],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&n<=r}],"filter->=":[He,[Xe,$e],function(t,e){var i=e[0],n=e[1],r=t.properties()[i.value],s=n.value;return typeof r==typeof s&&r>=s}],"filter-id->=":[He,[$e],function(t,e){var i=e[0],n=t.id(),r=i.value;return typeof n==typeof r&&n>=r}],"filter-has":[He,[$e],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[He,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[He,[ei(Xe)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[He,[ei($e)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[He,[Xe,ei($e)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[He,[Xe,ei($e)],function(t,e){var i=e[0],n=e[1];return function(t,e,i,n){for(;i<=n;){var r=i+n>>1;if(e[r]===t)return!0;e[r]>t?n=r-1:i=r+1}return!1}(t.properties()[i.value],n.value,0,n.value.length-1)}],all:{type:He,overloads:[[[He,He],function(t,e){var i=e[0],n=e[1];return i.evaluate(t)&&n.evaluate(t)}],[yr(He),function(t,e){for(var i=0,n=e;i<n.length;i+=1){if(!n[i].evaluate(t))return!1}return!0}]]},any:{type:He,overloads:[[[He,He],function(t,e){var i=e[0],n=e[1];return i.evaluate(t)||n.evaluate(t)}],[yr(He),function(t,e){for(var i=0,n=e;i<n.length;i+=1){if(n[i].evaluate(t))return!0}return!1}]]},"!":[He,[He],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[He,[Xe],function(t,e){var i=e[0],n=t.globals&&t.globals.isSupportedScript;return!n||n(i.evaluate(t))}],upcase:[Xe,[Xe],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[Xe,[Xe],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[Xe,yr($e),function(t,e){return e.map((function(e){return _i(e.evaluate(t))})).join("")}],"resolved-locale":[Xe,[Je],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var vr=fr;function xr(t){return{result:"success",value:t}}function br(t){return{result:"error",value:t}}function Er(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}var wr=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new Oi,this._defaultValue=e?function(t){return"color"===t.type&&(Er(t.default)||Array.isArray(t.default))?new Ae(0,0,0,0):"color"===t.type?Ae.parse(t.default)||null:void 0===t.default?null:t.default}(e):null,this._enumValues=e&&"enum"===e.type?e.values:null};function Cr(t,e){var i=new cn(vr,[],e?function(t){var e={color:Ke,string:Xe,number:We,enum:Xe,boolean:He,formatted:Qe,resolvedImage:ti};if("array"===t.type)return ei(e[t.value]||$e,t.length);return e[t.type]}(e):void 0),n=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return n?xr(new wr(n,e)):br(i.errors)}wr.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,r,s,o,a){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=n||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=s,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=a||null,this.expression.evaluate(this._evaluator)},wr.prototype.evaluate=function(t,e,i,n,r,s,o,a){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=n||null,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=s||null,this._evaluator.featureTileCoord=o||null,this._evaluator.featureDistanceData=a||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new bi("Expected value to be one of "+Object.keys(this._enumValues).map((function(t){return JSON.stringify(t)})).join(", ")+", but found "+JSON.stringify(l)+" instead.");return l}catch(Pa){return this._warningHistory[Pa.message]||(this._warningHistory[Pa.message]=!0,"undefined"!=typeof console&&console.warn(Pa.message)),this._defaultValue}};var Sr=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!sn(e.expression)};Sr.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,r,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,s)},Sr.prototype.evaluate=function(t,e,i,n,r,s){return this._styleExpression.evaluate(t,e,i,n,r,s)};var Tr=function(t,e,i,n){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!sn(e.expression),this.interpolationType=n};function Rr(t,e){if("error"===(t=Cr(t,e)).result)return t;var i=t.value.expression,n=rn(i);if(!n&&!function(t){return"data-driven"===t["property-type"]}(e))return br([new Be("","data expressions not supported")]);var r=on(i,["zoom","pitch","distance-from-center"]);if(!r&&!function(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}(e))return br([new Be("","zoom expressions not supported")]);var s=Mr(i);if(!s&&!r)return br([new Be("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof Be)return br([s]);if(s instanceof jn&&!function(t){return!!t.expression&&t.expression.interpolated}(e))return br([new Be("",'"interpolate" expressions cannot be used with this property')]);if(!s)return xr(new Sr(n?"constant":"source",t.value));var o=s instanceof jn?s.interpolation:void 0;return xr(new Tr(n?"camera":"composite",t.value,s.labels,o))}function Mr(t){var e=null;if(t instanceof Un)e=Mr(t.result);else if(t instanceof Gn)for(var i=0,n=t.args;i<n.length;i+=1){var r=n[i];if(e=Mr(r))break}else(t instanceof fn||t instanceof jn)&&t.input instanceof Fi&&"zoom"===t.input.name&&(e=t);return e instanceof Be||t.eachChild((function(t){var i=Mr(t);i instanceof Be?e=i:!e&&i?e=new Be("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&i&&e!==i&&(e=new Be("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Ir(t){if(Array.isArray(t))return t.map(Ir);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var i in t)e[i]=Ir(t[i]);return e}return function(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}(t)}Tr.prototype.evaluateWithoutErrorHandling=function(t,e,i,n,r,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,n,r,s)},Tr.prototype.evaluate=function(t,e,i,n,r,s){return this._styleExpression.evaluate(t,e,i,n,r,s)},Tr.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?jn.interpolationFactor(this.interpolationType,t,e,i):0};var Pr={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function Lr(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,i=t.slice(1);e<i.length;e+=1){var n=i[e];if(!Lr(n)&&"boolean"!=typeof n)return!1}return!0;default:return!0}}function Ar(t,e){if(void 0===e&&(e="fill"),null==t)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};Lr(t)||(t=jr(t));var i=t,n=!0;try{n=function(t){if(!Nr(t))return t;var e=Ir(t);return Or(e),e=kr(e)}(i)}catch(Pa){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(i,null,2)+"\n        ")}var r=Pr["filter_"+e],s=Cr(n,r),o=null;if("error"===s.result)throw new Error(s.value.map((function(t){return t.key+": "+t.message})).join(", "));o=function(t,e,i){return s.value.evaluate(t,e,{},i)};var a=null,l=null;if(n!==i){var h=Cr(i,r);if("error"===h.result)throw new Error(h.value.map((function(t){return t.key+": "+t.message})).join(", "));a=function(t,e,i,n,r){return h.value.evaluate(t,e,{},i,void 0,void 0,n,r)},l=!rn(h.value.expression)}return{filter:o,dynamicFilter:a||void 0,needGeometry:Zr(n),needFeature:!!l}}function kr(t){if(!Array.isArray(t))return t;var e=function(t){if(Fr.has(t[0]))for(var e=1;e<t.length;e++){if(Nr(t[e]))return!0}return t}(t);return!0===e?e:e.map((function(t){return kr(t)}))}function Or(t){var e=!1,i=[];if("case"===t[0]){for(var n=1;n<t.length-1;n+=2)e=e||Nr(t[n]),i.push(t[n+1]);i.push(t[t.length-1])}else if("match"===t[0]){e=e||Nr(t[1]);for(var r=2;r<t.length-1;r+=2)i.push(t[r+1]);i.push(t[t.length-1])}else if("step"===t[0]){e=e||Nr(t[1]);for(var s=1;s<t.length-1;s+=2)i.push(t[s+1])}e&&(t.length=0,t.push.apply(t,["any"].concat(i)));for(var o=1;o<t.length;o++)Or(t[o])}function Nr(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;for(var e,i=1;i<t.length;i++){if(Nr(t[i]))return!0}return!1}var Fr=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Dr(t,e){return t<e?-1:t>e?1:0}function Zr(t){if(!Array.isArray(t))return!1;if("within"===t[0])return!0;for(var e=1;e<t.length;e++)if(Zr(t[e]))return!0;return!1}function jr(t){if(!t)return!0;var e,i=t[0];return t.length<=1?"any"!==i:"=="===i?zr(t[1],t[2],"=="):"!="===i?Ur(zr(t[1],t[2],"==")):"<"===i||">"===i||"<="===i||">="===i?zr(t[1],t[2],i):"any"===i?(e=t.slice(1),["any"].concat(e.map(jr))):"all"===i?["all"].concat(t.slice(1).map(jr)):"none"===i?["all"].concat(t.slice(1).map(jr).map(Ur)):"in"===i?Gr(t[1],t.slice(2)):"!in"===i?Ur(Gr(t[1],t.slice(2))):"has"===i?Br(t[1]):"!has"===i?Ur(Br(t[1])):"within"!==i||t}function zr(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function Gr(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((function(t){return typeof t!=typeof e[0]}))?["filter-in-large",t,["literal",e.sort(Dr)]]:["filter-in-small",t,["literal",e]]}}function Br(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Ur(t){return["!",t]}var Vr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function qr(t,e){var i={};for(var n in t)"ref"!==n&&(i[n]=t[n]);return Vr.forEach((function(t){t in e&&(i[t]=e[t])})),i}function Wr(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=qr(t[n],e[t[n].ref]));return t}var Xr={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},Hr=" ",Kr=/(italic|oblique)$/i,Yr={},$r=function(t,e,i){var n=Yr[t];if(!n){Array.isArray(t)||(t=[t]);for(var r=400,s="normal",o=[],a=0,l=t.length;a<l;++a){var h=t[a].split(" "),c=h[h.length-1].toLowerCase();for(var u in"normal"==c||"italic"==c||"oblique"==c?(s=c,h.pop(),c=h[h.length-1].toLowerCase()):Kr.test(c)&&(c=c.replace(Kr,""),s=h[h.length-1].replace(c,"")),Xr){var d=h.length>1?h[h.length-2].toLowerCase():"";if(c==u||c==u.replace("-","")||d+"-"+c==u){r=Xr[u],h.pop(),d&&u.startsWith(d)&&h.pop();break}}"number"==typeof c&&(r=c);var p=h.join(Hr).replace("Klokantech Noto Sans","Noto Sans");-1!==p.indexOf(Hr)&&(p='"'+p+'"'),o.push(p)}n=Yr[t]=[s,r,o]}return n[0]+Hr+n[1]+Hr+e+"px"+(i?"/"+i:"")+Hr+n[2]};var Jr="https://api.mapbox.com";function Qr(t){var e="mapbox://";return 0!==t.indexOf(e)?"":t.slice(9)}function ts(t,e){var i=Qr(t);if(!i)return decodeURI(new URL(t,location.href).href);var n="styles/";if(0!==i.indexOf(n))throw new Error("unexpected style url: "+t);var r=i.slice(7);return Jr+"/styles/v1/"+r+"?&access_token="+e}function es(t,e,i,n){var r=new URL(t,n),s=Qr(t);return s?"mapbox.satellite"===s?"https://api.mapbox.com/v4/"+s+"/{z}/{x}/{y}"+(window.devicePixelRatio>=1.5?"@2x":"")+".webp?access_token="+e:"https://{a-d}.tiles.mapbox.com/v4/"+s+"/{z}/{x}/{y}.vector.pbf?access_token="+e:e?(r.searchParams.set(i,e),decodeURI(r.href)):decodeURI(r.href)}function is(t,e){return void 0===e&&(e=512),t.getExtent()?(0,Ce.dl)({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():bs}function ns(t,e){e.accessToken||(e=Object.assign({},e),new URL(t).searchParams.forEach((function(t,i){e.accessToken=t,e.accessTokenParam=i})));return e}function rs(t,e,i,n,r){var s,o,a,l;void 0===i&&(i=""),void 0===n&&(n={}),void 0===r&&(r=void 0);var h=!0;return"string"==typeof i||Array.isArray(i)?l=i:(l=(a=i).source||a.layers,n=a),"string"==typeof n?(s=n,a={}):(s=n.styleUrl,a=n),!1===a.updateSource&&(h=!1),r||(r=a.resolutions),s||"string"!=typeof e||e.trim().startsWith("{")||(s=e),s&&(s=s.startsWith("data:")?location.href:ts(s,a.accessToken),a=ns(s,a)),new Promise((function(i,n){Ts(e,a).then((function(e){if(8!=e.version)return n(new Error("glStyle version 8 required."));if(!(t instanceof d.default||t instanceof ue))return n(new Error("Can only apply to VectorLayer or VectorTileLayer"));var c,u,p,f=t instanceof ue?"vector":"geojson";if(l?o=Array.isArray(l)?e.layers.find((function(t){return t.id===l[0]})).source:l:(o=Object.keys(e.sources).find((function(t){return e.sources[t].type===f})),l=o),!o)return n(new Error("No "+f+" source found in the glStyle."));function g(){if(!h)return Promise.resolve();if(t instanceof ue)return cs(e.sources[o],s,a).then((function(e){var i=t.getSource();if(i?e!==i&&(i.setTileUrlFunction(e.getTileUrlFunction()),"function"==typeof i.setUrls&&"function"==typeof e.getUrls&&i.setUrls(e.getUrls()),i.format_||(i.format_=e.format_),i.getAttributions()||i.setAttributions(e.getAttributions()),i.getTileLoadFunction()===pe.I&&i.setTileLoadFunction(e.getTileLoadFunction()),(0,_.equivalent)(i.getProjection(),e.getProjection())&&(i.tileGrid=e.getTileGrid())):t.setSource(e),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var n=t.getSource().getTileGrid();t.setMaxResolution(n.getResolution(n.getMinZoom()))}}));var i=e.sources[o],n=t.getSource();n&&n.get("mapbox-source")===i||(n=ds(i,s,a));var r=t.getSource();return r?n!==r&&(r.getAttributions()||r.setAttributions(n.getAttributions()),r.format_||(r.format_=n.getFormat()),r.url_=n.getUrl()):t.setSource(n),Promise.resolve()}function m(){if(p||e.sprite&&!c)p?(t.setStyle(p),g().then(i).catch(n)):n(new Error("Something went wrong trying to apply style."));else{if(a.projection&&!r){var s=(0,_.get)(a.projection).getUnits();"m"!==s&&(r=bs.map((function(t){return t/_.METERS_PER_UNIT[s]})))}p=oo(t,e,l,r,c,u,Us,a.getImage),t.getStyle()?g().then(i).catch(n):n(new Error("Nothing to show for source ["+o+"]"))}}if(e.sprite){var y=new URL(function(t,e,i){var n=Qr(t);if(!n)return decodeURI(new URL(t,i).href);var r="sprites/";if(0!==n.indexOf(r))throw new Error("unexpected sprites url: "+t);var s=n.slice(8);return Jr+"/styles/v1/"+s+"/sprite?access_token="+e}(e.sprite,a.accessToken,s||location.href)),v=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",x=y.origin+y.pathname+v+".json"+y.search;new Promise((function(t,e){Ss("Sprite",x,a).then(t).catch((function(i){Ss("Sprite",x=y.origin+y.pathname+".json"+y.search,a).then(t).catch(e)}))})).then((function(t){if(void 0===t&&n(new Error("No sprites found.")),c=t,u=y.origin+y.pathname+v+".png"+y.search,a.transformRequest){var e=a.transformRequest(u,"SpriteImage");e instanceof Request&&(u=encodeURI(e.url))}m()})).catch((function(t){n(new Error("Sprites cannot be loaded: "+x+": "+t.message))}))}else m()})).catch(n)}))}var ss={};function os(t,e,i){return void 0===i&&(i={}),Ts(e,i).then((function(e){!function(t,e,i){e.layers.some((function(e){if("background"===e.type){if(t instanceof It.Z)return t.setBackground((function(t){return ls(e,t,i,{})})),!0;if(t instanceof ve.Z||t instanceof T.Z)return t.getLayers().push(hs(e,i,{})),!0}}))}(t,e,i)}))}function as(t,e,i){var n=new Ee.Z({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),r=n.getTileJSON(),s=n.getTileGrid(),o=(0,_.get)(i.projection||"EPSG:3857"),a=function(t,e){var i=t.bounds;if(i){var n=(0,_.fromLonLat)([i[0],i[1]],e),r=(0,_.fromLonLat)([i[2],i[3]],e);return[n[0],n[1],r[0],r[1]]}return(0,_.get)(e).getExtent()}(r,o),l=o.getExtent(),h=r.minzoom||0,c=r.maxzoom||22,u={attributions:n.getAttributions(),projection:o,tileGrid:new be.Z({origin:l?(0,f.rL)(l):s.getOrigin(0),extent:a||s.getExtent(),minZoom:h,resolutions:is(o,e.tileSize).slice(0,c+1),tileSize:s.getTileSize(0)})};return Array.isArray(r.tiles)?u.urls=r.tiles:u.url=r.tiles,u}function ls(t,e,i,n){var r={id:t.id,type:t.type},s=t.layout||{},o=t.paint||{};r.paint=o;var a,l,h=ws(e,i.resolutions||bs);return void 0!==o["background-color"]&&(a=$s(r,"paint","background-color",h,ss,n)),void 0!==o["background-opacity"]&&(l=$s(r,"paint","background-opacity",h,ss,n)),"none"==s.visibility?void 0:eo(a,l)}function hs(t,e,i){var n=document.createElement("div");return n.className="ol-mapbox-style-background",n.style.position="absolute",n.style.width="100%",n.style.height="100%",new It.Z({source:new xe.Z({}),render:function(r){var s=ls(t,r.viewState.resolution,e,i);return n.style.backgroundColor=s,n}})}function cs(t,e,i){return new Promise((function(n,r){Is(t,e,i).then((function(e){var r=as(t,e,i);r.format=new Jt,n(new pe.Z(r))})).catch(r)}))}function us(t){return"{bbox-"+(t?t.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")+"}"}function ds(t,e,i){var n=i.projection?new ye.default({dataProjection:i.projection}):new ye.default,r=t.data,s={};if("string"==typeof r){var o=es(r,i.accessToken,i.accessTokenParam||"access_token",e||location.href);if(i.transformRequest){var a=i.transformRequest(o,"GeoJSON");a instanceof Request&&(o=decodeURI(a.url))}if(/\{bbox-[0-9a-z-]+\}/.test(o)){var l=new p.default({attributions:t.attribution,format:n,url:function(t,e,i){var n=us(i);return o.replace(n,""+t.join(","))},strategy:we.VW});return l.set("mapbox-source",t),l}return new p.default({attributions:t.attribution,format:n,url:o})}s.features=n.readFeatures(r,{featureProjection:(0,_.getUserProjection)()||"EPSG:3857"});var h=new p.default(Object.assign({attributions:t.attribution,format:n},s));return h.set("mapbox-source",t),h}var ps={},fs={},gs=0;function ms(t){return t.id||(t.id=gs++),t.id}function _s(t,e){return ms(t)+"."+(0,X.sq)(e)}function ys(t){var e=ps[t.id];return e||(e={},ps[ms(t)]=e),e}function vs(t){var e=fs[t.id];return e||(e={},fs[ms(t)]=e),e}function xs(t){return t*Math.PI/180}var bs=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function Es(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var i=document.createElement("canvas");return i.width=t,i.height=e,i}function ws(t,e){for(var i=0,n=e.length;i<n;++i){if(e[i]<t&&i+1<n){var r=e[i]/e[i+1];return i+Math.log(e[i]/t)/Math.log(r)}}return n-1}var Cs={};function Ss(t,e,i,n){if(void 0===i&&(i={}),e in Cs)return n&&(n.request=Cs[e][0]),Cs[e][1];var r=i.transformRequest&&i.transformRequest(e,t)||new Request(e);r.headers.get("Accept")||r.headers.set("Accept","application/json"),n&&(n.request=r);var s=fetch(r).then((function(t){return delete Cs[e],t.ok?t.json():Promise.reject(new Error("Error fetching source "+e))})).catch((function(t){return delete Cs[e],Promise.reject(new Error("Error fetching source "+e))}));return Cs[e]=[r,s],s}function Ts(t,e){if("string"!=typeof t)return Promise.resolve(t);if(!t.trim().startsWith("{"))return Ss("Style",t=ts(t,e.accessToken),e);try{var i=JSON.parse(t);return Promise.resolve(i)}catch(br){return Promise.reject(br)}}function Rs(t,e){if(e.transformRequest){var i=e.transformRequest(t,"Tiles");if(i instanceof Request)return decodeURI(i.url)}return t}var Ms={};function Is(t,e,i){void 0===i&&(i={});var n=[e,JSON.stringify(t)].toString(),r=Ms[n];if(!r||i.transformRequest){var s=t.url;if(s&&!t.tiles){var o=es(s,i.accessToken,i.accessTokenParam||"access_token",e||location.href);if(s.startsWith("mapbox://"))r=Promise.resolve(Object.assign({},t,{url:void 0,tiles:(0,_e.Gk)(o)}));else{var a={};r=Ss("Source",o,i,a).then((function(t){return t.tiles=t.tiles.map((function(e){return"tms"===t.scheme&&(e=e.replace("{y}","{-y}")),Rs(es(e,i.accessToken,i.accessTokenParam||"access_token",a.request.url),i)})),Promise.resolve(t)}))}}else t=Object.assign({},t,{tiles:t.tiles.map((function(n){return"tms"===t.scheme&&(n=n.replace("{y}","{-y}")),Rs(es(n,i.accessToken,i.accessTokenParam||"access_token",e||location.href),i)}))}),r=Promise.resolve(Object.assign({},t));Ms[n]=r}return r}function Ps(t,e,i,n){var r=document.createElement("canvas"),s=[2*i*e.pixelRatio+e.width,2*i*e.pixelRatio+e.height];r.width=s[0],r.height=s[1];var o=r.getContext("2d");o.drawImage(t,e.x,e.y,e.width,e.height,i*e.pixelRatio,i*e.pixelRatio,e.width,e.height);var a=o.getImageData(0,0,s[0],s[1]);o.globalCompositeOperation="destination-over",o.fillStyle="rgba("+255*n.r+","+255*n.g+","+255*n.b+","+n.a+")";for(var l=a.data,h=0,c=a.width;h<c;++h)for(var u=0,d=a.height;u<d;++u){l[4*(u*c+h)+3]>0&&o.arc(h,u,i*e.pixelRatio,0,2*Math.PI)}return o.fill(),r}var Ls,As=Array(256).join("\u200a");function ks(t,e){if(e>=.05){for(var i="",n=t.split("\n"),r=As.slice(0,Math.round(e/.1)),s=0,o=n.length;s<o;++s)s>0&&(i+="\n"),i+=n[s].split("").join(r);return i}return t}function Os(){return Ls||(Ls=Es(1,1).getContext("2d")),Ls}function Ns(t,e){return Os().measureText(t).width+(t.length-1)*e}var Fs={};function Ds(t,e,i,n){if(-1!==t.indexOf("\n")){for(var r=t.split("\n"),s=[],o=0,a=r.length;o<a;++o)s.push(Ds(r[o],e,i,n));return s.join("\n")}var l=i+","+e+","+t+","+n,h=Fs[l];if(!h){var c=t.split(" ");if(c.length>1){var u=Os();u.font=e;for(var d=u.measureText("M").width*i,p="",f=[],g=0,m=c.length;g<m;++g){var _=c[g],y=p+(p?" ":"")+_;Ns(y,n)<=d?p=y:(p&&f.push(p),p=_)}p&&f.push(p);for(var v=0,x=f.length;v<x&&x>1;++v){var b=f[v];if(Ns(b,n)<.35*d){var E=v>0?Ns(f[v-1],n):1/0,w=v<x-1?Ns(f[v+1],n):1/0;f.splice(v,1),x-=1,E<w?(f[v-1]+=" "+b,v-=1):f[v]=b+" "+f[v]}}for(var C=0,S=f.length-1;C<S;++C){var T=f[C],R=f[C+1];if(Ns(T,n)>.7*d&&Ns(R,n)<.6*d){var M=T.split(" "),I=M.pop();Ns(I,n)<.2*d&&(f[C]=M.join(" "),f[C+1]=I+" "+R),S-=1}}h=f.join("\n")}else h=t;h=ks(h,n),Fs[l]=h}return h}var Zs,js=/font-family: ?([^;]*);/,zs=/("|')/g;function Gs(t){if(!Zs){Zs={};for(var e=document.styleSheets,i=0,n=e.length;i<n;++i){var r=e[i];try{var s=r.rules||r.cssRules;if(s)for(var o=0,a=s.length;o<a;++o){var l=s[o];if(5==l.type){var h=l.cssText.match(js);Zs[h[1].replace(zs,"")]=!0}}}catch(Pa){}}}return t in Zs}var Bs={};function Us(t,e){void 0===e&&(e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css");var i=t.toString();if(i in Bs)return Bs[i];for(var n=[],r=0,s=t.length;r<s;++r){t[r]=t[r].replace("Arial Unicode MS","Arial");var o=t[r],a=$r(o,1);(0,me.Qx)(a);var l=a.split(" ");n.push([l.slice(3).join(" ").replace(/"/g,""),l[1],l[0]])}for(var h=0,c=n.length;h<c;++h){var u=n[h],d=u[0];if(!Gs(d)&&100!==me.sG.get(u[2]+"\n"+u[1]+" \n"+d)){var p=e.replace("{font-family}",d.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",d.replace(/ /g,"+")).replace("{fontweight}",u[1]).replace("{-fontstyle}",u[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",u[2]);if(!document.querySelector('link[href="'+p+'"]')){var f=document.createElement("link");f.href=p,f.rel="stylesheet",document.head.appendChild(f)}}}return Bs[i]=t,t}var Vs,qs,Ws={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},Xs={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},Hs=function(t,e){var i=Rr(t,e);if("error"===i.result)throw new Error(i.value.map((function(t){return t.key+": "+t.message})).join(", "));return i.value},Ks={},Ys={zoom:0};function $s(t,e,i,n,r,s,o){var a=t.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[a]||(s[a]={});var l,h=s[a];if(!h[i]){var c=(t[e]||Ks)[i],u=Pr[e+"_"+t.type][i];void 0===c&&(c=u.default);var d=(l=c,Array.isArray(l)&&l.length>0&&"string"==typeof l[0]&&l[0]in vr);if(!d&&Er(c)&&(c=Oe(c,u),d=!0),d){var p=Hs(c,u);h[i]=p.evaluate.bind(p)}else"color"==u.type&&(c=Ae.parse(c)),h[i]=function(){return c}}return Ys.zoom=n,h[i](Ys,r,o)}function Js(t,e,i,n){return $s(t,"layout","icon-allow-overlap",e,i,n)?$s(t,"layout","icon-ignore-placement",e,i,n)?"none":"obstacle":"declutter"}function Qs(t,e,i,n,r){return r||console.warn("No filterCache provided to evaluateFilter()"),t in r||(r[t]=Ar(e).filter),Ys.zoom=n,r[t](Ys,i)}var to=!1;function eo(t,e){if(t){if(!to&&(0===t.a||0===e))return;var i=t.a;return e=void 0===e?1:e,0===i?"transparent":"rgba("+Math.round(255*t.r/i)+","+Math.round(255*t.g/i)+","+Math.round(255*t.b/i)+","+i*e+")"}return t}var io=/\{[^{}}]*\}/g;function no(t,e){return t.replace(io,(function(t){return e[t.slice(1,-1)]||""}))}var ro=!1;var so={};function oo(t,e,i,n,r,s,a,l){if(void 0===n&&(n=bs),void 0===r&&(r=void 0),void 0===s&&(s=void 0),void 0===a&&(a=void 0),void 0===l&&(l=void 0),"string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");var d,p;if(so[_s(e,t)]=Array.from(arguments),s)if("undefined"!=typeof Image){var f=new Image;f.crossOrigin="anonymous",f.onload=function(){d=f,p=[f.width,f.height],t.changed(),f.onload=null},f.src=s}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var g=self;g.postMessage({action:"loadImage",src:s}),g.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===s&&(d=t.data.image,p=[d.width,d.height])}))}for(var m,_=Wr(e.layers),y={},v=[],x={},b={},E=ys(e),w=vs(e),C=0,S=_.length;C<S;++C){var T=_[C],R=T.id;if("string"==typeof i&&T.source==i||-1!==i.indexOf(R)){var M=T["source-layer"];if(m){if(T.source!==m)throw new Error('Layer "'+R+'" does not use source "'+m)}else{m=T.source;var I=e.sources[m];if(!I)throw new Error('Source "'+m+'" is not defined');var P=I.type;if("vector"!==P&&"geojson"!==P)throw new Error('Source "'+m+'" is not of type "vector" or "geojson", but "'+P+'"')}var L=y[M];L||(L=[],y[M]=L),L.push({layer:T,index:C}),v.push(R)}}var A=new h.default,k=new o.default,O=[],N=function(i,s,f){var g=i.getProperties(),m=y[g.layer];if(m){var _=n.indexOf(s);-1==_&&(_=ws(s,n));for(var v,C=Ws[i.getGeometry().getType()],S={id:i.getId(),properties:g,type:C},T=t.get("mapbox-featurestate")[i.getId()],R=-1,M=0,I=m.length;M<I;++M){var P=m[M],L=P.layer,N=L.id;if(void 0===f||f===N){var F=L.layout||Ks,D=L.paint||Ks;if(!("none"===F.visibility||"minzoom"in L&&_<L.minzoom||"maxzoom"in L&&_>=L.maxzoom)){var Z=L.filter;if(!Z||Qs(N,Z,S,_,w)){v=L;var j=void 0,z=void 0,G=void 0,B=void 0,U=void 0,V=void 0,q=P.index;if(3==C&&("fill"==L.type||"fill-extrusion"==L.type))if(z=$s(L,"paint",L.type+"-opacity",_,S,E,T),L.type+"-pattern"in D){var W=$s(L,"paint",L.type+"-pattern",_,S,E,T);if(W){var X="string"==typeof W?no(W,g):W.toString();if(d&&r&&r[X]){++R,(V=O[R])&&V.getFill()&&!V.getStroke()&&!V.getText()||(V=new c.default({fill:new o.default}),O[R]=V),G=V.getFill(),V.setZIndex(q);var H=X+"."+z,K=b[H];if(!K){var Y=r[X],$=Es(Y.width,Y.height),J=$.getContext("2d");J.globalAlpha=z,J.drawImage(d,Y.x,Y.y,Y.width,Y.height,0,0,Y.width,Y.height),K=J.createPattern($,"repeat"),b[H]=K}G.setColor(K)}}}else j=eo($s(L,"paint",L.type+"-color",_,S,E,T),z),L.type+"-outline-color"in D&&(U=eo($s(L,"paint",L.type+"-outline-color",_,S,E,T),z)),U||(U=j),(j||U)&&(++R,(!(V=O[R])||j&&!V.getFill()||!j&&V.getFill()||U&&!V.getStroke()||!U&&V.getStroke()||V.getText())&&(V=new c.default({fill:j?new o.default:void 0,stroke:U?new h.default:void 0}),O[R]=V),j&&(G=V.getFill()).setColor(j),U&&((B=V.getStroke()).setColor(U),B.setWidth(.5)),V.setZIndex(q));if(1!=C&&"line"==L.type){j=!("line-pattern"in D)&&"line-color"in D?eo($s(L,"paint","line-color",_,S,E,T),$s(L,"paint","line-opacity",_,S,E,T)):void 0;var Q=$s(L,"paint","line-width",_,S,E,T);j&&Q>0&&(++R,(V=O[R])&&V.getStroke()&&!V.getFill()&&!V.getText()||(V=new c.default({stroke:new h.default}),O[R]=V),(B=V.getStroke()).setLineCap($s(L,"layout","line-cap",_,S,E,T)),B.setLineJoin($s(L,"layout","line-join",_,S,E,T)),B.setMiterLimit($s(L,"layout","line-miter-limit",_,S,E,T)),B.setColor(j),B.setWidth(Q),B.setLineDash(D["line-dasharray"]?$s(L,"paint","line-dasharray",_,S,E,T).map((function(t){return t*Q})):null),V.setZIndex(q))}var tt=!1,et=null,it=0,nt=void 0,rt=void 0,st=void 0;if((1==C||2==C)&&"icon-image"in F){var ot=$s(L,"layout","icon-image",_,S,E,T);if(ot){nt="string"==typeof ot?no(ot,g):ot.toString();var at=void 0,lt=l?l(t,nt):void 0;if(d&&r&&r[nt]||lt){var ht=$s(L,"layout","icon-rotation-alignment",_,S,E,T);if(2==C){var ct=i.getGeometry();if(ct.getFlatMidpoint||ct.getFlatMidpoints){var ut=ct.getExtent();if(Math.sqrt(Math.max(Math.pow((ut[2]-ut[0])/s,2),Math.pow((ut[3]-ut[1])/s,2)))>150){var dt="MultiLineString"===ct.getType()?ct.getFlatMidpoints():ct.getFlatMidpoint();if(qs||(qs=new qt("Point",Vs=[NaN,NaN],[],{},null)),at=qs,Vs[0]=dt[0],Vs[1]=dt[1],"line"===$s(L,"layout","symbol-placement",_,S,E,T)&&"map"===ht)for(var pt=ct.getStride(),ft=ct.getFlatCoordinates(),gt=0,mt=ft.length-pt;gt<mt;gt+=pt){var _t=ft[gt],yt=ft[gt+1],vt=ft[gt+pt],xt=ft[gt+pt+1],bt=Math.min(_t,vt),Et=Math.min(yt,xt),wt=Math.max(_t,vt),Ct=Math.max(yt,xt);if(dt[0]>=bt&&dt[0]<=wt&&dt[1]>=Et&&dt[1]<=Ct){it=Math.atan2(yt-xt,vt-_t);break}}}}}if(2!==C||at){var St=$s(L,"layout","icon-size",_,S,E,T),Tt=void 0!==D["icon-color"]?$s(L,"paint","icon-color",_,S,E,T):null;if(!Tt||0!==Tt.a){var Rt=$s(L,"paint","icon-halo-color",_,S,E,T),Mt=$s(L,"paint","icon-halo-width",_,S,E,T),It=nt+"."+St+"."+Mt+"."+Rt;if(null!==Tt&&(It+="."+Tt),!(rt=x[It])){var Pt=Js(L,_,S,E),Lt=void 0;"icon-offset"in F&&((Lt=$s(L,"layout","icon-offset",_,S,E,T).slice(0))[1]*=-1);var At=Tt?[255*Tt.r,255*Tt.g,255*Tt.b,Tt.a]:void 0;if(lt){var kt={color:At,rotateWithView:"map"===ht,displacement:Lt,declutterMode:Pt};"string"==typeof lt?kt.src=lt:(kt.img=lt,kt.imgSize=[lt.width,lt.height]),rt=new ge.default(kt)}else{var Ot=r[nt],Nt=void 0,Ft=void 0,Dt=void 0,Zt=void 0;Mt?Ft=[(Nt=Ps(d,Ot,Mt,Rt)).width,Nt.height]:(Nt=d,Ft=p,Dt=[Ot.width,Ot.height],Zt=[Ot.x,Ot.y]),rt=new ge.default({color:At,img:Nt,imgSize:Ft,size:Dt,offset:Zt,rotateWithView:"map"===ht,scale:St/Ot.pixelRatio,displacement:Lt,declutterMode:Pt})}x[It]=rt}}rt&&(++R,(V=O[R])&&V.getImage()&&!V.getFill()&&!V.getStroke()||(V=new c.default,O[R]=V),V.setGeometry(at),rt.setRotation(it+xs($s(L,"layout","icon-rotate",_,S,E,T))),rt.setOpacity($s(L,"paint","icon-opacity",_,S,E,T)),rt.setAnchor(Xs[$s(L,"layout","icon-anchor",_,S,E,T)]),V.setImage(rt),et=V.getText(),V.setText(void 0),V.setZIndex(q),tt=!0,st=!1)}else st=!0}}}if(1==C&&"circle"===L.type){++R,(V=O[R])&&V.getImage()&&!V.getFill()&&!V.getStroke()||(V=new c.default,O[R]=V);var jt="circle-radius"in D?$s(L,"paint","circle-radius",_,S,E,T):5,zt=eo($s(L,"paint","circle-stroke-color",_,S,E,T),$s(L,"paint","circle-stroke-opacity",_,S,E,T)),Gt=eo($s(L,"paint","circle-color",_,S,E,T),$s(L,"paint","circle-opacity",_,S,E,T)),Bt=$s(L,"paint","circle-stroke-width",_,S,E,T),Ut=jt+"."+zt+"."+Gt+"."+Bt;(rt=x[Ut])||(rt=new fe.Z({radius:jt,stroke:zt&&Bt>0?new h.default({width:Bt,color:zt}):void 0,fill:Gt?new o.default({color:Gt}):void 0,declutterMode:"none"}),x[Ut]=rt),V.setImage(rt),et=V.getText(),V.setText(void 0),V.setGeometry(void 0),V.setZIndex(q),tt=!0}var Vt=void 0,Wt=void 0,Xt=void 0,Ht=void 0,Kt=void 0,Yt=void 0;if("text-field"in F){Ht=Math.round($s(L,"layout","text-size",_,S,E,T));var $t=$s(L,"layout","text-font",_,S,E,T);Xt=$s(L,"layout","text-line-height",_,S,E,T),(Wt=$r(a?a($t,e.metadata?e.metadata["ol:webfonts"]:void 0):$t,Ht,Xt)).includes("sans-serif")||(Wt+=",sans-serif"),Kt=$s(L,"layout","text-letter-spacing",_,S,E,T),Yt=$s(L,"layout","text-max-width",_,S,E,T);var Jt=$s(L,"layout","text-field",_,S,E,T);Vt="object"==typeof Jt&&Jt.sections?1===Jt.sections.length?Jt.toString():Jt.sections.reduce((function(t,e,i){var n=e.fontStack?e.fontStack.split(","):$t,r=$r(a?a(n):n,Ht*(e.scale||1),Xt),s=e.text;if("\n"===s)return t.push("\n",""),t;if(2!=C){for(var o=0,l=(s=Ds(s,r,Yt,Kt).split("\n")).length;o<l;++o)o>0&&t.push("\n",""),t.push(s[o],r);return t}t.push(ks(s,Kt),r)}),[]):no(Jt,g).trim(),z=$s(L,"paint","text-opacity",_,S,E,T)}if(Vt&&z&&!st){tt||(++R,(V=O[R])&&V.getText()&&!V.getFill()&&!V.getStroke()||(V=new c.default,O[R]=V),V.setImage(void 0),V.setGeometry(void 0)),V.getText()||V.setText(et||new u.default({padding:[2,2,2,2]})),et=V.getText();var Qt=F["text-transform"];"uppercase"==Qt?Vt=Array.isArray(Vt)?Vt.map((function(t,e){return e%2?t:t.toUpperCase()})):Vt.toUpperCase():"lowercase"==Qt&&(Vt=Array.isArray(Vt)?Vt.map((function(t,e){return e%2?t:t.toLowerCase()})):Vt.toLowerCase());var te=Array.isArray(Vt)?Vt:2==C?ks(Vt,Kt):Ds(Vt,Wt,Yt,Kt);et.setText(te),et.setFont(Wt),et.setRotation(xs($s(L,"layout","text-rotate",_,S,E,T)));var ee=$s(L,"layout","text-anchor",_,S,E,T),ie=tt||1==C?"point":$s(L,"layout","symbol-placement",_,S,E,T),ne=void 0;if("line-center"===ie?(et.setPlacement("line"),ne="center"):et.setPlacement(ie),"line"===ie&&"function"==typeof et.setRepeat){var re=$s(L,"layout","symbol-spacing",_,S,E,T);et.setRepeat(2*re)}et.setOverflow("point"===ie);var se=$s(L,"paint","text-halo-width",_,S,E,T),oe=$s(L,"layout","text-offset",_,S,E,T),ae=$s(L,"paint","text-translate",_,S,E,T),le=0,he=0;if("point"==ie){ne="center",-1!==ee.indexOf("left")?(ne="left",he=se):-1!==ee.indexOf("right")&&(ne="right",he=-se);var ce=$s(L,"layout","text-rotation-alignment",_,S,E,T);et.setRotateWithView("map"==ce)}else et.setMaxAngle(xs($s(L,"layout","text-max-angle",_,S,E,T))*Vt.length/te.length),et.setRotateWithView(!1);et.setTextAlign(ne);var ue="middle";0==ee.indexOf("bottom")?(ue="bottom",le=-se-.5*(Xt-1)*Ht):0==ee.indexOf("top")&&(ue="top",le=se+.5*(Xt-1)*Ht),et.setTextBaseline(ue);var de=$s(L,"layout","text-justify",_,S,E,T);et.setJustify("auto"===de?void 0:de),et.setOffsetX(oe[0]*Ht+he+ae[0]),et.setOffsetY(oe[1]*Ht+le+ae[1]),k.setColor(eo($s(L,"paint","text-color",_,S,E,T),z)),et.setFill(k);var pe=eo($s(L,"paint","text-halo-color",_,S,E,T),z);if(pe){A.setColor(pe),se*=2;var me=.5*Ht;A.setWidth(se<=me?se:me),et.setStroke(A)}else et.setStroke(void 0);var _e=$s(L,"layout","text-padding",_,S,E,T),ye=et.getPadding();_e!==ye[0]&&(ye[0]=_e,ye[1]=_e,ye[2]=_e,ye[3]=_e),V.setZIndex(q)}}}}}return R>-1?(O.length=R+1,ro&&("set"in i?i.set("mapbox-layer",v):i.getProperties()["mapbox-layer"]=v),O):void 0}};return t.setStyle(N),t.set("mapbox-source",m),t.set("mapbox-layers",v),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),N}class ao extends Pt.ZP{constructor(t){super(Lt.Z.ERROR),this.error=t}}const lo=class extends ue{constructor(t){const e=!("declutter"in t)||t.declutter,i=new pe.Z({state:"loading",format:new Jt});super({source:i,background:t.background,declutter:e,className:t.className,opacity:t.opacity,visible:t.visible,zIndex:t.zIndex,minResolution:t.minResolution,maxResolution:t.maxResolution,minZoom:t.minZoom,maxZoom:t.maxZoom,renderOrder:t.renderOrder,renderBuffer:t.renderBuffer,renderMode:t.renderMode,map:t.map,updateWhileAnimating:t.updateWhileAnimating,updateWhileInteracting:t.updateWhileInteracting,preload:t.preload,useInterimTilesOnError:t.useInterimTilesOnError,properties:t.properties}),t.accessToken&&(this.accessToken=t.accessToken);rs(this,t.styleUrl,t.layers||t.source,{accessToken:this.accessToken}).then((()=>{i.setState("ready")})).catch((t=>{this.dispatchEvent(new ao(t));this.getSource().setState("error")})),void 0===this.getBackground()&&os(this,t.styleUrl,{accessToken:this.accessToken})}};var ho=i(2729),co=i(5188),uo=i(1664),po=i(6905),fo=i(8089),go=i(8085);class mo extends co.Z{constructor(t){super(t),this.vectorRenderer_=new uo.Z(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=(0,v.Ue)(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const e=(0,v.nn)(this.coordinateToVectorPixelTransform_,(0,v.nn)(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const e=t.pixelRatio,i=t.viewState,n=i.resolution,r=t.viewHints,s=this.vectorRenderer_;let o=t.extent;1!==this.layerImageRatio_&&(o=o.slice(0),(0,f.H9)(o,this.layerImageRatio_));const a=(0,f.dz)(o)/n,l=(0,f.Cr)(o)/n;if(!r[I.Z.ANIMATING]&&!r[I.Z.INTERACTING]&&!(0,f.xb)(o)){s.useContainer(null,null);const r=s.context,h=t.layerStatesArray[t.layerIndex];r.globalAlpha=h.opacity;const c=Object.assign({},h,{opacity:1}),u=Object.assign({},t,{declutterTree:new go(9),extent:o,size:[a,l],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[c],layerIndex:0});let d=!0;const p=new po.Z(o,n,e,r.canvas,(function(t){s.prepareFrame(u)&&s.replayGroupChanged&&(s.clipping=!1,s.renderFrame(u,null)&&(s.renderDeclutter(u),d=!1),t())}));p.addEventListener(Lt.Z.CHANGE,(()=>{if(p.getState()!==fo.Z.LOADED)return;this.image_=d?null:p;const t=p.getResolution(),n=p.getPixelRatio(),r=t*e/n;this.renderedResolution=r,this.coordinateToVectorPixelTransform_=(0,v.qC)(this.coordinateToVectorPixelTransform_,a/2,l/2,1/r,-1/r,0,-i.center[0],-i.center[1])})),p.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,e,i,n,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,i,n,r):super.forEachFeatureAtCoordinate(t,e,i,n,r)}}const _o=mo;class yo extends R.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.imageRatio,super(e),this.imageRatio_=void 0!==t.imageRatio?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new _o(this)}}const vo=yo,xo="uniform mat4 u_projectionMatrix;\nuniform mat4 u_screenToWorldMatrix;\nuniform vec2 u_viewportSizePx;\nuniform float u_pixelRatio;\nuniform float u_globalAlpha;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform vec4 u_renderExtent;";class bo{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.symbolSizeExpression_="vec2(1.0)",this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_="vec4(1.0)",this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.strokeWidthExpression_="1.0",this.strokeColorExpression_="vec4(1.0)",this.fillColorExpression_="vec4(1.0)",this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t){return this.attributes_.push(t),this}addVarying(t,e,i){return this.varyings_.push({name:t,type:e,expression:i}),this}setSymbolSizeExpression(t){return this.symbolSizeExpression_=t,this}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}setSymbolColorExpression(t){return this.symbolColorExpression_=t,this}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.strokeColorExpression_=t,this}setFillColorExpression(t){return this.fillColorExpression_=t,this}addVertexShaderFunction(t){this.vertexShaderFunctions_.includes(t)||this.vertexShaderFunctions_.push(t)}addFragmentShaderFunction(t){this.fragmentShaderFunctions_.includes(t)||this.fragmentShaderFunctions_.push(t)}getSymbolVertexShader(t){const e=this.symbolRotateWithView_?"u_offsetScaleMatrix * u_offsetRotateMatrix":"u_offsetScaleMatrix";let i=this.attributes_,n=this.varyings_;return t&&(i=i.concat("vec4 a_hitColor"),n=n.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),`precision mediump float;\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute float a_index;\n${i.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n${n.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvoid main(void) {\n  mat4 offsetMatrix = ${e};\n  vec2 halfSize = ${this.symbolSizeExpression_} * 0.5;\n  vec2 offset = ${this.symbolOffsetExpression_};\n  float angle = ${this.symbolRotationExpression_};\n  float offsetX;\n  float offsetY;\n  if (a_index == 0.0) {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  } else if (a_index == 1.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y - halfSize.y) * sin(angle);\n    offsetY = (offset.y - halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else if (a_index == 2.0) {\n    offsetX = (offset.x + halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x + halfSize.x) * sin(angle);\n  } else {\n    offsetX = (offset.x - halfSize.x) * cos(angle) + (offset.y + halfSize.y) * sin(angle);\n    offsetY = (offset.y + halfSize.y) * cos(angle) - (offset.x - halfSize.x) * sin(angle);\n  }\n  vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  vec4 texCoord = ${this.texCoordExpression_};\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v = a_index == 2.0 || a_index == 3.0 ? 0.0 : 1.0;\n  v_quadCoord = vec2(u, v);\n${n.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`}getSymbolFragmentShader(t){const e=t?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"";let i=this.varyings_;return t&&(i=i.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),`precision mediump float;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\n${i.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\nvoid main(void) {\n  if (${this.discardExpression_}) { discard; }\n  gl_FragColor = ${this.symbolColorExpression_};\n  gl_FragColor.rgb *= gl_FragColor.a;\n${e}\n}`}getStrokeVertexShader(t){let e=this.attributes_,i=this.varyings_;return t&&(e=e.concat("vec4 a_hitColor"),i=i.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),`#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n${xo}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec2 a_segmentStart;\nattribute vec2 a_segmentEnd;\nattribute float a_parameters;\n${e.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\n${i.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvec4 pxToScreen(vec2 pxPos) {\n  vec2 screenPos = pxPos * 4.0 / u_viewportSizePx;\n  return vec4(screenPos.xy, 0.0, 0.0);\n}\n\nvec2 getOffsetDirection(vec2 normalPx, vec2 tangentPx, float joinAngle) {\n  if (cos(joinAngle) > 0.93) return normalPx - tangentPx;\n  float halfAngle = joinAngle / 2.0;\n  vec2 angleBisectorNormal = vec2(\n    sin(halfAngle) * normalPx.x + cos(halfAngle) * normalPx.y,\n    -cos(halfAngle) * normalPx.x + sin(halfAngle) * normalPx.y\n  );\n  float length = 1.0 / sin(halfAngle);\n  return angleBisectorNormal * length;\n}\n\nvoid main(void) {\n  float lineWidth = ${this.strokeWidthExpression_};\n  float anglePrecision = 1500.0;\n  float paramShift = 10000.0;\n  v_angleStart = fract(a_parameters / paramShift) * paramShift / anglePrecision;\n  v_angleEnd = fract(floor(a_parameters / paramShift + 0.5) / paramShift) * paramShift / anglePrecision;\n  float vertexNumber = floor(a_parameters / paramShift / paramShift + 0.0001);\n  vec2 tangentPx = worldToPx(a_segmentEnd) - worldToPx(a_segmentStart);\n  tangentPx = normalize(tangentPx);\n  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n  vec2 offsetPx = getOffsetDirection(normalPx * normalDir, tangentDir * tangentPx, angle) * lineWidth * 0.5;\n  vec2 position =  vertexNumber < 1.5 ? a_segmentStart : a_segmentEnd;\n  gl_Position = u_projectionMatrix * vec4(position, 0.0, 1.0) + pxToScreen(offsetPx);\n  v_segmentStart = worldToPx(a_segmentStart);\n  v_segmentEnd = worldToPx(a_segmentEnd);\n  v_width = lineWidth;\n${i.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`}getStrokeFragmentShader(t){const e=t?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"";let i=this.varyings_;return t&&(i=i.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),`#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n${xo}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\n${i.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nfloat segmentDistanceField(vec2 point, vec2 start, vec2 end, float radius) {\n  vec2 startToPoint = point - start;\n  vec2 startToEnd = end - start;\n  float ratio = clamp(dot(startToPoint, startToEnd) / dot(startToEnd, startToEnd), 0.0, 1.0);\n  float dist = length(startToPoint - ratio * startToEnd);\n  return 1.0 - smoothstep(radius - 1.0, radius, dist);\n}\n\nvoid main(void) {\n  vec2 v_currentPoint = gl_FragCoord.xy / u_pixelRatio;\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 v_worldPos = pxToWorld(v_currentPoint);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      v_worldPos[0] < u_renderExtent[0] ||\n      v_worldPos[1] < u_renderExtent[1] ||\n      v_worldPos[0] > u_renderExtent[2] ||\n      v_worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (${this.discardExpression_}) { discard; }\n  gl_FragColor = ${this.strokeColorExpression_} * u_globalAlpha;\n  gl_FragColor *= segmentDistanceField(v_currentPoint, v_segmentStart, v_segmentEnd, v_width);\n${e}\n}`}getFillVertexShader(t){let e=this.attributes_,i=this.varyings_;return t&&(e=e.concat("vec4 a_hitColor"),i=i.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),`#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n${xo}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\n${e.map((function(t){return"attribute "+t+";"})).join("\n")}\n${i.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n${i.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`}getFillFragmentShader(t){const e=t?"  if (gl_FragColor.a < 0.1) { discard; } gl_FragColor = v_hitColor;":"";let i=this.varyings_;return t&&(i=i.concat({name:"v_hitColor",type:"vec4",expression:"a_hitColor"})),`#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n${xo}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\n${i.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nvoid main(void) {\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 v_worldPos = pxToWorld(gl_FragCoord.xy / u_pixelRatio);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      v_worldPos[0] < u_renderExtent[0] ||\n      v_worldPos[1] < u_renderExtent[1] ||\n      v_worldPos[0] > u_renderExtent[2] ||\n      v_worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (${this.discardExpression_}) { discard; }\n  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;\n${e}\n}`}}const Eo=class{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}};var wo=i(3250),Co=i(9e3),So=i(1135),To=i(4662);class Ro extends So.Z{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=t.gutter||0,this.helper_=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(Lt.Z.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===ie.Z.LOADED,this.loaded)this.uploadTile();else{if(t instanceof To.Z){const e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(Lt.Z.CHANGE,this.handleTileChange_)}}uploadTile(){(0,X.O3)()}setReady(){this.ready=!0,this.dispatchEvent(Lt.Z.CHANGE)}handleTileChange_(){this.tile.getState()===ie.Z.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(Lt.Z.CHANGE,this.handleTileChange_)}}const Mo=Ro;var Io=i(2907);function Po(t,e,i){const n=i?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,n)}function Lo(t,e,i,n,r,s){const o=t.getGL();let a,l;if(i instanceof Float32Array){a=o.FLOAT,t.getExtension("OES_texture_float");l=null!==t.getExtension("OES_texture_float_linear")}else a=o.UNSIGNED_BYTE,l=!0;Po(o,e,s&&l);const h=i.byteLength/n[1];let c,u=1;switch(h%8==0?u=8:h%4==0?u=4:h%2==0&&(u=2),r){case 1:c=o.LUMINANCE;break;case 2:c=o.LUMINANCE_ALPHA;break;case 3:c=o.RGB;break;case 4:c=o.RGBA;break;default:throw new Error(`Unsupported number of bands: ${r}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,u),o.texImage2D(o.TEXTURE_2D,0,c,n[0],n[1],0,c,a,i),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let Ao=null;const ko=class extends Mo{constructor(t){super(t),this.textures=[],this.renderSize_=(0,re.Pq)(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const e=new z(L,k);e.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(e),this.coords=e,this.setTile(t.tile)}uploadTile(){const t=this.helper_,e=t.getGL(),i=this.tile;let n;this.textures.length=0,n=i instanceof To.Z||i instanceof Co.Z?i.getImage():i.getData();const r=(0,Io.G0)(n);if(r){const t=e.createTexture();return this.textures.push(t),this.bandCount=4,function(t,e,i,n){Po(t,e,n),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i)}(e,t,r,i.interpolate),void this.setReady()}n=(0,Io.px)(n);const s=i.getSize(),o=[s[0]+2*this.gutter_,s[1]+2*this.gutter_],a=n instanceof Float32Array,l=o[0]*o[1],h=a?Float32Array:Uint8Array,c=h.BYTES_PER_ELEMENT,u=n.byteLength/o[1];this.bandCount=Math.floor(u/c/o[0]);const d=Math.ceil(this.bandCount/4);if(1===d){const r=e.createTexture();return this.textures.push(r),Lo(t,r,n,o,this.bandCount,i.interpolate),void this.setReady()}const p=new Array(d);for(let _=0;_<d;++_){const t=e.createTexture();this.textures.push(t);const i=_<d-1?4:(this.bandCount-1)%4+1;p[_]=new h(l*i)}let f=0,g=0;const m=o[0]*this.bandCount;for(let _=0;_<o[1];++_){for(let t=0;t<m;++t){const e=n[g+t],i=Math.floor(f/this.bandCount),r=t%this.bandCount,s=p[Math.floor(r/4)];s[i*(s.length/l)+r%4]=e,++f}g+=u/c}for(let _=0;_<d;++_){const e=this.textures[_],n=p[_];Lo(t,e,n,o,n.length/l,i.interpolate)}this.setReady()}disposeInternal(){const t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(Lt.Z.CHANGE,this.handleTileChange_)}getImagePixelData_(t,e,i){const n=this.gutter_,r=this.renderSize_[0],s=this.renderSize_[1];Ao||(Ao=(0,bt.E4)(1,1,void 0,{willReadFrequently:!0})),Ao.clearRect(0,0,1,1);const o=t.width-2*n,a=t.height-2*n,l=n+Math.floor(o*(e/r)),h=n+Math.floor(a*(i/s));let c;try{Ao.drawImage(t,l,h,1,1,0,0,1,1),c=Ao.getImageData(0,0,1,1).data}catch(u){return Ao=null,null}return c}getArrayPixelData_(t,e,i,n){const r=this.gutter_,s=this.renderSize_[0],o=this.renderSize_[1],a=e[0],l=e[1],h=a+2*r,c=l+2*r,u=r+Math.floor(a*(i/s)),d=r+Math.floor(l*(n/o));if(t instanceof DataView){const e=t.byteLength/(h*c),i=e*(d*h+u),n=t.buffer.slice(i,i+e);return new DataView(n)}const p=this.bandCount*(d*h+u);return t.slice(p,p+this.bandCount)}getPixelData(t,e){if(!this.loaded)return null;if(this.tile instanceof Io.ZP){const i=this.tile.getData(),n=(0,Io.px)(i);if(n){const i=this.tile.getSize();return this.getArrayPixelData_(n,i,t,e)}return this.getImagePixelData_((0,Io.G0)(i),t,e)}return this.getImagePixelData_(this.tile.getImage(),t,e)}};var Oo=i(4600),No=i(8899),Fo=i(9707);const Do={};function Zo(t){return 2*(1-1/(t+1))-1}function jo(t,e){return t.tileIds.has((0,X.sq)(e))}function zo(t,e,i){const n=t.representationsByZ;i in n||(n[i]=new Set),n[i].add(e),t.tileIds.add((0,X.sq)(e.tile))}function Go(t,e){const i=t.layerStatesArray[t.layerIndex];i.extent&&(e=(0,f.Ed)(e,(0,_.fromUserExtent)(i.extent,t.viewState.projection)));const n=i.layer.getRenderSource();if(!n.getWrapX()){const i=n.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=(0,f.Ed)(e,i))}return e}function Bo(t,e){return`${t.getKey()},${(0,Fo.km)(e)}`}const Uo=class extends pt{constructor(t,e){super(t,{uniforms:e.uniforms,postProcesses:e.postProcesses}),this.renderComplete=!1,this.tileTransform_=(0,v.Ue)(),this.tempMat4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.tempTileRange_=new No.Z(0,0,0,0),this.tempTileCoord_=(0,Fo.T9)(0,0,0),this.tempSize_=[0,0];const i=void 0!==e.cacheSize?e.cacheSize:512;this.tileRepresentationCache=new Oo.Z(i),this.frameState=null,this.projection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}isDrawableTile_(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==ie.Z.LOADED||i==ie.Z.EMPTY||i==ie.Z.ERROR&&!n}prepareFrameInternal(t){this.projection_?t.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=t.viewState.projection):this.projection_=t.viewState.projection;const e=this.getLayer().getRenderSource();return!!e&&(!(0,f.xb)(Go(t,t.extent))&&"ready"===e.getState())}createTileRepresentation(t){return(0,X.O3)()}enqueueTiles(t,e,i,n,r){const s=t.viewState,o=this.getLayer(),a=o.getRenderSource(),l=a.getTileGridForProjection(s.projection),h=a.getGutterForProjection(s.projection),c=(0,X.sq)(a);c in t.wantedTiles||(t.wantedTiles[c]={});const u=t.wantedTiles[c],d=this.tileRepresentationCache,p=o.getMapInternal(),f=Math.max(i-r,l.getMinZoom(),l.getZForResolution(Math.min(o.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):l.getResolution(0)),a.zDirection));for(let g=i;g>=f;--g){const i=l.getTileRangeForExtentAndZ(e,g,this.tempTileRange_),r=l.getResolution(g);for(let e=i.minX;e<=i.maxX;++e)for(let o=i.minY;o<=i.maxY;++o){const i=(0,Fo.T9)(g,e,o,this.tempTileCoord_),p=Bo(a,i);let f,m;if(d.containsKey(p)&&(f=d.get(p),m=f.tile),f&&f.tile.key===a.getKey()||(m=a.getTile(g,e,o,t.pixelRatio,s.projection)),jo(n,m))continue;if(f)if(this.isDrawableTile_(m))f.setTile(m);else{const t=m.getInterimTile();f.setTile(t)}else f=this.createTileRepresentation({tile:m,grid:l,helper:this.helper,gutter:h}),d.set(p,f);zo(n,f,g);const _=m.getKey();u[_]=!0,m.getState()===ie.Z.IDLE&&(t.tileQueue.isKeyQueued(_)||t.tileQueue.enqueue([m,c,l.getTileCoordCenter(i),r]))}}}beforeTilesRender(t,e){this.helper.prepareDraw(this.frameState,!e)}renderTile(t,e,i,n,r,s,o,a,l,h,c){}renderFrame(t){this.frameState=t,this.renderComplete=!0;const e=this.helper.getGL();this.preRender(e,t);const i=t.viewState,n=this.getLayer(),r=n.getRenderSource(),s=r.getTileGridForProjection(i.projection),o=r.getGutterForProjection(i.projection),a=Go(t,t.extent),l=s.getZForResolution(i.resolution,r.zDirection),h={tileIds:new Set,representationsByZ:{}},c=n.getPreload();if(t.nextExtent){const e=s.getZForResolution(i.nextResolution,r.zDirection),n=Go(t,t.nextExtent);this.enqueueTiles(t,n,e,h,c)}this.enqueueTiles(t,a,l,h,0),c>0&&setTimeout((()=>{this.enqueueTiles(t,a,l-1,h,c-1)}),0);const u={},d=(0,X.sq)(this),p=t.time;let f=!1;for(const v of h.representationsByZ[l]){const t=v.tile;if((t instanceof Co.Z||t instanceof wo.Z)&&t.getState()===ie.Z.EMPTY)continue;const e=t.tileCoord;if(v.loaded){const i=t.getAlpha(d,p);if(1===i){t.endTransition(d);continue}f=!0;u[(0,Fo.km)(e)]=i}this.renderComplete=!1;if(this.findAltTiles_(s,e,l+1,h))continue;const i=s.getMinZoom();for(let n=l-1;n>=i;--n){if(this.findAltTiles_(s,e,n,h))break}}this.beforeTilesRender(t,f);const g=h.representationsByZ,m=Object.keys(g).map(Number).sort(ft.j2);for(let x=0,b=m.length;x<b;++x){const e=m[x];for(const i of g[e]){if(!i.loaded)continue;const n=i.tile.tileCoord,r=(0,Fo.km)(n),l=r in u?u[r]:1;l<1&&(t.animate=!0);const h=s.getResolution(e),c=(0,re.Pq)(s.getTileSize(e),this.tempSize_),d=s.getOrigin(e),p=s.getTileCoordExtent(n),f=Zo(e),g=t.viewState,m=g.center[0],_=g.center[1],y=c[0]+2*o,x=c[1]+2*o,b=y/x,E=(m-d[0])/(c[0]*h),w=(d[1]-_)/(c[1]*h),C=g.resolution/h,S=n[1],T=n[2];(0,v.mc)(this.tileTransform_),(0,v.bA)(this.tileTransform_,2/(t.size[0]*C/y),-2/(t.size[1]*C/y)),(0,v.U1)(this.tileTransform_,g.rotation),(0,v.bA)(this.tileTransform_,1,1/b),(0,v.Iu)(this.tileTransform_,(c[0]*(S-E)-o)/y,(c[1]*(T-w)-o)/x),this.renderTile(i,this.tileTransform_,t,a,h,c,d,p,f,o,l)}}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const _=this.helper.getCanvas(),y=this.tileRepresentationCache;for(;y.canExpireCache();){y.pop().dispose()}return t.postRenderFunctions.push((function(t,e){r.updateCacheSize(.1,e.viewState.projection),r.expireCache(e.viewState.projection,Do)})),this.postRender(e,t),_}findAltTiles_(t,e,i,n){const r=t.getTileRangeForTileCoordAndZ(e,i,this.tempTileRange_);if(!r)return!1;let s=!0;const o=this.tileRepresentationCache,a=this.getLayer().getRenderSource();for(let l=r.minX;l<=r.maxX;++l)for(let t=r.minY;t<=r.maxY;++t){const e=Bo(a,[i,l,t]);let r=!1;if(o.containsKey(e)){const t=o.get(e);t.loaded&&!jo(n,t.tile)&&(zo(n,t,i),r=!0)}r||(s=!1)}return s}clearCache(){const t=this.tileRepresentationCache;t.forEach((t=>t.dispose())),t.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}},Vo={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},qo="a_textureCoord",Wo=[{name:qo,size:2,type:st.FLOAT}];const Xo=class extends Uo{constructor(t,e){super(t,e),this.program_,this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.indices_=new z(A,k),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=e.paletteTextures||[]}reset(t){super.reset(t),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}createTileRepresentation(t){return new ko(t)}beforeTilesRender(t,e){super.beforeTilesRender(t,e),this.helper.useProgram(this.program_,t)}renderTile(t,e,i,n,r,s,o,a,l,h,c){const u=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(Wo);let d=0;for(;d<t.textures.length;){const e=`${Vo.TILE_TEXTURE_ARRAY}[${d}]`;this.helper.bindTexture(t.textures[d],d,e),++d}for(let f=0;f<this.paletteTextures_.length;++f){const t=this.paletteTextures_[f],e=t.getTexture(u);this.helper.bindTexture(e,d,t.name),++d}const p=i.viewState,g=s[0]+2*h,m=s[1]+2*h,_=t.tile.tileCoord,y=_[1],v=_[2];this.helper.setUniformMatrixValue(Vo.TILE_TRANSFORM,Y(this.tempMat4,e)),this.helper.setUniformFloatValue(Vo.TRANSITION_ALPHA,c),this.helper.setUniformFloatValue(Vo.DEPTH,l);let x=n;h>0&&(x=a,(0,f.Ed)(x,n,x)),this.helper.setUniformFloatVec4(Vo.RENDER_EXTENT,x),this.helper.setUniformFloatValue(Vo.RESOLUTION,p.resolution),this.helper.setUniformFloatValue(Vo.ZOOM,p.zoom),this.helper.setUniformFloatValue(Vo.TEXTURE_PIXEL_WIDTH,g),this.helper.setUniformFloatValue(Vo.TEXTURE_PIXEL_HEIGHT,m),this.helper.setUniformFloatValue(Vo.TEXTURE_RESOLUTION,r),this.helper.setUniformFloatValue(Vo.TEXTURE_ORIGIN_X,o[0]+y*s[0]*r-h*r),this.helper.setUniformFloatValue(Vo.TEXTURE_ORIGIN_Y,o[1]-v*s[1]*r+h*r),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null;const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=(0,v.nn)(e.pixelToCoordinateTransform,t.slice()),r=e.viewState,s=i.getExtent();if(s&&!(0,f.b8)((0,_.fromUserExtent)(s,r.projection),n))return null;const o=i.getSources((0,f.hI)([n]),r.resolution);let a,l,h;for(a=o.length-1;a>=0;--a)if(l=o[a],"ready"===l.getState()){if(h=l.getTileGridForProjection(r.projection),l.getWrapX())break;const t=h.getExtent();if(!t||(0,f.b8)(t,n))break}if(a<0)return null;const c=this.tileRepresentationCache;for(let u=h.getZForResolution(r.resolution);u>=h.getMinZoom();--u){const t=h.getTileCoordForCoordAndZ(n,u),e=Bo(l,t);if(!c.containsKey(e))continue;const i=c.get(e),r=i.tile;if((r instanceof Co.Z||r instanceof wo.Z)&&r.getState()===ie.Z.EMPTY)return null;if(!i.loaded)continue;const s=h.getOrigin(u),o=(0,re.Pq)(h.getTileSize(u)),a=h.getResolution(u),d=(n[0]-s[0])/a-t[1]*o[0],p=(s[1]-n[1])/a-t[2]*o[1];return i.getPixelData(d,p)}return null}disposeInternal(){const t=this.helper;if(t){t.getGL().deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}};var Ho=i(3139);const Ko={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0};const Yo={};function $o(t){if("number"==typeof t)return Ko.NUMBER;if("boolean"==typeof t)return Ko.BOOLEAN;if("string"==typeof t)return(0,Ho.e1)(t)?Ko.COLOR|Ko.STRING:Ko.STRING;if(!Array.isArray(t))throw new Error(`Unhandled value type: ${JSON.stringify(t)}`);const e=t;if(e.every((function(t){return"number"==typeof t})))return 3===e.length||4===e.length?Ko.COLOR|Ko.NUMBER_ARRAY:Ko.NUMBER_ARRAY;if("string"!=typeof e[0])throw new Error(`Expected an expression operator but received: ${JSON.stringify(e)}`);const i=Yo[e[0]];if(void 0===i)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return i.getReturnType(e.slice(1))}function Jo(t){const e=[];return(t&Ko.NUMBER)>0&&e.push("number"),(t&Ko.COLOR)>0&&e.push("color"),(t&Ko.BOOLEAN)>0&&e.push("boolean"),(t&Ko.NUMBER_ARRAY)>0&&e.push("number[]"),(t&Ko.STRING)>0&&e.push("string"),e.length>0?e.join(", "):"(no type)"}function Qo(t){const e=t.toString();return e.includes(".")?e:e+".0"}function ta(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(Qo).join(", ")})`}function ea(t,e){return void 0===t.stringLiteralsMap[e]&&(t.stringLiteralsMap[e]=Object.keys(t.stringLiteralsMap).length),t.stringLiteralsMap[e]}function ia(t,e,i){const n=void 0!==i?i:Ko.NUMBER;if(Array.isArray(e)&&"string"==typeof e[0]){const i=Yo[e[0]];if(void 0===i)throw new Error(`Unrecognized expression operator: ${JSON.stringify(e)}`);return i.toGlsl(t,e.slice(1),n)}const r=$o(e)&n;if(ua(e,r,""),(r&Ko.NUMBER)>0)return Qo(e);if((r&Ko.BOOLEAN)>0)return e.toString();if((r&Ko.STRING)>0)return function(t,e){return Qo(ea(t,e))}(t,e.toString());if((r&Ko.COLOR)>0)return function(t){const e=(0,Ho._2)(t),i=e.length>3?e[3]:1;return ta([e[0]/255*i,e[1]/255*i,e[2]/255*i,i])}(e);if((r&Ko.NUMBER_ARRAY)>0)return ta(e);throw new Error(`Unexpected expression ${e} (expected type ${Jo(n)})`)}function na(t){if(0==($o(t)&Ko.NUMBER))throw new Error(`A numeric value was expected, got ${JSON.stringify(t)} instead`)}function ra(t){for(let e=0;e<t.length;e++)na(t[e])}function sa(t){if(0==($o(t)&Ko.STRING))throw new Error(`A string value was expected, got ${JSON.stringify(t)} instead`)}function oa(t){if(0==($o(t)&Ko.BOOLEAN))throw new Error(`A boolean value was expected, got ${JSON.stringify(t)} instead`)}function aa(t,e){if(t.length!==e)throw new Error(`Exactly ${e} arguments were expected, got ${t.length} instead`)}function la(t,e){if(t.length<e)throw new Error(`At least ${e} arguments were expected, got ${t.length} instead`)}function ha(t,e){if(t.length>e)throw new Error(`At most ${e} arguments were expected, got ${t.length} instead`)}function ca(t){if(t.length%2!=0)throw new Error(`An even amount of arguments was expected, got ${JSON.stringify(t)} instead`)}function ua(t,e,i){if(e===Ko.NONE)throw new Error(`No matching type was found for the following expression ${i}: ${JSON.stringify(t)}`)}function da(t,e,i){if(ua(t,e,i),n=e,Math.log2(n)%1!=0)throw new Error(`Expected to have a unique type for the following expression ${i}: ${JSON.stringify(t)}\nGot the following types instead: ${Jo(e)}`);var n}function pa(t,e,i,n){if((e&i)===Ko.NONE)throw new Error(`Expected the ${n} type of the following expression: ${JSON.stringify(t)} to be of the following types: ${Jo(i)}\nGot these types instead: ${Jo(e)}`)}function fa(t){return"u_var_"+t}Yo.get={getReturnType:function(t){if(2===t.length){return function(t){switch(t){case"string":return Ko.STRING;case"color":return Ko.COLOR;case"number":return Ko.NUMBER;case"boolean":return Ko.BOOLEAN;case"number[]":return Ko.NUMBER_ARRAY;default:throw new Error(`Unrecognized type hint: ${t}`)}}(t[1])}return Ko.ANY},toGlsl:function(t,e,i){la(e,1),ha(e,2),sa(e[0]);const n=i&Yo.get.getReturnType(e);da(["get",...e],n,"");const r=e[0].toString(),s=t.attributes.find((t=>t.name===r));if(s){if(n!==s.type)throw new Error(`The following attribute was used in different places with incompatible types: ${r}\nTypes were: ${Jo(s.type)} and ${Jo(n)}`)}else t.attributes.push({name:r,type:n});return(t.inFragmentShader?"v_":"a_")+r}},Yo.var={getReturnType:function(){return Ko.ANY},toGlsl:function(t,e,i){aa(e,1),sa(e[0]);const n=e[0].toString();if(!t.style.variables||void 0===t.style.variables[n])throw new Error(`The following variable is missing from the style: ${n}`);const r=i&$o(t.style.variables[n]);da(["var",...e],r,"");const s=t.variables.find((t=>t.name===n));if(s){if(r!==s.type)throw new Error(`The following variable was used in different places with incompatible types: ${n}\nTypes were: ${Jo(s.type)} and ${Jo(r)}`)}else t.variables.push({name:n,type:r});return fa(n)}};const ga="u_paletteTextures";Yo.palette={getReturnType:function(){return Ko.COLOR},toGlsl:function(t,e){aa(e,2),na(e[0]);const i=ia(t,e[0]),n=e[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");const r=n.length,s=new Uint8Array(4*r);for(let l=0;l<r;l++){const t=n[l];let e;if("string"==typeof t)e=(0,Ho.mL)(t);else{if(!Array.isArray(t))throw new Error("The second argument of palette must be an array of strings or colors");const i=t.length;if(4===i)e=t;else{if(3!==i)throw new Error(`Expected palette color to have 3 or 4 values, got ${i}`);e=[t[0],t[1],t[2],1]}}const i=4*l;s[i]=e[0],s[i+1]=e[1],s[i+2]=e[2],s[i+3]=255*e[3]}t.paletteTextures||(t.paletteTextures=[]);const o=`${ga}[${t.paletteTextures.length}]`,a=new Eo(o,s);return t.paletteTextures.push(a),`texture2D(${o}, vec2((${i} + 0.5) / ${r}.0, 0.5))`}};const ma="getBandValue";function _a(t){return{getReturnType:function(){return Ko.BOOLEAN},toGlsl:function(e,i){aa(i,2);let n=Ko.ANY;for(let t=0;t<i.length;t++)n&=$o(i[t]);if(n===Ko.NONE)throw new Error(`All arguments should be of compatible type, got ${JSON.stringify(i)} instead`);return n&=~Ko.COLOR,`(${ia(e,i[0],n)} ${t} ${ia(e,i[1],n)})`}}}function ya(t){return{getReturnType:function(){return Ko.BOOLEAN},toGlsl:function(e,i){la(i,2);for(let t=0;t<i.length;t++)oa(i[t]);let n=i.map((t=>ia(e,t,Ko.BOOLEAN))).join(` ${t} `);return n=`(${n})`,n}}}function va(t){const e=(0,Ho._2)(t);return[256*e[0]+e[1],256*e[2]+Math.round(255*e[3])]}Yo.band={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){la(e,1),ha(e,3);const i=e[0];if(!(ma in t.functions)){let e="";const i=t.bandCount||1;for(let t=0;t<i;t++){const n=Math.floor(t/4);let r=t%4;t===i-1&&1===r&&(r=3);e+=`\n          if (band == ${t+1}.0) {\n            return texture2D(${`${Vo.TILE_TEXTURE_ARRAY}[${n}]`}, v_textureCoord + vec2(dx, dy))[${r}];\n          }\n        `}t.functions[ma]=`\n        float getBandValue(float band, float xOffset, float yOffset) {\n          float dx = xOffset / ${Vo.TEXTURE_PIXEL_WIDTH};\n          float dy = yOffset / ${Vo.TEXTURE_PIXEL_HEIGHT};\n          ${e}\n        }\n      `}const n=ia(t,i),r=ia(t,e[1]||0),s=ia(t,e[2]||0);return`${ma}(${n}, ${r}, ${s})`}},Yo.time={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,0),"u_time"}},Yo.zoom={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,0),"u_zoom"}},Yo.resolution={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,0),"u_resolution"}},Yo["*"]={getReturnType:function(t){let e=Ko.NUMBER|Ko.COLOR;for(let i=0;i<t.length;i++)e&=$o(t[i]);return e},toGlsl:function(t,e,i){la(e,2);let n=i;for(let r=0;r<e.length;r++)n&=$o(e[r]);return pa(e,n,Ko.NUMBER|Ko.COLOR,"output"),`(${e.map((e=>ia(t,e,n))).join(" * ")})`}},Yo["/"]={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,2),ra(e),`(${ia(t,e[0])} / ${ia(t,e[1])})`}},Yo["+"]={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return la(e,2),ra(e),`(${e.map((e=>ia(t,e))).join(" + ")})`}},Yo["-"]={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,2),ra(e),`(${ia(t,e[0])} - ${ia(t,e[1])})`}},Yo.clamp={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){aa(e,3),ra(e);const i=ia(t,e[1]),n=ia(t,e[2]);return`clamp(${ia(t,e[0])}, ${i}, ${n})`}},Yo["%"]={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,2),ra(e),`mod(${ia(t,e[0])}, ${ia(t,e[1])})`}},Yo["^"]={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,2),ra(e),`pow(${ia(t,e[0])}, ${ia(t,e[1])})`}},Yo.abs={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,1),ra(e),`abs(${ia(t,e[0])})`}},Yo.floor={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,1),ra(e),`floor(${ia(t,e[0])})`}},Yo.round={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,1),ra(e),`floor(${ia(t,e[0])} + 0.5)`}},Yo.ceil={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,1),ra(e),`ceil(${ia(t,e[0])})`}},Yo.sin={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,1),ra(e),`sin(${ia(t,e[0])})`}},Yo.cos={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return aa(e,1),ra(e),`cos(${ia(t,e[0])})`}},Yo.atan={getReturnType:function(){return Ko.NUMBER},toGlsl:function(t,e){return la(e,1),ha(e,2),ra(e),2===e.length?`atan(${ia(t,e[0])}, ${ia(t,e[1])})`:`atan(${ia(t,e[0])})`}},Yo[">"]={getReturnType:function(){return Ko.BOOLEAN},toGlsl:function(t,e){return aa(e,2),ra(e),`(${ia(t,e[0])} > ${ia(t,e[1])})`}},Yo[">="]={getReturnType:function(){return Ko.BOOLEAN},toGlsl:function(t,e){return aa(e,2),ra(e),`(${ia(t,e[0])} >= ${ia(t,e[1])})`}},Yo["<"]={getReturnType:function(){return Ko.BOOLEAN},toGlsl:function(t,e){return aa(e,2),ra(e),`(${ia(t,e[0])} < ${ia(t,e[1])})`}},Yo["<="]={getReturnType:function(){return Ko.BOOLEAN},toGlsl:function(t,e){return aa(e,2),ra(e),`(${ia(t,e[0])} <= ${ia(t,e[1])})`}},Yo["=="]=_a("=="),Yo["!="]=_a("!="),Yo["!"]={getReturnType:function(){return Ko.BOOLEAN},toGlsl:function(t,e){return aa(e,1),oa(e[0]),`(!${ia(t,e[0],Ko.BOOLEAN)})`}},Yo.all=ya("&&"),Yo.any=ya("||"),Yo.between={getReturnType:function(){return Ko.BOOLEAN},toGlsl:function(t,e){aa(e,3),ra(e);const i=ia(t,e[1]),n=ia(t,e[2]),r=ia(t,e[0]);return`(${r} >= ${i} && ${r} <= ${n})`}},Yo.array={getReturnType:function(){return Ko.NUMBER_ARRAY},toGlsl:function(t,e){la(e,2),ha(e,4),ra(e);const i=e.map((function(e){return ia(t,e)}));return`vec${e.length}(${i.join(", ")})`}},Yo.color={getReturnType:function(){return Ko.COLOR},toGlsl:function(t,e){la(e,3),ha(e,4),ra(e);const i=e.slice(0,3).map((e=>`${ia(t,e)} / 255.0`));if(3===e.length)return`vec4(${i.join(", ")}, 1.0)`;return`(${ia(t,e[3])} * vec4(${i.join(", ")}, 1.0))`}},Yo.interpolate={getReturnType:function(t){let e=Ko.COLOR|Ko.NUMBER;for(let i=3;i<t.length;i+=2)e&=$o(t[i]);return e},toGlsl:function(t,e,i){ca(e),la(e,6);const n=e[0];let r;switch(n[0]){case"linear":r=1;break;case"exponential":r=n[1];break;default:r=null}if(!r)throw new Error(`Invalid interpolation type for "interpolate" operator, received: ${JSON.stringify(n)}`);const s=Ko.NUMBER,o=Yo.interpolate.getReturnType(e)&i;da(["interpolate",...e],o,"output");const a=ia(t,e[1],s),l=Qo(r);let h="";for(let c=2;c<e.length-2;c+=2){const i=ia(t,e[c],s),n=h||ia(t,e[c+1],o),r=ia(t,e[c+2],s);h=`mix(${n}, ${ia(t,e[c+3],o)}, pow(clamp((${a} - ${i}) / (${r} - ${i}), 0.0, 1.0), ${l}))`}return h}},Yo.match={getReturnType:function(t){let e=Ko.ANY;for(let i=2;i<t.length;i+=2)e&=$o(t[i]);return e&=$o(t[t.length-1]),e},toGlsl:function(t,e,i){ca(e),la(e,4);let n=$o(e[0]);for(let l=1;l<e.length-1;l+=2)n&=$o(e[l]);pa(["match",...e],n,Ko.STRING|Ko.NUMBER|Ko.BOOLEAN,"input"),n=(Ko.STRING|Ko.NUMBER|Ko.BOOLEAN)&n;const r=Yo.match.getReturnType(e)&i;da(["match",...e],r,"output");const s=ia(t,e[0],n),o=ia(t,e[e.length-1],r);let a=null;for(let l=e.length-3;l>=1;l-=2){a=`(${s} == ${ia(t,e[l],n)} ? ${ia(t,e[l+1],r)} : ${a||o})`}return a}},Yo.case={getReturnType:function(t){let e=Ko.ANY;for(let i=1;i<t.length;i+=2)e&=$o(t[i]);return e&=$o(t[t.length-1]),e},toGlsl:function(t,e,i){!function(t){if(t.length%2==0)throw new Error(`An odd amount of arguments was expected, got ${JSON.stringify(t)} instead`)}(e),la(e,3);const n=Yo.case.getReturnType(e)&i;da(["case",...e],n,"output");for(let o=0;o<e.length-1;o+=2)oa(e[o]);const r=ia(t,e[e.length-1],n);let s=null;for(let o=e.length-3;o>=0;o-=2){s=`(${ia(t,e[o],Ko.BOOLEAN)} ? ${ia(t,e[o+1],n)} : ${s||r})`}return s}};function xa(t){return t===Ko.COLOR?2:t===Ko.NUMBER_ARRAY?4:1}function ba(t){const e=xa(t);return e>1?`vec${e}`:"float"}function Ea(t,e,i,n,r){if(!("symbol"in t))return!1;const s=t.symbol,o=void 0!==s.size?s.size:1,a=s.color||"white",l=s.textureCoord||[0,0,1,1],h=s.offset||[0,0],c=void 0!==s.opacity?s.opacity:1,u=void 0!==s.rotation?s.rotation:0,d=ia(n,o,Ko.NUMBER_ARRAY|Ko.NUMBER),p=ia(n,h,Ko.NUMBER_ARRAY),f=ia(n,l,Ko.NUMBER_ARRAY),g=ia(n,u,Ko.NUMBER),m=ia(r,a,Ko.COLOR),_=ia(r,c,Ko.NUMBER),y=`vec2(${ia(r,o,Ko.NUMBER_ARRAY|Ko.NUMBER)}).x`,v=`vec4(${m}.rgb, ${m}.a * ${_} * ${function(t,e){switch(t){case"square":case"image":return"1.0";case"circle":return`(1.0-smoothstep(1.-4./${e},1.,dot(v_quadCoord-.5,v_quadCoord-.5)*4.))`;case"triangle":const i="(v_quadCoord*2.-1.)",n=`(atan(${i}.x,${i}.y))`;return`(1.0-smoothstep(.5-3./${e},.5,cos(floor(.5+${n}/2.094395102)*2.094395102-${n})*length(${i})))`;default:throw new Error(`Unexpected symbol type: ${t}`)}}(s.symbolType,y)})`;if(e.setSymbolSizeExpression(`vec2(${d})`).setSymbolRotationExpression(g).setSymbolOffsetExpression(p).setTextureCoordinateExpression(f).setSymbolRotateWithView(!!s.rotateWithView).setSymbolColorExpression(v),"image"===s.symbolType&&s.src){const t=new Image;t.crossOrigin=void 0===s.crossOrigin?"anonymous":s.crossOrigin,t.src=s.src,e.addUniform("sampler2D u_texture").setSymbolColorExpression(`${v} * texture2D(u_texture, v_texCoord)`),i.u_texture=t}return!0}function wa(t){const e={inFragmentShader:!1,variables:[],attributes:[],stringLiteralsMap:{},functions:{},style:t},i={inFragmentShader:!0,variables:e.variables,attributes:[],stringLiteralsMap:e.stringLiteralsMap,functions:{},style:t},n=new bo,r={},s=Ea(t,n,r,e,i),o=function(t,e,i,n,r){if(!("stroke-color"in t)&&!("stroke-width"in t))return!1;const s=t["stroke-color"]||"white",o=t["stroke-width"]||1,a=ia(r,s,Ko.COLOR),l=ia(n,o,Ko.NUMBER);return e.setStrokeColorExpression(a).setStrokeWidthExpression(l),!0}(t,n,0,e,i),a=function(t,e,i,n,r){if(!("fill-color"in t))return!1;const s=ia(r,t["fill-color"]||"rgba(255, 255, 255, 0.3)",Ko.COLOR);return e.setFillColorExpression(s),!0}(t,n,0,0,i);if(t.filter){const e=ia(i,t.filter,Ko.BOOLEAN);n.setFragmentDiscardExpression(`!${e}`)}i.variables.forEach((function(i){const s=fa(i.name);let o;n.addUniform(`${ba(i.type)} ${s}`),o=i.type===Ko.STRING?()=>ea(e,t.variables[i.name]):i.type===Ko.COLOR?()=>va([...(0,Ho._2)(t.variables[i.name]||"#eee")]):i.type===Ko.BOOLEAN?()=>t.variables[i.name]?1:0:()=>t.variables[i.name],r[s]=o})),i.attributes.forEach((function(t){e.attributes.find((e=>e.name===t.name))||e.attributes.push(t);let i=ba(t.type),r=`a_${t.name}`;t.type===Ko.COLOR&&(i="vec4",r=`unpackColor(${r})`,n.addVertexShaderFunction("vec4 unpackColor(vec2 packedColor) {\n  return fract(packedColor[1] / 256.0) * vec4(\n    fract(floor(packedColor[0] / 256.0) / 256.0),\n    fract(packedColor[0] / 256.0),\n    fract(floor(packedColor[1] / 256.0) / 256.0),\n    1.0\n  );\n}")),n.addVarying(`v_${t.name}`,i,r)})),e.attributes.forEach((function(t){n.addAttribute(`${ba(t.type)} a_${t.name}`)}));const l=e.attributes.map((function(t){let i;return i=t.type===Ko.STRING?i=>ea(e,i.get(t.name)):t.type===Ko.COLOR?e=>va([...(0,Ho._2)(e.get(t.name)||"#eee")]):t.type===Ko.BOOLEAN?e=>e.get(t.name)?1:0:e=>e.get(t.name),{name:t.name,size:xa(t.type),callback:i}}));return{builder:n,hasSymbol:s,hasStroke:o,hasFill:a,attributes:l.reduce(((t,e)=>({...t,[e.name]:{callback:e.callback,size:e.size}})),{}),uniforms:r}}class Ca extends It.Z{constructor(t){super(Object.assign({},t)),this.parseResult_=wa(t.style),this.styleVariables_=t.style.variables||{},this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){const t=Object.keys(this.parseResult_.attributes).map((t=>({name:t,...this.parseResult_.attributes[t]})));return new xt(this,{vertexShader:this.parseResult_.builder.getSymbolVertexShader(),fragmentShader:this.parseResult_.builder.getSymbolFragmentShader(),hitVertexShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolVertexShader(!0),hitFragmentShader:!this.hitDetectionDisabled_&&this.parseResult_.builder.getSymbolFragmentShader(!0),uniforms:this.parseResult_.uniforms,attributes:t})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}const Sa=Ca;var Ta=i(4033);function Ra(t,e){const i=`\n    attribute vec2 ${qo};\n    uniform mat4 ${Vo.TILE_TRANSFORM};\n    uniform float ${Vo.TEXTURE_PIXEL_WIDTH};\n    uniform float ${Vo.TEXTURE_PIXEL_HEIGHT};\n    uniform float ${Vo.TEXTURE_RESOLUTION};\n    uniform float ${Vo.TEXTURE_ORIGIN_X};\n    uniform float ${Vo.TEXTURE_ORIGIN_Y};\n    uniform float ${Vo.DEPTH};\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ${qo};\n      v_mapCoord = vec2(\n        ${Vo.TEXTURE_ORIGIN_X} + ${Vo.TEXTURE_RESOLUTION} * ${Vo.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],\n        ${Vo.TEXTURE_ORIGIN_Y} - ${Vo.TEXTURE_RESOLUTION} * ${Vo.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]\n      );\n      gl_Position = ${Vo.TILE_TRANSFORM} * vec4(${qo}, ${Vo.DEPTH}, 1.0);\n    }\n  `,n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:e,style:t},r=[];if(void 0!==t.color){const e=ia(n,t.color,Ko.COLOR);r.push(`color = ${e};`)}if(void 0!==t.contrast){const e=ia(n,t.contrast,Ko.NUMBER);r.push(`color.rgb = clamp((${e} + 1.0) * color.rgb - (${e} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.exposure){const e=ia(n,t.exposure,Ko.NUMBER);r.push(`color.rgb = clamp((${e} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.saturation){const e=ia(n,t.saturation,Ko.NUMBER);r.push(`\n      float saturation = ${e} + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    `)}if(void 0!==t.gamma){const e=ia(n,t.gamma,Ko.NUMBER);r.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${e}));`)}if(void 0!==t.brightness){const e=ia(n,t.brightness,Ko.NUMBER);r.push(`color.rgb = clamp(color.rgb + ${e}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=n.variables.length;if(o>1&&!t.variables)throw new Error(`Missing variables in style (expected ${n.variables})`);for(let c=0;c<o;++c){const e=n.variables[c];if(!(e.name in t.variables))throw new Error(`Missing '${e.name}' in style variables`);s[fa(e.name)]=function(){let i=t.variables[e.name];return"string"==typeof i&&(i=ea(n,i)),void 0!==i?i:-9999999}}const a=Object.keys(s).map((function(t){return`uniform float ${t};`})),l=Math.ceil(e/4);a.push(`uniform sampler2D ${Vo.TILE_TEXTURE_ARRAY}[${l}];`),n.paletteTextures&&a.push(`uniform sampler2D ${ga}[${n.paletteTextures.length}];`);const h=Object.keys(n.functions).map((function(t){return n.functions[t]}));return{vertexShader:i,fragmentShader:`\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ${Vo.RENDER_EXTENT};\n    uniform float ${Vo.TRANSITION_ALPHA};\n    uniform float ${Vo.TEXTURE_PIXEL_WIDTH};\n    uniform float ${Vo.TEXTURE_PIXEL_HEIGHT};\n    uniform float ${Vo.RESOLUTION};\n    uniform float ${Vo.ZOOM};\n\n    ${a.join("\n")}\n\n    ${h.join("\n")}\n\n    void main() {\n      if (\n        v_mapCoord[0] < ${Vo.RENDER_EXTENT}[0] ||\n        v_mapCoord[1] < ${Vo.RENDER_EXTENT}[1] ||\n        v_mapCoord[0] > ${Vo.RENDER_EXTENT}[2] ||\n        v_mapCoord[1] > ${Vo.RENDER_EXTENT}[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(${Vo.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);\n\n      ${r.join("\n")}\n\n      if (color.a == 0.0) {\n        discard;\n      }\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ${Vo.TRANSITION_ALPHA};\n    }`,uniforms:s,paletteTextures:n.paletteTextures}}class Ma extends Ta.Z{constructor(t){const e=(t=t?Object.assign({},t):{}).style||{};delete t.style;const i=t.cacheSize;delete t.cacheSize,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=e,this.cacheSize_=i,this.styleVariables_=this.style_.variables||{},this.addChangeListener(G.Z.SOURCE,this.handleSourceUpdate_)}getSources(t,e){const i=this.getSource();return this.sources_?"function"==typeof this.sources_?this.sources_(t,e):this.sources_:i?[i]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,e=this.getSources([-t,-t,t,t],t);return e&&e.length&&"bandCount"in e[0]?e[0].bandCount:4}createRenderer(){const t=Ra(this.style_,this.getSourceBandCount_());return new Xo(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})}renderSources(t,e){const i=this.getRenderer();let n;for(let r=0,s=e.length;r<s;++r)this.renderedSource_=e[r],i.prepareFrame(t)&&(n=i.renderFrame(t));return n}render(t,e){this.rendered=!0;const i=t.viewState,n=this.getSources(t.extent,i.resolution);let r=!0;for(let o=0,a=n.length;o<a;++o){const t=n[o],e=t.getState();if("loading"==e){const e=()=>{"ready"==t.getState()&&(t.removeEventListener("change",e),this.changed())};t.addEventListener("change",e)}r=r&&"ready"==e}const s=this.renderSources(t,n);if(this.getRenderer().renderComplete&&r)return this.renderedResolution_=i.resolution,s;if(this.renderedResolution_>.5*i.resolution){const e=this.getSources(t.extent,this.renderedResolution_).filter((t=>!n.includes(t)));if(e.length>0)return this.renderSources(t,e)}return s}setStyle(t){this.styleVariables_=t.variables||{},this.style_=t;const e=Ra(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}),this.changed()}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}Ma.prototype.dispose;const Ia=Ma},4411:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(9520),r=i(812),s=i(3039),o=i(9141),a=i(4898);class l extends n.Z{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[r.Z.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,o.h)("number"==typeof e[r.Z.OPACITY],64),e[r.Z.VISIBLE]=void 0===t.visible||t.visible,e[r.Z.Z_INDEX]=t.zIndex,e[r.Z.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[r.Z.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[r.Z.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[r.Z.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},i=this.getZIndex();return e.opacity=(0,a.uZ)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==i||e.managed?i:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,s.O3)()}getLayerStatesArray(t){return(0,s.O3)()}getExtent(){return this.get(r.Z.EXTENT)}getMaxResolution(){return this.get(r.Z.MAX_RESOLUTION)}getMinResolution(){return this.get(r.Z.MIN_RESOLUTION)}getMinZoom(){return this.get(r.Z.MIN_ZOOM)}getMaxZoom(){return this.get(r.Z.MAX_ZOOM)}getOpacity(){return this.get(r.Z.OPACITY)}getSourceState(){return(0,s.O3)()}getVisible(){return this.get(r.Z.VISIBLE)}getZIndex(){return this.get(r.Z.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(r.Z.EXTENT,t)}setMaxResolution(t){this.set(r.Z.MAX_RESOLUTION,t)}setMinResolution(t){this.set(r.Z.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(r.Z.MAX_ZOOM,t)}setMinZoom(t){this.set(r.Z.MIN_ZOOM,t)}setOpacity(t){(0,o.h)("number"==typeof t,64),this.set(r.Z.OPACITY,t)}setVisible(t){this.set(r.Z.VISIBLE,t)}setZIndex(t){this.set(r.Z.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const h=l},4033:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(9486),r=i(5364);class s extends n.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(r.Z.PRELOAD)}setPreload(t){this.set(r.Z.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(r.Z.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(r.Z.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}const o=s},9913:(t,e,i)=>{"use strict";i.d(e,{Z:()=>v});var n=i(9486),r=i(8085),s=i(1359),o=i(213),a=i(1082),l=i(7707),h=i(3412),c=i(3260),u=i(4669);function d(t){return new s.default({fill:p(t,""),stroke:f(t,""),text:g(t),image:m(t)})}function p(t,e){const i=t[e+"fill-color"];if(i)return new a.default({color:i})}function f(t,e){const i=t[e+"stroke-width"],n=t[e+"stroke-color"];if(i||n)return new c.default({width:i,color:n,lineCap:t[e+"stroke-line-cap"],lineJoin:t[e+"stroke-line-join"],lineDash:t[e+"stroke-line-dash"],lineDashOffset:t[e+"stroke-line-dash-offset"],miterLimit:t[e+"stroke-miter-limit"]})}function g(t){const e=t["text-value"];if(!e)return;return new u.default({text:e,font:t["text-font"],maxAngle:t["text-max-angle"],offsetX:t["text-offset-x"],offsetY:t["text-offset-y"],overflow:t["text-overflow"],placement:t["text-placement"],repeat:t["text-repeat"],scale:t["text-scale"],rotateWithView:t["text-rotate-with-view"],rotation:t["text-rotation"],textAlign:t["text-align"],justify:t["text-justify"],textBaseline:t["text-baseline"],padding:t["text-padding"],fill:p(t,"text-"),backgroundFill:p(t,"text-background-"),stroke:f(t,"text-"),backgroundStroke:f(t,"text-background-")})}function m(t){const e=t["icon-src"],i=t["icon-img"];if(e||i){return new l.default({src:e,img:i,imgSize:t["icon-img-size"],anchor:t["icon-anchor"],anchorOrigin:t["icon-anchor-origin"],anchorXUnits:t["icon-anchor-x-units"],anchorYUnits:t["icon-anchor-y-units"],color:t["icon-color"],crossOrigin:t["icon-cross-origin"],offset:t["icon-offset"],displacement:t["icon-displacement"],opacity:t["icon-opacity"],scale:t["icon-scale"],width:t["icon-width"],height:t["icon-height"],rotation:t["icon-rotation"],rotateWithView:t["icon-rotate-with-view"],size:t["icon-size"],declutterMode:t["icon-declutter-mode"]})}const n=t["shape-points"];if(n){const e="shape-";return new h.Z({points:n,fill:p(t,e),stroke:f(t,e),radius:t["shape-radius"],radius1:t["shape-radius1"],radius2:t["shape-radius2"],angle:t["shape-angle"],displacement:t["shape-displacement"],rotation:t["shape-rotation"],rotateWithView:t["shape-rotate-with-view"],scale:t["shape-scale"],declutterMode:t["shape-declutter-mode"]})}const r=t["circle-radius"];if(r){const e="circle-";return new o.Z({radius:r,fill:p(t,e),stroke:f(t,e),displacement:t["circle-displacement"],scale:t["circle-scale"],rotation:t["circle-rotation"],rotateWithView:t["circle-rotate-with-view"],declutterMode:t["circle-declutter-mode"]})}}const _="renderOrder";class y extends n.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(_)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t){t.declutterTree||(t.declutterTree=new r(9)),this.getRenderer().renderDeclutter(t)}setRenderOrder(t){this.set(_,t)}setStyle(t){let e;if(void 0===t)e=s.createDefaultStyle;else if(null===t)e=null;else if("function"==typeof t)e=t;else if(t instanceof s.default)e=t;else if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let e=0;e<i;++e){const i=t[e];i instanceof s.default?n[e]=i:n[e]=d(i)}e=n}else e=d(t);this.style_=e,this.styleFunction_=null===t?void 0:(0,s.toFunction)(this.style_),this.changed()}}const v=y},6316:(t,e,i)=>{"use strict";i.d(e,{V:()=>f,Z:()=>_});var n=i(4411),r=i(390),s=i(2207),o=i(8685),a=i(1971),l=i(9153),h=i(9141),c=i(3878),u=i(8300),d=i(3039),p=i(9640);class f extends o.ZP{constructor(t,e){super(t),this.layer=e}}const g="layers";class m extends n.Z{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(g,this.handleLayersChanged_),i?Array.isArray(i)?i=new r.Z(i.slice(),{unique:!0}):(0,h.h)("function"==typeof i.getArray,43):i=new r.Z(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(p.bN),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push((0,p.oL)(t,s.Z.ADD,this.handleLayersAdd_,this),(0,p.oL)(t,s.Z.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(p.bN);(0,c.Z)(this.listenerKeys_);const e=t.getArray();for(let i=0,n=e.length;i<n;i++){const t=e[i];this.registerLayerListeners_(t),this.dispatchEvent(new f("addlayer",t))}this.changed()}registerLayerListeners_(t){const e=[(0,p.oL)(t,l.Z.PROPERTYCHANGE,this.handleLayerChange_,this),(0,p.oL)(t,a.Z.CHANGE,this.handleLayerChange_,this)];t instanceof m&&e.push((0,p.oL)(t,"addlayer",this.handleLayerGroupAdd_,this),(0,p.oL)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,d.sq)(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new f("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new f("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new f("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=(0,d.sq)(e);this.listenerKeys_[i].forEach(p.bN),delete this.listenerKeys_[i],this.dispatchEvent(new f("removelayer",e)),this.changed()}getLayers(){return this.get(g)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,i=t.length;e<i;++e)this.dispatchEvent(new f("removelayer",t[e]))}this.set(g,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],i=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const n=this.getLayerState();let r=n.zIndex;t||void 0!==n.zIndex||(r=0);for(let s=i,o=e.length;s<o;s++){const t=e[s];t.opacity*=n.opacity,t.visible=t.visible&&n.visible,t.maxResolution=Math.min(t.maxResolution,n.maxResolution),t.minResolution=Math.max(t.minResolution,n.minResolution),t.minZoom=Math.max(t.minZoom,n.minZoom),t.maxZoom=Math.min(t.maxZoom,n.maxZoom),void 0!==n.extent&&(void 0!==t.extent?t.extent=(0,u.Ed)(t.extent,n.extent):t.extent=n.extent),void 0===t.zIndex&&(t.zIndex=r)}return e}getSourceState(){return"ready"}}const _=m},5069:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(9486);class r extends n.Z{constructor(t){super(t=t||{})}}const s=r;var o=i(5188);const a=class extends s{constructor(t){super(t)}createRenderer(){return new o.Z(this)}getData(t){return super.getData(t)}}},9486:(t,e,i)=>{"use strict";i.d(e,{Z:()=>p,j:()=>d});var n=i(4411),r=i(1971),s=i(812),o=i(4950),a=i(6305),l=i(9141),h=i(8300),c=i(9640);class u extends n.Z{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(s.Z.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(s.Z.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,c.bN)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=(0,c.oL)(t,r.Z.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const i=this.getMapInternal();let n;!t&&i&&(t=i.getView()),e=t instanceof a.ZP?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray()),n=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState();const r=this.getExtent();return d(n,e.viewState)&&(!r||(0,h.kK)(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const i=this.getSource();if(i&&(e=i.getAttributions()),!e)return[];let n=e(t instanceof a.ZP?t.getViewStateAndExtent():t);return Array.isArray(n)||(n=[n]),n}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}setMapInternal(t){t||this.unrender(),this.set(s.Z.MAP,t)}getMapInternal(){return this.get(s.Z.MAP)}setMap(t){this.mapPrecomposeKey_&&((0,c.bN)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,c.bN)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,c.oL)(t,o.Z.PRECOMPOSE,(function(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);(0,l.h)(!e.some((function(t){return t.layer===i.layer})),67),e.push(i)}),this),this.mapRenderKey_=(0,c.oL)(this,r.Z.CHANGE,t.render,t),this.changed())}setSource(t){this.set(s.Z.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function d(t,e){if(!t.visible)return!1;const i=e.resolution;if(i<t.minResolution||i>=t.maxResolution)return!1;const n=e.zoom;return n>t.minZoom&&n<=t.maxZoom}const p=u},812:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},2729:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});var n=i(4033),r=i(2841);class s extends n.Z{constructor(t){super(t)}createRenderer(){return new r.Z(this)}}const o=s},5364:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},6927:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});var n=i(9913),r=i(1664);class s extends n.Z{constructor(t){super(t)}createRenderer(){return new r.Z(this)}}const o=s},7343:(t,e,i)=>{"use strict";i.d(e,{$6:()=>n,VW:()=>r});i(7533);function n(t,e){return[[-1/0,-1/0,1/0,1/0]]}function r(t,e){return[t]}},4898:(t,e,i)=>{"use strict";function n(t,e,i){return Math.min(Math.max(t,e),i)}function r(t,e,i,n,r,o){const a=r-i,l=o-n;if(0!==a||0!==l){const s=((t-i)*a+(e-n)*l)/(a*a+l*l);s>1?(i=r,n=o):s>0&&(i+=a*s,n+=l*s)}return s(t,e,i,n)}function s(t,e,i,n){const r=i-t,s=n-e;return r*r+s*s}function o(t){const e=t.length;for(let n=0;n<e;n++){let i=n,r=Math.abs(t[n][n]);for(let o=n+1;o<e;o++){const e=Math.abs(t[o][n]);e>r&&(r=e,i=o)}if(0===r)return null;const s=t[i];t[i]=t[n],t[n]=s;for(let o=n+1;o<e;o++){const i=-t[o][n]/t[n][n];for(let r=n;r<e+1;r++)n==r?t[o][r]=0:t[o][r]+=i*t[n][r]}}const i=new Array(e);for(let n=e-1;n>=0;n--){i[n]=t[n][e]/t[n][n];for(let r=n-1;r>=0;r--)t[r][e]-=t[r][n]*i[n]}return i}function a(t){return t*Math.PI/180}function l(t,e){const i=t%e;return i*e<0?i+e:i}function h(t,e,i){return t+i*(e-t)}function c(t,e){const i=Math.pow(10,e);return Math.round(t*i)/i}function u(t,e){return Math.round(c(t,e))}function d(t,e){return Math.floor(c(t,e))}function p(t,e){return Math.ceil(c(t,e))}i.d(e,{$W:()=>l,FH:()=>c,GW:()=>d,NM:()=>u,SV:()=>o,Yr:()=>a,bI:()=>s,mD:()=>p,rU:()=>r,t7:()=>h,uZ:()=>n})},2782:(t,e,i)=>{"use strict";i.d(e,{R6:()=>r});var n=i(3039);function r(t,e,i,r){const s=document.createElement("script"),o="olc_"+(0,n.sq)(e);function a(){delete window[o],s.parentNode.removeChild(s)}s.async=!0,s.src=t+(t.includes("?")?"&":"?")+(r||"callback")+"="+o;const l=setTimeout((function(){a(),i&&i()}),1e4);window[o]=function(t){clearTimeout(l),a(),e(t)},document.head.appendChild(s)}},3878:(t,e,i)=>{"use strict";function n(t){for(const e in t)delete t[e]}function r(t){let e;for(e in t)return!1;return!e}i.d(e,{Z:()=>n,x:()=>r})},6932:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},7533:(t,e,i)=>{"use strict";i.r(e),i.d(e,{METERS_PER_UNIT:()=>_.W,Projection:()=>n.Z,addCommon:()=>ot,addCoordinateTransforms:()=>j,addEquivalentProjections:()=>O,addEquivalentTransforms:()=>N,addProjection:()=>P,addProjections:()=>L,clearAllProjections:()=>F,clearUserProjection:()=>Y,cloneTransform:()=>M,createProjection:()=>D,createSafeCoordinateTransform:()=>st,createTransformFromCoordinateTransform:()=>Z,disableCoordinateWarning:()=>R,equivalent:()=>B,fromLonLat:()=>z,fromUserCoordinate:()=>tt,fromUserExtent:()=>it,fromUserResolution:()=>rt,get:()=>A,getPointResolution:()=>k,getTransform:()=>V,getTransformFromProjections:()=>U,getUserProjection:()=>$,identityTransform:()=>I,setUserProjection:()=>K,toLonLat:()=>G,toUserCoordinate:()=>Q,toUserExtent:()=>et,toUserResolution:()=>nt,transform:()=>q,transformExtent:()=>W,transformWithProjections:()=>X,useGeographic:()=>J});var n=i(4560);const r=6378137,s=Math.PI*r,o=[-s,-s,s,s],a=[-180,-85,180,85],l=r*Math.log(Math.tan(Math.PI/2));class h extends n.Z{constructor(t){super({code:t,units:"m",extent:o,global:!0,worldExtent:a,getPointResolution:function(t,e){return t/Math.cosh(e[1]/r)}})}}const c=[new h("EPSG:3857"),new h("EPSG:102100"),new h("EPSG:102113"),new h("EPSG:900913"),new h("http://www.opengis.net/def/crs/EPSG/0/3857"),new h("http://www.opengis.net/gml/srs/epsg.xml#3857")];function u(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let o=0;o<n;o+=i){e[o]=s*t[o]/180;let i=r*Math.log(Math.tan(Math.PI*(+t[o+1]+90)/360));i>l?i=l:i<-l&&(i=-l),e[o+1]=i}return e}function d(t,e,i){const n=t.length;i=i>1?i:2,void 0===e&&(e=i>2?t.slice():new Array(n));for(let o=0;o<n;o+=i)e[o]=180*t[o]/s,e[o+1]=360*Math.atan(Math.exp(t[o+1]/r))/Math.PI-90;return e}const p=[-180,-90,180,90],f=6378137*Math.PI/180;class g extends n.Z{constructor(t,e){super({code:t,units:"degrees",extent:p,axisOrientation:e,global:!0,metersPerUnit:f,worldExtent:p})}}const m=[new g("CRS:84"),new g("EPSG:4326","neu"),new g("urn:ogc:def:crs:OGC:1.3:CRS84"),new g("urn:ogc:def:crs:OGC:2:84"),new g("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new g("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new g("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var _=i(8724);let y={};var v=i(5988),x=i(8300),b=i(4898),E=i(6973);const w=6371008.8;function C(t,e,i){i=i||w;const n=(0,b.Yr)(t[1]),r=(0,b.Yr)(e[1]),s=(r-n)/2,o=(0,b.Yr)(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r);return 2*i*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}var S=i(7367);let T=!0;function R(t){T=!(void 0===t||t)}function M(t,e){if(void 0!==e)for(let i=0,n=t.length;i<n;++i)e[i]=t[i];else e=t.slice();return e}function I(t,e){if(void 0!==e&&t!==e){for(let i=0,n=t.length;i<n;++i)e[i]=t[i];t=e}return t}function P(t){!function(t,e){y[t]=e}(t.getCode(),t),(0,v.IH)(t,t,M)}function L(t){t.forEach(P)}function A(t){return"string"==typeof t?y[e=t]||y[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null:t||null;var e}function k(t,e,i,n){let r;const s=(t=A(t)).getPointResolutionFunc();if(s){if(r=s(e,i),n&&n!==t.getUnits()){const e=t.getMetersPerUnit();e&&(r=r*e/_.W[n])}}else{const s=t.getUnits();if("degrees"==s&&!n||"degrees"==n)r=e;else{const o=U(t,A("EPSG:4326"));if(o===I&&"degrees"!==s)r=e*t.getMetersPerUnit();else{let t=[i[0]-e/2,i[1],i[0]+e/2,i[1],i[0],i[1]-e/2,i[0],i[1]+e/2];t=o(t,t,2);r=(C(t.slice(0,2),t.slice(2,4))+C(t.slice(4,6),t.slice(6,8)))/2}const a=n?_.W[n]:t.getMetersPerUnit();void 0!==a&&(r/=a)}}return r}function O(t){L(t),t.forEach((function(e){t.forEach((function(t){e!==t&&(0,v.IH)(e,t,M)}))}))}function N(t,e,i,n){t.forEach((function(t){e.forEach((function(e){(0,v.IH)(t,e,i),(0,v.IH)(e,t,n)}))}))}function F(){y={},(0,v.ZH)()}function D(t,e){return t?"string"==typeof t?A(t):t:A(e)}function Z(t){return function(e,i,n){const r=e.length;n=void 0!==n?n:2,i=void 0!==i?i:new Array(r);for(let s=0;s<r;s+=n){const r=t(e.slice(s,s+n)),o=r.length;for(let t=0,a=n;t<a;++t)i[s+t]=t>=o?e[s+t]:r[t]}return i}}function j(t,e,i,n){const r=A(t),s=A(e);(0,v.IH)(r,s,Z(i)),(0,v.IH)(s,r,Z(n))}function z(t,e){return R(),q(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function G(t,e){const i=q(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),n=i[0];return(n<-180||n>180)&&(i[0]=(0,b.$W)(n+180,360)-180),i}function B(t,e){if(t===e)return!0;const i=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return i;return U(t,e)===M&&i}function U(t,e){const i=t.getCode(),n=e.getCode();let r=(0,v.U2)(i,n);return r||(r=I),r}function V(t,e){return U(A(t),A(e))}function q(t,e,i){return V(e,i)(t,void 0,t.length)}function W(t,e,i,n){const r=V(e,i);return(0,x.Ne)(t,r,void 0,n)}function X(t,e,i){return U(e,i)(t)}let H=null;function K(t){H=A(t)}function Y(){H=null}function $(){return H}function J(){K("EPSG:4326")}function Q(t,e){return H?q(t,e,H):t}function tt(t,e){return H?q(t,H,e):(T&&!(0,E.fS)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(T=!1,(0,S.ZK)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function et(t,e){return H?W(t,e,H):t}function it(t,e){return H?W(t,H,e):t}function nt(t,e){if(!H)return t;const i=A(e).getUnits(),n=H.getUnits();return i&&n?t*_.W[i]/_.W[n]:t}function rt(t,e){if(!H)return t;const i=A(e).getUnits(),n=H.getUnits();return i&&n?t*_.W[n]/_.W[i]:t}function st(t,e,i){return function(n){let r,s;if(t.canWrapX()){const e=t.getExtent(),o=(0,x.dz)(e);n=n.slice(0),s=(0,E.jk)(n,t,o),s&&(n[0]=n[0]-s*o),n[0]=(0,b.uZ)(n[0],e[0],e[2]),n[1]=(0,b.uZ)(n[1],e[1],e[3]),r=i(n)}else r=i(n);return s&&e.canWrapX()&&(r[0]+=s*(0,x.dz)(e.getExtent())),r}}function ot(){O(c),O(m),N(m,c,u,d)}ot()},4560:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(8724);const r=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||n.W[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},8724:(t,e,i)=>{"use strict";i.d(e,{N:()=>r,W:()=>s});const n={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function r(t){return n[t]}const s={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},2453:(t,e,i)=>{"use strict";i.r(e),i.d(e,{fromEPSGCode:()=>p,getEPSGLookup:()=>d,isRegistered:()=>a,register:()=>h,setEPSGLookup:()=>u,unregister:()=>l});var n=i(4560),r=i(7533),s=i(5988);let o=null;function a(){return!!o}function l(){o=null}function h(t){o=t;const e=Object.keys(t.defs),i=e.length;let a,l;for(a=0;a<i;++a){const i=e[a];if(!(0,r.get)(i)){const e=t.defs(i);let s=e.units;s||"longlat"!==e.projName||(s="degrees"),(0,r.addProjection)(new n.Z({code:i,axisOrientation:e.axis,metersPerUnit:e.to_meter,units:s}))}}for(a=0;a<i;++a){const n=e[a],o=(0,r.get)(n);for(l=0;l<i;++l){const i=e[l],a=(0,r.get)(i);if(!(0,s.U2)(n,i))if(t.defs[n]===t.defs[i])(0,r.addEquivalentProjections)([o,a]);else{const e=t(n,i);(0,r.addCoordinateTransforms)(o,a,(0,r.createSafeCoordinateTransform)(o,a,e.forward),(0,r.createSafeCoordinateTransform)(a,o,e.inverse))}}}}let c=async function(t){const e=await fetch(`https://epsg.io/${t}.proj4`);if(!e.ok)throw new Error(`Unexpected response from epsg.io: ${e.status}`);return e.text()};function u(t){c=t}function d(){return c}async function p(t){"string"==typeof t&&(t=parseInt(t.split(":").pop(),10));const e=o;if(!e)throw new Error("Proj4 must be registered first with register(proj4)");const i="EPSG:"+t;return e.defs(i)||(e.defs(i,await c(t)),h(e)),(0,r.get)(i)}},5988:(t,e,i)=>{"use strict";i.d(e,{IH:()=>s,U2:()=>o,ZH:()=>r});let n={};function r(){n={}}function s(t,e,i){const r=t.getCode(),s=e.getCode();r in n||(n[r]={}),n[r][s]=i}function o(t,e){let i;return t in n&&e in n[t]&&(i=n[t][e]),i}},3885:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(8685);class r extends n.ZP{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}}const s=r},4950:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},3705:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n=class{drawCustom(t,e,i,n){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}},5318:(t,e,i)=>{"use strict";i.d(e,{Df:()=>l,He:()=>d,Kd:()=>M,PH:()=>m,Qx:()=>C,Tx:()=>g,V4:()=>f,X9:()=>u,Zw:()=>I,_f:()=>P,bL:()=>h,mb:()=>c,oB:()=>y,rc:()=>p,ru:()=>_,sG:()=>x,yC:()=>v});var n=i(9520),r=i(4465),s=i(3878),o=i(3248),a=i(2913);const l="10px sans-serif",h="#000",c="round",u=[],d=0,p="round",f=10,g="#000",m="center",_="middle",y=[0,0,0,0],v=1,x=new n.Z;let b,E=null;const w={},C=function(){const t="32px ",e=["monospace","serif"],i=e.length,n="wmytzilWMYTZIL@#/&?$%10\uf013";let r,o;function l(r,s,a){let l=!0;for(let h=0;h<i;++h){const i=e[h];if(o=R(r+" "+s+" "+t+i,n),a!=i){const e=R(r+" "+s+" "+t+a+","+i,n);l=l&&e!=o}}return!!l}function h(){let t=!0;const e=x.getKeys();for(let i=0,n=e.length;i<n;++i){const n=e[i];x.get(n)<100&&(l.apply(this,n.split("\n"))?((0,s.Z)(w),E=null,b=void 0,x.set(n,100)):(x.set(n,x.get(n)+1,!0),t=!1))}t&&(clearInterval(r),r=void 0)}return function(t){const e=(0,a.p)(t);if(!e)return;const i=e.families;for(let n=0,s=i.length;n<s;++n){const t=i[n],s=e.style+"\n"+e.weight+"\n"+t;void 0===x.get(s)&&(x.set(s,100,!0),l(e.style,e.weight,t)||(x.set(s,0,!0),void 0===r&&(r=setInterval(h,32))))}}}(),S=function(){let t;return function(e){let i=w[e];if(null==i){if(r.Id){const t=(0,a.p)(e),n=T(e,"\u017dg");i=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),i=t.offsetHeight,document.body.removeChild(t);w[e]=i}return i}}();function T(t,e){return E||(E=(0,o.E4)(1,1)),t!=b&&(E.font=t,b=E.font),E.measureText(e)}function R(t,e){return T(t,e).width}function M(t,e,i){if(e in i)return i[e];const n=e.split("\n").reduce(((e,i)=>Math.max(e,R(t,i))),0);return i[e]=n,n}function I(t,e){const i=[],n=[],r=[];let s=0,o=0,a=0,l=0;for(let h=0,c=e.length;h<=c;h+=2){const u=e[h];if("\n"===u||h===c){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const d=e[h+1]||t.font,p=R(d,u);i.push(p),o+=p;const f=S(d);n.push(f),l=Math.max(l,f)}return{width:s,height:a,widths:i,heights:n,lineWidths:r}}function P(t,e,i,n,r,s,o,a,l,h,c){t.save(),1!==i&&(t.globalAlpha*=i),e&&t.setTransform.apply(t,e),n.contextInstructions?(t.translate(l,h),t.scale(c[0],c[1]),function(t,e){const i=t.contextInstructions;for(let n=0,r=i.length;n<r;n+=2)Array.isArray(i[n+1])?e[i[n]].apply(e,i[n+1]):e[i[n]]=i[n+1]}(n,t)):c[0]<0||c[1]<0?(t.translate(l,h),t.scale(c[0],c[1]),t.drawImage(n,r,s,o,a,0,0,o,a)):t.drawImage(n,r,s,o,a,l,h,o*c[0],a*c[1]),t.restore()}},302:(t,e,i)=>{"use strict";i.d(e,{Z:()=>d});var n=i(4618),r=i(7543),s=i(3705),o=i(4975),a=i(8300),l=i(5318),h=i(7794),c=i(2203);class u extends s.Z{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,r=this.coordinates;let s=r.length;for(let o=0,l=t.length;o<l;o+=e)n[0]=t[o],n[1]=t[o+1],(0,a.b8)(i,n)&&(r[s++]=n[0],r[s++]=n[1]);return s}appendFlatLineCoordinates(t,e,i,n,s,o){const l=this.coordinates;let h=l.length;const c=this.getBufferedMaxExtent();o&&(e+=n);let u=t[e],d=t[e+1];const p=this.tmpCoordinate_;let f,g,m,_=!0;for(f=e+n;f<i;f+=n)p[0]=t[f],p[1]=t[f+1],m=(0,a.pX)(c,p),m!==g?(_&&(l[h++]=u,l[h++]=d,_=!1),l[h++]=p[0],l[h++]=p[1]):m===r.Z.INTERSECTING?(l[h++]=p[0],l[h++]=p[1],_=!1):_=!0,u=p[0],d=p[1],g=m;return(s&&_||f===e+n)&&(l[h++]=u,l[h++]=d),h}drawCustomCoordinates_(t,e,i,n,r){for(let s=0,o=i.length;s<o;++s){const o=i[s],a=this.appendFlatLineCoordinates(t,e,o,n,!1,!1);r.push(a),e=o}return e}drawCustom(t,e,i,r){this.beginGeometry(t,e);const s=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,h,u,d,p;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),d=[];const e=t.getEndss();p=0;for(let t=0,i=e.length;t<i;++t){const i=[];p=this.drawCustomCoordinates_(l,p,e[t],o,i),d.push(i)}this.instructions.push([n.ZP.CUSTOM,a,d,t,i,c.ug]),this.hitDetectionInstructions.push([n.ZP.CUSTOM,a,d,t,r||i,c.ug]);break;case"Polygon":case"MultiLineString":u=[],l="Polygon"==s?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),p=this.drawCustomCoordinates_(l,0,t.getEnds(),o,u),this.instructions.push([n.ZP.CUSTOM,a,u,t,i,c.o1]),this.hitDetectionInstructions.push([n.ZP.CUSTOM,a,u,t,r||i,c.o1]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),h=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([n.ZP.CUSTOM,a,h,t,i,c.Ml]),this.hitDetectionInstructions.push([n.ZP.CUSTOM,a,h,t,r||i,c.Ml]);break;case"MultiPoint":l=t.getFlatCoordinates(),h=this.appendFlatPointCoordinates(l,o),h>a&&(this.instructions.push([n.ZP.CUSTOM,a,h,t,i,c.Ml]),this.hitDetectionInstructions.push([n.ZP.CUSTOM,a,h,t,r||i,c.Ml]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),h=this.coordinates.length,this.instructions.push([n.ZP.CUSTOM,a,h,t,i]),this.hitDetectionInstructions.push([n.ZP.CUSTOM,a,h,t,r||i])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[n.ZP.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[n.ZP.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const i=t.length;let r,s,o=-1;for(e=0;e<i;++e)r=t[e],s=r[0],s==n.ZP.END_GEOMETRY?o=e:s==n.ZP.BEGIN_GEOMETRY&&(r[2]=e,(0,h.FZ)(this.hitDetectionInstructions,o,e),o=-1)}setFillStrokeStyle(t,e){const i=this.state;if(t){const e=t.getColor();i.fillStyle=(0,o.y)(e||l.bL)}else i.fillStyle=void 0;if(e){const t=e.getColor();i.strokeStyle=(0,o.y)(t||l.Tx);const n=e.getLineCap();i.lineCap=void 0!==n?n:l.mb;const r=e.getLineDash();i.lineDash=r?r.slice():l.X9;const s=e.getLineDashOffset();i.lineDashOffset=s||l.He;const a=e.getLineJoin();i.lineJoin=void 0!==a?a:l.rc;const h=e.getWidth();i.lineWidth=void 0!==h?h:l.yC;const c=e.getMiterLimit();i.miterLimit=void 0!==c?c:l.V4,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){const e=t.fillStyle,i=[n.ZP.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[n.ZP.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;"string"==typeof i&&t.currentFillStyle==i||(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,n=t.lineCap,r=t.lineDash,s=t.lineDashOffset,o=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||r!=t.currentLineDash&&!(0,h.fS)(t.currentLineDash,r)||t.currentLineDashOffset!=s||t.currentLineJoin!=o||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=r,t.currentLineDashOffset=s,t.currentLineJoin=o,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[n.ZP.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,a.d9)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,a.f3)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}const d=u},7522:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var n=i(302),r=i(4618);class s extends n.Z{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,n);this.instructions.push([r.ZP.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([r.ZP.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);const i=t.getFlatCoordinates(),n=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,n);this.instructions.push([r.ZP.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([r.ZP.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,this.opacity_,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const o=s;var a=i(5318);class l extends n.Z{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),a=[r.ZP.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e){const i=this.state,n=i.strokeStyle,s=i.lineWidth;if(void 0===n||void 0===s)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([r.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,a.X9,a.He],r.$O);const o=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(o,0,o.length,l),this.hitDetectionInstructions.push(r.Yc),this.endGeometry(e)}drawMultiLineString(t,e){const i=this.state,n=i.strokeStyle,s=i.lineWidth;if(void 0===n||void 0===s)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([r.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset],r.$O);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let h=0;for(let r=0,c=o.length;r<c;++r)h=this.drawFlatCoordinates_(a,h,o[r],l);this.hitDetectionInstructions.push(r.Yc),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(r.Yc),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(r.Yc),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(r.$O)}}const h=l;var c=i(9082);class u extends n.Z{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){const s=this.state,o=void 0!==s.fillStyle,a=void 0!==s.strokeStyle,l=i.length;this.instructions.push(r.$O),this.hitDetectionInstructions.push(r.$O);for(let h=0;h<l;++h){const s=i[h],o=this.coordinates.length,l=this.appendFlatLineCoordinates(t,e,s,n,!0,!a),c=[r.ZP.MOVE_TO_LINE_TO,o,l];this.instructions.push(c),this.hitDetectionInstructions.push(c),a&&(this.instructions.push(r.s3),this.hitDetectionInstructions.push(r.s3)),e=s}return o&&(this.instructions.push(r.gO),this.hitDetectionInstructions.push(r.gO)),a&&(this.instructions.push(r.Yc),this.hitDetectionInstructions.push(r.Yc)),e}drawCircle(t,e){const i=this.state,n=i.fillStyle,s=i.strokeStyle;if(void 0===n&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([r.ZP.SET_FILL_STYLE,a.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([r.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=t.getFlatCoordinates(),l=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,l,!1,!1);const c=[r.ZP.CIRCLE,h];this.instructions.push(r.$O,c),this.hitDetectionInstructions.push(r.$O,c),void 0!==i.fillStyle&&(this.instructions.push(r.gO),this.hitDetectionInstructions.push(r.gO)),void 0!==i.strokeStyle&&(this.instructions.push(r.Yc),this.hitDetectionInstructions.push(r.Yc)),this.endGeometry(e)}drawPolygon(t,e){const i=this.state,n=i.fillStyle,s=i.strokeStyle;if(void 0===n&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([r.ZP.SET_FILL_STYLE,a.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([r.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=t.getEnds(),l=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(l,0,o,h),this.endGeometry(e)}drawMultiPolygon(t,e){const i=this.state,n=i.fillStyle,s=i.strokeStyle;if(void 0===n&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([r.ZP.SET_FILL_STYLE,a.bL]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([r.ZP.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,i.lineDash,i.lineDashOffset]);const o=t.getEndss(),l=t.getOrientedFlatCoordinates(),h=t.getStride();let c=0;for(let r=0,a=o.length;r<a;++r)c=this.drawFlatCoordinatess_(l,c,o[r],h);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let i=0,n=e.length;i<n;++i)e[i]=(0,c.uZ)(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}const d=u;var p=i(430);const f={Circle:d,Default:n.Z,Image:o,LineString:h,Polygon:d,Text:p.Z};const g=class{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const n in i){const r=i[n].finish();t[e][n]=r}}return t}getBuilder(t,e){const i=void 0!==t?t.toString():"0";let n=this.buildersByZIndex_[i];void 0===n&&(n={},this.buildersByZIndex_[i]=n);let r=n[e];if(void 0===r){r=new(0,f[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=r}return r}}},5249:(t,e,i)=>{"use strict";i.d(e,{Z:()=>R});var n=i(4618),r=i(430),s=i(5034),o=i(8300),a=i(5318),l=i(4898),h=i(1420);function c(t,e,i,n,r,s,o,a,c,u,d,p){let f=t[e],g=t[e+1],m=0,_=0,y=0,v=0;function x(){m=f,_=g,f=t[e+=n],g=t[e+1],v+=y,y=Math.sqrt((f-m)*(f-m)+(g-_)*(g-_))}do{x()}while(e<i-n&&v+y<s);let b=0===y?0:(s-v)/y;const E=(0,l.t7)(m,f,b),w=(0,l.t7)(_,g,b),C=e-n,S=v,T=s+a*c(u,r,d);for(;e<i-n&&v+y<T;)x();b=0===y?0:(T-v)/y;const R=(0,l.t7)(m,f,b),M=(0,l.t7)(_,g,b);let I;if(p){const t=[E,w,R,M];(0,h.U1)(t,0,4,2,p,t,t),I=t[0]>t[2]}else I=E>R;const P=Math.PI,L=[],A=C+n===e;let k;if(y=0,v=S,f=t[e=C],g=t[e+1],A){x(),k=Math.atan2(g-_,f-m),I&&(k+=k>0?-P:P);const t=(R+E)/2,e=(M+w)/2;return L[0]=[t,e,(T-s)/2,k,r],L}for(let h=0,O=(r=r.replace(/\n/g," ")).length;h<O;){x();let t=Math.atan2(g-_,f-m);if(I&&(t+=t>0?-P:P),void 0!==k){let e=t-k;if(e+=e>P?-2*P:e<-P?2*P:0,Math.abs(e)>o)return null}k=t;const p=h;let E=0;for(;h<O;++h){const t=a*c(u,r[I?O-h-1:h],d);if(e+n<i&&v+y<s+E+t/2)break;E+=t}if(h===p)continue;const w=I?r.substring(O-p,O-h):r.substring(p,h);b=0===y?0:(s+E/2-v)/y;const C=(0,l.t7)(m,f,b),S=(0,l.t7)(_,g,b);L.push([C,S,E/2,t,w]),s+=E}return L}var u=i(7794),d=i(3434);const p=(0,o.lJ)(),f=[],g=[],m=[],_=[];function y(t){return t[3].declutterBox}const v=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function x(t,e){return"start"!==e&&"end"!==e||v.test(t)||(e="start"===e?"left":"right"),r.I[e]}function b(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}const E=class{constructor(t,e,i,n){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,s.Ue)(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,n){const s=t+e+i+n;if(this.labels_[s])return this.labels_[s];const o=n?this.strokeStates[n]:null,l=i?this.fillStates[i]:null,h=this.textStates[e],c=this.pixelRatio,u=[h.scale[0]*c,h.scale[1]*c],d=Array.isArray(t),p=h.justify?r.I[h.justify]:x(Array.isArray(t)?t[0]:t,h.textAlign||a.PH),f=n&&o.lineWidth?o.lineWidth:0,g=d?t:t.split("\n").reduce(b,[]),{width:m,height:_,widths:y,heights:v,lineWidths:E}=(0,a.Zw)(h,g),w=m+f,C=[],S=(w+2)*u[0],T=(_+f)*u[1],R={width:S<0?Math.floor(S):Math.ceil(S),height:T<0?Math.floor(T):Math.ceil(T),contextInstructions:C};1==u[0]&&1==u[1]||C.push("scale",u),n&&(C.push("strokeStyle",o.strokeStyle),C.push("lineWidth",f),C.push("lineCap",o.lineCap),C.push("lineJoin",o.lineJoin),C.push("miterLimit",o.miterLimit),C.push("setLineDash",[o.lineDash]),C.push("lineDashOffset",o.lineDashOffset)),i&&C.push("fillStyle",l.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");const M=.5-p;let I=p*w+M*f;const P=[],L=[];let A,k=0,O=0,N=0,F=0;for(let r=0,a=g.length;r<a;r+=2){const t=g[r];if("\n"===t){O+=k,k=0,I=p*w+M*f,++F;continue}const e=g[r+1]||h.font;e!==A&&(n&&P.push("font",e),i&&L.push("font",e),A=e),k=Math.max(k,v[N]);const s=[t,I+M*y[N]+p*(y[N]-E[F]),.5*(f+k)+O];I+=y[N],n&&P.push("strokeText",s),i&&L.push("fillText",s),++N}return Array.prototype.push.apply(C,P),Array.prototype.push.apply(C,L),this.labels_[s]=R,R}replayTextBackground_(t,e,i,n,r,s,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,r),t.lineTo.apply(t,e),s&&(this.alignFill_=s[2],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,r,a,l,h,c,u,d,y,v,x,b,E){let w=i-(l*=y[0]),C=n-(h*=y[1]);const S=r+c>t?t-c:r,T=a+u>e?e-u:a,R=x[3]+S*y[0]+x[1],M=x[0]+T*y[1]+x[2],I=w-x[3],P=C-x[0];let L;return(b||0!==d)&&(f[0]=I,_[0]=I,f[1]=P,g[1]=P,g[0]=I+R,m[0]=g[0],m[1]=P+M,_[1]=m[1]),0!==d?(L=(0,s.qC)((0,s.Ue)(),i,n,1,1,d,-i,-n),(0,s.nn)(L,f),(0,s.nn)(L,g),(0,s.nn)(L,m),(0,s.nn)(L,_),(0,o.T9)(Math.min(f[0],g[0],m[0],_[0]),Math.min(f[1],g[1],m[1],_[1]),Math.max(f[0],g[0],m[0],_[0]),Math.max(f[1],g[1],m[1],_[1]),p)):(0,o.T9)(Math.min(I,I+R),Math.min(P,P+M),Math.max(I,I+R),Math.max(P,P+M),p),v&&(w=Math.round(w),C=Math.round(C)),{drawImageX:w,drawImageY:C,drawImageW:S,drawImageH:T,originX:c,originY:u,declutterBox:{minX:p[0],minY:p[1],maxX:p[2],maxY:p[3],value:E},canvasTransform:L,scale:y}}replayImageOrLabel_(t,e,i,n,r,s,o){const l=!(!s&&!o),h=n.declutterBox,c=t.canvas,u=o?o[2]*n.scale[0]/2:0;return h.minX-u<=c.width/e&&h.maxX+u>=0&&h.minY-u<=c.height/e&&h.maxY+u>=0&&(l&&this.replayTextBackground_(t,f,g,m,_,s,o),(0,a._f)(t,n.canvasTransform,r,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){if(this.alignFill_){const e=(0,s.nn)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,n){const s=this.textStates[e],o=this.createLabel(t,e,n,i),l=this.strokeStates[i],h=this.pixelRatio,c=x(Array.isArray(t)?t[0]:t,s.textAlign||a.PH),u=r.I[s.textBaseline||a.ru],d=l&&l.lineWidth?l.lineWidth:0;return{label:o,anchorX:c*(o.width/h-2*s.scale[0])+2*(.5-c)*d,anchorY:u*o.height/h+2*(.5-u)*d}}execute_(t,e,i,l,p,f,g,m){let _;this.pixelCoordinates_&&(0,u.fS)(i,this.renderedTransform_)?_=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),_=(0,h.vT)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,s.lk)(this.renderedTransform_,i));let v=0;const x=l.length;let b,E,w,C,S,T,R,M,I,P,L,A,k=0,O=0,N=0,F=null,D=null;const Z=this.coordinateCache_,j=this.viewRotation_,z=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,G={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:j},B=this.instructions!=l||this.overlaps?0:200;let U,V,q,W;for(;v<x;){const i=l[v];switch(i[0]){case n.ZP.BEGIN_GEOMETRY:U=i[1],W=i[3],U.getGeometry()?void 0===g||(0,o.kK)(g,W.getExtent())?++v:v=i[2]+1:v=i[2];break;case n.ZP.BEGIN_PATH:O>B&&(this.fill_(t),O=0),N>B&&(t.stroke(),N=0),O||N||(t.beginPath(),C=NaN,S=NaN),++v;break;case n.ZP.CIRCLE:k=i[1];const s=_[k],l=_[k+1],h=_[k+2]-s,u=_[k+3]-l,x=Math.sqrt(h*h+u*u);t.moveTo(s+x,l),t.arc(s,l,x,0,2*Math.PI,!0),++v;break;case n.ZP.CLOSE_PATH:t.closePath(),++v;break;case n.ZP.CUSTOM:k=i[1],b=i[2];const X=i[3],H=i[4],K=6==i.length?i[5]:void 0;G.geometry=X,G.feature=U,v in Z||(Z[v]=[]);const Y=Z[v];K?K(_,k,b,2,Y):(Y[0]=_[k],Y[1]=_[k+1],Y.length=2),H(Y,G),++v;break;case n.ZP.DRAW_IMAGE:k=i[1],b=i[2],M=i[3],E=i[4],w=i[5];let $=i[6];const J=i[7],Q=i[8],tt=i[9],et=i[10];let it=i[11];const nt=i[12];let rt=i[13];const st=i[14],ot=i[15];if(!M&&i.length>=20){I=i[19],P=i[20],L=i[21],A=i[22];const t=this.drawLabelWithPointPlacement_(I,P,L,A);M=t.label,i[3]=M;const e=i[23];E=(t.anchorX-e)*this.pixelRatio,i[4]=E;const n=i[24];w=(t.anchorY-n)*this.pixelRatio,i[5]=w,$=M.height,i[6]=$,rt=M.width,i[13]=rt}let at,lt,ht,ct;i.length>25&&(at=i[25]),i.length>17?(lt=i[16],ht=i[17],ct=i[18]):(lt=a.oB,ht=!1,ct=!1),et&&z?it+=j:et||z||(it-=j);let ut=0;for(;k<b;k+=2){if(at&&at[ut++]<rt/this.pixelRatio)continue;const i=this.calculateImageOrLabelDimensions_(M.width,M.height,_[k],_[k+1],rt,$,E,w,Q,tt,it,nt,p,lt,ht||ct,U),n=[t,e,M,i,J,ht?F:null,ct?D:null];if(m){if("none"===st)continue;if("obstacle"===st){m.insert(i.declutterBox);continue}{let t,e;if(ot){const i=b-k;if(!ot[i]){ot[i]=n;continue}if(t=ot[i],delete ot[i],e=y(t),m.collides(e))continue}if(m.collides(i.declutterBox))continue;t&&(m.insert(e),this.replayImageOrLabel_.apply(this,t)),m.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,n)}++v;break;case n.ZP.DRAW_CHARS:const dt=i[1],pt=i[2],ft=i[3],gt=i[4];A=i[5];const mt=i[6],_t=i[7],yt=i[8];L=i[9];const vt=i[10];I=i[11],P=i[12];const xt=[i[13],i[13]],bt=this.textStates[P],Et=bt.font,wt=[bt.scale[0]*_t,bt.scale[1]*_t];let Ct;Et in this.widths_?Ct=this.widths_[Et]:(Ct={},this.widths_[Et]=Ct);const St=(0,d.W)(_,dt,pt,2),Tt=Math.abs(wt[0])*(0,a.Kd)(Et,I,Ct);if(gt||Tt<=St){const i=this.textStates[P].textAlign,n=c(_,dt,pt,2,I,(St-Tt)*r.I[i],mt,Math.abs(wt[0]),a.Kd,Et,Ct,z?0:this.viewRotation_);t:if(n){const i=[];let r,s,o,l,h;if(L)for(r=0,s=n.length;r<s;++r){h=n[r],o=h[4],l=this.createLabel(o,P,"",L),E=h[2]+(wt[0]<0?-vt:vt),w=ft*l.height+2*(.5-ft)*vt*wt[1]/wt[0]-yt;const s=this.calculateImageOrLabelDimensions_(l.width,l.height,h[0],h[1],l.width,l.height,E,w,0,0,h[3],xt,!1,a.oB,!1,U);if(m&&m.collides(s.declutterBox))break t;i.push([t,e,l,s,1,null,null])}if(A)for(r=0,s=n.length;r<s;++r){h=n[r],o=h[4],l=this.createLabel(o,P,A,""),E=h[2],w=ft*l.height-yt;const s=this.calculateImageOrLabelDimensions_(l.width,l.height,h[0],h[1],l.width,l.height,E,w,0,0,h[3],xt,!1,a.oB,!1,U);if(m&&m.collides(s.declutterBox))break t;i.push([t,e,l,s,1,null,null])}m&&m.load(i.map(y));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++v;break;case n.ZP.END_GEOMETRY:if(void 0!==f){U=i[1];const t=f(U,W);if(t)return t}++v;break;case n.ZP.FILL:B?O++:this.fill_(t),++v;break;case n.ZP.MOVE_TO_LINE_TO:for(k=i[1],b=i[2],V=_[k],q=_[k+1],T=V+.5|0,R=q+.5|0,T===C&&R===S||(t.moveTo(V,q),C=T,S=R),k+=2;k<b;k+=2)V=_[k],q=_[k+1],T=V+.5|0,R=q+.5|0,k!=b-2&&T===C&&R===S||(t.lineTo(V,q),C=T,S=R);++v;break;case n.ZP.SET_FILL_STYLE:F=i,this.alignFill_=i[2],O&&(this.fill_(t),O=0,N&&(t.stroke(),N=0)),t.fillStyle=i[1],++v;break;case n.ZP.SET_STROKE_STYLE:D=i,N&&(t.stroke(),N=0),this.setStrokeStyle_(t,i),++v;break;case n.ZP.STROKE:B?N++:t.stroke(),++v;break;default:++v}}O&&this.fill_(t),N&&t.stroke()}execute(t,e,i,n,r,s){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,r,void 0,void 0,s)}executeHitDetection(t,e,i,n,r){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,n,r)}};var w=i(3248),C=i(3878);const S=["Polygon","Circle","LineString","Image","Text","Default"];const T={};const R=class{constructor(t,e,i,n,r,o){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,s.Ue)(),this.createExecutors_(r)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(const e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);const n=t[e];for(const t in n){const e=n[t];i[t]=new E(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let e=0,n=t.length;e<n;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,r,a){const l=2*(n=Math.round(n))+1,h=(0,s.qC)(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=(0,w.E4)(l,l,void 0,{willReadFrequently:!0}));const d=this.hitDetectionContext_;let p;d.canvas.width!==l||d.canvas.height!==l?(d.canvas.width=l,d.canvas.height=l):c||d.clearRect(0,0,l,l),void 0!==this.renderBuffer_&&(p=(0,o.lJ)(),(0,o.Wj)(p,t),(0,o.f3)(p,e*(this.renderBuffer_+n),p));const f=function(t){if(void 0!==T[t])return T[t];const e=2*t+1,i=t*t,n=new Array(i+1);for(let s=0;s<=t;++s)for(let r=0;r<=t;++r){const o=s*s+r*r;if(o>i)break;let a=n[o];a||(a=[],n[o]=a),a.push(4*((t+s)*e+(t+r))+3),s>0&&a.push(4*((t-s)*e+(t+r))+3),r>0&&(a.push(4*((t+s)*e+(t-r))+3),s>0&&a.push(4*((t-s)*e+(t-r))+3))}const r=[];for(let s=0,o=n.length;s<o;++s)n[s]&&r.push(...n[s]);return T[t]=r,r}(n);let g;function m(t,e){const i=d.getImageData(0,0,l,l).data;for(let s=0,o=f.length;s<o;s++)if(i[f[s]]>0){if(!a||"Image"!==g&&"Text"!==g||a.includes(t)){const i=(f[s]-3)/4,o=n-i%l,a=n-(i/l|0),h=r(t,e,o*o+a*a);if(h)return h}d.clearRect(0,0,l,l);break}}const _=Object.keys(this.executorsByZIndex_).map(Number);let y,v,x,b,E;for(_.sort(u.j2),y=_.length-1;y>=0;--y){const t=_[y].toString();for(x=this.executorsByZIndex_[t],v=S.length-1;v>=0;--v)if(g=S[v],b=x[g],void 0!==b&&(E=b.executeHitDetection(d,h,i,m,p),E))return E}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],n=e[1],r=e[2],s=e[3],o=[i,n,i,s,r,s,r,n];return(0,h.vT)(o,0,8,2,t,o),o}isEmpty(){return(0,C.x)(this.executorsByZIndex_)}execute(t,e,i,n,r,s,o){const a=Object.keys(this.executorsByZIndex_).map(Number);let l,h,c,d,p,f;for(a.sort(u.j2),this.maxExtent_&&(t.save(),this.clip(t,i)),s=s||S,o&&a.reverse(),l=0,h=a.length;l<h;++l){const h=a[l].toString();for(p=this.executorsByZIndex_[h],c=0,d=s.length;c<d;++c){f=p[s[c]],void 0!==f&&f.execute(t,e,i,n,r,o)}}this.maxExtent_&&t.restore()}}},1438:(t,e,i)=>{"use strict";i.d(e,{Z:()=>p});var n=i(3705),r=i(4975),s=i(5034),o=i(5318),a=i(7794),l=i(8300),h=i(4898),c=i(1420),u=i(2682);class d extends n.Z{constructor(t,e,i,n,r,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.transformRotation_=n?(0,h.FH)(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,s.Ue)()}drawImages_(t,e,i,n){if(!this.image_)return;const r=(0,c.vT)(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;1!=this.imageOpacity_&&(o.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;0===this.transformRotation_&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let c=0,u=r.length;c<u;c+=2){const t=r[c]-this.imageAnchorX_,e=r[c+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const i=t+this.imageAnchorX_,n=e+this.imageAnchorY_;(0,s.qC)(a,i,n,1,1,h,-i,-n),o.setTransform.apply(o,a),o.translate(i,n),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.setTransform(1,0,0,1,0,0)}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(o.globalAlpha=l)}drawText_(t,e,i,n){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=(0,c.vT)(t,e,i,n,this.transform_,this.pixelCoordinates_),s=this.context_;let o=this.textRotation_;for(0===this.transformRotation_&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<i;e+=n){const t=r[e]+this.textOffsetX_,i=r[e+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.translate(t-this.textOffsetX_,i-this.textOffsetY_),s.rotate(o),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.setTransform(1,0,0,1,0,0)):(this.textStrokeState_&&s.strokeText(this.text_,t,i),this.textFillState_&&s.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,n,r){const s=this.context_,o=(0,c.vT)(t,e,i,n,this.transform_,this.pixelCoordinates_);s.moveTo(o[0],o[1]);let a=o.length;r&&(a-=2);for(let l=2;l<a;l+=2)s.lineTo(o[l],o[l+1]);return r&&s.closePath(),i}drawRings_(t,e,i,n){for(let r=0,s=i.length;r<s;++r)e=this.moveToLineTo_(t,e,i[r],n,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,u.Kr)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],r=Math.sqrt(i*i+n*n),s=this.context_;s.beginPath(),s.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,l.kK)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();let n=0;const r=t.getEnds(),s=t.getStride();e.beginPath();for(let t=0,o=r.length;t<o;++t)n=this.moveToLineTo_(i,n,r[t],s,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,l.kK)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let n=0;const r=t.getEndss(),s=t.getStride();e.beginPath();for(let t=0,o=r.length;t<o;++t){const e=r[t];n=this.drawRings_(i,n,e,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,a.fS)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:o.PH;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:(0,r.y)(e||o.bL)}}else this.fillState_=null;if(e){const t=e.getColor(),i=e.getLineCap(),n=e.getLineDash(),s=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),c=n||o.X9;this.strokeState_={lineCap:void 0!==i?i:o.mb,lineDash:1===this.pixelRatio_?c:c.map((t=>t*this.pixelRatio_)),lineDashOffset:(s||o.He)*this.pixelRatio_,lineJoin:void 0!==a?a:o.rc,lineWidth:(void 0!==l?l:o.yC)*this.pixelRatio_,miterLimit:void 0!==h?h:o.V4,strokeStyle:(0,r.y)(t||o.Tx)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:(0,r.y)(t||o.bL)}}else this.textFillState_=null;const i=t.getStroke();if(i){const t=i.getColor(),e=i.getLineCap(),n=i.getLineDash(),s=i.getLineDashOffset(),a=i.getLineJoin(),l=i.getWidth(),h=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:o.mb,lineDash:n||o.X9,lineDashOffset:s||o.He,lineJoin:void 0!==a?a:o.rc,lineWidth:void 0!==l?l:o.yC,miterLimit:void 0!==h?h:o.V4,strokeStyle:(0,r.y)(t||o.Tx)}}else this.textStrokeState_=null;const n=t.getFont(),s=t.getOffsetX(),a=t.getOffsetY(),l=t.getRotateWithView(),h=t.getRotation(),c=t.getScaleArray(),u=t.getText(),d=t.getTextAlign(),p=t.getTextBaseline();this.textState_={font:void 0!==n?n:o.Df,textAlign:void 0!==d?d:o.PH,textBaseline:void 0!==p?p:o.ru},this.text_=void 0!==u?Array.isArray(u)?u.reduce(((t,e,i)=>t+(i%2?" ":e)),""):u:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==a?this.pixelRatio_*a:0,this.textRotateWithView_=void 0!==l&&l,this.textRotation_=void 0!==h?h:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}else this.text_=""}}const p=d},4618:(t,e,i)=>{"use strict";i.d(e,{$O:()=>o,Yc:()=>s,ZP:()=>l,gO:()=>r,s3:()=>a});const n={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[n.FILL],s=[n.STROKE],o=[n.BEGIN_PATH],a=[n.CLOSE_PATH],l=n},430:(t,e,i)=>{"use strict";i.d(e,{I:()=>d,Z:()=>f});var n=i(302),r=i(4618),s=i(4975),o=i(5318),a=i(3039),l=i(8300),h=i(4898);function c(t,e,i,n,r){const s=[];let o=i,a=0,l=e.slice(i,2);for(;a<t&&o+r<n;){const[i,n]=l.slice(-2),c=e[o+r],u=e[o+r+1],d=Math.sqrt((c-i)*(c-i)+(u-n)*(u-n));if(a+=d,a>=t){const e=(t-a+d)/d,p=(0,h.t7)(i,c,e),f=(0,h.t7)(n,u,e);l.push(p,f),s.push(l),l=[p,f],a==t&&(o+=r),a=0}else if(a<t)l.push(e[o+r],e[o+r+1]),o+=r;else{const t=d-a,e=(0,h.t7)(i,c,t/d),p=(0,h.t7)(n,u,t/d);l.push(e,p),s.push(l),l=[e,p],a=0,o+=r}}return a>0&&s.push(l),s}function u(t,e,i,n,r){let s,o,a,l,h,c,u,d,p,f,g=i,m=i,_=0,y=0,v=i;for(o=i;o<n;o+=r){const i=e[o],n=e[o+1];void 0!==h&&(p=i-h,f=n-c,l=Math.sqrt(p*p+f*f),void 0!==u&&(y+=a,s=Math.acos((u*p+d*f)/(a*l)),s>t&&(y>_&&(_=y,g=v,m=o),y=0,v=o-r)),a=l,u=p,d=f),h=i,c=n}return y+=l,y>_?[v,o]:[g,m]}const d={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class p extends n.Z{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){const i=this.textFillState_,n=this.textStrokeState_,s=this.textState_;if(""===this.text_||!s||!i&&!n)return;const a=this.coordinates;let h=a.length;const d=t.getType();let p=null,f=t.getStride();if("line"!==s.placement||"LineString"!=d&&"MultiLineString"!=d&&"Polygon"!=d&&"MultiPolygon"!=d){let i=s.overflow?null:[];switch(d){case"Point":case"MultiPoint":p=t.getFlatCoordinates();break;case"LineString":p=t.getFlatMidpoint();break;case"Circle":p=t.getCenter();break;case"MultiLineString":p=t.getFlatMidpoints(),f=2;break;case"Polygon":p=t.getFlatInteriorPoint(),s.overflow||i.push(p[2]/this.resolution),f=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();p=[];for(let t=0,n=e.length;t<n;t+=3)s.overflow||i.push(e[t+2]/this.resolution),p.push(e[t],e[t+1]);if(0===p.length)return;f=2}const n=this.appendFlatPointCoordinates(p,f);if(n===h)return;if(i&&(n-h)/2!=p.length/f){let t=h/2;i=i.filter(((e,i)=>{const n=a[2*(t+i)]===p[i*f]&&a[2*(t+i)+1]===p[i*f+1];return n||--t,n}))}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let l=s.padding;if(l!=o.oB&&(s.scale[0]<0||s.scale[1]<0)){let t=s.padding[0],e=s.padding[1],i=s.padding[2],n=s.padding[3];s.scale[0]<0&&(e=-e,n=-n),s.scale[1]<0&&(t=-t,i=-i),l=[t,e,i,n]}const c=this.pixelRatio;this.instructions.push([r.ZP.DRAW_IMAGE,h,n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,l==o.oB?o.oB:l.map((function(t){return t*c})),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const u=1/c;this.hitDetectionInstructions.push([r.ZP.DRAW_IMAGE,h,n,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[u,u],NaN,void 0,this.declutterImageWithText_,l,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(e)}else{if(!(0,l.kK)(this.getBufferedMaxExtent(),t.getExtent()))return;let i;if(p=t.getFlatCoordinates(),"LineString"==d)i=[p.length];else if("MultiLineString"==d)i=t.getEnds();else if("Polygon"==d)i=t.getEnds().slice(0,1);else if("MultiPolygon"==d){const e=t.getEndss();i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t][0])}this.beginGeometry(t,e);const n=s.repeat,r=n?void 0:s.textAlign;let o=0;for(let t=0,e=i.length;t<e;++t){let e;e=n?c(n*this.resolution,p,o,i[t],f):[p.slice(o,i[t])];for(let n=0,l=e.length;n<l;++n){const l=e[n];let c=0,d=l.length;if(null==r){const t=u(s.maxAngle,l,0,l.length,2);c=t[0],d=t[1]}for(let t=c;t<d;t+=f)a.push(l[t],l[t+1]);const p=a.length;o=i[t],this.drawChars_(h,p),h=p}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||o.PH,justify:e.justify,textBaseline:e.textBaseline||o.ru,scale:e.scale});const s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,h=d[n.textBaseline],c=this.textOffsetY_*l,u=this.text_,p=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([r.ZP.DRAW_CHARS,t,e,h,n.overflow,a,n.maxAngle,l,c,s,p*l,u,o,1]),this.hitDetectionInstructions.push([r.ZP.DRAW_CHARS,t,e,h,n.overflow,a,n.maxAngle,1,c,s,p,u,o,1/l])}setTextStyle(t,e){let i,n,r;if(t){const e=t.getFill();e?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=(0,s.y)(e.getColor()||o.bL)):(n=null,this.textFillState_=n);const l=t.getStroke();if(l){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const t=l.getLineDash(),e=l.getLineDashOffset(),i=l.getWidth(),n=l.getMiterLimit();r.lineCap=l.getLineCap()||o.mb,r.lineDash=t?t.slice():o.X9,r.lineDashOffset=void 0===e?o.He:e,r.lineJoin=l.getLineJoin()||o.rc,r.lineWidth=void 0===i?o.yC:i,r.miterLimit=void 0===n?o.V4:n,r.strokeStyle=(0,s.y)(l.getColor()||o.Tx)}else r=null,this.textStrokeState_=r;i=this.textState_;const h=t.getFont()||o.Df;(0,o.Qx)(h);const c=t.getScaleArray();i.overflow=t.getOverflow(),i.font=h,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||o.ru,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||o.oB,i.scale=void 0===c?[1,1]:c;const u=t.getOffsetX(),d=t.getOffsetY(),p=t.getRotateWithView(),f=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===u?0:u,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==p&&p,this.textRotation_=void 0===f?0:f,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:(0,a.sq)(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n?"string"==typeof n.fillStyle?n.fillStyle:"|"+(0,a.sq)(n.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}const f=p},7409:(t,e,i)=>{"use strict";i.d(e,{TU:()=>c,UN:()=>h,ix:()=>u});var n=i(1438),r=i(7707),s=i(7794),o=i(4898),a=i(3248),l=i(8300);const h=.5;function c(t,e,i,o,c,u,d){const p=t[0]*h,f=t[1]*h,g=(0,a.E4)(p,f);g.imageSmoothingEnabled=!1;const m=g.canvas,_=new n.Z(g,h,c,null,d),y=i.length,v=Math.floor(16777215/y),x={};for(let n=1;n<=y;++n){const t=i[n-1],e=t.getStyleFunction()||o;if(!o)continue;let s=e(t,u);if(!s)continue;Array.isArray(s)||(s=[s]);const h=(n*v).toString(16).padStart(7,"#00000");for(let i=0,n=s.length;i<n;++i){const e=s[i],n=e.getGeometryFunction()(t);if(!n||!(0,l.kK)(c,n.getExtent()))continue;const o=e.clone(),u=o.getFill();u&&u.setColor(h);const d=o.getStroke();d&&(d.setColor(h),d.setLineDash(null)),o.setText(void 0);const p=e.getImage();if(p&&0!==p.getOpacity()){const t=p.getImageSize();if(!t)continue;const e=(0,a.E4)(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=h,e.fillRect(0,0,i.width,i.height),o.setImage(new r.default({img:i,imgSize:t,anchor:p.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:p.getOrigin(),opacity:1,size:p.getSize(),scale:p.getScale(),rotation:p.getRotation(),rotateWithView:p.getRotateWithView()}))}const f=o.getZIndex()||0;let g=x[f];g||(g={},x[f]=g,g.Polygon=[],g.Circle=[],g.LineString=[],g.Point=[]);const m=n.getType();if("GeometryCollection"===m){const t=n.getGeometriesArrayRecursive();for(let e=0,i=t.length;e<i;++e){const i=t[e];g[i.getType().replace("Multi","")].push(i,o)}}else g[m.replace("Multi","")].push(n,o)}}const b=Object.keys(x).map(Number).sort(s.j2);for(let n=0,r=b.length;n<r;++n){const t=x[b[n]];for(const i in t){const n=t[i];for(let t=0,i=n.length;t<i;t+=2){_.setStyle(n[t+1]);for(let i=0,r=e.length;i<r;++i)_.setTransform(e[i]),_.drawGeometry(n[t])}}}return g.getImageData(0,0,m.width,m.height)}function u(t,e,i){const n=[];if(i){const r=Math.floor(Math.round(t[0])*h),s=Math.floor(Math.round(t[1])*h),a=4*((0,o.uZ)(r,0,i.width-1)+(0,o.uZ)(s,0,i.height-1)*i.width),l=i.data[a],c=i.data[a+1],u=i.data[a+2]+256*(c+256*l),d=Math.floor(16777215/e.length);u&&u%d==0&&n.push(e[u/d-1])}return n}},9829:(t,e,i)=>{"use strict";i.d(e,{Z:()=>l});var n=i(1971),r=i(8089),s=i(2196),o=i(3039);class a extends s.Z{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,o.O3)()}getData(t){return null}prepareFrame(t){return(0,o.O3)()}renderFrame(t,e){return(0,o.O3)()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(n,r)=>{const s=this.loadedTileCallback.bind(this,i,n);return t.forEachLoadedTile(e,n,r,s)}}forEachFeatureAtCoordinate(t,e,i,n,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){t.target.getState()===r.Z.LOADED&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=r.Z.LOADED&&e!=r.Z.ERROR&&t.addEventListener(n.Z.CHANGE,this.boundHandleImageChange_),e==r.Z.IDLE&&(t.load(),e=t.getState()),e==r.Z.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}const l=a},5188:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(8070),r=i(8089),s=i(9265),o=i(5034),a=i(8300),l=i(7533);class h extends n.Z{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,n=t.viewState,o=n.resolution,h=this.getLayer().getSource(),c=t.viewHints;let u=t.extent;if(void 0!==e.extent&&(u=(0,a.Ed)(u,(0,l.fromUserExtent)(e.extent,n.projection))),!c[s.Z.ANIMATING]&&!c[s.Z.INTERACTING]&&!(0,a.xb)(u))if(h){const t=n.projection,e=h.getImage(u,o,i,t);e&&(this.loadImage(e)?this.image_=e:e.getState()===r.Z.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=(0,o.nn)(e.pixelToCoordinateTransform,t.slice()),r=i.getExtent();if(r&&!(0,a.b8)(r,n))return null;const s=this.image_.getExtent(),l=this.getImage(),h=(0,a.dz)(s),c=Math.floor(l.width*((n[0]-s[0])/h));if(c<0||c>=l.width)return null;const u=(0,a.Cr)(s),d=Math.floor(l.height*((s[3]-n[1])/u));return d<0||d>=l.height?null:this.getImageData(l,c,d)}renderFrame(t,e){const i=this.image_,n=i.getExtent(),r=i.getResolution(),s=i.getPixelRatio(),h=t.layerStatesArray[t.layerIndex],c=t.pixelRatio,u=t.viewState,d=u.center,p=c*r/(u.resolution*s),f=t.extent,g=u.resolution,m=u.rotation,_=Math.round((0,a.dz)(f)/g*c),y=Math.round((0,a.Cr)(f)/g*c);(0,o.qC)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,m,-_/2,-y/2),(0,o.nb)(this.inversePixelTransform,this.pixelTransform);const v=(0,o.BB)(this.pixelTransform);this.useContainer(e,v,this.getBackground(t));const x=this.context,b=x.canvas;b.width!=_||b.height!=y?(b.width=_,b.height=y):this.containerReused||x.clearRect(0,0,_,y);let E=!1,w=!0;if(h.extent){const e=(0,l.fromUserExtent)(h.extent,u.projection);w=(0,a.kK)(e,t.extent),E=w&&!(0,a.r4)(e,t.extent),E&&this.clipUnrotated(x,t,e)}const C=this.getImage(),S=(0,o.qC)(this.tempTransform,_/2,y/2,p,p,0,s*(n[0]-d[0])/r,s*(d[1]-n[3])/r);this.renderedResolution=r*c/s;const T=C.width*S[0],R=C.height*S[3];if(this.getLayer().getSource().getInterpolate()||(x.imageSmoothingEnabled=!1),this.preRender(x,t),w&&T>=.5&&R>=.5){const t=S[4],e=S[5],i=h.opacity;let n;1!==i&&(n=x.globalAlpha,x.globalAlpha=i),x.drawImage(C,0,0,+C.width,+C.height,t,e,T,R),1!==i&&(x.globalAlpha=n)}return this.postRender(x,t),E&&x.restore(),x.imageSmoothingEnabled=!0,v!==b.style.transform&&(b.style.transform=v),this.container}}const c=h},8070:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f,r:()=>u});var n=i(9829),r=i(3885),s=i(4950),o=i(5034),a=i(3139),l=i(3248),h=i(7794),c=i(8300);const u=[];let d=null;class p extends n.Z{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,o.Ue)(),this.pixelTransform=(0,o.Ue)(),this.inversePixelTransform=(0,o.Ue)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let n;d||(d=(0,l.E4)(1,1,void 0,{willReadFrequently:!0})),d.clearRect(0,0,1,1);try{d.drawImage(t,e,i,1,1,0,0,1,1),n=d.getImageData(0,0,1,1).data}catch(r){return d=null,null}return n}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let r,s;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&(0,h.fS)((0,a._2)(t.style.backgroundColor),(0,a._2)(i)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(s=e.getContext("2d"))}if(s&&s.canvas.style.transform===e?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused&&(this.container=null,this.context=null,this.containerReused=!1),!this.container){r=document.createElement("div"),r.className=n;let t=r.style;t.position="absolute",t.width="100%",t.height="100%",s=(0,l.E4)();const e=s.canvas;r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=s}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=(0,c.rL)(i),r=(0,c.Xv)(i),s=(0,c.w$)(i),a=(0,c.hC)(i);(0,o.nn)(e.coordinateToPixelTransform,n),(0,o.nn)(e.coordinateToPixelTransform,r),(0,o.nn)(e.coordinateToPixelTransform,s),(0,o.nn)(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;(0,o.nn)(l,n),(0,o.nn)(l,r),(0,o.nn)(l,s),(0,o.nn)(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const s=new r.Z(t,this.inversePixelTransform,i,e);n.dispatchEvent(s)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(s.Z.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(s.Z.POSTRENDER,t,e)}getRenderTransform(t,e,i,n,r,s,a){const l=r/2,h=s/2,c=n/e,u=-c,d=-t[0]+a,p=-t[1];return(0,o.qC)(this.tempTransform,l,h,c,u,-i,d,p)}disposeInternal(){delete this.frameState,super.disposeInternal()}}const f=p},2841:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var n=i(8070),r=i(4662),s=i(9e3),o=i(8899),a=i(5696),l=i(5034),h=i(7794),c=i(8300),u=i(7533),d=i(3039),p=i(7273);class f extends n.Z{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,c.lJ)(),this.tmpTileRange_=new o.Z(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),i=t.getState(),n=e.getUseInterimTilesOnError();return i==a.Z.LOADED||i==a.Z.EMPTY||i==a.Z.ERROR&&!n}getTile(t,e,i,n){const r=n.pixelRatio,s=n.viewState.projection,o=this.getLayer();let l=o.getSource().getTile(t,e,i,r,s);return l.getState()==a.Z.ERROR&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=(0,l.nn)(e.pixelToCoordinateTransform,t.slice()),o=i.getExtent();if(o&&!(0,c.b8)(o,n))return null;const h=e.pixelRatio,u=e.viewState.projection,d=e.viewState,f=i.getRenderSource(),g=f.getTileGridForProjection(d.projection),m=f.getTilePixelRatio(e.pixelRatio);for(let l=g.getZForResolution(d.resolution);l>=g.getMinZoom();--l){const t=g.getTileCoordForCoordAndZ(n,l),e=f.getTile(l,t[1],t[2],h,u);if(!(e instanceof r.Z||e instanceof s.Z)||e instanceof s.Z&&e.getState()===a.Z.EMPTY)return null;if(e.getState()!==a.Z.LOADED)continue;const i=g.getOrigin(l),o=(0,p.Pq)(g.getTileSize(l)),c=g.getResolution(l),_=Math.floor(m*((n[0]-i[0])/c-t[1]*o[0])),y=Math.floor(m*((i[1]-n[1])/c-t[2]*o[1])),v=Math.round(m*f.getGutterForProjection(d.projection));return this.getImageData(e.getImage(),_+v,y+v)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex],n=t.viewState,r=n.projection,s=n.resolution,o=n.center,p=n.rotation,f=t.pixelRatio,g=this.getLayer(),m=g.getSource(),_=m.getRevision(),y=m.getTileGridForProjection(r),v=y.getZForResolution(s,m.zDirection),x=y.getResolution(v);let b=t.extent;const E=t.viewState.resolution,w=m.getTilePixelRatio(f),C=Math.round((0,c.dz)(b)/E*f),S=Math.round((0,c.Cr)(b)/E*f),T=i.extent&&(0,u.fromUserExtent)(i.extent,r);T&&(b=(0,c.Ed)(b,(0,u.fromUserExtent)(i.extent,r)));const R=x*C/2/w,M=x*S/2/w,I=[o[0]-R,o[1]-M,o[0]+R,o[1]+M],P=y.getTileRangeForExtentAndZ(b,v),L={};L[v]={};const A=this.createLoadedTileFinder(m,r,L),k=this.tmpExtent,O=this.tmpTileRange_;this.newTiles_=!1;const N=p?(0,c.dY)(n.center,E,p,t.size):void 0;for(let l=P.minX;l<=P.maxX;++l)for(let e=P.minY;e<=P.maxY;++e){if(p&&!y.tileCoordIntersectsViewport([v,l,e],N))continue;const n=this.getTile(v,l,e,t);if(this.isDrawableTile(n)){const e=(0,d.sq)(this);if(n.getState()==a.Z.LOADED){L[v][n.tileCoord.toString()]=n;let t=n.inTransition(e);t&&1!==i.opacity&&(n.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(n)||(this.newTiles_=!0)}if(1===n.getAlpha(e,t.time))continue}const r=y.getTileCoordChildTileRange(n.tileCoord,O,k);let s=!1;r&&(s=A(v+1,r)),s||y.forEachTileCoordParentTileRange(n.tileCoord,A,O,k)}const F=x/s*f/w;(0,l.qC)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/f,1/f,p,-C/2,-S/2);const D=(0,l.BB)(this.pixelTransform);this.useContainer(e,D,this.getBackground(t));const Z=this.context,j=Z.canvas;(0,l.nb)(this.inversePixelTransform,this.pixelTransform),(0,l.qC)(this.tempTransform,C/2,S/2,F,F,0,-C/2,-S/2),j.width!=C||j.height!=S?(j.width=C,j.height=S):this.containerReused||Z.clearRect(0,0,C,S),T&&this.clipUnrotated(Z,t,T),m.getInterpolate()||(Z.imageSmoothingEnabled=!1),this.preRender(Z,t),this.renderedTiles.length=0;let z,G,B,U=Object.keys(L).map(Number);U.sort(h.j2),1!==i.opacity||this.containerReused&&!m.getOpaque(t.viewState.projection)?(z=[],G=[]):U=U.reverse();for(let a=U.length-1;a>=0;--a){const e=U[a],i=m.getTilePixelSize(e,f,r),n=y.getResolution(e)/x,s=i[0]*n*F,o=i[1]*n*F,h=y.getTileCoordForCoordAndZ((0,c.rL)(I),e),u=y.getTileCoordExtent(h),p=(0,l.nn)(this.tempTransform,[w*(u[0]-I[0])/x,w*(I[3]-u[3])/x]),g=w*m.getGutterForProjection(r),_=L[e];for(const r in _){const i=_[r],n=i.tileCoord,a=h[1]-n[1],l=Math.round(p[0]-(a-1)*s),u=h[2]-n[2],f=Math.round(p[1]-(u-1)*o),y=Math.round(p[0]-a*s),x=Math.round(p[1]-u*o),b=l-y,E=f-x,w=v===e,C=w&&1!==i.getAlpha((0,d.sq)(this),t.time);let S=!1;if(!C)if(z){B=[y,x,y+b,x,y+b,x+E,y,x+E];for(let t=0,i=z.length;t<i;++t)if(v!==e&&e<G[t]){const e=z[t];(0,c.kK)([y,x,y+b,x+E],[e[0],e[3],e[4],e[7]])&&(S||(Z.save(),S=!0),Z.beginPath(),Z.moveTo(B[0],B[1]),Z.lineTo(B[2],B[3]),Z.lineTo(B[4],B[5]),Z.lineTo(B[6],B[7]),Z.moveTo(e[6],e[7]),Z.lineTo(e[4],e[5]),Z.lineTo(e[2],e[3]),Z.lineTo(e[0],e[1]),Z.clip())}z.push(B),G.push(e)}else Z.clearRect(y,x,b,E);this.drawTileImage(i,t,y,x,b,E,g,w),z&&!C?(S&&Z.restore(),this.renderedTiles.unshift(i)):this.renderedTiles.push(i),this.updateUsedTiles(t.usedTiles,m,i)}}return this.renderedRevision=_,this.renderedResolution=x,this.extentChanged=!this.renderedExtent_||!(0,c.fS)(this.renderedExtent_,I),this.renderedExtent_=I,this.renderedPixelRatio=f,this.renderedProjection=r,this.manageTilePyramid(t,m,y,f,r,b,v,g.getPreload()),this.scheduleExpireCache(t,m),this.postRender(Z,t),i.extent&&Z.restore(),Z.imageSmoothingEnabled=!0,D!==j.style.transform&&(j.style.transform=D),this.container}drawTileImage(t,e,i,n,r,s,o,a){const l=this.getTileImage(t);if(!l)return;const h=(0,d.sq)(this),c=e.layerStatesArray[e.layerIndex],u=c.opacity*(a?t.getAlpha(h,e.time):1),p=u!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=u),this.context.drawImage(l,o,o,l.width-2*o,l.height-2*o,i,n,r,s),p&&this.context.restore(),u!==c.opacity?e.animate=!0:a&&t.endTransition(h)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const i=function(t,e,i){const n=(0,d.sq)(t);n in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[n])}.bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){const n=(0,d.sq)(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}manageTilePyramid(t,e,i,n,r,s,o,l,h){const u=(0,d.sq)(e);u in t.wantedTiles||(t.wantedTiles[u]={});const p=t.wantedTiles[u],f=t.tileQueue,g=i.getMinZoom(),m=t.viewState.rotation,_=m?(0,c.dY)(t.viewState.center,t.viewState.resolution,m,t.size):void 0;let y,v,x,b,E,w,C=0;for(w=g;w<=o;++w)for(v=i.getTileRangeForExtentAndZ(s,w,v),x=i.getResolution(w),b=v.minX;b<=v.maxX;++b)for(E=v.minY;E<=v.maxY;++E)m&&!i.tileCoordIntersectsViewport([w,b,E],_)||(o-w<=l?(++C,y=e.getTile(w,b,E,n,r),y.getState()==a.Z.IDLE&&(p[y.getKey()]=!0,f.isKeyQueued(y.getKey())||f.enqueue([y,u,i.getTileCoordCenter(y.tileCoord),x])),void 0!==h&&h(y)):e.useTile(w,b,E,r));e.updateCacheSize(C,r)}}const g=f},1664:(t,e,i)=>{"use strict";i.d(e,{Z:()=>_});var n=i(7522),r=i(8070),s=i(5249),o=i(9265),a=i(7409),l=i(5034),h=i(8300),c=i(3248),u=i(6526),d=i(7794),p=i(7533),f=i(3039),g=i(6973);class m extends r.Z{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,h.lJ)(),this.wrappedRenderedExtent_=(0,h.lJ)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){const n=e.extent,r=e.viewState,s=r.center,a=r.resolution,l=r.projection,c=r.rotation,u=l.getExtent(),d=this.getLayer().getSource(),p=e.pixelRatio,f=e.viewHints,g=!(f[o.Z.ANIMATING]||f[o.Z.INTERACTING]),m=this.compositionContext_,_=Math.round(e.size[0]*p),y=Math.round(e.size[1]*p),v=d.getWrapX()&&l.canWrapX(),x=v?(0,h.dz)(u):null,b=v?Math.ceil((n[2]-u[2])/x)+1:1;let E=v?Math.floor((n[0]-u[0])/x):0;do{const e=this.getRenderTransform(s,a,c,p,_,y,E*x);t.execute(m,1,e,c,g,void 0,i)}while(++E<b)}setupCompositionContext_(){if(1!==this.opacity_){const t=(0,c.E4)(this.context.canvas.width,this.context.canvas.height,r.r);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,c.jy)(this.compositionContext_),r.r.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){const i=t.pixelRatio,n=t.layerStatesArray[t.layerIndex];(0,l.n3)(this.pixelTransform,1/i,1/i),(0,l.nb)(this.inversePixelTransform,this.pixelTransform);const r=(0,l.BB)(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const s=this.context,o=s.canvas,a=this.replayGroup_,c=this.declutterExecutorGroup;if((!a||a.isEmpty())&&(!c||c.isEmpty()))return null;const u=Math.round(t.size[0]*i),d=Math.round(t.size[1]*i);o.width!=u||o.height!=d?(o.width=u,o.height=d,o.style.transform!==r&&(o.style.transform=r)):this.containerReused||s.clearRect(0,0,u,d),this.preRender(s,t);const f=t.viewState,g=f.projection;this.opacity_=n.opacity,this.setupCompositionContext_();let m=!1,_=!0;if(n.extent&&this.clipping){const e=(0,p.fromUserExtent)(n.extent,g);_=(0,h.kK)(e,t.extent),m=_&&!(0,h.r4)(e,t.extent),m&&this.clipUnrotated(this.compositionContext_,t,e)}return _&&this.renderWorlds(a,t),m&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(s,t),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise((e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];(0,l.nn)(this.pixelTransform,t);const e=this.renderedCenter_,i=this.renderedResolution_,n=this.renderedRotation_,r=this.renderedProjection_,s=this.wrappedRenderedExtent_,o=this.getLayer(),c=[],u=t[0]*a.UN,d=t[1]*a.UN;c.push(this.getRenderTransform(e,i,n,a.UN,u,d,0).slice());const p=o.getSource(),f=r.getExtent();if(p.getWrapX()&&r.canWrapX()&&!(0,h.r4)(f,s)){let t=s[0];const r=(0,h.dz)(f);let o,l=0;for(;t<f[0];)--l,o=r*l,c.push(this.getRenderTransform(e,i,n,a.UN,u,d,o).slice()),t+=r;for(l=0,t=s[2];t>f[2];)++l,o=r*l,c.push(this.getRenderTransform(e,i,n,a.UN,u,d,o).slice()),t-=r}this.hitDetectionImageData_=(0,a.TU)(t,c,this.renderedFeatures_,o.getStyleFunction(),s,i,n)}e((0,a.ix)(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,i,n,r){if(!this.replayGroup_)return;const s=e.viewState.resolution,o=e.viewState.rotation,a=this.getLayer(),l={},h=function(t,e,i){const s=(0,f.sq)(t),o=l[s];if(o){if(!0!==o&&i<o.distanceSq){if(0===i)return l[s]=!0,r.splice(r.lastIndexOf(o),1),n(t,a,e);o.geometry=e,o.distanceSq=i}}else{if(0===i)return l[s]=!0,n(t,a,e);r.push(l[s]={feature:t,layer:a,geometry:e,distanceSq:i,callback:n})}};let c;const u=[this.replayGroup_];return this.declutterExecutorGroup&&u.push(this.declutterExecutorGroup),u.some((n=>c=n.forEachFeatureAtCoordinate(t,s,o,i,h,n===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map((t=>t.value)):null))),c}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const r=t.viewHints[o.Z.ANIMATING],a=t.viewHints[o.Z.INTERACTING],l=e.getUpdateWhileAnimating(),c=e.getUpdateWhileInteracting();if(this.ready&&!l&&r||!c&&a)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const f=t.extent,m=t.viewState,_=m.projection,y=m.resolution,v=t.pixelRatio,x=e.getRevision(),b=e.getRenderBuffer();let E=e.getRenderOrder();void 0===E&&(E=u.eR);const w=m.center.slice(),C=(0,h.f3)(f,b*y),S=C.slice(),T=[C.slice()],R=_.getExtent();if(i.getWrapX()&&_.canWrapX()&&!(0,h.r4)(R,t.extent)){const t=(0,h.dz)(R),e=Math.max((0,h.dz)(C)/2,t);C[0]=R[0]-e,C[2]=R[2]+e,(0,g.Cf)(w,_);const i=(0,h.Cf)(T[0],_);i[0]<R[0]&&i[2]<R[2]?T.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>R[0]&&i[2]>R[2]&&T.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==y&&this.renderedRevision_==x&&this.renderedRenderOrder_==E&&(0,h.r4)(this.wrappedRenderedExtent_,C))return(0,d.fS)(this.renderedExtent_,S)||(this.hitDetectionImageData_=null,this.renderedExtent_=S),this.renderedCenter_=w,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const M=new n.Z((0,u.Qz)(y,v),C,y,v);let I;this.getLayer().getDeclutter()&&(I=new n.Z((0,u.Qz)(y,v),C,y,v));const P=(0,p.getUserProjection)();let L;if(P){for(let t=0,e=T.length;t<e;++t){const e=T[t],n=(0,p.toUserExtent)(e,_);i.loadFeatures(n,(0,p.toUserResolution)(y,_),P)}L=(0,p.getTransformFromProjections)(P,_)}else for(let n=0,s=T.length;n<s;++n)i.loadFeatures(T[n],y,_);const A=(0,u.se)(y,v);let k=!0;const O=t=>{let i;const n=t.getStyleFunction()||e.getStyleFunction();if(n&&(i=n(t,y)),i){const e=this.renderFeature(t,A,i,M,L,I);k=k&&!e}},N=(0,p.toUserExtent)(C,_),F=i.getFeaturesInExtent(N);E&&F.sort(E);for(let n=0,s=F.length;n<s;++n)O(F[n]);this.renderedFeatures_=F,this.ready=k;const D=M.finish(),Z=new s.Z(C,y,v,i.getOverlaps(),D,e.getRenderBuffer());return I&&(this.declutterExecutorGroup=new s.Z(C,y,v,i.getOverlaps(),I.finish(),e.getRenderBuffer())),this.renderedResolution_=y,this.renderedRevision_=x,this.renderedRenderOrder_=E,this.renderedExtent_=S,this.wrappedRenderedExtent_=C,this.renderedCenter_=w,this.renderedProjection_=_,this.replayGroup_=Z,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,r,s){if(!i)return!1;let o=!1;if(Array.isArray(i))for(let a=0,l=i.length;a<l;++a)o=(0,u.Pn)(n,t,i[a],e,this.boundHandleStyleImageChange_,r,s)||o;else o=(0,u.Pn)(n,t,i,e,this.boundHandleStyleImageChange_,r,s);return o}}const _=m},6526:(t,e,i)=>{"use strict";i.d(e,{Pn:()=>c,Qz:()=>h,eR:()=>a,se:()=>l});var n=i(8089),r=i(3039);const s=.5,o={Point:function(t,e,i,r,s){const o=i.getImage(),a=i.getText();let l;if(o){if(o.getImageState()!=n.Z.LOADED)return;let h=t;if(s){const n=o.getDeclutterMode();if("none"!==n)if(h=s,"obstacle"===n){const n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(o,l),n.drawPoint(e,r)}else a&&a.getText()&&(l={})}const c=h.getBuilder(i.getZIndex(),"Image");c.setImageStyle(o,l),c.drawPoint(e,r)}if(a&&a.getText()){let n=t;s&&(n=s);const o=n.getBuilder(i.getZIndex(),"Text");o.setTextStyle(a,l),o.drawText(e,r)}},LineString:function(t,e,i,n,r){const s=i.getStroke();if(s){const r=t.getBuilder(i.getZIndex(),"LineString");r.setFillStrokeStyle(null,s),r.drawLineString(e,n)}const o=i.getText();if(o&&o.getText()){const s=(r||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,n)}},Polygon:function(t,e,i,n,r){const s=i.getFill(),o=i.getStroke();if(s||o){const r=t.getBuilder(i.getZIndex(),"Polygon");r.setFillStrokeStyle(s,o),r.drawPolygon(e,n)}const a=i.getText();if(a&&a.getText()){const s=(r||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,n)}},MultiPoint:function(t,e,i,r,s){const o=i.getImage(),a=i.getText();let l;if(o){if(o.getImageState()!=n.Z.LOADED)return;let h=t;if(s){const n=o.getDeclutterMode();if("none"!==n)if(h=s,"obstacle"===n){const n=t.getBuilder(i.getZIndex(),"Image");n.setImageStyle(o,l),n.drawMultiPoint(e,r)}else a&&a.getText()&&(l={})}const c=h.getBuilder(i.getZIndex(),"Image");c.setImageStyle(o,l),c.drawMultiPoint(e,r)}if(a&&a.getText()){let n=t;s&&(n=s);const o=n.getBuilder(i.getZIndex(),"Text");o.setTextStyle(a,l),o.drawText(e,r)}},MultiLineString:function(t,e,i,n,r){const s=i.getStroke();if(s){const r=t.getBuilder(i.getZIndex(),"LineString");r.setFillStrokeStyle(null,s),r.drawMultiLineString(e,n)}const o=i.getText();if(o&&o.getText()){const s=(r||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,n)}},MultiPolygon:function(t,e,i,n,r){const s=i.getFill(),o=i.getStroke();if(o||s){const r=t.getBuilder(i.getZIndex(),"Polygon");r.setFillStrokeStyle(s,o),r.drawMultiPolygon(e,n)}const a=i.getText();if(a&&a.getText()){const s=(r||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,n)}},GeometryCollection:function(t,e,i,n,r){const s=e.getGeometriesArray();let a,l;for(a=0,l=s.length;a<l;++a){(0,o[s[a].getType()])(t,s[a],i,n,r)}},Circle:function(t,e,i,n,r){const s=i.getFill(),o=i.getStroke();if(s||o){const r=t.getBuilder(i.getZIndex(),"Circle");r.setFillStrokeStyle(s,o),r.drawCircle(e,n)}const a=i.getText();if(a&&a.getText()){const s=(r||t).getBuilder(i.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,n)}}};function a(t,e){return parseInt((0,r.sq)(t),10)-parseInt((0,r.sq)(e),10)}function l(t,e){const i=h(t,e);return i*i}function h(t,e){return s*t/e}function c(t,e,i,r,s,a,l){let h=!1;const c=i.getImage();if(c){const t=c.getImageState();t==n.Z.LOADED||t==n.Z.ERROR?c.unlistenImageChange(s):(t==n.Z.IDLE&&c.load(),c.listenImageChange(s),h=!0)}return function(t,e,i,n,r,s){const a=i.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(n,r),h=i.getRenderer();if(h)u(t,l,i,e);else{(0,o[l.getType()])(t,l,i,e,s)}}(t,e,i,r,a,l),h}function u(t,e,i,n){if("GeometryCollection"==e.getType()){const r=e.getGeometries();for(let e=0,s=r.length;e<s;++e)u(t,r[e],i,n);return}t.getBuilder(i.getZIndex(),"Default").drawCustom(e,n,i.getRenderer(),i.getHitDetectionRenderer())}},3832:(t,e,i)=>{"use strict";i.d(e,{Co:()=>d,aA:()=>u,rX:()=>l,sY:()=>p});var n=i(8300),r=i(3248),s=i(7533),o=i(4898);let a;const l=[];function h(t,e,i,n,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(n,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,n)+1,Math.max(i,r)),t.restore()}function c(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function u(t,e,i,r){const o=(0,s.transform)(i,e,t);let a=(0,s.getPointResolution)(e,r,i);const l=e.getMetersPerUnit();void 0!==l&&(a*=l);const h=t.getMetersPerUnit();void 0!==h&&(a/=h);const c=t.getExtent();if(!c||(0,n.b8)(c,o)){const e=(0,s.getPointResolution)(t,a,o)/a;isFinite(e)&&e>0&&(a/=e)}return a}function d(t,e,i,r){const s=(0,n.qg)(i);let o=u(t,e,s,r);return(!isFinite(o)||o<=0)&&(0,n.H6)(i,(function(i){return o=u(t,e,i,r),isFinite(o)&&o>0})),o}function p(t,e,i,s,u,d,p,f,g,m,_,y){const v=(0,r.E4)(Math.round(i*t),Math.round(i*e),l);if(y||(v.imageSmoothingEnabled=!1),0===g.length)return v.canvas;function x(t){return Math.round(t*i)/i}v.scale(i,i),v.globalCompositeOperation="lighter";const b=(0,n.lJ)();g.forEach((function(t,e,i){(0,n.l7)(b,t.extent)}));const E=(0,n.dz)(b),w=(0,n.Cr)(b),C=(0,r.E4)(Math.round(i*E/s),Math.round(i*w/s),l);y||(C.imageSmoothingEnabled=!1);const S=i/s;g.forEach((function(t,e,i){const r=t.extent[0]-b[0],s=-(t.extent[3]-b[3]),o=(0,n.dz)(t.extent),a=(0,n.Cr)(t.extent);t.image.width>0&&t.image.height>0&&C.drawImage(t.image,m,m,t.image.width-2*m,t.image.height-2*m,r*S,s*S,o*S,a*S)}));const T=(0,n.rL)(p);return f.getTriangles().forEach((function(t,e,n){const u=t.source,p=t.target;let f=u[0][0],g=u[0][1],m=u[1][0],_=u[1][1],E=u[2][0],w=u[2][1];const S=x((p[0][0]-T[0])/d),R=x(-(p[0][1]-T[1])/d),M=x((p[1][0]-T[0])/d),I=x(-(p[1][1]-T[1])/d),P=x((p[2][0]-T[0])/d),L=x(-(p[2][1]-T[1])/d),A=f,k=g;f=0,g=0,m-=A,_-=k,E-=A,w-=k;const O=[[m,_,0,0,M-S],[E,w,0,0,P-S],[0,0,m,_,I-R],[0,0,E,w,L-R]],N=(0,o.SV)(O);if(N){if(v.save(),v.beginPath(),function(){if(void 0===a){const t=(0,r.E4)(6,6,l);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",h(t,4,5,4,0),h(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;a=c(e,0)||c(e,4)||c(e,8),(0,r.jy)(t),l.push(t.canvas)}return a}()||!y){v.moveTo(M,I);const t=4,e=S-M,i=R-I;for(let n=0;n<t;n++)v.lineTo(M+x((n+1)*e/t),I+x(n*i/(t-1))),n!=t-1&&v.lineTo(M+x((n+1)*e/t),I+x((n+1)*i/(t-1)));v.lineTo(P,L)}else v.moveTo(M,I),v.lineTo(S,R),v.lineTo(P,L);v.clip(),v.transform(N[0],N[2],N[1],N[3],S,R),v.translate(b[0]-A,b[3]-k),v.scale(s/i,-s/i),v.drawImage(C.canvas,0,0),v.restore()}})),(0,r.jy)(C),l.push(C.canvas),_&&(v.save(),v.globalCompositeOperation="source-over",v.strokeStyle="black",v.lineWidth=1,f.getTriangles().forEach((function(t,e,i){const n=t.target,r=(n[0][0]-T[0])/d,s=-(n[0][1]-T[1])/d,o=(n[1][0]-T[0])/d,a=-(n[1][1]-T[1])/d,l=(n[2][0]-T[0])/d,h=-(n[2][1]-T[1])/d;v.beginPath(),v.moveTo(o,a),v.lineTo(r,s),v.lineTo(l,h),v.closePath(),v.stroke()})),v.restore()),v.canvas}},3250:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n=i(7045),r=i(2907),s=i(1971),o=i(5696),a=i(8084),l=i(3832),h=i(4898),c=i(3248),u=i(8300),d=i(9640);class p extends r.ZP{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:t.interpolate,transition:t.transition}),this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),i=this.targetTileGrid_.getExtent();let r=this.sourceTileGrid_.getExtent();const s=i?(0,u.Ed)(e,i):e;if(0===(0,u.bg)(s))return void(this.state=o.Z.EMPTY);const c=t.sourceProj,d=c.getExtent();d&&(r=r?(0,u.Ed)(r,d):d);const p=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),f=t.targetProj,g=(0,l.Co)(c,f,s,p);if(!isFinite(g)||g<=0)return void(this.state=o.Z.EMPTY);const m=void 0!==t.errorThreshold?t.errorThreshold:n.m;if(this.triangulation_=new a.Z(c,f,s,r,g*m,p),0===this.triangulation_.getTriangles().length)return void(this.state=o.Z.EMPTY);this.sourceZ_=this.sourceTileGrid_.getZForResolution(g);let _=this.triangulation_.calculateSourceExtent();if(r&&(c.canWrapX()?(_[1]=(0,h.uZ)(_[1],r[1],r[3]),_[3]=(0,h.uZ)(_[3],r[1],r[3])):_=(0,u.Ed)(_,r)),(0,u.bg)(_)){const e=this.sourceTileGrid_.getTileRangeForExtentAndZ(_,this.sourceZ_),i=t.getTileFunction;for(let t=e.minX;t<=e.maxX;t++)for(let n=e.minY;n<=e.maxY;n++){const e=i(this.sourceZ_,t,n,this.pixelRatio_);e&&this.sourceTiles_.push(e)}0===this.sourceTiles_.length&&(this.state=o.Z.EMPTY)}else this.state=o.Z.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{if(!e||e.getState()!==o.Z.LOADED)return;const i=e.getSize(),n=this.gutter_;let s;const a=(0,r.px)(e.getData());s=a||(0,r.qo)((0,r.G0)(e.getData()));const l=[i[0]+2*n,i[1]+2*n],h=s instanceof Float32Array,c=l[0]*l[1],u=h?Float32Array:Uint8Array,d=new u(s.buffer),p=u.BYTES_PER_ELEMENT,f=p*d.length/c,g=d.byteLength/l[1],m=Math.floor(g/p/l[0]),_=c*m;let y=d;if(d.length!==_){y=new u(_);let t=0,e=0;const i=l[0]*m;for(let n=0;n<l[1];++n){for(let n=0;n<i;++n)y[t++]=d[e+n];e+=g/p}}t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),data:new Uint8Array(y.buffer),dataType:u,bytesPerPixel:f,pixelSize:l})})),this.sourceTiles_.length=0,0===t.length)this.state=o.Z.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let u,d;const p=t[0].bytesPerPixel;for(let o=Math.ceil(p/3)-1;o>=0;--o){const e=[];for(let n=0,r=t.length;n<r;++n){const i=t[n],r=i.data,s=i.pixelSize,a=s[0],h=s[1],u=(0,c.E4)(a,h,l.rX),d=u.createImageData(a,h),f=d.data;let g=3*o;for(let t=0,e=f.length;t<e;t+=4)f[t]=r[g],f[t+1]=r[g+1],f[t+2]=r[g+2],f[t+3]=255,g+=p;u.putImageData(d,0,0),e.push({extent:i.extent,image:u.canvas})}const i=(0,l.sY)(n,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,h,this.triangulation_,e,this.gutter_,!1,!1);for(let t=0,n=e.length;t<n;++t){const i=e[t].image.getContext("2d");(0,c.jy)(i),l.rX.push(i.canvas)}const f=i.getContext("2d"),g=f.getImageData(0,0,i.width,i.height);(0,c.jy)(f),l.rX.push(i),u||(d=new Uint8Array(p*g.width*g.height),u=new t[0].dataType(d.buffer));const m=g.data;let _=3*o;for(let t=0,n=m.length;t<n;t+=4)255===m[t+3]?(d[_]=m[t],d[_+1]=m[t+1],d[_+2]=m[t+2]):(d[_]=0,d[_+1]=0,d[_+2]=0),_+=p}this.reprojData_=u,this.reprojSize_=[Math.round(n*this.pixelRatio_),Math.round(r*this.pixelRatio_)],this.state=o.Z.LOADED}this.changed()}load(){if(this.state!==o.Z.IDLE&&this.state!==o.Z.ERROR)return;this.state=o.Z.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const i=e.getState();if(i!==o.Z.IDLE&&i!==o.Z.LOADING)return;t++;const n=(0,d.oL)(e,s.Z.CHANGE,(function(){const i=e.getState();i!=o.Z.LOADED&&i!=o.Z.ERROR&&i!=o.Z.EMPTY||((0,d.bN)(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(n)})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t){t.getState()==o.Z.IDLE&&t.load()}))}unlistenSources_(){this.sourcesListenerKeys_.forEach(d.bN),this.sourcesListenerKeys_=null}}const f=p},9e3:(t,e,i)=>{"use strict";i.d(e,{Z:()=>f});var n=i(7045),r=i(1971),s=i(2779),o=i(5696),a=i(8084),l=i(3832),h=i(4898),c=i(8300),u=i(9640),d=i(3248);class p extends s.Z{constructor(t,e,i,r,s,u,d,p,f,g,m,_){super(s,o.Z.IDLE,{interpolate:!!_}),this.renderEdges_=void 0!==m&&m,this.pixelRatio_=d,this.gutter_=p,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=r,this.wrappedTileCoord_=u||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const y=r.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const b=v?(0,c.Ed)(y,v):y;if(0===(0,c.bg)(b))return void(this.state=o.Z.EMPTY);const E=t.getExtent();E&&(x=x?(0,c.Ed)(x,E):E);const w=r.getResolution(this.wrappedTileCoord_[0]),C=(0,l.Co)(t,i,b,w);if(!isFinite(C)||C<=0)return void(this.state=o.Z.EMPTY);const S=void 0!==g?g:n.m;if(this.triangulation_=new a.Z(t,i,b,x,C*S,w),0===this.triangulation_.getTriangles().length)return void(this.state=o.Z.EMPTY);this.sourceZ_=e.getZForResolution(C);let T=this.triangulation_.calculateSourceExtent();if(x&&(t.canWrapX()?(T[1]=(0,h.uZ)(T[1],x[1],x[3]),T[3]=(0,h.uZ)(T[3],x[1],x[3])):T=(0,c.Ed)(T,x)),(0,c.bg)(T)){const t=e.getTileRangeForExtentAndZ(T,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){const t=f(this.sourceZ_,e,i,d);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=o.Z.EMPTY)}else this.state=o.Z.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{e&&e.getState()==o.Z.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=o.Z.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n="number"==typeof i?i:i[0],r="number"==typeof i?i:i[1],s=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,l.sY)(n,r,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,h,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=o.Z.LOADED}this.changed()}load(){if(this.state==o.Z.IDLE){this.state=o.Z.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const i=e.getState();if(i==o.Z.IDLE||i==o.Z.LOADING){t++;const i=(0,u.oL)(e,r.Z.CHANGE,(function(n){const r=e.getState();r!=o.Z.LOADED&&r!=o.Z.ERROR&&r!=o.Z.EMPTY||((0,u.bN)(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(i)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,i){t.getState()==o.Z.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(u.bN),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,d.jy)(this.canvas_.getContext("2d")),l.rX.push(this.canvas_),this.canvas_=null),super.release()}}const f=p},8084:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(8300),r=i(7533),s=i(4898);const o=class{constructor(t,e,i,s,o,a){this.sourceProj_=t,this.targetProj_=e;let l={};const h=(0,r.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return l[e]||(l[e]=h(t)),l[e]},this.maxSourceExtent_=s,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!s&&!!this.sourceProj_.getExtent()&&(0,n.dz)(s)>=(0,n.dz)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,n.dz)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,n.dz)(this.targetProj_.getExtent()):null;const c=(0,n.rL)(i),u=(0,n.Xv)(i),d=(0,n.w$)(i),p=(0,n.hC)(i),f=this.transformInv_(c),g=this.transformInv_(u),m=this.transformInv_(d),_=this.transformInv_(p),y=10+(a?Math.max(0,Math.ceil(Math.log2((0,n.bg)(i)/(a*a*256*256)))):0);if(this.addQuad_(c,u,d,p,f,g,m,_,y),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,i,n){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);const n=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-n<this.sourceWorldWidth_/2&&(e.source=i)}}))}l={}}addTriangle_(t,e,i,n,r,s){this.triangles_.push({source:[n,r,s],target:[t,e,i]})}addQuad_(t,e,i,r,o,a,l,h,c){const u=(0,n.hI)([o,a,l,h]),d=this.sourceWorldWidth_?(0,n.dz)(u)/this.sourceWorldWidth_:null,p=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const s=(0,n.hI)([t,e,i,r]);g=(0,n.dz)(s)/this.targetWorldWidth_>.25||g}!f&&this.sourceProj_.isGlobal()&&d&&(g=d>.25||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!(0,n.kK)(u,this.maxSourceExtent_))return;let m=0;if(!(g||isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(h[0])&&isFinite(h[1])))if(c>0)g=!0;else if(m=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1),1!=m&&2!=m&&4!=m&&8!=m)return;if(c>0){if(!g){const e=[(t[0]+i[0])/2,(t[1]+i[1])/2],n=this.transformInv_(e);let r;if(f){r=((0,s.$W)(o[0],p)+(0,s.$W)(l[0],p))/2-(0,s.$W)(n[0],p)}else r=(o[0]+l[0])/2-n[0];const a=(o[1]+l[1])/2-n[1];g=r*r+a*a>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const n=[(e[0]+i[0])/2,(e[1]+i[1])/2],s=this.transformInv_(n),u=[(r[0]+t[0])/2,(r[1]+t[1])/2],d=this.transformInv_(u);this.addQuad_(t,e,n,u,o,a,s,d,c-1),this.addQuad_(u,n,i,r,d,s,l,h,c-1)}else{const n=[(t[0]+e[0])/2,(t[1]+e[1])/2],s=this.transformInv_(n),u=[(i[0]+r[0])/2,(i[1]+r[1])/2],d=this.transformInv_(u);this.addQuad_(t,n,u,r,o,s,d,h,c-1),this.addQuad_(n,e,i,u,s,a,l,d,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&m)&&this.addTriangle_(t,i,r,o,l,h),0==(14&m)&&this.addTriangle_(t,i,e,o,l,a),m&&(0==(13&m)&&this.addTriangle_(e,r,t,a,h,o),0==(7&m)&&this.addTriangle_(e,r,i,a,h,l))}calculateSourceExtent(){const t=(0,n.lJ)();return this.triangles_.forEach((function(e,i,r){const s=e.source;(0,n.Wj)(t,s[0]),(0,n.Wj)(t,s[1]),(0,n.Wj)(t,s[2])})),t}getTriangles(){return this.triangles_}}},7045:(t,e,i)=>{"use strict";i.d(e,{m:()=>n});const n=.5},5219:(t,e,i)=>{"use strict";i.d(e,{Gw:()=>a,YP:()=>s,gE:()=>o,h$:()=>r});var n=i(4898);function r(t){if(void 0!==t)return 0}function s(t){if(void 0!==t)return t}function o(t){const e=2*Math.PI/t;return function(t,i){return i?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function a(t){return t=t||(0,n.Yr)(5),function(e,i){return i?e:void 0!==e?Math.abs(e)<=t?0:e:void 0}}},7273:(t,e,i)=>{"use strict";function n(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]+2*e,i[1]=t[1]+2*e,i}function r(t){return t[0]>0&&t[1]>0}function s(t,e,i){return void 0===i&&(i=[0,0]),i[0]=t[0]*e+.5|0,i[1]=t[1]*e+.5|0,i}function o(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}i.d(e,{Pq:()=>o,bA:()=>s,f3:()=>n,py:()=>r})},9590:(t,e,i)=>{"use strict";i.r(e),i.d(e,{BingMaps:()=>u,CartoDB:()=>f,Cluster:()=>w,DataTile:()=>k,GeoTIFF:()=>si,IIIF:()=>vi,Image:()=>Di,ImageArcGISRest:()=>zi,ImageCanvas:()=>Bi,ImageMapGuide:()=>Ui,ImageStatic:()=>Vi,ImageWMS:()=>Hi,OSM:()=>Yi,Raster:()=>gn,Source:()=>Ii.Z,Stamen:()=>vn,Tile:()=>M.Z,TileArcGISRest:()=>bn,TileDebug:()=>En,TileImage:()=>s.Z,TileJSON:()=>wn.Z,TileWMS:()=>Sn,UTFGrid:()=>Ln,UrlTile:()=>Tn.Z,Vector:()=>y.default,VectorTile:()=>An.Z,WMTS:()=>On,XYZ:()=>p,Zoomify:()=>ui,sourcesFromTileGrid:()=>Nn});var n=i(4600),r=i(8300),s=i(6886),o=i(6671),a=i(9707),l=i(4687),h=i(7533);class c extends s.Z{constructor(t){const e=void 0!==t.hidpi&&t.hidpi;super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,opaque:!0,projection:(0,h.get)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=e,this.culture_=void 0!==t.culture?t.culture:"en-us",this.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet;const i="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(i).then((t=>t.json())).then((t=>this.handleImageryMetadataResponse(t)))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)return void this.setState("error");const e=t.resourceSets[0].resources[0],i=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,n=this.getProjection(),s=(0,l.Tl)(n),c=this.hidpi_?2:1,u=e.imageWidth==e.imageHeight?e.imageWidth/c:[e.imageWidth/c,e.imageHeight/c],d=(0,l.dl)({extent:s,minZoom:e.zoomMin,maxZoom:i,tileSize:u});this.tileGrid=d;const p=this.culture_,f=this.hidpi_;if(this.tileUrlFunction=(0,o.Un)(e.imageUrlSubdomains.map((function(t){const i=[0,0,0],n=e.imageUrl.replace("{subdomain}",t).replace("{culture}",p);return function(t,e,r){if(!t)return;(0,a.T9)(t[0],t[1],t[2],i);let s=n;return f&&(s+="&dpi=d1&device=mobile"),s.replace("{quadkey}",function(t){const e=t[0],i=new Array(e);let n,r,s=1<<e-1;for(n=0;n<e;++n)r=48,t[1]&s&&(r+=1),t[2]&s&&(r+=2),i[n]=String.fromCharCode(r),s>>=1;return i.join("")}(i))}}))),e.imageryProviders){const t=(0,h.getTransformFromProjections)((0,h.get)("EPSG:4326"),this.getProjection());this.setAttributions((i=>{const n=[],s=i.viewState,o=this.getTileGrid(),a=o.getZForResolution(s.resolution,this.zDirection),l=o.getTileCoordForCoordAndZ(s.center,a)[0];return e.imageryProviders.map((function(e){let s=!1;const o=e.coverageAreas;for(let n=0,a=o.length;n<a;++n){const e=o[n];if(l>=e.zoomMin&&l<=e.zoomMax){const n=e.bbox,o=[n[1],n[0],n[3],n[2]],a=(0,r.Ne)(o,t);if((0,r.kK)(a,i.extent)){s=!0;break}}}s&&n.push(e.attribution)})),n.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),n}))}this.setState("ready")}}const u=c;class d extends s.Z{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",i=void 0!==t.tileGrid?t.tileGrid:(0,l.dl)({extent:(0,l.Tl)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}}const p=d;const f=class extends p{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection}),this.account_=t.account,this.mapId_=t.map||"",this.config_=t.config||{},this.templateCache_={},this.initializeMap_()}getConfig(){return this.config_}updateConfig(t){Object.assign(this.config_,t),this.initializeMap_()}setConfig(t){this.config_=t||{},this.initializeMap_()}initializeMap_(){const t=JSON.stringify(this.config_);if(this.templateCache_[t])return void this.applyTemplate_(this.templateCache_[t]);let e="https://"+this.account_+".carto.com/api/v1/map";this.mapId_&&(e+="/named/"+this.mapId_);const i=new XMLHttpRequest;i.addEventListener("load",this.handleInitResponse_.bind(this,t)),i.addEventListener("error",this.handleInitError_.bind(this)),i.open("POST",e),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(this.config_))}handleInitResponse_(t,e){const i=e.target;if(!i.status||i.status>=200&&i.status<300){let e;try{e=JSON.parse(i.responseText)}catch(n){return void this.setState("error")}this.applyTemplate_(e),this.templateCache_[t]=e,this.setState("ready")}else this.setState("error")}handleInitError_(t){this.setState("error")}applyTemplate_(t){const e="https://"+t.cdn_url.https+"/"+this.account_+"/api/v1/map/"+t.layergroupid+"/{z}/{x}/{y}.png";this.setUrl(e)}};var g=i(1971),m=i(5983),_=i(6665),y=i(6098),v=i(6973),x=i(9141),b=i(3039);class E extends y.default{constructor(t){super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(t){const e=t.getGeometry();return(0,x.h)("Point"==e.getType(),10),e},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(g.Z.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(g.Z.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){const i=0===t?0:Math.min(e,t)/t,n=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=e,this.interpolationRatio=i,n&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const t=(0,r.lJ)(),e=this.distance*this.resolution,i=this.source.getFeatures(),n={};for(let s=0,o=i.length;s<o;s++){const o=i[s];if(!((0,b.sq)(o)in n)){const i=this.geometryFunction(o);if(i){const s=i.getCoordinates();(0,r.HK)(s,t),(0,r.f3)(t,e,t);const o=this.source.getFeaturesInExtent(t).filter((function(t){const e=(0,b.sq)(t);return!(e in n)&&(n[e]=!0,!0)}));this.features.push(this.createCluster(o,t))}}}}createCluster(t,e){const i=[0,0];for(let r=t.length-1;r>=0;--r){const e=this.geometryFunction(t[r]);e?(0,v.IH)(i,e.getCoordinates()):t.splice(r,1)}(0,v.bA)(i,1/t.length);const n=(0,r.qg)(e),s=this.interpolationRatio,o=new _.Z([i[0]*(1-s)+n[0]*s,i[1]*(1-s)+n[1]*s]);return this.createCustomCluster_?this.createCustomCluster_(o,t):new m.default({geometry:o,features:t})}}const w=E;var C=i(2907),S=i(3250),T=i(1454),R=i(1618),M=i(2984),I=i(5696),P=i(3556),L=i(7273);class A extends M.Z{constructor(t){const e=void 0===t.projection?"EPSG:3857":t.projection;let i=t.tileGrid;void 0===i&&e&&(i=(0,l.dl)({extent:(0,l.Tl)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:e,tileGrid:i,opaque:t.opaque,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.tileSize_=t.tileSize?(0,L.Pq)(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=void 0===t.bandCount?4:t.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const e=this.getTileGrid();return e?(0,L.Pq)(e.getTileSize(t)):[256,256]}getGutterForProjection(t){const e=this.getProjection();return!e||(0,h.equivalent)(e,t)?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,e,i,n,r){const s=this.getTileCacheForProjection(n),o=(0,a.lg)(t,e,i);if(s.containsKey(o)){const t=s.get(o);if(t&&t.key==this.getKey())return t}const l=this.getTileGrid(),h=Math.max.apply(null,l.getResolutions().map(((t,e)=>{const i=(0,L.Pq)(l.getTileSize(e)),n=this.getTileSize(e);return Math.max(n[0]/i[0],n[1]/i[1])}))),c=this.getTileGridForProjection(r),u=this.getTileGridForProjection(n),d=[t,e,i],p=this.getTileCoordForTileUrlFunction(d,n),f=Object.assign({sourceProj:r,sourceTileGrid:c,targetProj:n,targetTileGrid:u,tileCoord:d,wrappedTileCoord:p,pixelRatio:h,gutter:this.getGutterForProjection(r),getTileFunction:(t,e,i,n)=>this.getTile(t,e,i,n,r)},this.tileOptions),g=new S.Z(f);return g.key=this.getKey(),g}getTile(t,e,i,n,r){const s=this.getProjection();if(s&&r&&!(0,h.equivalent)(s,r))return this.getReprojTile_(t,e,i,r,s);const o=this.getTileSize(t),l=(0,a.lg)(t,e,i);if(this.tileCache.containsKey(l))return this.tileCache.get(l);const c=this.loader_;const u=Object.assign({tileCoord:[t,e,i],loader:function(){return(0,P.Vi)((function(){return c(t,e,i)}))},size:o},this.tileOptions),d=new C.ZP(u);return d.key=this.getKey(),d.addEventListener(g.Z.CHANGE,this.handleTileChange_),this.tileCache.set(l,d),d}handleTileChange_(t){const e=t.target,i=(0,b.sq)(e),n=e.getState();let r;n==I.Z.LOADING?(this.tileLoadingKeys_[i]=!0,r=R.Z.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],r=n==I.Z.ERROR?R.Z.TILELOADERROR:n==I.Z.LOADED?R.Z.TILELOADEND:void 0),r&&this.dispatchEvent(new M.s(r,e))}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,h.equivalent)(e,t)))return this.tileGrid;const i=(0,b.sq)(t);return i in this.tileGridForProjection_||(this.tileGridForProjection_[i]=(0,l.X$)(t)),this.tileGridForProjection_[i]}setTileGridForProjection(t,e){const i=(0,h.get)(t);if(i){const t=(0,b.sq)(i);t in this.tileGridForProjection_||(this.tileGridForProjection_[t]=e)}}getTileCacheForProjection(t){const e=this.getProjection();if(!e||(0,h.equivalent)(e,t))return this.tileCache;const i=(0,b.sq)(t);return i in this.tileCacheForProjection_||(this.tileCacheForProjection_[i]=new T.Z(.1)),this.tileCacheForProjection_[i]}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const n in this.tileCacheForProjection_){const t=this.tileCacheForProjection_[n];t.expireCache(t==i?e:{})}}clear(){super.clear();for(const t in this.tileCacheForProjection_)this.tileCacheForProjection_[t].clear()}}const k=A;var O=i(4458),N=i(4242);const F=new Map;function D(t,e){Array.isArray(t)||(t=[t]),t.forEach((t=>F.set(t,e)))}async function Z(t){const e=F.get(t.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${t.Compression}`);return new(await e())(t)}D([void 0,1],(()=>i.e(8677).then(i.bind(i,8677)).then((t=>t.default)))),D(5,(()=>i.e(7458).then(i.bind(i,7458)).then((t=>t.default)))),D(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),D(7,(()=>i.e(9257).then(i.bind(i,9257)).then((t=>t.default)))),D([8,32946],(()=>Promise.all([i.e(7624),i.e(3162)]).then(i.bind(i,3162)).then((t=>t.default)))),D(32773,(()=>i.e(3952).then(i.bind(i,3952)).then((t=>t.default)))),D(34887,(()=>Promise.all([i.e(7624),i.e(9542)]).then(i.bind(i,9542)).then((t=>t.default)))),D(50001,(()=>i.e(8705).then(i.bind(i,8705)).then((t=>t.default))));const j="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2;const z=class{constructor(t=j,e){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise((t=>{i.e(2887).then(i.bind(i,2887)).then((e=>{t(e.create)}))})),this._awaitingDecoder.then((e=>{this._awaitingDecoder=null,this.workers=[];for(let i=0;i<t;i++)this.workers.push({worker:e(),idle:!0})})))}async decode(t,e){return this._awaitingDecoder&&await this._awaitingDecoder,0===this.size?Z(t).then((i=>i.decode(t,e))):new Promise((i=>{const n=this.workers.find((t=>t.idle))||this.workers[Math.floor(Math.random()*this.size)];n.idle=!1;const r=this.messageId++,s=t=>{t.data.id===r&&(n.idle=!0,i(t.data.decoded),n.worker.removeEventListener("message",s))};n.worker.addEventListener("message",s),n.worker.postMessage({fileDirectory:t,buffer:e,id:r},[e])}))}destroy(){this.workers&&(this.workers.forEach((t=>{t.worker.terminate()})),this.workers=null)}};function G(t){return(e,...i)=>U(t,e,i)}function B(t,e){return G(X(t,e).get)}const{apply:U,construct:V,defineProperty:q,get:W,getOwnPropertyDescriptor:X,getPrototypeOf:H,has:K,ownKeys:Y,set:$,setPrototypeOf:J}=Reflect,{MAX_SAFE_INTEGER:Q,isFinite:tt,isNaN:et}=Number,{iterator:it,species:nt,toStringTag:rt,for:st}=Symbol,ot=Object,{create:at,defineProperty:lt,freeze:ht,is:ct}=ot,ut=ot.prototype,dt=(ut.__lookupGetter__&&G(ut.__lookupGetter__),ot.hasOwn||G(ut.hasOwnProperty)),pt=Array,ft=(pt.isArray,pt.prototype),gt=(G(ft.join),G(ft.push),G(ft.toLocaleString),ft[it]),mt=G(gt),_t=(Math.trunc,ArrayBuffer),yt=(_t.isView,_t.prototype),vt=(G(yt.slice),B(yt,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),xt=(vt&&B(vt.prototype,"byteLength"),H(Uint8Array)),bt=(xt.from,xt.prototype),Et=(bt[it],G(bt.keys),G(bt.values),G(bt.entries),G(bt.set),G(bt.reverse),G(bt.fill),G(bt.copyWithin),G(bt.sort),G(bt.slice),G(bt.subarray),B(bt,"buffer"),B(bt,"byteOffset"),B(bt,"length"),B(bt,rt),Uint32Array),wt=Float32Array,Ct=H([][it]()),St=G(Ct.next),Tt=G(function*(){}().next),Rt=H(Ct),Mt=DataView.prototype,It=G(Mt.getUint16),Pt=(G(Mt.setUint16),TypeError),Lt=WeakSet.prototype,At=(G(Lt.add),G(Lt.has),WeakMap),kt=At.prototype,Ot=G(kt.get),Nt=(G(kt.has),G(kt.set)),Ft=new At,Dt=at(null,{next:{value:function(){const t=Ot(Ft,this);return St(t)}},[it]:{value:function(){return this}}});const Zt=new At,jt=at(Rt,{next:{value:function(){const t=Ot(Zt,this);return Tt(t)},writable:!0,configurable:!0}});for(const Dn of Y(Ct))"next"!==Dn&&lt(jt,Dn,X(Ct,Dn));const zt=new _t(4),Gt=new wt(zt),Bt=new Et(zt),Ut=new Et(512),Vt=new Et(512);for(let Dn=0;Dn<256;++Dn){const t=Dn-127;t<-27?(Ut[Dn]=0,Ut[256|Dn]=32768,Vt[Dn]=24,Vt[256|Dn]=24):t<-14?(Ut[Dn]=1024>>-t-14,Ut[256|Dn]=1024>>-t-14|32768,Vt[Dn]=-t-1,Vt[256|Dn]=-t-1):t<=15?(Ut[Dn]=t+15<<10,Ut[256|Dn]=t+15<<10|32768,Vt[Dn]=13,Vt[256|Dn]=13):t<128?(Ut[Dn]=31744,Ut[256|Dn]=64512,Vt[Dn]=24,Vt[256|Dn]=24):(Ut[Dn]=31744,Ut[256|Dn]=64512,Vt[Dn]=13,Vt[256|Dn]=13)}const qt=new Et(2048),Wt=new Et(64),Xt=new Et(64);for(let Dn=1;Dn<1024;++Dn){let t=Dn<<13,e=0;for(;0==(8388608&t);)t<<=1,e-=8388608;t&=-8388609,e+=947912704,qt[Dn]=t|e}for(let Dn=1024;Dn<2048;++Dn)qt[Dn]=939524096+(Dn-1024<<13);for(let Dn=1;Dn<31;++Dn)Wt[Dn]=Dn<<23;Wt[31]=1199570944,Wt[32]=2147483648;for(let Dn=33;Dn<63;++Dn)Wt[Dn]=2147483648+(Dn-32<<23);Wt[63]=3347054592;for(let Dn=1;Dn<64;++Dn)32!==Dn&&(Xt[Dn]=1024);function Ht(t,e,...i){return function(t){const e=t>>10;return Bt[0]=qt[Xt[e]+(1023&t)]+Wt[e],Gt[0]}(It(t,e,...function(t){if(t[it]===gt&&Ct.next===St)return t;const e=at(Dt);return Nt(Ft,e,mt(t)),e}(i)))}var Kt=i(2113),Yt=i(5670);function $t(t,e,i,n=1){return new(Object.getPrototypeOf(t).constructor)(e*i*n)}function Jt(t,e,i){return(1-i)*t+i*e}function Qt(t,e,i,n,r,s="nearest"){switch(s.toLowerCase()){case"nearest":return function(t,e,i,n,r){const s=e/n,o=i/r;return t.map((t=>{const a=$t(t,n,r);for(let l=0;l<r;++l){const r=Math.min(Math.round(o*l),i-1);for(let i=0;i<n;++i){const o=Math.min(Math.round(s*i),e-1),h=t[r*e+o];a[l*n+i]=h}}return a}))}(t,e,i,n,r);case"bilinear":case"linear":return function(t,e,i,n,r){const s=e/n,o=i/r;return t.map((t=>{const a=$t(t,n,r);for(let l=0;l<r;++l){const r=o*l,h=Math.floor(r),c=Math.min(Math.ceil(r),i-1);for(let i=0;i<n;++i){const o=s*i,u=o%1,d=Math.floor(o),p=Math.min(Math.ceil(o),e-1),f=t[h*e+d],g=t[h*e+p],m=t[c*e+d],_=t[c*e+p],y=Jt(Jt(f,g,u),Jt(m,_,u),r%1);a[l*n+i]=y}}return a}))}(t,e,i,n,r);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function te(t,e,i,n,r,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return function(t,e,i,n,r,s){const o=e/n,a=i/r,l=$t(t,n,r,s);for(let h=0;h<r;++h){const r=Math.min(Math.round(a*h),i-1);for(let i=0;i<n;++i){const a=Math.min(Math.round(o*i),e-1);for(let o=0;o<s;++o){const c=t[r*e*s+a*s+o];l[h*n*s+i*s+o]=c}}}return l}(t,e,i,n,r,s);case"bilinear":case"linear":return function(t,e,i,n,r,s){const o=e/n,a=i/r,l=$t(t,n,r,s);for(let h=0;h<r;++h){const r=a*h,c=Math.floor(r),u=Math.min(Math.ceil(r),i-1);for(let i=0;i<n;++i){const a=o*i,d=a%1,p=Math.floor(a),f=Math.min(Math.ceil(a),e-1);for(let o=0;o<s;++o){const a=t[c*e*s+p*s+o],g=t[c*e*s+f*s+o],m=t[u*e*s+p*s+o],_=t[u*e*s+f*s+o],y=Jt(Jt(a,g,d),Jt(m,_,d),r%1);l[h*n*s+i*s+o]=y}}}return l}(t,e,i,n,r,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function ee(t,e,i){let n=0;for(let r=e;r<i;++r)n+=t[r];return n}function ie(t,e,i){switch(t){case 1:if(e<=8)return new Uint8Array(i);if(e<=16)return new Uint16Array(i);if(e<=32)return new Uint32Array(i);break;case 2:if(8===e)return new Int8Array(i);if(16===e)return new Int16Array(i);if(32===e)return new Int32Array(i);break;case 3:switch(e){case 16:case 32:return new Float32Array(i);case 64:return new Float64Array(i)}}throw Error("Unsupported data format/bitsPerSample")}const ne=class{constructor(t,e,i,n,r,s){this.fileDirectory=t,this.geoKeys=e,this.dataView=i,this.littleEndian=n,this.tiles=r?{}:null,this.isTiled=!t.StripOffsets;const o=t.PlanarConfiguration;if(this.planarConfiguration=void 0===o?1:o,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,i=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(i<=8)return DataView.prototype.getUint8;if(i<=16)return DataView.prototype.getUint16;if(i<=32)return DataView.prototype.getUint32;break;case 2:if(i<=8)return DataView.prototype.getInt8;if(i<=16)return DataView.prototype.getInt16;if(i<=32)return DataView.prototype.getInt32;break;case 3:switch(i){case 16:return function(t,e){return Ht(this,t,e)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){return ie(this.getSampleFormat(t),this.getBitsPerSample(t),e)}async getTileOrStrip(t,e,i,n,r){const s=Math.ceil(this.getWidth()/this.getTileWidth()),o=Math.ceil(this.getHeight()/this.getTileHeight());let a;const{tiles:l}=this;let h,c;1===this.planarConfiguration?a=e*s+t:2===this.planarConfiguration&&(a=i*s*o+e*s+t),this.isTiled?(h=this.fileDirectory.TileOffsets[a],c=this.fileDirectory.TileByteCounts[a]):(h=this.fileDirectory.StripOffsets[a],c=this.fileDirectory.StripByteCounts[a]);const u=(await this.source.fetch([{offset:h,length:c}],r))[0];let d;return null!==l&&l[a]?d=l[a]:(d=(async()=>{let t=await n.decode(this.fileDirectory,u);const i=this.getSampleFormat(),r=this.getBitsPerSample();return function(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!=0)&&(3!==t||16!==e&&32!==e&&64!==e)}(i,r)&&(t=function(t,e,i,n,r,s,o){const a=new DataView(t),l=2===i?1:n,h=ie(e,r,2===i?o*s:o*s*n),c=parseInt("1".repeat(r),2);if(1===e){let t;t=1===i?n*r:r;let e=s*t;0!=(7&e)&&(e=e+7&-8);for(let i=0;i<o;++i){const t=i*e;for(let e=0;e<s;++e){const n=t+e*l*r;for(let t=0;t<l;++t){const o=n+t*r,u=(i*s+e)*l+t,d=Math.floor(o/8),p=o%8;if(p+r<=8)h[u]=a.getUint8(d)>>8-r-p&c;else if(p+r<=16)h[u]=a.getUint16(d)>>16-r-p&c;else if(p+r<=24){const t=a.getUint16(d)<<8|a.getUint8(d+2);h[u]=t>>24-r-p&c}else h[u]=a.getUint32(d)>>32-r-p&c}}}}return h.buffer}(t,i,this.planarConfiguration,this.getSamplesPerPixel(),r,this.getTileWidth(),this.getBlockHeight(e))),t})(),null!==l&&(l[a]=d)),{x:t,y:e,sample:i,data:await d}}async _readRaster(t,e,i,n,r,s,o,a,l){const h=this.getTileWidth(),c=this.getTileHeight(),u=this.getWidth(),d=this.getHeight(),p=Math.max(Math.floor(t[0]/h),0),f=Math.min(Math.ceil(t[2]/h),Math.ceil(u/h)),g=Math.max(Math.floor(t[1]/c),0),m=Math.min(Math.ceil(t[3]/c),Math.ceil(d/c)),_=t[2]-t[0];let y=this.getBytesPerPixel();const v=[],x=[];for(let w=0;w<e.length;++w)1===this.planarConfiguration?v.push(ee(this.fileDirectory.BitsPerSample,0,e[w])/8):v.push(0),x.push(this.getReaderForSample(e[w]));const b=[],{littleEndian:E}=this;for(let w=g;w<m;++w)for(let s=p;s<f;++s)for(let o=0;o<e.length;++o){const a=o,p=e[o];2===this.planarConfiguration&&(y=this.getSampleByteSize(o));const f=this.getTileOrStrip(s,w,p,r,l).then((r=>{const s=r.data,o=new DataView(s),l=this.getBlockHeight(r.y),p=r.y*c,f=r.x*h,g=p+l,m=(r.x+1)*h,b=x[a],w=Math.min(l,l-(g-t[3]),d-p),C=Math.min(h,h-(m-t[2]),u-f);for(let c=Math.max(0,t[1]-p);c<w;++c)for(let r=Math.max(0,t[0]-f);r<C;++r){const s=(c*h+r)*y,l=b.call(o,s+v[a],E);let u;n?(u=(c+p-t[1])*_*e.length+(r+f-t[0])*e.length+a,i[u]=l):(u=(c+p-t[1])*_+r+f-t[0],i[a][u]=l)}}));b.push(f)}if(await Promise.all(b),s&&t[2]-t[0]!==s||o&&t[3]-t[1]!==o){let r;return r=n?te(i,t[2]-t[0],t[3]-t[1],s,o,e.length,a):Qt(i,t[2]-t[0],t[3]-t[1],s,o,a),r.width=s,r.height=o,r}return i.width=s||t[2]-t[0],i.height=o||t[3]-t[1],i}async readRasters({window:t,samples:e=[],interleave:i,pool:n=null,width:r,height:s,resampleMethod:o,fillValue:a,signal:l}={}){const h=t||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const c=(h[2]-h[0])*(h[3]-h[1]),u=this.getSamplesPerPixel();if(e&&e.length){for(let f=0;f<e.length;++f)if(e[f]>=u)return Promise.reject(new RangeError(`Invalid sample index '${e[f]}'.`))}else for(let f=0;f<u;++f)e.push(f);let d;if(i){d=ie(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),c*e.length),a&&d.fill(a)}else{d=[];for(let t=0;t<e.length;++t){const i=this.getArrayForSample(e[t],c);Array.isArray(a)&&t<a.length?i.fill(a[t]):a&&!Array.isArray(a)&&i.fill(a),d.push(i)}}const p=n||await Z(this.fileDirectory);return await this._readRaster(h,e,d,i,p,r,s,o,l)}async readRGB({window:t,interleave:e=!0,pool:i=null,width:n,height:r,resampleMethod:s,enableAlpha:o=!1,signal:a}={}){const l=t||[0,0,this.getWidth(),this.getHeight()];if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");const h=this.fileDirectory.PhotometricInterpretation;if(h===N.Ie.RGB){let l=[0,1,2];if(this.fileDirectory.ExtraSamples!==N.pd.Unspecified&&o){l=[];for(let t=0;t<this.fileDirectory.BitsPerSample.length;t+=1)l.push(t)}return this.readRasters({window:t,interleave:e,samples:l,pool:i,width:n,height:r,resampleMethod:s,signal:a})}let c;switch(h){case N.Ie.WhiteIsZero:case N.Ie.BlackIsZero:case N.Ie.Palette:c=[0];break;case N.Ie.CMYK:c=[0,1,2,3];break;case N.Ie.YCbCr:case N.Ie.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const u={window:l,interleave:!0,samples:c,pool:i,width:n,height:r,resampleMethod:s,signal:a},{fileDirectory:d}=this,p=await this.readRasters(u),f=2**this.fileDirectory.BitsPerSample[0];let g;switch(h){case N.Ie.WhiteIsZero:g=function(t,e){const{width:i,height:n}=t,r=new Uint8Array(i*n*3);let s;for(let o=0,a=0;o<t.length;++o,a+=3)s=256-t[o]/e*256,r[a]=s,r[a+1]=s,r[a+2]=s;return r}(p,f);break;case N.Ie.BlackIsZero:g=function(t,e){const{width:i,height:n}=t,r=new Uint8Array(i*n*3);let s;for(let o=0,a=0;o<t.length;++o,a+=3)s=t[o]/e*256,r[a]=s,r[a+1]=s,r[a+2]=s;return r}(p,f);break;case N.Ie.Palette:g=function(t,e){const{width:i,height:n}=t,r=new Uint8Array(i*n*3),s=e.length/3,o=e.length/3*2;for(let a=0,l=0;a<t.length;++a,l+=3){const i=t[a];r[l]=e[i]/65536*256,r[l+1]=e[i+s]/65536*256,r[l+2]=e[i+o]/65536*256}return r}(p,d.ColorMap);break;case N.Ie.CMYK:g=function(t){const{width:e,height:i}=t,n=new Uint8Array(e*i*3);for(let r=0,s=0;r<t.length;r+=4,s+=3){const e=t[r],i=t[r+1],o=t[r+2],a=t[r+3];n[s]=(255-e)/256*255*((255-a)/256),n[s+1]=(255-i)/256*255*((255-a)/256),n[s+2]=(255-o)/256*255*((255-a)/256)}return n}(p);break;case N.Ie.YCbCr:g=function(t){const{width:e,height:i}=t,n=new Uint8ClampedArray(e*i*3);for(let r=0,s=0;r<t.length;r+=3,s+=3){const e=t[r],i=t[r+1],o=t[r+2];n[s]=e+1.402*(o-128),n[s+1]=e-.34414*(i-128)-.71414*(o-128),n[s+2]=e+1.772*(i-128)}return n}(p);break;case N.Ie.CIELab:g=function(t){const{width:e,height:i}=t,n=new Uint8Array(e*i*3);for(let r=0,s=0;r<t.length;r+=3,s+=3){let e,i,o,a=(t[r+0]+16)/116,l=(t[r+1]<<24>>24)/500+a,h=a-(t[r+2]<<24>>24)/200;l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),a=1*(a*a*a>.008856?a*a*a:(a-16/116)/7.787),h=1.08883*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),e=3.2406*l+-1.5372*a+-.4986*h,i=-.9689*l+1.8758*a+.0415*h,o=.0557*l+-.204*a+1.057*h,e=e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,n[s]=255*Math.max(0,Math.min(1,e)),n[s+1]=255*Math.max(0,Math.min(1,i)),n[s+2]=255*Math.max(0,Math.min(1,o))}return n}(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!e){const t=new Uint8Array(g.length/3),e=new Uint8Array(g.length/3),i=new Uint8Array(g.length/3);for(let n=0,r=0;n<g.length;n+=3,++r)t[r]=g[n],e[r]=g[n+1],i[r]=g[n+2];g=[t,e,i]}return g.width=p.width,g.height=p.height,g}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){const e={};if(!this.fileDirectory.GDAL_METADATA)return null;const i=this.fileDirectory.GDAL_METADATA;let n=Yt(i,"Item");n=null===t?n.filter((t=>void 0===Kt(t,"sample"))):n.filter((e=>Number(Kt(e,"sample"))===t));for(let r=0;r<n.length;++r){const t=n[r];e[Kt(t,"name")]=t.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(i)return[i[0],i[5],i[10]];if(t){const[e,i,n]=t.getResolution();return[e*t.getWidth()/this.getWidth(),i*t.getHeight()/this.getHeight(),n*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(){const t=this.getOrigin(),e=this.getResolution(),i=t[0],n=t[1],r=i+e[0]*this.getWidth(),s=n+e[1]*this.getHeight();return[Math.min(i,r),Math.min(n,s),Math.max(i,r),Math.max(n,s)]}};class re{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const i=this.getUint32(t,e),n=this.getUint32(t+4,e);let r;if(e){if(r=i+2**32*n,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*i+n,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}getInt64(t,e){let i=0;const n=(128&this._dataView.getUint8(t+(e?7:0)))>0;let r=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(t+(e?s:7-s));n&&(r?0!==o&&(o=255&~(o-1),r=!1):o=255&~o),i+=o*256**s}return n&&(i=-i),i}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return Ht(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class se{constructor(t,e,i,n){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=i,this._bigTiff=n}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),i=this.readUint32(t+4);let n;if(this._littleEndian){if(n=e+2**32*i,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}if(n=2**32*e+i,!Number.isSafeInteger(n))throw new Error(`${n} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return n}readInt64(t){let e=0;const i=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0;let n=!0;for(let r=0;r<8;r++){let s=this._dataView.getUint8(t+(this._littleEndian?r:7-r));i&&(n?0!==s&&(s=255&~(s-1),n=!1):s=255&~s),e+=s*256**r}return i&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const oe="\r\n\r\n";function ae(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);const e={};for(const[i,n]of t)e[i.toLowerCase()]=n;return e}function le(t){return ae(t.split("\r\n").map((t=>{const e=t.split(":").map((t=>t.trim()));return e[0]=e[0].toLowerCase(),e})))}function he(t){let e,i,n;return t&&([,e,i,n]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),i=parseInt(i,10),n=parseInt(n,10)),{start:e,end:i,total:n}}class ce{async fetch(t,e=void 0){return Promise.all(t.map((t=>this.fetchSlice(t,e))))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class ue extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof t.maxAge&&0===t.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if("function"==typeof this.onEviction)for(const[e,i]of t)this.onEviction(e,i.value)}_deleteIfExpired(t,e){return"number"==typeof e.expiry&&e.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(t,e.value),this.delete(t))}_getOrDeleteIfExpired(t,e){if(!1===this._deleteIfExpired(t,e))return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const i=e.get(t);return this._getItemValue(t,i)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,i]=t;if(!this.cache.has(e)){!1===this._deleteIfExpired(e,i)&&(yield t)}}for(const t of this.cache){const[e,i]=t;!1===this._deleteIfExpired(e,i)&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t);return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t);if(!1===this._deleteIfExpired(t,e))return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:i=this.maxAge}={}){const n="number"==typeof i&&i!==Number.POSITIVE_INFINITY?Date.now()+i:void 0;this.cache.has(t)?this.cache.set(t,{value:e,expiry:n}):this._set(t,{value:e,expiry:n})}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):!!this.oldCache.has(t)&&!this._deleteIfExpired(t,this.oldCache.get(t))}peek(t){return this.cache.has(t)?this._peek(t,this.cache):this.oldCache.has(t)?this._peek(t,this.oldCache):void 0}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...this._entriesAscending()],i=e.length-t;i<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(i>0&&this._emitEvictions(e.slice(0,i)),this.oldCache=new Map(e.slice(i)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,i]=t;!1===this._deleteIfExpired(e,i)&&(yield[e,i.value])}for(const t of this.oldCache){const[e,i]=t;if(!this.cache.has(e)){!1===this._deleteIfExpired(e,i)&&(yield[e,i.value])}}}*entriesDescending(){let t=[...this.cache];for(let e=t.length-1;e>=0;--e){const i=t[e],[n,r]=i;!1===this._deleteIfExpired(n,r)&&(yield[n,r.value])}t=[...this.oldCache];for(let e=t.length-1;e>=0;--e){const i=t[e],[n,r]=i;if(!this.cache.has(n)){!1===this._deleteIfExpired(n,r)&&(yield[n,r.value])}}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[i,n]of this.entriesAscending())t.call(e,n,i,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class de extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,de),this.name="AbortError"}}class pe extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const fe=pe;class ge{constructor(t,e,i=null){this.offset=t,this.length=e,this.data=i}get top(){return this.offset+this.length}}class me{constructor(t,e,i){this.offset=t,this.length=e,this.blockIds=i}}class _e extends ce{constructor(t,{blockSize:e=65536,cacheSize:i=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new ue({maxSize:i,onEviction:(t,e)=>{this.evictedBlocks.set(t,e)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const i=[],n=[],r=[];this.evictedBlocks.clear();for(const{offset:u,length:d}of t){let t=u+d;const{fileSize:e}=this;null!==e&&(t=Math.min(t,e));for(let s=Math.floor(u/this.blockSize)*this.blockSize;s<t;s+=this.blockSize){const t=Math.floor(s/this.blockSize);this.blockCache.has(t)||this.blockRequests.has(t)||(this.blockIdsToFetch.add(t),n.push(t)),this.blockRequests.has(t)&&i.push(this.blockRequests.get(t)),r.push(t)}}await async function(t){return new Promise((e=>setTimeout(e,t)))}(),this.fetchBlocks(e);const s=[];for(const u of n)this.blockRequests.has(u)&&s.push(this.blockRequests.get(u));await Promise.allSettled(i),await Promise.allSettled(s);const o=[],a=r.filter((t=>this.abortedBlockIds.has(t)||!this.blockCache.has(t)));if(a.forEach((t=>this.blockIdsToFetch.add(t))),a.length>0&&e&&!e.aborted){this.fetchBlocks(null);for(const t of a){const e=this.blockRequests.get(t);if(!e)throw new Error(`Block ${t} is not in the block requests`);o.push(e)}await Promise.allSettled(o)}if(e&&e.aborted)throw new de("Request was aborted");const l=r.map((t=>this.blockCache.get(t)||this.evictedBlocks.get(t))),h=l.filter((t=>!t));if(h.length)throw new fe(h,"Request failed");const c=new Map(function(t,e){const i=Array.isArray(t)?t:Array.from(t),n=Array.isArray(e)?e:Array.from(e);return i.map(((t,e)=>[t,n[e]]))}(r,l));return this.readSliceData(t,c)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),i=this.source.fetch(e,t);for(let n=0;n<e.length;++n){const r=e[n];for(const e of r.blockIds)this.blockRequests.set(e,(async()=>{try{const t=(await i)[n],r=e*this.blockSize,s=r-t.offset,o=Math.min(s+this.blockSize,t.data.byteLength),a=t.data.slice(s,o),l=new ge(r,a.byteLength,a,e);this.blockCache.set(e,l),this.abortedBlockIds.delete(e)}catch(r){if("AbortError"!==r.name)throw r;r.signal=t,this.blockCache.delete(e),this.abortedBlockIds.add(e)}finally{this.blockRequests.delete(e)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort(((t,e)=>t-e));if(0===e.length)return[];let i=[],n=null;const r=[];for(const s of e)null===n||n+1===s?(i.push(s),n=s):(r.push(new me(i[0]*this.blockSize,i.length*this.blockSize,i)),i=[s],n=s);return r.push(new me(i[0]*this.blockSize,i.length*this.blockSize,i)),r}readSliceData(t,e){return t.map((t=>{let i=t.offset+t.length;null!==this.fileSize&&(i=Math.min(this.fileSize,i));const n=Math.floor(t.offset/this.blockSize),r=Math.floor(i/this.blockSize),s=new ArrayBuffer(t.length),o=new Uint8Array(s);for(let a=n;a<=r;++a){const n=e.get(a),r=n.offset-t.offset;let s,l=0,h=0;r<0?l=-r:r>0&&(h=r),s=n.top-i<0?n.length-l:i-n.offset-l;const c=new Uint8Array(n.data,l,s);o.set(c,h)}return s}))}}class ye{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class ve{constructor(t){this.url=t}async request({headers:t,credentials:e,signal:i}={}){throw new Error("request is not implemented")}}class xe extends ye{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class be extends ve{constructor(t,e){super(t),this.credentials=e}async request({headers:t,credentials:e,signal:i}={}){const n=await fetch(this.url,{headers:t,credentials:e,signal:i});return new xe(n)}}class Ee extends ye{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class we extends ve{constructRequest(t,e){return new Promise(((i,n)=>{const r=new XMLHttpRequest;r.open("GET",this.url),r.responseType="arraybuffer";for(const[e,s]of Object.entries(t))r.setRequestHeader(e,s);r.onload=()=>{const t=r.response;i(new Ee(r,t))},r.onerror=n,r.onabort=()=>n(new de("Request aborted")),r.send(),e&&(e.aborted&&r.abort(),e.addEventListener("abort",(()=>r.abort())))}))}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}var Ce=i(9311),Se=i(4150),Te=i(1561);class Re extends ye{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class Me extends ve{constructor(t){super(t),this.parsedUrl=Te.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?Ce:Se}constructRequest(t,e){return new Promise(((i,n)=>{const r=this.httpApi.get({...this.parsedUrl,headers:t},(t=>{const e=new Promise((e=>{const i=[];t.on("data",(t=>{i.push(t)})),t.on("end",(()=>{const t=Buffer.concat(i).buffer;e(t)})),t.on("error",n)}));i(new Re(t,e))}));r.on("error",n),e&&(e.aborted&&r.destroy(new de("Request aborted")),e.addEventListener("abort",(()=>r.destroy(new de("Request aborted")))))}))}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}class Ie extends ce{constructor(t,e,i,n){super(),this.client=t,this.headers=e,this.maxRanges=i,this.allowFullFile=n,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length,Promise.all(t.map((t=>this.fetchSlice(t,e)))))}async fetchSlices(t,e){const i=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map((({offset:t,length:e})=>`${t}-${t+e}`)).join(",")}`},signal:e});if(i.ok){if(206===i.status){const{type:n,params:r}=function(t){const[e,...i]=t.split(";").map((t=>t.trim()));return{type:e,params:ae(i.map((t=>t.split("="))))}}(i.getHeader("content-type"));if("multipart/byteranges"===n){const t=function(t,e){let i=null;const n=new TextDecoder("ascii"),r=[],s=`--${e}`,o=`${s}--`;for(let a=0;a<10;++a)n.decode(new Uint8Array(t,a,s.length))===s&&(i=a);if(null===i)throw new Error("Could not find initial boundary");for(;i<t.byteLength;){const e=n.decode(new Uint8Array(t,i,Math.min(s.length+1024,t.byteLength-i)));if(0===e.length||e.startsWith(o))break;if(!e.startsWith(s))throw new Error("Part does not start with boundary");const a=e.substr(s.length+2);if(0===a.length)break;const l=a.indexOf(oe),h=le(a.substr(0,l)),{start:c,end:u,total:d}=he(h["content-range"]),p=i+s.length+l+4,f=parseInt(u,10)+1-parseInt(c,10);r.push({headers:h,data:t.slice(p,p+f),offset:c,length:f,fileSize:d}),i=p+f+4}return r}(await i.getData(),r.boundary);return this._fileSize=t[0].fileSize||null,t}const s=await i.getData(),{start:o,end:a,total:l}=he(i.getHeader("content-range"));this._fileSize=l||null;const h=[{data:s,offset:o,length:a-o}];if(t.length>1){const i=await Promise.all(t.slice(1).map((t=>this.fetchSlice(t,e))));return h.concat(i)}return h}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await i.getData();return this._fileSize=t.byteLength,[{data:t,offset:0,length:t.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:i,length:n}=t,r=await this.client.request({headers:{...this.headers,Range:`bytes=${i}-${i+n}`},signal:e});if(r.ok){if(206===r.status){const t=await r.getData(),{total:e}=he(r.getHeader("content-range"));return this._fileSize=e||null,{data:t,offset:i,length:n}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await r.getData();return this._fileSize=t.byteLength,{data:t,offset:0,length:t.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function Pe(t,{blockSize:e,cacheSize:i}){return null===e?t:new _e(t,{blockSize:e,cacheSize:i})}function Le(t,{forceXHR:e=!1,...i}={}){return"function"!=typeof fetch||e?"undefined"!=typeof XMLHttpRequest?function(t,{headers:e={},maxRanges:i=0,allowFullFile:n=!1,...r}={}){const s=new we(t);return Pe(new Ie(s,e,i,n),r)}(t,i):function(t,{headers:e={},maxRanges:i=0,allowFullFile:n=!1,...r}={}){const s=new Me(t);return Pe(new Ie(s,e,i,n),r)}(t,i):function(t,{headers:e={},credentials:i,maxRanges:n=0,allowFullFile:r=!1,...s}={}){const o=new be(t,i);return Pe(new Ie(o,e,n,r),s)}(t,i)}class Ae extends ce{constructor(t){super(),this.file=t}async fetchSlice(t,e){return new Promise(((i,n)=>{const r=this.file.slice(t.offset,t.offset+t.length),s=new FileReader;s.onload=t=>i(t.target.result),s.onerror=n,s.onabort=n,s.readAsArrayBuffer(r),e&&e.addEventListener("abort",(()=>s.abort()))}))}}function ke(t){switch(t){case N.sf.BYTE:case N.sf.ASCII:case N.sf.SBYTE:case N.sf.UNDEFINED:return 1;case N.sf.SHORT:case N.sf.SSHORT:return 2;case N.sf.LONG:case N.sf.SLONG:case N.sf.FLOAT:case N.sf.IFD:return 4;case N.sf.RATIONAL:case N.sf.SRATIONAL:case N.sf.DOUBLE:case N.sf.LONG8:case N.sf.SLONG8:case N.sf.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${t}`)}}function Oe(t,e,i,n){let r=null,s=null;const o=ke(e);switch(e){case N.sf.BYTE:case N.sf.ASCII:case N.sf.UNDEFINED:r=new Uint8Array(i),s=t.readUint8;break;case N.sf.SBYTE:r=new Int8Array(i),s=t.readInt8;break;case N.sf.SHORT:r=new Uint16Array(i),s=t.readUint16;break;case N.sf.SSHORT:r=new Int16Array(i),s=t.readInt16;break;case N.sf.LONG:case N.sf.IFD:r=new Uint32Array(i),s=t.readUint32;break;case N.sf.SLONG:r=new Int32Array(i),s=t.readInt32;break;case N.sf.LONG8:case N.sf.IFD8:r=new Array(i),s=t.readUint64;break;case N.sf.SLONG8:r=new Array(i),s=t.readInt64;break;case N.sf.RATIONAL:r=new Uint32Array(2*i),s=t.readUint32;break;case N.sf.SRATIONAL:r=new Int32Array(2*i),s=t.readInt32;break;case N.sf.FLOAT:r=new Float32Array(i),s=t.readFloat32;break;case N.sf.DOUBLE:r=new Float64Array(i),s=t.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e!==N.sf.RATIONAL&&e!==N.sf.SRATIONAL)for(let a=0;a<i;++a)r[a]=s.call(t,n+a*o);else for(let a=0;a<i;a+=2)r[a]=s.call(t,n+a*o),r[a+1]=s.call(t,n+(a*o+4));return e===N.sf.ASCII?new TextDecoder("utf-8").decode(r):r}class Ne{constructor(t,e,i){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=i}}class Fe extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class De{async readRasters(t={}){const{window:e,width:i,height:n}=t;let{resX:r,resY:s,bbox:o}=t;const a=await this.getImage();let l=a;const h=await this.getImageCount(),c=a.getBoundingBox();if(e&&o)throw new Error('Both "bbox" and "window" passed.');if(i||n){if(e){const[t,i]=a.getOrigin(),[n,r]=a.getResolution();o=[t+e[0]*n,i+e[1]*r,t+e[2]*n,i+e[3]*r]}const t=o||c;if(i){if(r)throw new Error("Both width and resX passed");r=(t[2]-t[0])/i}if(n){if(s)throw new Error("Both width and resY passed");s=(t[3]-t[1])/n}}if(r||s){const t=[];for(let e=0;e<h;++e){const i=await this.getImage(e),{SubfileType:n,NewSubfileType:r}=i.fileDirectory;(0===e||2===n||1&r)&&t.push(i)}t.sort(((t,e)=>t.getWidth()-e.getWidth()));for(let e=0;e<t.length;++e){const i=t[e],n=(c[2]-c[0])/i.getWidth(),o=(c[3]-c[1])/i.getHeight();if(l=i,r&&r>n||s&&s>o)break}}let u=e;if(o){const[t,e]=a.getOrigin(),[i,n]=l.getResolution(a);u=[Math.round((o[0]-t)/i),Math.round((o[1]-e)/n),Math.round((o[2]-t)/i),Math.round((o[3]-e)/n)],u=[Math.min(u[0],u[2]),Math.min(u[1],u[3]),Math.max(u[0],u[2]),Math.max(u[1],u[3])]}return l.readRasters({...t,window:u})}}class Ze extends De{constructor(t,e,i,n,r={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=i,this.firstIFDOffset=n,this.cache=r.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const i=this.bigTiff?4048:1024;return new se((await this.source.fetch([{offset:t,length:void 0!==e?e:i}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,i=this.bigTiff?8:2;let n=await this.getSlice(t);const r=this.bigTiff?n.readUint64(t):n.readUint16(t),s=r*e+(this.bigTiff?16:6);n.covers(t,s)||(n=await this.getSlice(t,s));const o={};let a=t+(this.bigTiff?8:2);for(let c=0;c<r;a+=e,++c){const t=n.readUint16(a),e=n.readUint16(a+2),i=this.bigTiff?n.readUint64(a+4):n.readUint32(a+4);let r,s;const l=ke(e),h=a+(this.bigTiff?12:8);if(l*i<=(this.bigTiff?8:4))r=Oe(n,e,i,h);else{const t=n.readOffset(h),s=ke(e)*i;if(n.covers(t,s))r=Oe(n,e,i,t);else{r=Oe(await this.getSlice(t,s),e,i,t)}}s=1===i&&-1===N.It.indexOf(t)&&e!==N.sf.RATIONAL&&e!==N.sf.SRATIONAL?r[0]:r,o[N.L[t]]=s}const l=function(t){const e=t.GeoKeyDirectory;if(!e)return null;const i={};for(let n=4;n<=4*e[3];n+=4){const r=N.P1[e[n]],s=e[n+1]?N.L[e[n+1]]:null,o=e[n+2],a=e[n+3];let l=null;if(s){if(l=t[s],null==l)throw new Error(`Could not get value of geoKey '${r}'.`);"string"==typeof l?l=l.substring(a,a+o-1):l.subarray&&(l=l.subarray(a,a+o),1===o&&(l=l[0]))}else l=a;i[r]=l}return i}(o),h=n.readOffset(t+i+e*r);return new Ne(o,l,h)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(0===t)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){if(e instanceof Fe)throw new Fe(t);throw e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1];if(0===e.nextIFDByteOffset)throw new Fe(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t);return new ne(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;for(;e;)try{await this.requestIFD(t),++t}catch(i){if(!(i instanceof Fe))throw i;e=!1}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const e="GDAL_STRUCTURAL_METADATA_SIZE=";let i=await this.getSlice(t,130);if(e===Oe(i,N.sf.ASCII,30,t)){const e=Oe(i,N.sf.ASCII,130,t).split("\n")[0],n=Number(e.split("=")[1].split(" ")[0])+e.length;n>130&&(i=await this.getSlice(t,n));const r=Oe(i,N.sf.ASCII,n,t);this.ghostValues={},r.split("\n").filter((t=>t.length>0)).map((t=>t.split("="))).forEach((([t,e])=>{this.ghostValues[t]=e}))}return this.ghostValues}static async fromSource(t,e,i){const n=(await t.fetch([{offset:0,length:1024}],i))[0],r=new re(n),s=r.getUint16(0,0);let o;if(18761===s)o=!0;else{if(19789!==s)throw new TypeError("Invalid byte order value.");o=!1}const a=r.getUint16(2,o);let l;if(42===a)l=!1;else{if(43!==a)throw new TypeError("Invalid magic number.");l=!0;if(8!==r.getUint16(4,o))throw new Error("Unsupported offset byte-size.")}const h=l?r.getUint64(8,o):r.getUint32(4,o);return new Ze(t,o,l,h,e)}close(){return"function"==typeof this.source.close&&this.source.close()}}class je extends De{constructor(t,e){super(),this.mainFile=t,this.overviewFiles=e,this.imageFiles=[t].concat(e),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((t=>t.parseFileDirectoryAt(t.firstIFDOffset))));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let e=0,i=0;for(let n=0;n<this.imageFiles.length;n++){const r=this.imageFiles[n];for(let s=0;s<this.imageCounts[n];s++){if(t===e){const t=await r.requestIFD(i);return new ne(t.fileDirectory,t.geoKeyDirectory,r.dataView,r.littleEndian,r.cache,r.source)}e++,i++}i=0}throw new RangeError("Invalid image index")}async getImageCount(){if(null!==this.imageCount)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((t=>t.getImageCount())));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce(((t,e)=>t+e),0),this.imageCount}}async function ze(t,e){return Ze.fromSource(new Ae(t),e)}var Ge=i(4898),Be=i(7367),Ue=i(8724);function Ve(t,e){if(!t)return!1;if(!0===t)return!0;if(3!==e.getSamplesPerPixel())return!1;const i=e.fileDirectory.PhotometricInterpretation,n=N.Ie;return i===n.CMYK||i===n.YCbCr||i===n.CIELab||i===n.ICCLab}const qe="STATISTICS_MAXIMUM",We="STATISTICS_MINIMUM";let Xe;function He(){return Xe||(Xe=new z),Xe}function Ke(t){try{return t.getBoundingBox()}catch(e){return[0,0,t.getWidth(),t.getHeight()]}}function Ye(t){try{return t.getOrigin().slice(0,2)}catch(e){return[0,t.getHeight()]}}function $e(t,e){try{return t.getResolution(e)}catch(i){return[e.getWidth()/t.getWidth(),e.getHeight()/t.getHeight()]}}function Je(t){const e=t.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&32767!==e.ProjectedCSTypeGeoKey){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let i=(0,h.get)(t);if(!i){const n=(0,Ue.N)(e.ProjLinearUnitsGeoKey);n&&(i=new h.Projection({code:t,units:n}))}return i}if(e.GeographicTypeGeoKey&&32767!==e.GeographicTypeGeoKey){const t="EPSG:"+e.GeographicTypeGeoKey;let i=(0,h.get)(t);if(!i){const n=(0,Ue.N)(e.GeogAngularUnitsGeoKey);n&&(i=new h.Projection({code:t,units:n}))}return i}return null}function Qe(t){return t.getImageCount().then((function(e){const i=new Array(e);for(let n=0;n<e;++n)i[n]=t.getImage(n);return Promise.all(i)}))}function ti(t,e){let i;return i=t.blob?ze(t.blob):t.overviews?async function(t,e=[],i={},n){const r=await Ze.fromSource(Le(t,i),n),s=await Promise.all(e.map((t=>Ze.fromSource(Le(t,i)))));return new je(r,s)}(t.url,t.overviews,e):async function(t,e={},i){return Ze.fromSource(Le(t,e),i)}(t.url,e),i.then(Qe)}function ei(t,e,i,n,r){if(Array.isArray(t)){const s=t.length;if(!Array.isArray(e)||s!=e.length){const t=new Error(n);throw r(t),t}for(let o=0;o<s;++o)ei(t[o],e[o],i,n,r)}else if(Math.abs(t-e)>i*t)throw new Error(n)}function ii(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function ni(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}class ri extends k{constructor(t){super({state:"loading",tileGrid:null,projection:null,opaque:t.opaque,transition:t.transition,interpolate:!1!==t.interpolate,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const e=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(e),this.sourceMasks_=new Array(e),this.resolutionFactors_=new Array(e),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=!1!==t.normalize,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map((t=>t.url)).join(","));const i=this,n=new Array(e);for(let r=0;r<e;++r)n[r]=ti(this.sourceInfo_[r],this.sourceOptions_);Promise.all(n).then((function(t){i.configure_(t)})).catch((function(t){(0,Be.vU)(t),i.error_=t,i.setState("error")}))}getError(){return this.error_}determineProjection(t){const e=t[0];for(let i=e.length-1;i>=0;--i){const t=Je(e[i]);if(t){this.projection=t;break}}}configure_(t){let e,i,n,s,o;const a=new Array(t.length),l=new Array(t.length),c=new Array(t.length);let u=0;const d=t.length;for(let h=0;h<d;++h){const d=[],p=[];t[h].forEach((t=>{4==(4&(t.fileDirectory.NewSubfileType||0))?p.push(t):d.push(t)}));const f=d.length;if(p.length>0&&p.length!==f)throw new Error(`Expected one mask per image found ${p.length} masks and ${f} images`);let g,m;const _=new Array(f),y=new Array(f),v=new Array(f);l[h]=new Array(f),c[h]=new Array(f);for(let t=0;t<f;++t){const e=d[t],i=e.getGDALNoData();c[h][t]=e.getGDALMetadata(0),l[h][t]=i;const n=this.sourceInfo_[h].bands;a[h]=n?n.length:e.getSamplesPerPixel();const r=f-(t+1);g||(g=Ke(e)),m||(m=Ye(e));const s=$e(e,d[0]);v[r]=s[0];const o=[e.getTileWidth(),e.getTileHeight()];o[0]!==o[1]&&o[1]<256&&(o[0]=256,o[1]=256),_[r]=o;const u=s[0]/Math.abs(s[1]);y[r]=[o[0],o[1]/u]}if(e?(0,r.Ed)(e,g,e):e=g,i){ei(i,m,0,`Origin mismatch for source ${h}, got [${m}] but expected [${i}]`,this.viewRejector)}else i=m;if(o){o.length-u>v.length&&(u=o.length-v.length);const t=o[o.length-1]/v[v.length-1];this.resolutionFactors_[h]=t;const e=v.map((e=>e*t)),i=`Resolution mismatch for source ${h}, got [${e}] but expected [${o}]`;ei(o.slice(u,o.length),e,.02,i,this.viewRejector)}else o=v,this.resolutionFactors_[h]=1;n?ei(n.slice(u,n.length),y,.01,`Tile size mismatch for source ${h}`,this.viewRejector):n=y,s?ei(s.slice(u,s.length),_,0,`Tile size mismatch for source ${h}`,this.viewRejector):s=_,this.sourceImagery_[h]=d.reverse(),this.sourceMasks_[h]=p.reverse()}for(let r=0,h=this.sourceImagery_.length;r<h;++r){const t=this.sourceImagery_[r];for(;t.length<o.length;)t.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.samplesPerPixel_=a,this.nodataValues_=l,this.metadata_=c;t:for(let r=0;r<d;++r){if(void 0!==this.sourceInfo_[r].nodata){this.addAlpha_=!0;break}if(this.sourceMasks_[r].length){this.addAlpha_=!0;break}const t=l[r],e=this.sourceInfo_[r].bands;if(e){for(let i=0;i<e.length;++i)if(null!==t[e[i]-1]){this.addAlpha_=!0;break t}}else for(let i=0;i<t.length;++i)if(null!==t[i]){this.addAlpha_=!0;break t}}let p=this.addAlpha_?1:0;for(let r=0;r<d;++r)p+=a[r];this.bandCount=p;const f=new O.Z({extent:e,minZoom:u,origin:i,resolutions:o,tileSizes:n});this.tileGrid=f,this.setTileSizes(s),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");2===o.length?o=[o[0],o[1],o[1]/2]:1===o.length&&(o=[2*o[0],o[0],o[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:o,center:(0,h.toUserCoordinate)((0,r.qg)(e),this.projection),extent:(0,h.toUserExtent)(e,this.projection),zoom:1})}loadTile_(t,e,i){const n=this.getTileSize(t),r=this.sourceImagery_.length,s=new Array(2*r),o=this.nodataValues_,a=this.sourceInfo_,l=He();for(let h=0;h<r;++h){const c=a[h],u=this.resolutionFactors_[h],d=[Math.round(e*(n[0]*u)),Math.round(i*(n[1]*u)),Math.round((e+1)*(n[0]*u)),Math.round((i+1)*(n[1]*u))],p=this.sourceImagery_[h][t];let f,g;c.bands&&(f=c.bands.map((function(t){return t-1}))),g="nodata"in c&&null!==c.nodata?c.nodata:f?f.map((function(t){return o[h][t]})):o[h];const m={window:d,width:n[0],height:n[1],samples:f,fillValue:g,pool:l,interleave:!1};Ve(this.convertToRGB_,p)?s[h]=p.readRGB(m):s[h]=p.readRasters(m);const _=r+h,y=this.sourceMasks_[h][t];y?s[_]=y.readRasters({window:d,width:n[0],height:n[1],samples:[0],pool:l,interleave:!1}):s[_]=Promise.resolve(null)}return Promise.all(s).then(this.composeTile_.bind(this,n)).catch((function(t){throw(0,Be.vU)(t),t}))}composeTile_(t,e){const i=this.metadata_,n=this.sourceInfo_,r=this.sourceImagery_.length,s=this.bandCount,o=this.samplesPerPixel_,a=this.nodataValues_,l=this.normalize_,h=this.addAlpha_,c=t[0]*t[1],u=c*s;let d;d=l?new Uint8Array(u):new Float32Array(u);let p=0;for(let f=0;f<c;++f){let t=h;for(let s=0;s<r;++s){const c=n[s];let u,g,m=c.min,_=c.max;if(l){const t=i[s][0];void 0===m&&(m=t&&We in t?parseFloat(t[We]):ii(e[s][0])),void 0===_&&(_=t&&qe in t?parseFloat(t[qe]):ni(e[s][0])),u=255/(_-m),g=-m*u}for(let i=0;i<o[s];++i){const n=e[s][i][f];let r;if(r=l?(0,Ge.uZ)(u*n+g,0,255):n,h){let e=c.nodata;if(void 0===e){let t;t=c.bands?c.bands[i]-1:i,e=a[s][t]}const o=isNaN(e);(!o&&n!==e||o&&!isNaN(n))&&(t=!1,d[p]=r)}else d[p]=r;p++}if(!t){const i=e[r+s];i&&!i[0][f]&&(t=!0)}}h&&(t||(d[p]=255),p++)}return d}}ri.prototype.getView;const si=ri;var oi=i(4840),ai=i(4662),li=i(3248);class hi extends ai.Z{constructor(t,e,i,n,r,s,o){super(e,i,n,r,s,o),this.zoomifyImage_=null,this.tileSize_=t}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const t=super.getImage();if(this.state==I.Z.LOADED){const e=this.tileSize_;if(t.width==e[0]&&t.height==e[1])return this.zoomifyImage_=t,t;const i=(0,li.E4)(e[0],e[1]);return i.drawImage(t,0,0),this.zoomifyImage_=i.canvas,i.canvas}return t}}class ci extends s.Z{constructor(t){const e=t.size,i=void 0!==t.tierSizeCalculation?t.tierSizeCalculation:"default",n=t.tilePixelRatio||1,s=e[0],a=e[1],l=[],h=t.tileSize||oi.S;let c=h*n;switch(i){case"default":for(;s>c||a>c;)l.push([Math.ceil(s/c),Math.ceil(a/c)]),c+=c;break;case"truncated":let t=s,e=a;for(;t>c||e>c;)l.push([Math.ceil(t/c),Math.ceil(e/c)]),t>>=1,e>>=1;break;default:(0,x.h)(!1,53)}l.push([1,1]),l.reverse();const u=[n],d=[0];for(let r=1,o=l.length;r<o;r++)u.push(n<<r),d.push(l[r-1][0]*l[r-1][1]+d[r-1]);u.reverse();const p=new O.Z({tileSize:h,extent:t.extent||[0,-a,s,0],resolutions:u});let f=t.url;!f||f.includes("{TileGroup}")||f.includes("{tileIndex}")||(f+="{TileGroup}/{z}-{x}-{y}.jpg");const g=(0,o.Gk)(f);let m=h*n;const _=(0,o.Un)(g.map((function(t){return function(e,i,n){if(!e)return;const r=e[0],s=e[1],o=e[2],a=s+o*l[r][0],h={z:r,x:s,y:o,tileIndex:a,TileGroup:"TileGroup"+((a+d[r])/m|0)};return t.replace(/\{(\w+?)\}/g,(function(t,e){return h[e]}))}}))),y=hi.bind(null,(0,L.Pq)(h*n));super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,tilePixelRatio:n,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:y,tileGrid:p,tileUrlFunction:_,transition:t.transition}),this.zDirection=t.zDirection;const v=_(p.getTileCoordForCoordAndResolution((0,r.qg)(p.getExtent()),u[u.length-1]),1,null),b=new Image;b.addEventListener("error",(()=>{m=h,this.changed()})),b.src=v}}const ui=ci,di="version1",pi="version2",fi="version3",gi={};gi[di]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},gi[pi]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},gi[fi]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},gi.none={none:{supports:[],formats:[],qualities:[]}};const mi={};mi[di]=function(t){let e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=gi[di].level0),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,void 0===t.imageInfo.formats?[]:t.imageInfo.formats],qualities:[...e.qualities,void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities],resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:null!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}},mi[pi]=function(t){const e=t.getComplianceLevelSupportedFeatures(),i=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,n=i&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],r=i&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],s=i&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:[...e.supports,...n],formats:[...e.formats,...r],qualities:[...e.qualities,...s]}},mi[fi]=function(t){const e=t.getComplianceLevelSupportedFeatures(),i=void 0===t.imageInfo.extraFormats?e.formats:[...e.formats,...t.imageInfo.extraFormats],n=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return["jpg","png","gif"].includes(t)})).reduce((function(t,e){return void 0===t&&i.includes(e)?e:t}),void 0):void 0;return{url:t.imageInfo.id,sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:[...e.supports,...t.imageInfo.extraFeatures],formats:i,qualities:void 0===t.imageInfo.extraQualities?e.qualities:[...e.qualities,...t.imageInfo.extraQualities],preferredFormat:n}};function _i(t){return t.toLocaleString("en",{maximumFractionDigits:10})}class yi extends s.Z{constructor(t){const e=t||{};let i=e.url||"";i+=i.lastIndexOf("/")===i.length-1||""===i?"":"/";const n=e.version||pi,s=e.sizes||[],o=e.size;(0,x.h)(null!=o&&Array.isArray(o)&&2==o.length&&!isNaN(o[0])&&o[0]>0&&!isNaN(o[1])&&o[1]>0,60);const a=o[0],l=o[1],h=e.tileSize,c=e.tilePixelRatio||1,u=e.format||"jpg",d=e.quality||(e.version==di?"native":"default");let p=e.resolutions||[];const f=e.supports||[],g=e.extent||[0,-l,a,0],m=null!=s&&Array.isArray(s)&&s.length>0,_=void 0!==h&&("number"==typeof h&&Number.isInteger(h)&&h>0||Array.isArray(h)&&h.length>0),y=null!=f&&Array.isArray(f)&&(f.includes("regionByPx")||f.includes("regionByPct"))&&(f.includes("sizeByWh")||f.includes("sizeByH")||f.includes("sizeByW")||f.includes("sizeByPct"));let v,b,E;if(p.sort((function(t,e){return e-t})),_||y)if(null!=h&&("number"==typeof h&&Number.isInteger(h)&&h>0?(v=h,b=h):Array.isArray(h)&&h.length>0&&((1==h.length||null==h[1]&&Number.isInteger(h[0]))&&(v=h[0],b=h[0]),2==h.length&&(Number.isInteger(h[0])&&Number.isInteger(h[1])?(v=h[0],b=h[1]):null==h[0]&&Number.isInteger(h[1])&&(v=h[1],b=h[1])))),void 0!==v&&void 0!==b||(v=oi.S,b=oi.S),0==p.length){E=Math.max(Math.ceil(Math.log(a/v)/Math.LN2),Math.ceil(Math.log(l/b)/Math.LN2));for(let t=E;t>=0;t--)p.push(Math.pow(2,t))}else{const t=Math.max(...p);E=Math.round(Math.log(t)/Math.LN2)}else if(v=a,b=l,p=[],m){s.sort((function(t,e){return t[0]-e[0]})),E=-1;const t=[];for(let e=0;e<s.length;e++){const i=a/s[e][0];p.length>0&&p[p.length-1]==i?t.push(e):(p.push(i),E++)}if(t.length>0)for(let e=0;e<t.length;e++)s.splice(t[e]-e,1)}else p.push(1),s.push([a,l]),E=0;const w=new O.Z({tileSize:[v,b],extent:g,origin:(0,r.rL)(g),resolutions:p}),C=hi.bind(null,(0,L.Pq)(h||256).map((function(t){return t*c})));super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:e.state,tileClass:C,tileGrid:w,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:function(t,e,r){let o,h;const c=t[0];if(c>E)return;const g=t[1],x=t[2],w=p[c];if(!(void 0===g||void 0===x||void 0===w||g<0||Math.ceil(a/w/v)<=g||x<0||Math.ceil(l/w/b)<=x)){if(y||_){const t=g*v*w,e=x*b*w;let i=v*w,r=b*w,s=v,c=b;if(t+i>a&&(i=a-t),e+r>l&&(r=l-e),t+v*w>a&&(s=Math.floor((a-t+w-1)/w)),e+b*w>l&&(c=Math.floor((l-e+w-1)/w)),0==t&&i==a&&0==e&&r==l)o="full";else if(!y||f.includes("regionByPx"))o=t+","+e+","+i+","+r;else if(f.includes("regionByPct")){o="pct:"+_i(t/a*100)+","+_i(e/l*100)+","+_i(i/a*100)+","+_i(r/l*100)}n!=fi||y&&!f.includes("sizeByWh")?!y||f.includes("sizeByW")?h=s+",":f.includes("sizeByH")?h=","+c:f.includes("sizeByWh")?h=s+","+c:f.includes("sizeByPct")&&(h="pct:"+_i(100/w)):h=s+","+c}else if(o="full",m){const t=s[c][0],e=s[c][1];h=n==fi?t==a&&e==l?"max":t+","+e:t==a?"full":t+","}else h=n==fi?"max":"full";return i+o+"/"+h+"/0/"+d+"."+u}},transition:e.transition}),this.zDirection=e.zDirection}}const vi=yi;var xi=i(8685),bi=i(8089),Ei=i(7045),wi=i(5021),Ci=i(8084),Si=i(3832),Ti=i(9640);class Ri extends wi.Z{constructor(t,e,i,n,s,o,a){let l=t.getExtent();l&&t.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let h=e.getExtent();h&&e.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);const c=h?(0,r.Ed)(i,h):i,u=(0,r.qg)(c),d=(0,Si.aA)(t,e,u,n),p=Ei.m,f=new Ci.Z(t,e,c,l,d*p,n),g=f.calculateSourceExtent(),m=(0,r.xb)(g)?null:o(g,d,s),_=m?bi.Z.IDLE:bi.Z.EMPTY,y=m?m.getPixelRatio():1;super(i,n,y,_),this.targetProj_=e,this.maxSourceExtent_=l,this.triangulation_=f,this.targetResolution_=n,this.targetExtent_=i,this.sourceImage_=m,this.sourcePixelRatio_=y,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==bi.Z.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==bi.Z.LOADED){const t=(0,r.dz)(this.targetExtent_)/this.targetResolution_,e=(0,r.Cr)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,Si.sY)(t,e,this.sourcePixelRatio_,this.sourceImage_.getResolution(),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_)}this.state=t,this.changed()}load(){if(this.state==bi.Z.IDLE){this.state=bi.Z.LOADING,this.changed();const t=this.sourceImage_.getState();t==bi.Z.LOADED||t==bi.Z.ERROR?this.reproject_():(this.sourceListenerKey_=(0,Ti.oL)(this.sourceImage_,g.Z.CHANGE,(function(t){const e=this.sourceImage_.getState();e!=bi.Z.LOADED&&e!=bi.Z.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}unlistenSource_(){(0,Ti.bN)(this.sourceListenerKey_),this.sourceListenerKey_=null}}const Mi=Ri;var Ii=i(112),Pi=i(7794);const Li="imageloadstart",Ai="imageloadend",ki="imageloaderror";class Oi extends xi.ZP{constructor(t,e){super(t),this.image=e}}class Ni extends Ii.Z{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){t=e[(0,Pi.h7)(e,t,0)]}return t}getImage(t,e,i,n){const s=this.getProjection();if(!s||!n||(0,h.equivalent)(s,n))return s&&(n=s),this.getImageInternal(t,e,i,n);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,h.equivalent)(this.reprojectedImage_.getProjection(),n)&&this.reprojectedImage_.getResolution()==e&&(0,r.fS)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new Mi(s,n,t,e,i,((t,e,i)=>this.getImageInternal(t,e,i,s)),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,i,n){return(0,b.O3)()}handleImageChange(t){const e=t.target;let i;switch(e.getState()){case bi.Z.LOADING:this.loading=!0,i=Li;break;case bi.Z.LOADED:this.loading=!1,i=Ai;break;case bi.Z.ERROR:this.loading=!1,i=ki;break;default:return}this.hasListener(i)&&this.dispatchEvent(new Oi(i,e))}}function Fi(t,e){t.getImage().src=e}const Di=Ni;var Zi=i(560);function ji(t,e){const i=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))}));const n=i.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+n}const zi=class extends Di{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.context_=(0,li.E4)(1,1),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.hidpi_=void 0===t.hidpi||t.hidpi,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Fi,this.params_=t.params||{},this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}getParams(){return this.params_}getImageInternal(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),i=this.hidpi_?i:1;const s=this.image_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==e&&s.getPixelRatio()==i&&(0,r.r4)(s.getExtent(),t))return s;const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(o,this.params_);const a=((t=t.slice())[0]+t[2])/2,l=(t[1]+t[3])/2;if(1!=this.ratio_){const e=this.ratio_*(0,r.dz)(t)/2,i=this.ratio_*(0,r.Cr)(t)/2;t[0]=a-e,t[1]=l-i,t[2]=a+e,t[3]=l+i}const h=e/i,c=Math.ceil((0,r.dz)(t)/h),u=Math.ceil((0,r.Cr)(t)/h);t[0]=a-h*c/2,t[2]=a+h*c/2,t[1]=l-h*u/2,t[3]=l+h*u/2,this.imageSize_[0]=c,this.imageSize_[1]=u;const d=this.getRequestUrl_(t,this.imageSize_,i,n,o);return this.image_=new Zi.Z(t,e,i,d,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(g.Z.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(t,e,i,n,r){const s=n.getCode().split(/:(?=\d+$)/).pop();r.SIZE=e[0]+","+e[1],r.BBOX=t.join(","),r.BBOXSR=s,r.IMAGESR=s,r.DPI=Math.round(90*i);const o=this.url_,a=o.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return a==o&&(0,x.h)(!1,50),ji(a,r)}getUrl(){return this.url_}setImageLoadFunction(t){this.image_=null,this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.image_=null,this.changed()}};var Gi=i(6905);const Bi=class extends Di{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.canvasFunction_=t.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}getImageInternal(t,e,i,n){e=this.findNearestResolution(e);let s=this.canvas_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==e&&s.getPixelRatio()==i&&(0,r.r4)(s.getExtent(),t))return s;t=t.slice(),(0,r.H9)(t,this.ratio_);const o=[(0,r.dz)(t)/e*i,(0,r.Cr)(t)/e*i],a=this.canvasFunction_.call(this,t,e,i,o,n);return a&&(s=new Gi.Z(t,e,i,a)),this.canvas_=s,this.renderedRevision_=this.getRevision(),s}};const Ui=class extends Di{constructor(t){super({interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.context_=(0,li.E4)(1,1),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.displayDpi_=void 0!==t.displayDpi?t.displayDpi:96,this.params_=t.params||{},this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Fi,this.hidpi_=void 0===t.hidpi||t.hidpi,this.metersPerUnit_=void 0!==t.metersPerUnit?t.metersPerUnit:1,this.ratio_=void 0!==t.ratio?t.ratio:1,this.useOverlay_=void 0!==t.useOverlay&&t.useOverlay,this.image_=null,this.renderedRevision_=0}getParams(){return this.params_}getImageInternal(t,e,i,n){e=this.findNearestResolution(e),i=this.hidpi_?i:1;let s=this.image_;if(s&&this.renderedRevision_==this.getRevision()&&s.getResolution()==e&&s.getPixelRatio()==i&&(0,r.r4)(s.getExtent(),t))return s;1!=this.ratio_&&(t=t.slice(),(0,r.H9)(t,this.ratio_));const o=[(0,r.dz)(t)/e*i,(0,r.Cr)(t)/e*i];if(void 0!==this.url_){const r=this.getUrl(this.url_,this.params_,t,o,n);s=new Zi.Z(t,e,i,r,this.crossOrigin_,this.imageLoadFunction_,this.context_),s.addEventListener(g.Z.CHANGE,this.handleImageChange.bind(this))}else s=null;return this.image_=s,this.renderedRevision_=this.getRevision(),s}getImageLoadFunction(){return this.imageLoadFunction_}updateParams(t){Object.assign(this.params_,t),this.changed()}getUrl(t,e,i,n,s){const o=function(t,e,i,n){const s=(0,r.dz)(t),o=(0,r.Cr)(t),a=e[0],l=e[1],h=.0254/n;if(l*s>a*o)return s*i/(a*h);return o*i/(l*h)}(i,n,this.metersPerUnit_,this.displayDpi_),a=(0,r.qg)(i),l={OPERATION:this.useOverlay_?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol/source/ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.displayDpi_,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:o,SETVIEWCENTERX:a[0],SETVIEWCENTERY:a[1]};return Object.assign(l,e),ji(t,l)}setImageLoadFunction(t){this.image_=null,this.imageLoadFunction_=t,this.changed()}};const Vi=class extends Di{constructor(t){const e=void 0!==t.crossOrigin?t.crossOrigin:null,i=void 0!==t.imageLoadFunction?t.imageLoadFunction:Fi;super({attributions:t.attributions,interpolate:t.interpolate,projection:(0,h.get)(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image_=new Zi.Z(this.imageExtent_,void 0,1,this.url_,e,i,(0,li.E4)(1,1)),this.imageSize_=t.imageSize?t.imageSize:null,this.image_.addEventListener(g.Z.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,i,n){return(0,r.kK)(t,this.image_.getExtent())?this.image_:null}getUrl(){return this.url_}handleImageChange(t){if(this.image_.getState()==bi.Z.LOADED){const t=this.image_.getExtent(),e=this.image_.getImage();let i,n;this.imageSize_?(i=this.imageSize_[0],n=this.imageSize_[1]):(i=e.width,n=e.height);const s=(0,r.dz)(t),o=(0,r.Cr)(t),a=s/i,l=o/n;let h=i,c=n;if(a>l?h=Math.round(s/l):c=Math.round(o/a),h!==i||c!==n){const t=(0,li.E4)(h,c);this.getInterpolate()||(t.imageSmoothingEnabled=!1);const r=t.canvas;t.drawImage(e,0,0,i,n,0,0,r.width,r.height),this.image_.setImage(r)}}super.handleImageChange(t)}},qi="1.3.0";var Wi=i(7365);const Xi=[101,101];const Hi=class extends Di{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.context_=(0,li.E4)(1,1),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:Fi,this.params_=Object.assign({},t.params),this.v13_=!0,this.updateV13_(),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.image_=null,this.imageSize_=[0,0],this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}getFeatureInfoUrl(t,e,i,n){if(void 0===this.url_)return;const s=(0,h.get)(i),o=this.getProjection();o&&o!==s&&(e=(0,Si.aA)(o,s,t,e),t=(0,h.transform)(t,s,o));const a=(0,r.p8)(t,e,0,Xi),l={SERVICE:"WMS",VERSION:qi,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(l,this.params_,n);const c=(0,Ge.GW)((t[0]-a[0])/e,4),u=(0,Ge.GW)((a[3]-t[1])/e,4);return l[this.v13_?"I":"X"]=c,l[this.v13_?"J":"Y"]=u,this.getRequestUrl_(a,Xi,1,o||s,l)}getLegendUrl(t,e){if(void 0===this.url_)return;const i={SERVICE:"WMS",VERSION:qi,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS;if(!(!Array.isArray(t)||1===t.length))return;i.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,n=28e-5;i.SCALE=t*e/n}return Object.assign(i,e),ji(this.url_,i)}getParams(){return this.params_}getImageInternal(t,e,i,n){if(void 0===this.url_)return null;e=this.findNearestResolution(e),1==i||this.hidpi_&&void 0!==this.serverType_||(i=1);const s=e/i,o=(0,r.qg)(t),a=(0,Ge.mD)((0,r.dz)(t)/s,4),l=(0,Ge.mD)((0,r.Cr)(t)/s,4),h=(0,r.p8)(o,s,0,[a,l]),c=(0,Ge.mD)(this.ratio_*(0,r.dz)(t)/s,4),u=(0,Ge.mD)(this.ratio_*(0,r.Cr)(t)/s,4),d=(0,r.p8)(o,s,0,[c,u]),p=this.image_;if(p&&this.renderedRevision_==this.getRevision()&&p.getResolution()==e&&p.getPixelRatio()==i&&(0,r.r4)(p.getExtent(),h))return p;const f={SERVICE:"WMS",VERSION:qi,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};Object.assign(f,this.params_),this.imageSize_[0]=(0,Ge.NM)((0,r.dz)(d)/s,4),this.imageSize_[1]=(0,Ge.NM)((0,r.Cr)(d)/s,4);const m=this.getRequestUrl_(d,this.imageSize_,i,n,f);return this.image_=new Zi.Z(d,e,i,m,this.crossOrigin_,this.imageLoadFunction_,this.context_),this.renderedRevision_=this.getRevision(),this.image_.addEventListener(g.Z.CHANGE,this.handleImageChange.bind(this)),this.image_}getImageLoadFunction(){return this.imageLoadFunction_}getRequestUrl_(t,e,i,n,r){if((0,x.h)(void 0!==this.url_,9),r[this.v13_?"CRS":"SRS"]=n.getCode(),"STYLES"in this.params_||(r.STYLES=""),1!=i)switch(this.serverType_){case"geoserver":const t=90*i+.5|0;"FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+=";dpi:"+t:r.FORMAT_OPTIONS="dpi:"+t;break;case"mapserver":r.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":r.DPI=90*i;break;default:(0,x.h)(!1,8)}r.WIDTH=e[0],r.HEIGHT=e[1];const s=n.getAxisOrientation();let o;return o=this.v13_&&"ne"==s.substr(0,2)?[t[1],t[0],t[3],t[2]]:t,r.BBOX=o.join(","),ji(this.url_,r)}getUrl(){return this.url_}setImageLoadFunction(t){this.image_=null,this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.image_=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.image_=null,this.changed()}updateV13_(){const t=this.params_.VERSION||qi;this.v13_=(0,Wi.n)(t,"1.3")>=0}},Ki='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';const Yi=class extends p{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:[Ki];const i=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",n=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:n,wrapX:t.wrapX,zDirection:t.zDirection})}};var $i=i(6175),Ji=i(5069),Qi=i(2729),tn=i(2161),en=i(5034);let nn,rn=!0;try{new ImageData(10,10)}catch(Fn){rn=!1}function sn(t){let e=!0;try{new ImageData(10,10)}catch(Fn){e=!1}function i(t,i,n){return e?new ImageData(t,i,n):{data:t,width:i,height:n}}return function(e){const n=e.buffers,r=e.meta,s=e.imageOps,o=e.width,a=e.height,l=n.length,h=n[0].byteLength;if(s){const e=new Array(l);for(let t=0;t<l;++t)e[t]=i(new Uint8ClampedArray(n[t]),o,a);return t(e,r).data.buffer}const c=new Uint8ClampedArray(h),u=new Array(l),d=new Array(l);for(let t=0;t<l;++t)u[t]=new Uint8ClampedArray(n[t]),d[t]=[0,0,0,0];for(let i=0;i<h;i+=4){for(let t=0;t<l;++t){const e=u[t];d[t][0]=e[i],d[t][1]=e[i+1],d[t][2]=e[i+2],d[t][3]=e[i+3]}const e=t(d,r);c[i]=e[0],c[i+1]=e[1],c[i+2]=e[2],c[i+3]=e[3]}return c.buffer}}function on(t,e){const i=Object.keys(t.lib||{}).map((function(e){return"const "+e+" = "+t.lib[e].toString()+";"})).concat(["const __minion__ = ("+sn.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),n=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(i.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(i,{type:"text/javascript"})));return n.addEventListener("message",e),n}class an extends $i.Z{constructor(t){let e;super(),this._imageOps=!!t.imageOps,e=0===t.threads?0:this._imageOps?1:t.threads||1;const i=new Array(e);if(e)for(let n=0;n<e;++n)i[n]=on(t,this._onWorkerMessage.bind(this,n));else i[0]=function(t,e){const i=sn(t.operation);let n=!1;return{postMessage:function(t){setTimeout((function(){n||e({data:{buffer:i(t),meta:t.meta}})}),0)},terminate:function(){n=!0}}}(t,this._onWorkerMessage.bind(this,0));this._workers=i,this._queue=[],this._maxQueueLength=t.queue||1/0,this._running=0,this._dataLookup={},this._job=null}process(t,e,i){this._enqueue({inputs:t,meta:e,callback:i}),this._dispatch()}_enqueue(t){for(this._queue.push(t);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)}_dispatch(){if(this._running||0===this._queue.length)return;const t=this._queue.shift();this._job=t;const e=t.inputs[0].width,i=t.inputs[0].height,n=t.inputs.map((function(t){return t.data.buffer})),r=this._workers.length;if(this._running=r,1===r)return void this._workers[0].postMessage({buffers:n,meta:t.meta,imageOps:this._imageOps,width:e,height:i},n);const s=t.inputs[0].data.length,o=4*Math.ceil(s/4/r);for(let a=0;a<r;++a){const r=a*o,s=[];for(let t=0,e=n.length;t<e;++t)s.push(n[t].slice(r,r+o));this._workers[a].postMessage({buffers:s,meta:t.meta,imageOps:this._imageOps,width:e,height:i},s)}}_onWorkerMessage(t,e){this.disposed||(this._dataLookup[t]=e.data,--this._running,0===this._running&&this._resolveJob())}_resolveJob(){const t=this._job,e=this._workers.length;let i,n;if(1===e)i=new Uint8ClampedArray(this._dataLookup[0].buffer),n=this._dataLookup[0].meta;else{const r=t.inputs[0].data.length;i=new Uint8ClampedArray(r),n=new Array(e);const s=4*Math.ceil(r/4/e);for(let t=0;t<e;++t){const e=this._dataLookup[t].buffer,r=t*s;i.set(new Uint8ClampedArray(e),r),n[t]=this._dataLookup[t].meta}}this._job=null,this._dataLookup={},t.callback(null,function(t,e,i){if(rn)return new ImageData(t,e,i);nn||(nn=document.createElement("canvas").getContext("2d"));const n=nn.createImageData(e,i);return n.data.set(t),n}(i,t.inputs[0].width,t.inputs[0].height),n),this._dispatch()}disposeInternal(){for(let t=0;t<this._workers.length;++t)this._workers[t].terminate();this._workers.length=0}}const ln="beforeoperations",hn="afteroperations";class cn extends xi.ZP{constructor(t,e,i){super(t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=i}}class un extends Di{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=void 0!==t.operationType?t.operationType:"pixel",this.threads_=void 0!==t.threads?t.threads:1,this.layers_=function(t){const e=t.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=fn(t[n]);return i}(t.sources);const e=this.changed.bind(this);for(let n=0,r=this.layers_.length;n<r;++n)this.layers_[n].addEventListener(g.Z.CHANGE,e);var i;this.useResolutions_=null!==t.resolutions,this.tileQueue_=new tn.Z((function(){return 1}),this.changed.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:(0,en.Ue)(),declutterTree:null,extent:null,index:0,layerIndex:0,layerStatesArray:(i=this.layers_,i.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:(0,en.Ue)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,b.sq)(this),renderTargets:{}},this.setAttributions((function(e){const i=[];for(let n=0,r=t.sources.length;n<r;++n){const r=t.sources[n],s=r instanceof Ii.Z?r:r.getSource();if(!s)continue;const o=s.getAttributions();if("function"==typeof o){const t=o(e);i.push.apply(i,t)}}return 0!==i.length?i:null})),void 0!==t.operation&&this.setOperation(t.operation,t.lib)}setOperation(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new an({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()}updateFrameState_(t,e,i){const n=Object.assign({},this.frameState_);n.viewState=Object.assign({},n.viewState);const s=(0,r.qg)(t);n.size[0]=Math.ceil((0,r.dz)(t)/e),n.size[1]=Math.ceil((0,r.Cr)(t)/e),n.extent=[s[0]-n.size[0]*e/2,s[1]-n.size[1]*e/2,s[0]+n.size[0]*e/2,s[1]+n.size[1]*e/2],n.time=Date.now();const o=n.viewState;return o.center=s,o.projection=i,o.resolution=e,n}allSourcesReady_(){let t,e=!0;for(let i=0,n=this.layers_.length;i<n;++i)if(t=this.layers_[i].getSource(),!t||"ready"!==t.getState()){e=!1;break}return e}getImage(t,e,i,n){if(!this.allSourcesReady_())return null;e=this.findNearestResolution(e);const s=this.updateFrameState_(t,e,n);if(this.requestedFrameState_=s,this.renderedImageCanvas_){const t=this.renderedImageCanvas_.getResolution(),i=this.renderedImageCanvas_.getExtent();e===t&&(0,r.fS)(s.extent,i)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),s.tileQueue.loadMoreTiles(16,16),s.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,e=this.layers_.length,i=new Array(e);for(let r=0;r<e;++r){t.layerIndex=r,t.renderTargets={};const e=pn(this.layers_[r],t);if(!e)return;i[r]=e}const n={};this.dispatchEvent(new cn(ln,t,n)),this.processor_.process(i,n,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,e,i,n){if(e||!i)return;const s=t.extent,o=t.viewState.resolution;if(o!==this.requestedFrameState_.viewState.resolution||!(0,r.fS)(s,this.requestedFrameState_.extent))return;let a;if(this.renderedImageCanvas_)a=this.renderedImageCanvas_.getImage().getContext("2d");else{const t=Math.round((0,r.dz)(s)/o),e=Math.round((0,r.Cr)(s)/o);a=(0,li.E4)(t,e),this.renderedImageCanvas_=new Gi.Z(s,o,1,a.canvas)}a.putImageData(i,0,0),this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new cn(hn,t,n)),t.animate&&requestAnimationFrame(this.changed.bind(this))}getResolutions(t){if(!this.useResolutions_)return null;let e=super.getResolutions();if(!e)for(let i=0,n=this.layers_.length;i<n;++i){if(e=this.layers_[i].getSource().getResolutions(t),e)break}return e}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}un.prototype.dispose;let dn=null;function pn(t,e){const i=t.getRenderer();if(!i)throw new Error("Unsupported layer type: "+t);if(!i.prepareFrame(e))return null;const n=e.size[0],r=e.size[1];if(0===n||0===r)return null;const s=i.renderFrame(e,null);let o;if(s instanceof HTMLCanvasElement)o=s;else{if(s&&(o=s.firstElementChild),!(o instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+o);if(o.width===n&&o.height===r){return o.getContext("2d").getImageData(0,0,n,r)}}if(dn){const t=dn.canvas;t.width!==n||t.height!==r?dn=(0,li.E4)(n,r,void 0,{willReadFrequently:!0}):dn.clearRect(0,0,n,r)}else dn=(0,li.E4)(n,r,void 0,{willReadFrequently:!0});return dn.drawImage(o,0,0,n,r),dn.getImageData(0,0,n,r)}function fn(t){let e;return t instanceof Ii.Z?t instanceof M.Z?e=new Qi.default({source:t}):t instanceof Di&&(e=new Ji.Z({source:t})):e=t,e}const gn=un,mn=['Map tiles by <a href="https://stamen.com/" target="_blank">Stamen Design</a>, under <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC BY 3.0</a>.',Ki],_n={terrain:{extension:"png",opaque:!0},"terrain-background":{extension:"png",opaque:!0},"terrain-labels":{extension:"png",opaque:!1},"terrain-lines":{extension:"png",opaque:!1},"toner-background":{extension:"png",opaque:!0},toner:{extension:"png",opaque:!0},"toner-hybrid":{extension:"png",opaque:!1},"toner-labels":{extension:"png",opaque:!1},"toner-lines":{extension:"png",opaque:!1},"toner-lite":{extension:"png",opaque:!0},watercolor:{extension:"jpg",opaque:!0}},yn={terrain:{minZoom:0,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:0,maxZoom:18}};const vn=class extends p{constructor(t){const e=t.layer.indexOf("-"),i=-1==e?t.layer:t.layer.slice(0,e),n=yn[i],r=_n[t.layer],s=void 0!==t.url?t.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+t.layer+"/{z}/{x}/{y}."+r.extension;super({attributions:mn,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:null!=t.maxZoom?t.maxZoom:n.maxZoom,minZoom:null!=t.minZoom?t.minZoom:n.minZoom,opaque:r.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:s,wrapX:t.wrapX,zDirection:t.zDirection})}};class xn extends s.Z{constructor(t){super({attributions:(t=t||{}).attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.params_=t.params||{},this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,r.lJ)(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,i,n,r,s){const o=this.urls;if(!o)return;const l=r.getCode().split(/:(?=\d+$)/).pop();let h;if(s.SIZE=e[0]+","+e[1],s.BBOX=i.join(","),s.BBOXSR=l,s.IMAGESR=l,s.DPI=Math.round(s.DPI?s.DPI*n:90*n),1==o.length)h=o[0];else{h=o[(0,Ge.$W)((0,a.vp)(t),o.length)]}return ji(h.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),s)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return;1==e||this.hidpi_||(e=1);const r=n.getTileCoordExtent(t,this.tmpExtent_);let s=(0,L.Pq)(n.getTileSize(t[0]),this.tmpSize);1!=e&&(s=(0,L.bA)(s,e,this.tmpSize));const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(o,this.params_),this.getRequestUrl_(t,s,r,e,i,o)}}const bn=xn;const En=class extends p{constructor(t){super({opaque:!1,projection:(t=t||{}).projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection,url:t.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(t,e)=>{const i=t.getTileCoord()[0],n=(0,L.Pq)(this.tileGrid.getTileSize(i)),r=(0,li.E4)(n[0],n[1]);r.strokeStyle="grey",r.strokeRect(.5,.5,n[0]+.5,n[1]+.5),r.fillStyle="grey",r.strokeStyle="white",r.textAlign="center",r.textBaseline="middle",r.font="24px sans-serif",r.lineWidth=4,r.strokeText(e,n[0]/2,n[1]/2,n[0]),r.fillText(e,n[0]/2,n[1]/2,n[0]),t.setImage(r.canvas)}})}};var wn=i(9835);class Cn extends s.Z{constructor(t){t=t||{};const e=Object.assign({},t.params),i=!("TRANSPARENT"in e)||e.TRANSPARENT;super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!i,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,r.lJ)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,n){const s=(0,h.get)(i),o=this.getProjection();let a=this.getTileGrid();a||(a=this.getTileGridForProjection(s));const l=a.getZForResolution(e,this.zDirection),c=a.getTileCoordForCoordAndZ(t,l);if(a.getResolutions().length<=c[0])return;let u=a.getResolution(c[0]),d=a.getTileCoordExtent(c,this.tmpExtent_),p=(0,L.Pq)(a.getTileSize(c[0]),this.tmpSize);const f=this.gutter_;0!==f&&(p=(0,L.f3)(p,f,this.tmpSize),d=(0,r.f3)(d,u*f,d)),o&&o!==s&&(u=(0,Si.aA)(o,s,t,u),d=(0,h.transformExtent)(d,s,o),t=(0,h.transform)(t,s,o));const g={SERVICE:"WMS",VERSION:qi,REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.params_.LAYERS};Object.assign(g,this.params_,n);const m=Math.floor((t[0]-d[0])/u),_=Math.floor((d[3]-t[1])/u);return g[this.v13_?"I":"X"]=m,g[this.v13_?"J":"Y"]=_,this.getRequestUrl_(c,p,d,1,o||s,g)}getLegendUrl(t,e){if(void 0===this.urls[0])return;const i={SERVICE:"WMS",VERSION:qi,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS;if(!(!Array.isArray(t)||1===t.length))return;i.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,n=28e-5;i.SCALE=t*e/n}return Object.assign(i,e),ji(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,n,r,s){const o=this.urls;if(!o)return;if(s.WIDTH=e[0],s.HEIGHT=e[1],s[this.v13_?"CRS":"SRS"]=r.getCode(),"STYLES"in this.params_||(s.STYLES=""),1!=n)switch(this.serverType_){case"geoserver":const t=90*n+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+t:s.FORMAT_OPTIONS="dpi:"+t;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:(0,x.h)(!1,52)}const l=r.getAxisOrientation(),h=i;if(this.v13_&&"ne"==l.substr(0,2)){let t;t=i[0],h[0]=i[1],h[1]=t,t=i[2],h[2]=i[3],h[3]=t}let c;if(s.BBOX=h.join(","),1==o.length)c=o[0];else{c=o[(0,Ge.$W)((0,a.vp)(t),o.length)]}return ji(c,s)}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0;const e=[];for(const i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_.VERSION||qi;this.v13_=(0,Wi.n)(t,"1.3")>=0}tileUrlFunction(t,e,i){let n=this.getTileGrid();if(n||(n=this.getTileGridForProjection(i)),n.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);const s=n.getResolution(t[0]);let o=n.getTileCoordExtent(t,this.tmpExtent_),a=(0,L.Pq)(n.getTileSize(t[0]),this.tmpSize);const l=this.gutter_;0!==l&&(a=(0,L.f3)(a,l,this.tmpSize),o=(0,r.f3)(o,s*l,o)),1!=e&&(a=(0,L.bA)(a,e,this.tmpSize));const h={SERVICE:"WMS",VERSION:qi,REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};return Object.assign(h,this.params_),this.getRequestUrl_(t,a,o,e,i,h)}}const Sn=Cn;var Tn=i(8385),Rn=i(2779),Mn=i(2782);class In extends Rn.Z{constructor(t,e,i,n,r,s){super(t,e),this.src_=i,this.extent_=n,this.preemptive_=r,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=s}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null;const e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),n=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof n)return null;let r=n.charCodeAt(Math.floor(e*n.length));r>=93&&r--,r>=35&&r--,r-=32;let s=null;if(r in this.keys_){const t=this.keys_[r];s=this.data_&&t in this.data_?this.data_[t]:t}return s}forDataAtCoordinate(t,e,i){this.state==I.Z.EMPTY&&!0===i?(this.state=I.Z.IDLE,(0,Ti.Vx)(this,g.Z.CHANGE,(function(i){e(this.getData(t))}),this),this.loadInternal_()):!0===i?setTimeout((()=>{e(this.getData(t))}),0):e(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=I.Z.ERROR,this.changed()}handleLoad_(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=I.Z.LOADED,this.changed()}loadInternal_(){if(this.state==I.Z.IDLE)if(this.state=I.Z.LOADING,this.jsonp_)(0,Mn.R6)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch(i){return void this.handleError_()}this.handleLoad_(t)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(I.Z.EMPTY)}}class Pn extends M.Z{constructor(t){if(super({projection:(0,h.get)("EPSG:3857"),state:"loading",zDirection:t.zDirection}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=o.vU,this.template_=void 0,this.jsonp_=t.jsonp||!1,t.url)if(this.jsonp_)(0,Mn.R6)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):(0,x.h)(!1,51)}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch(i){return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,e,i,n){if(this.tileGrid){const r=this.tileGrid.getZForResolution(e,this.zDirection),s=this.tileGrid.getTileCoordForCoordAndZ(t,r);this.getTile(s[0],s[1],s[2],1,this.getProjection()).forDataAtCoordinate(t,i,n)}else!0===n?setTimeout((function(){i(null)}),0):i(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const e=(0,h.get)("EPSG:4326"),i=this.getProjection();let n;if(void 0!==t.bounds){const s=(0,h.getTransformFromProjections)(e,i);n=(0,r.Ne)(t.bounds,s)}const s=(0,l.Tl)(i),a=t.minzoom||0,c=t.maxzoom||22,u=(0,l.dl)({extent:s,maxZoom:c,minZoom:a});this.tileGrid=u,this.template_=t.template;const d=t.grids;if(d){if(this.tileUrlFunction_=(0,o.uR)(d,u),void 0!==t.attribution){const e=void 0!==n?n:s;this.setAttributions((function(i){return(0,r.kK)(e,i.extent)?[t.attribution]:null}))}this.setState("ready")}else this.setState("error")}getTile(t,e,i,n,r){const s=(0,a.lg)(t,e,i);if(this.tileCache.containsKey(s))return this.tileCache.get(s);const o=[t,e,i],l=this.getTileCoordForTileUrlFunction(o,r),h=this.tileUrlFunction_(l,n,r),c=new In(o,void 0!==h?I.Z.IDLE:I.Z.EMPTY,void 0!==h?h:"",this.tileGrid.getTileCoordExtent(o),this.preemptive_,this.jsonp_);return this.tileCache.set(s,c),c}useTile(t,e,i){const n=(0,a.lg)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const Ln=Pn;var An=i(6908);class kn extends s.Z{constructor(t){const e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",i=t.tileGrid;let n=t.urls;void 0===n&&void 0!==t.url&&(n=(0,o.Gk)(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:n,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),n&&n.length>0&&(this.tileUrlFunction=(0,o.Un)(n.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction((0,o.Un)(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==e&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?ji(t,i):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t}));const n=this.tileGrid,r=this.dimensions_;return function(i,s,o){if(!i)return;const a={TileMatrix:n.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};Object.assign(a,r);let l=t;return l="KVP"==e?ji(l,a):l.replace(/\{(\w+?)\}/g,(function(t,e){return a[e]})),l}}}const On=kn;function Nn(t,e){const i=new n.Z(32),s=t.getExtent();return function(n,o){i.expireCache(),s&&(n=(0,r.Ed)(s,n));const a=t.getZForResolution(o),l=[];return t.forEachTileCoord(n,a,(t=>{const n=t.toString();if(!i.containsKey(n)){const r=e(t);i.set(n,r)}l.push(i.get(n))})),l}}},112:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(9520),r=i(7533);class s extends n.Z{constructor(t){super(),this.projection=(0,r.get)(t.projection),this.attributions_=o(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,i){e.viewResolver=t,e.viewRejector=i}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=o(t),this.changed()}setState(t){this.state_=t,this.changed()}}function o(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}const a=s},2984:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g,s:()=>f});var n=i(8685),r=i(112),s=i(1454),o=i(5696),a=i(3039),l=i(9141),h=i(7533),c=i(9707),u=i(4687),d=i(7273);class p extends r.Z{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&(0,d.Pq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new s.Z(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,n){const r=this.getTileCacheForProjection(t);if(!r)return!1;let s,a,l,h=!0;for(let u=i.minX;u<=i.maxX;++u)for(let t=i.minY;t<=i.maxY;++t)a=(0,c.lg)(e,u,t),l=!1,r.containsKey(a)&&(s=r.get(a),l=s.getState()===o.Z.LOADED,l&&(l=!1!==n(s))),l||(h=!1);return h}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,n,r){return(0,a.O3)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:(0,u.X$)(t)}getTileCacheForProjection(t){const e=this.getProjection();return(0,l.h)(null===e||(0,h.equivalent)(e,t),68),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),r=this.getTilePixelRatio(e),s=(0,d.Pq)(n.getTileSize(t),this.tmpSize);return 1==r?s:(0,d.bA)(s,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=(0,u.Cf)(i,t,e)),(0,c.tE)(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,n){}}class f extends n.ZP{constructor(t,e){super(t),this.tile=e}}const g=p},1618:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},6886:(t,e,i)=>{"use strict";i.d(e,{Z:()=>g});var n=i(1971),r=i(4662),s=i(9e3),o=i(1454),a=i(5696),l=i(8385),h=i(7533),c=i(9707),u=i(4687),d=i(3039);class p extends l.Z{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:f,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:r.Z,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const i=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==i?e:{});for(const n in this.tileCacheForProjection){const t=this.tileCacheForProjection[n];t.expireCache(t==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!(0,h.equivalent)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!(0,h.equivalent)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,h.equivalent)(e,t)))return this.tileGrid;const i=(0,d.sq)(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=(0,u.X$)(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||(0,h.equivalent)(e,t))return this.tileCache;const i=(0,d.sq)(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new o.Z(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,e,i,r,s,o){const l=[t,e,i],h=this.getTileCoordForTileUrlFunction(l,s),c=h?this.tileUrlFunction(h,r,s):void 0,u=new this.tileClass(l,void 0!==c?a.Z.IDLE:a.Z.EMPTY,void 0!==c?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(n.Z.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,e,i,n,r){const o=this.getProjection();if(!o||!r||(0,h.equivalent)(o,r))return this.getTileInternal(t,e,i,n,o||r);const a=this.getTileCacheForProjection(r),l=[t,e,i];let u;const d=(0,c.km)(l);a.containsKey(d)&&(u=a.get(d));const p=this.getKey();if(u&&u.key==p)return u;const f=this.getTileGridForProjection(o),g=this.getTileGridForProjection(r),m=this.getTileCoordForTileUrlFunction(l,r),_=new s.Z(o,f,r,g,l,m,this.getTilePixelRatio(n),this.getGutter(),((t,e,i,n)=>this.getTileInternal(t,e,i,n,o)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return _.key=p,u?(_.interimTile=u,_.refreshInterimChain(),a.replace(d,_)):a.set(d,_),_}getTileInternal(t,e,i,n,r){let s=null;const o=(0,c.lg)(t,e,i),l=this.getKey();if(this.tileCache.containsKey(o)){if(s=this.tileCache.get(o),s.key!=l){const h=s;s=this.createTile_(t,e,i,n,r,l),h.getState()==a.Z.IDLE?s.interimTile=h.interimTile:s.interimTile=h,s.refreshInterimChain(),this.tileCache.replace(o,s)}}else s=this.createTile_(t,e,i,n,r,l),this.tileCache.set(o,s);return s}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const i=(0,h.get)(t);if(i){const t=(0,d.sq)(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function f(t,e){t.getImage().src=e}const g=p},9835:(t,e,i)=>{"use strict";i.d(e,{Z:()=>u});var n=i(6886),r=i(8300),s=i(9141),o=i(6671),a=i(4687),l=i(7533),h=i(2782);class c extends n.Z{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:(0,l.get)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)(0,h.R6)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.handleTileJSONResponse(t.tileJSON):(0,s.h)(!1,51)}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch(i){return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const e=(0,l.get)("EPSG:4326"),i=this.getProjection();let n;if(void 0!==t.bounds){const s=(0,l.getTransformFromProjections)(e,i);n=(0,r.Ne)(t.bounds,s)}const s=(0,a.Tl)(i),h=t.minzoom||0,c=t.maxzoom||22,u=(0,a.dl)({extent:s,maxZoom:c,minZoom:h,tileSize:this.tileSize_});if(this.tileGrid=u,this.tileUrlFunction=(0,o.uR)(t.tiles,u),t.attribution&&!this.getAttributions()){const e=void 0!==n?n:s;this.setAttributions((function(i){return(0,r.kK)(e,i.extent)?[t.attribution]:null}))}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const u=c},8385:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(1618),r=i(2984),s=i(5696),o=i(6671),a=i(9707),l=i(3039);class h extends r.Z{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===h.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=(0,l.sq)(e),o=e.getState();let a;o==s.Z.LOADING?(this.tileLoadingKeys_[i]=!0,a=n.Z.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],a=o==s.Z.ERROR?n.Z.TILELOADERROR:o==s.Z.LOADED?n.Z.TILELOADEND:void 0),null!=a&&this.dispatchEvent(new r.s(a,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=(0,o.Gk)(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,o.uR)(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){const n=(0,a.lg)(t,e,i);this.tileCache.containsKey(n)&&this.tileCache.get(n)}}const c=h},6098:(t,e,i)=>{"use strict";i.r(e),i.d(e,{VectorSourceEvent:()=>x,default:()=>E});var n=i(390),r=i(2207),s=i(8685),o=i(1971),a=i(9153),l=i(7847),h=i(112),c=i(9449),u=i(3556),d=i(7343),p=i(9141),f=i(8300),g=i(7794),m=i(3039),_=i(3878),y=i(9640),v=i(5275);class x extends s.ZP{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class b extends h.Z{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=u.Zn,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,p.h)(this.format_,7),this.loader_=(0,v.Be)(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:d.$6;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let i,r;this.featuresRtree_=e?new l.Z:null,this.loadedExtentsRtree_=new l.Z,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?r=t.features:t.features&&(i=t.features,r=i.getArray()),e||void 0!==i||(i=new n.Z(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==i&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,m.sq)(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new x(c.Z.ADDFEATURE,t))}setupChangeEvents_(t,e){this.featureChangeKeys_[t]=[(0,y.oL)(e,o.Z.CHANGE,this.handleFeatureChange_,this),(0,y.oL)(e,a.Z.PROPERTYCHANGE,this.handleFeatureChange_,this)]}addToIndex_(t,e){let i=!0;const n=e.getId();return void 0!==n&&(n.toString()in this.idIndex_?i=!1:this.idIndex_[n.toString()]=e),i&&((0,p.h)(!(t in this.uidIndex_),30),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],n=[];for(let r=0,s=t.length;r<s;r++){const e=t[r],n=(0,m.sq)(e);this.addToIndex_(n,e)&&i.push(e)}for(let r=0,s=i.length;r<s;r++){const t=i[r],s=(0,m.sq)(t);this.setupChangeEvents_(s,t);const o=t.getGeometry();if(o){const i=o.getExtent();e.push(i),n.push(t)}else this.nullGeometryFeatures_[s]=t}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(c.Z.ADDFEATURE))for(let r=0,s=i.length;r<s;r++)this.dispatchEvent(new x(c.Z.ADDFEATURE,i[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(c.Z.ADDFEATURE,(function(i){e||(e=!0,t.push(i.feature),e=!1)})),this.addEventListener(c.Z.REMOVEFEATURE,(function(i){e||(e=!0,t.remove(i.feature),e=!1)})),t.addEventListener(r.Z.ADD,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(r.Z.REMOVE,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(y.bN)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)};this.featuresRtree_.forEach(t);for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new x(c.Z.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,(function(i){if(i.getGeometry().intersectsCoordinate(t))return e(i)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(i){if(i.getGeometry().intersectsExtent(t)){const t=e(i);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,_.x)(this.nullGeometryFeatures_)||(0,g.l7)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const i=(0,f.MV)(t,e);return[].concat(...i.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],n=t[1];let r=null;const s=[NaN,NaN];let o=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||u.uX,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=o;if(o=e.closestPointXY(i,n,s,o),o<l){r=t;const e=Math.sqrt(o);a[0]=i-e,a[1]=n-e,a[2]=i+e,a[3]=n+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=(0,m.sq)(e),n=e.getGeometry();if(n){const t=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new x(c.Z.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:(0,m.sq)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,_.x)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){const n=this.loadedExtentsRtree_,r=this.strategy_(t,e,i);for(let s=0,o=r.length;s<o;++s){const t=r[s];n.forEachInExtent(t,(function(e){return(0,f.r4)(e.extent,t)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new x(c.Z.FEATURESLOADSTART)),this.loader_.call(this,t,e,i,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new x(c.Z.FEATURESLOADEND,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new x(c.Z.FEATURESLOADERROR))})),n.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let i;e.forEachInExtent(t,(function(e){if((0,f.fS)(e.extent,t))return i=e,!0})),i&&e.remove(i)}removeFeature(t){if(!t)return;const e=(0,m.sq)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=(0,m.sq)(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(y.bN),delete this.featureChangeKeys_[e];const n=t.getId();return void 0!==n&&delete this.idIndex_[n.toString()],delete this.uidIndex_[e],this.dispatchEvent(new x(c.Z.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const i in this.idIndex_)if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}return e}setLoader(t){this.loader_=t}setUrl(t){(0,p.h)(this.format_,7),this.url_=t,this.setLoader((0,v.Be)(t,this.format_))}}const E=b},9449:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const n={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},6908:(t,e,i)=>{"use strict";i.d(e,{Z:()=>C,I:()=>S});var n=i(1971),r=i(2779),s=i(5696);class o extends r.Z{constructor(t,e,i,n,r,s){super(t,e,s),this.extent=null,this.format_=n,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=r,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==s.Z.IDLE&&(this.setState(s.Z.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(s.Z.ERROR)}setFeatures(t){this.features_=t,this.setState(s.Z.LOADED)}setLoader(t){this.loader_=t}}const a=o;var l=i(1454),h=i(4458),c=i(8385),u=i(3248),d=i(3039);const p=[];class f extends r.Z{constructor(t,e,i,n){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=n.bind(void 0,this),this.wrappedTileCoord=i}getContext(t){const e=(0,d.sq)(t);return e in this.context_||(this.context_[e]=(0,u.E4)(1,1,p)),this.context_[e]}hasContext(t){return(0,d.sq)(t)in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){const e=(0,d.sq)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(const t in this.context_){const e=this.context_[t];(0,u.jy)(e),p.push(e.canvas),delete this.context_[t]}super.release()}}const g=f;var m=i(4840),_=i(8300),y=i(4687),v=i(9707),x=i(3878),b=i(5275),E=i(7273);class w extends c.Z{constructor(t){const e=t.projection||"EPSG:3857",i=t.extent||(0,y.Tl)(e),n=t.tileGrid||(0,y.dl)({extent:i,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:e,state:t.state,tileGrid:n,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:S,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}),this.format_=t.format?t.format:null,this.sourceTileCache=new l.Z(this.tileCache.highWaterMark),this.overlaps_=null==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:a,this.tileGrids_={}}getFeaturesInExtent(t){const e=[],i=this.tileCache;if(0===i.getCount())return e;const n=(0,v.Ul)(i.peekFirstKey())[0],r=this.tileGrid;return i.forEach((function(i){if(i.tileCoord[0]!==n||i.getState()!==s.Z.LOADED)return;const o=i.getSourceTiles();for(let n=0,s=o.length;n<s;++n){const i=o[n],s=i.tileCoord;if((0,_.kK)(t,r.getTileCoordExtent(s))){const n=i.getFeatures();if(n)for(let i=0,r=n.length;i<r;++i){const r=n[i],s=r.getGeometry();(0,_.kK)(t,s.getExtent())&&e.push(r)}}}})),e}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(t,e){const i=this.getTileCacheForProjection(t),n=Object.keys(e).reduce(((t,e)=>{const n=(0,v.MY)(e),r=i.peek(n);if(r){const e=r.sourceTiles;for(let i=0,n=e.length;i<n;++i)t[e[i].getKey()]=!0}return t}),{});super.expireCache(t,e),this.sourceTileCache.expireCache(n)}getSourceTiles(t,e,i){if(i.getState()===s.Z.IDLE){i.setState(s.Z.LOADING);const r=i.wrappedTileCoord,o=this.getTileGridForProjection(e),a=o.getTileCoordExtent(r),l=r[0],h=o.getResolution(l);(0,_.f3)(a,-h,a);const c=this.tileGrid,u=c.getExtent();u&&(0,_.Ed)(a,u,a);const d=c.getZForResolution(h,this.zDirection);c.forEachTileCoord(a,d,(r=>{const o=this.tileUrlFunction(r,t,e),a=this.sourceTileCache.containsKey(o)?this.sourceTileCache.get(o):new this.tileClass(r,o?s.Z.IDLE:s.Z.EMPTY,o,this.format_,this.tileLoadFunction);i.sourceTiles.push(a);const l=a.getState();if(l<s.Z.LOADED){const t=e=>{this.handleTileChange(e);const r=a.getState();if(r===s.Z.LOADED||r===s.Z.ERROR){const e=a.getKey();e in i.errorTileKeys?a.getState()===s.Z.LOADED&&delete i.errorTileKeys[e]:i.loadingSourceTiles--,r===s.Z.ERROR?i.errorTileKeys[e]=!0:a.removeEventListener(n.Z.CHANGE,t),0===i.loadingSourceTiles&&i.setState((0,x.x)(i.errorTileKeys)?s.Z.LOADED:s.Z.ERROR)}};a.addEventListener(n.Z.CHANGE,t),i.loadingSourceTiles++}l===s.Z.IDLE&&(a.extent=c.getTileCoordExtent(r),a.projection=e,a.resolution=c.getResolution(r[0]),this.sourceTileCache.set(o,a),a.load())})),i.loadingSourceTiles||i.setState(i.sourceTiles.some((t=>t.getState()===s.Z.ERROR))?s.Z.ERROR:s.Z.LOADED)}return i.sourceTiles}getTile(t,e,i,n,r){const o=(0,v.lg)(t,e,i),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const h=[t,e,i];let c=this.getTileCoordForTileUrlFunction(h,r);const u=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(r);if(c&&u){const e=d.getTileCoordExtent(c);(0,_.f3)(e,-d.getResolution(t),e),(0,_.kK)(u,e)||(c=null)}let p=!0;if(null!==c){const e=this.tileGrid,i=d.getResolution(t),s=e.getZForResolution(i,1),o=d.getTileCoordExtent(c);(0,_.f3)(o,-i,o),e.forEachTileCoord(o,s,(t=>{p=p&&!this.tileUrlFunction(t,n,r)}))}const f=new g(h,p?s.Z.EMPTY:s.Z.IDLE,c,this.getSourceTiles.bind(this,n,r));return f.key=a,l?(f.interimTile=l,f.refreshInterimChain(),this.tileCache.replace(o,f)):this.tileCache.set(o,f),f}getTileGridForProjection(t){const e=t.getCode();let i=this.tileGrids_[e];if(!i){const t=this.tileGrid,n=t.getResolutions().slice(),r=n.map((function(e,i){return t.getOrigin(i)})),s=n.map((function(e,i){return t.getTileSize(i)})),o=m.e+1;for(let e=n.length;e<o;++e)n.push(n[e-1]/2),r.push(r[e-1]),s.push(s[e-1]);i=new h.Z({extent:t.getExtent(),origins:r,resolutions:n,tileSizes:s}),this.tileGrids_[e]=i}return i}getTilePixelRatio(t){return t}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),r=(0,E.Pq)(n.getTileSize(t),this.tmpSize);return[Math.round(r[0]*e),Math.round(r[1]*e)]}updateCacheSize(t,e){super.updateCacheSize(2*t,e),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark}}const C=w;function S(t,e){t.setLoader((function(i,n,r){(0,b.ov)(e,t.getFormat(),i,n,r,t.onLoad.bind(t),t.onError.bind(t))}))}},7365:(t,e,i)=>{"use strict";function n(t,e,i){const n=void 0!==i?t.toFixed(i):""+t;let r=n.indexOf(".");return r=-1===r?n.length:r,r>e?n:new Array(1+e-r).join("0")+n}function r(t,e){const i=(""+t).split("."),n=(""+e).split(".");for(let r=0;r<Math.max(i.length,n.length);r++){const t=parseInt(i[r]||"0",10),e=parseInt(n[r]||"0",10);if(t>e)return 1;if(e>t)return-1}return 0}i.d(e,{n:()=>r,v:()=>n})},4600:(t,e,i)=>{"use strict";i.d(e,{Z:()=>r});var n=i(9141);const r=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return(0,n.h)(void 0!==i,15),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return(0,n.h)(void 0!==e,15),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,i=0;for(e=this.newest_;e;e=e.older)t[i++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){if(this.containsKey(t))return this.entries_[t].value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,n.h)(!(t in this.entries_),16);const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}},7847:(t,e,i)=>{"use strict";i.d(e,{Z:()=>a});var n=i(8085),r=i(8300),s=i(3039),o=i(3878);const a=class{constructor(t){this.rbush_=new n(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,s.sq)(e)]=i}load(t,e){const i=new Array(e.length);for(let n=0,r=e.length;n<r;n++){const r=t[n],o=e[n],a={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:o};i[n]=a,this.items_[(0,s.sq)(o)]=a}this.rbush_.load(i)}remove(t){const e=(0,s.sq)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){const i=this.items_[(0,s.sq)(e)],n=[i.minX,i.minY,i.maxX,i.maxY];(0,r.fS)(n,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let n=0,r=t.length;n<r;n++)if(i=e(t[n]),i)return i;return i}isEmpty(){return(0,o.x)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return(0,r.T9)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}},921:(t,e,i)=>{"use strict";i.r(e),i.d(e,{Circle:()=>n.Z,Fill:()=>r.default,Icon:()=>s.default,IconImage:()=>o.Z,Image:()=>a.Z,RegularShape:()=>l.Z,Stroke:()=>h.default,Style:()=>c.default,Text:()=>u.default});var n=i(213),r=i(1082),s=i(7707),o=i(260),a=i(4772),l=i(3412),h=i(3260),c=i(1359),u=i(4669)},213:(t,e,i)=>{"use strict";i.d(e,{Z:()=>s});var n=i(3412);class r extends n.Z{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}const s=r},1082:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});class n{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){const t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}const r=n},7707:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>d});var n=i(1971),r=i(8089),s=i(4772),o=i(3139),a=i(9141),l=i(260),h=i(3039);function c(t,e,i,n){return void 0!==i&&void 0!==n?[i/t,n/e]:void 0!==i?i/t:void 0!==n?n/e:1}class u extends s.Z{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,i=void 0!==t.rotation?t.rotation:0,n=void 0!==t.scale?t.scale:1,s=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:i,scale:n,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const u=void 0!==t.img?t.img:null;this.imgSize_=t.imgSize;let d=t.src;(0,a.h)(!(void 0!==d&&u),4),(0,a.h)(!u||u&&this.imgSize_,5),void 0!==d&&0!==d.length||!u||(d=u.src||(0,h.sq)(u)),(0,a.h)(void 0!==d&&d.length>0,6),(0,a.h)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),69);const p=void 0!==t.src?r.Z.IDLE:r.Z.LOADED;if(this.color_=void 0!==t.color?(0,o._2)(t.color):null,this.iconImage_=(0,l.U)(u,d,void 0!==this.imgSize_?this.imgSize_:null,this.crossOrigin_,p,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,i;if(t.size)[e,i]=t.size;else{const n=this.getImage(1);if(!(n instanceof HTMLCanvasElement||n.src&&n.complete)){this.initialOptions_=t;const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;const i=this.iconImage_.getSize();this.setScale(c(i[0],i[1],t.width,t.height))};return void this.listenImageChange(e)}e=n.width,i=n.height}void 0!==e&&this.setScale(c(e,i,t.width,t.height))}}clone(){let t,e,i;this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t);return new u({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,imgSize:this.imgSize_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=i[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==r.Z.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==r.Z.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(n.Z.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(n.Z.CHANGE,t)}}const d=u},260:(t,e,i)=>{"use strict";i.d(e,{U:()=>d,Z:()=>p});var n=i(1135),r=i(1971),s=i(8089),o=i(3139),a=i(3248),l=i(8845),h=i(560);let c=null;class u extends n.Z{constructor(t,e,i,n,r,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.unlisten_=null,this.imageState_=r,this.size_=i,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===s.Z.LOADED){c||(c=(0,a.E4)(1,1,void 0,{willReadFrequently:!0})),c.drawImage(this.image_,0,0);try{c.getImageData(0,0,1,1),this.tainted_=!1}catch(t){c=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(r.Z.CHANGE)}handleImageError_(){this.imageState_=s.Z.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=s.Z.LOADED,this.size_?(this.image_.width=this.size_[0],this.image_.height=this.size_[1]):this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=(0,a.E4)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===s.Z.IDLE){this.image_||this.initializeImage_(),this.imageState_=s.Z.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=(0,h.K)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==s.Z.LOADED)return;const e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);const n=i.getContext("2d");n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=(0,o.XC)(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=i}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function d(t,e,i,n,r,s){let o=l.c.get(e,n,s);return o||(o=new u(t,e,i,n,r,s),l.c.set(e,n,s,o)),o}const p=u},8845:(t,e,i)=>{"use strict";i.d(e,{c:()=>o});var n=i(3139);class r{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];0!=(3&t++)||i.hasListener()||(delete this.cache_[e],--this.cacheSize_)}}}get(t,e,i){const n=s(t,e,i);return n in this.cache_?this.cache_[n]:null}set(t,e,i,n){const r=s(t,e,i);this.cache_[r]=n,++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function s(t,e,i){return e+":"+t+":"+(i?(0,n.XC)(i):"null")}const o=new r},4772:(t,e,i)=>{"use strict";i.d(e,{Z:()=>o});var n=i(3039),r=i(7273);class s{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,r.Pq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new s({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,n.O3)()}getImage(t){return(0,n.O3)()}getHitDetectionImage(){return(0,n.O3)()}getPixelRatio(t){return 1}getImageState(){return(0,n.O3)()}getImageSize(){return(0,n.O3)()}getOrigin(){return(0,n.O3)()}getSize(){return(0,n.O3)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.Pq)(t)}listenImageChange(t){(0,n.O3)()}load(){(0,n.O3)()}unlistenImageChange(t){(0,n.O3)()}}const o=s},3412:(t,e,i)=>{"use strict";i.d(e,{Z:()=>c});var n=i(8089),r=i(4772),s=i(3139),o=i(4975),a=i(3248),l=i(5318);class h extends r.Z{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvas_=void 0,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=void 0!==t.radius?t.radius:t.radius1,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_=null,this.renderOptions_=null,this.render()}clone(){const t=this.getScale(),e=new h({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_;if(!t)return null;const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||this.createHitDetectionCanvas_(this.renderOptions_),this.hitDetectionCanvas_}getImage(t){let e=this.canvas_[t];if(!e){const i=this.renderOptions_,n=(0,a.E4)(i.size*t,i.size*t);this.draw_(i,n,t),e=n.canvas,this.canvas_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return n.Z.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let n=this.radius_,r=void 0===this.radius2_?n:this.radius2_;if(n<r){const t=n;n=r,r=t}const s=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/s,a=r*Math.sin(o),l=n-Math.sqrt(r*r-a*a),h=Math.sqrt(a*a+l*l),c=h/a;if("miter"===t&&c<=i)return c*e;const u=e/2/c,d=e/2*(l/h),p=Math.sqrt((n+u)*(n+u)+d*d)-n;if(void 0===this.radius2_||"bevel"===t)return 2*p;const f=n*Math.sin(o),g=r-Math.sqrt(n*n-f*f),m=Math.sqrt(f*f+g*g)/f;if(m<=i){const t=m*e/2-r-n;return 2*Math.max(p,t)}return 2*p}createRenderOptions(){let t,e=l.rc,i=0,n=null,r=0,s=0;this.stroke_&&(t=this.stroke_.getColor(),null===t&&(t=l.Tx),t=(0,o.y)(t),s=this.stroke_.getWidth(),void 0===s&&(s=l.yC),n=this.stroke_.getLineDash(),r=this.stroke_.getLineDashOffset(),e=this.stroke_.getLineJoin(),void 0===e&&(e=l.rc),i=this.stroke_.getMiterLimit(),void 0===i&&(i=l.V4));const a=this.calculateLineJoinSize_(e,s,i),h=Math.max(this.radius_,this.radius2_||0);return{strokeStyle:t,strokeWidth:s,size:Math.ceil(2*h+a),lineDash:n,lineDashOffset:r,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvas_={},this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=l.bL),e.fillStyle=(0,o.y)(t),e.fill()}this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){if(this.fill_){let e=this.fill_.getColor(),i=0;if("string"==typeof e&&(e=(0,s._2)(e)),null===e?i=1:Array.isArray(e)&&(i=4===e.length?e[3]:1),0===i){const e=(0,a.E4)(t.size,t.size);this.hitDetectionCanvas_=e.canvas,this.drawHitDetectionCanvas_(t,e)}}this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.getImage(1))}createPath_(t){let e=this.points_;const i=this.radius_;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const n=void 0===this.radius2_?i:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let o=0;o<e;o++){const e=r+o*s,a=o%2==0?i:n;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=l.bL,e.fill(),this.stroke_&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}}const c=h},3260:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>r});class n{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}const r=n},1359:(t,e,i)=>{"use strict";i.r(e),i.d(e,{createDefaultStyle:()=>c,createEditingStyle:()=>u,default:()=>p,toFunction:()=>l});var n=i(213),r=i(1082),s=i(3260),o=i(9141);class a{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=d,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new a({geometry:t,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer(),stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=d,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function l(t){let e;if("function"==typeof t)e=t;else{let i;if(Array.isArray(t))i=t;else{(0,o.h)("function"==typeof t.getZIndex,41);i=[t]}e=function(){return i}}return e}let h=null;function c(t,e){if(!h){const t=new r.default({color:"rgba(255,255,255,0.4)"}),e=new s.default({color:"#3399CC",width:1.25});h=[new a({image:new n.Z({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return h}function u(){const t={},e=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new a({fill:new r.default({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new a({stroke:new s.default({color:e,width:5})}),new a({stroke:new s.default({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new a({image:new n.Z({radius:6,fill:new r.default({color:i}),stroke:new s.default({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function d(t){return t.getGeometry()}const p=a},4669:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>o});var n=i(1082),r=i(7273);class s{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,r.Pq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new n.default({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){const t=this.getScale();return new s({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,r.Pq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}const o=s},9707:(t,e,i)=>{"use strict";function n(t,e,i,n){return void 0!==n?(n[0]=t,n[1]=e,n[2]=i,n):[t,e,i]}function r(t,e,i){return t+"/"+e+"/"+i}function s(t){return r(t[0],t[1],t[2])}function o(t){const[e,i,n]=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return r(e,i,n)}function a(t){return t.split("/").map(Number)}function l(t){return(t[1]<<t[0])+t[2]}function h(t,e){const i=t[0],n=t[1],r=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;const s=e.getFullTileRange(i);return!s||s.containsXY(n,r)}i.d(e,{MY:()=>o,T9:()=>n,Ul:()=>a,km:()=>s,lg:()=>r,tE:()=>h,vp:()=>l})},4687:(t,e,i)=>{"use strict";i.d(e,{Cf:()=>h,Tl:()=>d,X$:()=>l,dl:()=>c});var n=i(4458),r=i(4840),s=i(7533),o=i(8300),a=i(7273);function l(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,i,r){const s=d(t);return function(t,e,i,r){r=void 0!==r?r:"top-left";const s=u(t,e,i);return new n.Z({extent:t,origin:(0,o.g0)(t,r),resolutions:s,tileSize:i})}(s,e,i,r)}(t),t.setDefaultTileGrid(e)),e}function h(t,e,i){const n=e[0],r=t.getTileCoordCenter(e),s=d(i);if(!(0,o.b8)(s,r)){const e=(0,o.dz)(s),i=Math.ceil((s[0]-r[0])/e);return r[0]+=e*i,t.getTileCoordForCoordAndZ(r,n)}return e}function c(t){const e=t||{},i=e.extent||(0,s.get)("EPSG:3857").getExtent(),r={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:u(i,e.maxZoom,e.tileSize,e.maxResolution)};return new n.Z(r)}function u(t,e,i,n){e=void 0!==e?e:r.e,i=(0,a.Pq)(void 0!==i?i:r.S);const s=(0,o.Cr)(t),l=(0,o.dz)(t);n=n>0?n:Math.max(l/i[0],s/i[1]);const h=e+1,c=new Array(h);for(let r=0;r<h;++r)c[r]=n/Math.pow(2,r);return c}function d(t){let e=(t=(0,s.get)(t)).getExtent();if(!e){const i=180*s.METERS_PER_UNIT.degrees/t.getMetersPerUnit();e=(0,o.T9)(-i,-i,i,i)}return e}},4458:(t,e,i)=>{"use strict";i.d(e,{Z:()=>p});var n=i(8899),r=i(4840),s=i(9141),o=i(4898),a=i(8300),l=i(9707),h=i(2688),c=i(7794),u=i(7273);const d=[0,0,0];const p=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,s.h)((0,c.pT)(this.resolutions_,(function(t,e){return e-t}),!0),17),!t.origins)for(let n=0,r=this.resolutions_.length-1;n<r;++n)if(e){if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}else e=this.resolutions_[n]/this.resolutions_[n+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,s.h)(this.origins_.length==this.resolutions_.length,20));const i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=(0,a.rL)(i)),(0,s.h)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,s.h)(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:r.S,(0,s.h)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((function(t,e){const r=new n.Z(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){const t=this.getTileRangeForExtentAndZ(i,e);r.minX=Math.max(t.minX,r.minX),r.maxX=Math.min(t.maxX,r.maxX),r.minY=Math.max(t.minY,r.minY),r.maxY=Math.min(t.maxY,r.maxY)}return r}),this):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e);for(let r=n.minX,s=n.maxX;r<=s;++r)for(let t=n.minY,o=n.maxY;t<=o;++t)i([e,r,t])}forEachTileCoordParentTileRange(t,e,i,r){let s,o,a,l=null,h=t[0]-1;for(2===this.zoomFactor_?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);h>=this.minZoom;){if(2===this.zoomFactor_?(o=Math.floor(o/2),a=Math.floor(a/2),s=(0,n.T)(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,h,i),e(h,s))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const i=2*t[1],r=2*t[2];return(0,n.T)(i,i+1,r,r+1,e)}const r=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(e===r)return(0,n.T)(s,o,s,o,i);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-r),a=Math.floor(s*t),l=Math.floor(o*t);if(e<r)return(0,n.T)(a,a,l,l,i);const h=Math.floor(t*(s+1))-1,c=Math.floor(t*(o+1))-1;return(0,n.T)(a,h,l,c,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,d);const r=d[1],s=d[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,d);const o=d[1],a=d[2];return(0,n.T)(r,o,s,a,i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=(0,u.Pq)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),r=(0,u.Pq)(this.getTileSize(t[0]),this.tmpSize_),s=i[0]+t[1]*r[0]*n,o=i[1]-(t[2]+1)*r[1]*n,l=s+r[0]*n,h=o+r[1]*n;return(0,a.T9)(s,o,l,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,r){const s=this.getZForResolution(i),a=i/this.getResolution(s),h=this.getOrigin(s),c=(0,u.Pq)(this.getTileSize(s),this.tmpSize_);let d=a*(t-h[0])/i/c[0],p=a*(h[1]-e)/i/c[1];return n?(d=(0,o.mD)(d,5)-1,p=(0,o.mD)(p,5)-1):(d=(0,o.GW)(d,5),p=(0,o.GW)(p,5)),(0,l.T9)(s,d,p,r)}getTileCoordForXYAndZ_(t,e,i,n,r){const s=this.getOrigin(i),a=this.getResolution(i),h=(0,u.Pq)(this.getTileSize(i),this.tmpSize_);let c=(t-s[0])/a/h[0],d=(s[1]-e)/a/h[1];return n?(c=(0,o.mD)(c,5)-1,d=(0,o.mD)(d,5)-1):(c=(0,o.GW)(c,5),d=(0,o.GW)(d,5)),(0,l.T9)(i,c,d,r)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=(0,c.h7)(this.resolutions_,t,e||0);return(0,o.uZ)(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,h.mV)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i}}},4840:(t,e,i)=>{"use strict";i.d(e,{S:()=>r,e:()=>n});const n=42,r=256},6671:(t,e,i)=>{"use strict";i.d(e,{Gk:()=>c,Un:()=>l,uR:()=>a,vU:()=>h});var n=i(9141),r=i(4898),s=i(9707);function o(t,e){const i=/\{z\}/g,r=/\{x\}/g,s=/\{y\}/g,o=/\{-y\}/g;return function(a,l,h){if(a)return t.replace(i,a[0].toString()).replace(r,a[1].toString()).replace(s,a[2].toString()).replace(o,(function(){const t=a[0],i=e.getFullTileRange(t);(0,n.h)(i,55);return(i.getHeight()-a[2]-1).toString()}))}}function a(t,e){const i=t.length,n=new Array(i);for(let r=0;r<i;++r)n[r]=o(t[r],e);return l(n)}function l(t){return 1===t.length?t[0]:function(e,i,n){if(!e)return;const o=(0,s.vp)(e),a=(0,r.$W)(o,t.length);return t[a](e,i,n)}}function h(t,e,i){}function c(t){const e=[];let i=/\{([a-z])-([a-z])\}/.exec(t);if(i){const n=i[1].charCodeAt(0),r=i[2].charCodeAt(0);let s;for(s=n;s<=r;++s)e.push(t.replace(i[0],String.fromCharCode(s)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t),i){const n=parseInt(i[2],10);for(let r=parseInt(i[1],10);r<=n;r++)e.push(t.replace(i[0],r.toString()));return e}return e.push(t),e}},5034:(t,e,i)=>{"use strict";i.d(e,{BB:()=>v,Iu:()=>g,Jp:()=>l,U1:()=>d,Ue:()=>o,bA:()=>p,lk:()=>c,mc:()=>a,n3:()=>f,nb:()=>_,nn:()=>u,qC:()=>m});var n=i(4465),r=i(9141);const s=new Array(6);function o(){return[1,0,0,1,0,0]}function a(t){return h(t,1,0,0,1,0,0)}function l(t,e){const i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=e[0],h=e[1],c=e[2],u=e[3],d=e[4],p=e[5];return t[0]=i*l+r*h,t[1]=n*l+s*h,t[2]=i*c+r*u,t[3]=n*c+s*u,t[4]=i*d+r*p+o,t[5]=n*d+s*p+a,t}function h(t,e,i,n,r,s,o){return t[0]=e,t[1]=i,t[2]=n,t[3]=r,t[4]=s,t[5]=o,t}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function u(t,e){const i=e[0],n=e[1];return e[0]=t[0]*i+t[2]*n+t[4],e[1]=t[1]*i+t[3]*n+t[5],e}function d(t,e){const i=Math.cos(e),n=Math.sin(e);return l(t,h(s,i,n,-n,i,0,0))}function p(t,e,i){return l(t,h(s,e,0,0,i,0,0))}function f(t,e,i){return h(t,e,0,0,i,0,0)}function g(t,e,i){return l(t,h(s,1,0,0,1,e,i))}function m(t,e,i,n,r,s,o,a){const l=Math.sin(s),h=Math.cos(s);return t[0]=n*h,t[1]=r*l,t[2]=-n*l,t[3]=r*h,t[4]=o*n*h-a*n*l+e,t[5]=o*r*l+a*r*h+i,t}function _(t,e){const i=(n=e)[0]*n[3]-n[1]*n[2];var n;(0,r.h)(0!==i,32);const s=e[0],o=e[1],a=e[2],l=e[3],h=e[4],c=e[5];return t[0]=l/i,t[1]=-o/i,t[2]=-a/i,t[3]=s/i,t[4]=(a*c-l*h)/i,t[5]=-(s*c-o*h)/i,t}let y;function v(t){const e="matrix("+t.join(", ")+")";if(n.Id)return e;const i=y||(y=document.createElement("div"));return i.style.transform=e,i.style.transform}},3039:(t,e,i)=>{"use strict";function n(){throw new Error("Unimplemented abstract method.")}i.d(e,{O3:()=>n,sq:()=>s});let r=0;function s(t){return t.ol_uid||(t.ol_uid=String(++r))}}}]);